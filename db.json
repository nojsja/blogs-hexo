{"meta":{"version":1,"warehouse":"3.0.2"},"models":{"Asset":[{"_id":"source/CNAME","path":"CNAME","modified":0,"renderable":0},{"_id":"source/robots.txt","path":"robots.txt","modified":0,"renderable":0},{"_id":"source/photography/photo/wx.jpeg","path":"photography/photo/wx.jpeg","modified":0,"renderable":0},{"_id":"source/img/avatar/nojsja.jpeg","path":"img/avatar/nojsja.jpeg","modified":0,"renderable":0},{"_id":"themes/snail/source/css/archive.styl","path":"css/archive.styl","modified":0,"renderable":1},{"_id":"themes/snail/source/css/dusign-common-dark.css","path":"css/dusign-common-dark.css","modified":0,"renderable":1},{"_id":"themes/snail/source/css/dusign-common-light.css","path":"css/dusign-common-light.css","modified":0,"renderable":1},{"_id":"themes/snail/source/css/dusign-dark.css","path":"css/dusign-dark.css","modified":0,"renderable":1},{"_id":"themes/snail/source/css/dusign-light.css","path":"css/dusign-light.css","modified":0,"renderable":1},{"_id":"themes/snail/source/css/font-awesome.css","path":"css/font-awesome.css","modified":0,"renderable":1},{"_id":"themes/snail/source/css/font-awesome.star.css","path":"css/font-awesome.star.css","modified":0,"renderable":1},{"_id":"themes/snail/source/css/fonts.googleapis.css","path":"css/fonts.googleapis.css","modified":0,"renderable":1},{"_id":"themes/snail/source/css/gitment.css","path":"css/gitment.css","modified":0,"renderable":1},{"_id":"themes/snail/source/css/highlight.styl","path":"css/highlight.styl","modified":0,"renderable":1},{"_id":"themes/snail/source/css/photography.css","path":"css/photography.css","modified":0,"renderable":1},{"_id":"themes/snail/source/css/rocket.styl","path":"css/rocket.styl","modified":0,"renderable":1},{"_id":"themes/snail/source/css/signature.styl","path":"css/signature.styl","modified":0,"renderable":1},{"_id":"themes/snail/source/css/toc.styl","path":"css/toc.styl","modified":0,"renderable":1},{"_id":"themes/snail/source/css/widget.styl","path":"css/widget.styl","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/glyphicons-halflings-regular.eot","path":"fonts/glyphicons-halflings-regular.eot","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/glyphicons-halflings-regular.woff","path":"fonts/glyphicons-halflings-regular.woff","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/glyphicons-halflings-regular.ttf","path":"fonts/glyphicons-halflings-regular.ttf","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/glyphicons-halflings-regular.woff2","path":"fonts/glyphicons-halflings-regular.woff2","modified":0,"renderable":1},{"_id":"themes/snail/source/img/cd.png","path":"img/cd.png","modified":0,"renderable":1},{"_id":"themes/snail/source/img/cd_tou.png","path":"img/cd_tou.png","modified":0,"renderable":1},{"_id":"themes/snail/source/img/default.jpg","path":"img/default.jpg","modified":0,"renderable":1},{"_id":"themes/snail/source/img/notice.png","path":"img/notice.png","modified":0,"renderable":1},{"_id":"themes/snail/source/img/top-light.png","path":"img/top-light.png","modified":0,"renderable":1},{"_id":"themes/snail/source/img/tp.png","path":"img/tp.png","modified":0,"renderable":1},{"_id":"themes/snail/source/img/wave-dark.png","path":"img/wave-dark.png","modified":0,"renderable":1},{"_id":"themes/snail/source/img/wave-light.png","path":"img/wave-light.png","modified":0,"renderable":1},{"_id":"themes/snail/source/js/canvas-nest.js","path":"js/canvas-nest.js","modified":0,"renderable":1},{"_id":"themes/snail/source/js/bootstrap.min.js","path":"js/bootstrap.min.js","modified":0,"renderable":1},{"_id":"themes/snail/source/js/hux-blog.js","path":"js/hux-blog.js","modified":0,"renderable":1},{"_id":"themes/snail/source/js/hux-blog.min.js","path":"js/hux-blog.min.js","modified":0,"renderable":1},{"_id":"themes/snail/source/js/jquery.nav.js","path":"js/jquery.nav.js","modified":0,"renderable":1},{"_id":"themes/snail/source/js/jquery.tagcloud.js","path":"js/jquery.tagcloud.js","modified":0,"renderable":1},{"_id":"themes/snail/source/js/line.js","path":"js/line.js","modified":0,"renderable":1},{"_id":"themes/snail/source/js/mouse-click.js","path":"js/mouse-click.js","modified":0,"renderable":1},{"_id":"themes/snail/source/js/ribbonDynamic.js","path":"js/ribbonDynamic.js","modified":0,"renderable":1},{"_id":"themes/snail/source/js/ribbonStatic.js","path":"js/ribbonStatic.js","modified":0,"renderable":1},{"_id":"themes/snail/source/js/search.js","path":"js/search.js","modified":0,"renderable":1},{"_id":"themes/snail/source/js/toc.js","path":"js/toc.js","modified":0,"renderable":1},{"_id":"themes/snail/source/js/totop.js","path":"js/totop.js","modified":0,"renderable":1},{"_id":"source/img/header_img/about.jpg","path":"img/header_img/about.jpg","modified":0,"renderable":0},{"_id":"themes/snail/source/css/bootstrap.min.css","path":"css/bootstrap.min.css","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/fontawesome-webfont.woff","path":"fonts/fontawesome-webfont.woff","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/fontawesome-webfont.woff2","path":"fonts/fontawesome-webfont.woff2","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/glyphicons-halflings-regular.svg","path":"fonts/glyphicons-halflings-regular.svg","modified":0,"renderable":1},{"_id":"themes/snail/source/js/bootstrap.js","path":"js/bootstrap.js","modified":0,"renderable":1},{"_id":"themes/snail/source/js/jquery.min.js","path":"js/jquery.min.js","modified":0,"renderable":1},{"_id":"source/img/header_img/archive.jpg","path":"img/header_img/archive.jpg","modified":0,"renderable":0},{"_id":"source/img/header_img/archives-widget.jpg","path":"img/header_img/archives-widget.jpg","modified":0,"renderable":0},{"_id":"source/img/signature/BeanTechSign-white.png","path":"img/signature/BeanTechSign-white.png","modified":0,"renderable":0},{"_id":"themes/snail/source/css/bootstrap.css","path":"css/bootstrap.css","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/fontawesome-webfont.ttf","path":"fonts/fontawesome-webfont.ttf","modified":0,"renderable":1},{"_id":"themes/snail/source/css/images/ironman.png","path":"css/images/ironman.png","modified":0,"renderable":1},{"_id":"themes/snail/source/css/images/rocket.png","path":"css/images/rocket.png","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3g3D_vx3rCubqg.woff2","path":"fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3g3D_vx3rCubqg.woff2","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gTD_vx3rCubqg.woff2","path":"fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gTD_vx3rCubqg.woff2","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gbD_vx3rCubqg.woff2","path":"fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gbD_vx3rCubqg.woff2","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gfD_vx3rCubqg.woff2","path":"fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gfD_vx3rCubqg.woff2","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gnD_vx3rCs.woff2","path":"fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gnD_vx3rCs.woff2","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/googleapis/JTUSjIg1_i6t8kCHKm459W1hyyTh89ZNpQ.woff2","path":"fonts/googleapis/JTUSjIg1_i6t8kCHKm459W1hyyTh89ZNpQ.woff2","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/googleapis/JTUSjIg1_i6t8kCHKm459WRhyyTh89ZNpQ.woff2","path":"fonts/googleapis/JTUSjIg1_i6t8kCHKm459WRhyyTh89ZNpQ.woff2","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/googleapis/JTUSjIg1_i6t8kCHKm459WZhyyTh89ZNpQ.woff2","path":"fonts/googleapis/JTUSjIg1_i6t8kCHKm459WZhyyTh89ZNpQ.woff2","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/googleapis/JTUSjIg1_i6t8kCHKm459WdhyyTh89ZNpQ.woff2","path":"fonts/googleapis/JTUSjIg1_i6t8kCHKm459WdhyyTh89ZNpQ.woff2","modified":0,"renderable":1},{"_id":"themes/snail/source/fonts/googleapis/JTUSjIg1_i6t8kCHKm459WlhyyTh89Y.woff2","path":"fonts/googleapis/JTUSjIg1_i6t8kCHKm459WlhyyTh89Y.woff2","modified":0,"renderable":1},{"_id":"themes/snail/source/js/jquery.js","path":"js/jquery.js","modified":0,"renderable":1},{"_id":"source/img/header_img/home.jpg","path":"img/header_img/home.jpg","modified":0,"renderable":0},{"_id":"source/img/signature/BeanTechSign-black.png","path":"img/signature/BeanTechSign-black.png","modified":0,"renderable":0},{"_id":"source/img/article_header/article_bg.jpg","path":"img/article_header/article_bg.jpg","modified":0,"renderable":0},{"_id":"source/img/avatar/ironman.png","path":"img/avatar/ironman.png","modified":0,"renderable":0},{"_id":"source/img/header_img/tag.png","path":"img/header_img/tag.png","modified":0,"renderable":0},{"_id":"themes/snail/source/fonts/fontawesome-webfont.svg","path":"fonts/fontawesome-webfont.svg","modified":0,"renderable":1},{"_id":"source/img/header_img/home3.jpg","path":"img/header_img/home3.jpg","modified":0,"renderable":0},{"_id":"source/img/article_header/article_header.png","path":"img/article_header/article_header.png","modified":0,"renderable":0},{"_id":"source/img/header_img/home-bg-o.png","path":"img/header_img/home-bg-o.png","modified":0,"renderable":0},{"_id":"source/img/header_img/404.png","path":"img/header_img/404.png","modified":0,"renderable":0},{"_id":"source/img/header_img/home2.png","path":"img/header_img/home2.png","modified":0,"renderable":0},{"_id":"source/img/tp.png","path":"img/tp.png","modified":0,"renderable":0},{"_id":"source/img/header_img/photography-bg.jpeg","path":"img/header_img/photography-bg.jpeg","modified":0,"renderable":0},{"_id":"source/img/wave-light.png","path":"img/wave-light.png","modified":0,"renderable":0},{"_id":"source/img/header_img/tag-bg.jpg","path":"img/header_img/tag-bg.jpg","modified":0,"renderable":0},{"_id":"source/img/header_img/archive-bg.jpg","path":"img/header_img/archive-bg.jpg","modified":0,"renderable":0},{"_id":"source/img/header_img/categories-bg.jpg","path":"img/header_img/categories-bg.jpg","modified":0,"renderable":0},{"_id":"source/img/cd.png","path":"img/cd.png","modified":0,"renderable":0},{"_id":"source/img/cd_tou.png","path":"img/cd_tou.png","modified":0,"renderable":0},{"_id":"source/img/default.jpg","path":"img/default.jpg","modified":0,"renderable":0},{"_id":"source/img/notice.png","path":"img/notice.png","modified":0,"renderable":0},{"_id":"source/img/top-light.png","path":"img/top-light.png","modified":0,"renderable":0},{"_id":"source/img/wave-dark.png","path":"img/wave-dark.png","modified":0,"renderable":0},{"_id":"source/img/header_img/tinified.zip","path":"img/header_img/tinified.zip","modified":0,"renderable":0},{"_id":"themes/snail/source/js/Valine.min.js","path":"js/Valine.min.js","modified":0,"renderable":1},{"_id":"themes/snail/source/js/MathJax.js","path":"js/MathJax.js","modified":0,"renderable":1},{"_id":"themes/snail/source/js/buttons.js","path":"js/buttons.js","modified":0,"renderable":1},{"_id":"themes/snail/source/js/busuanzi.pure.mini.js","path":"js/busuanzi.pure.mini.js","modified":0,"renderable":1},{"_id":"themes/snail/source/css/font-awesome.min.css","path":"css/font-awesome.min.css","modified":0,"renderable":1}],"Cache":[{"_id":"source/.DS_Store","hash":"690fed92322a4e9bf00266b0d7af4e0a6066031e","modified":1591842120651},{"_id":"source/404.md","hash":"83c2c6d587beaa967a976e5969d60fa97fcdbe55","modified":1591842120651},{"_id":"source/CNAME","hash":"55d5b0b4757a7d65ee4966dd161f394d06d257b7","modified":1591842120651},{"_id":"source/robots.txt","hash":"a501cb86e0537a749c344cb413bace53b49b147c","modified":1591842120755},{"_id":"source/.vscode/settings.json","hash":"2978e14530291b98156c1a339a673c6ebb7c8a76","modified":1591842120651},{"_id":"source/_posts/.DS_Store","hash":"a04ebe66fb85ce923d4ac52d351b7da0babaa3bd","modified":1591842120651},{"_id":"source/_posts/.Ulysses-Group.plist","hash":"e2318240f9a732bf99f74e24b5e7ea5999e6d694","modified":1591842120651},{"_id":"source/_posts/.Ulysses-favorites.plist","hash":"6d4538be93ccf0de1ae3c62bc2c35b399a1f96eb","modified":1591842120651},{"_id":"source/_posts/2019-11-01-Hexo-Theme-Snail.md","hash":"f7762502792d2b4c3d267d7b69383b84857ae467","modified":1591842120651},{"_id":"source/about/index.md","hash":"cb6a648e31b477145409981f518b1e64479c6d25","modified":1597996704727},{"_id":"source/archive/index.md","hash":"d63d51339384b2e5c6dd3a15cdc2ebacb941534c","modified":1591842120663},{"_id":"source/categories/index.md","hash":"21d19b60e8ff657b5073559a3999827f984be754","modified":1591842120663},{"_id":"source/photography/.DS_Store","hash":"c32d51d0256164cf945e248f1d562d88ebf08b44","modified":1591842120715},{"_id":"source/photography/index.md","hash":"3dcc41fb8239608be000f3c3eb65256dd0cf7376","modified":1591854942303},{"_id":"source/img/.DS_Store","hash":"c8eb7d4770d557f07789af0d7d33bebba448f5a8","modified":1591842120663},{"_id":"source/img/ironman-draw.png","hash":"bf6b382fe359ae325b72c485c1eb73ee024b4dc1","modified":1591842120715},{"_id":"source/tags/index.md","hash":"f43ff71cb3947205af39adf07e182f4b70fdde33","modified":1591842120755},{"_id":"source/_posts/.vscode/settings.json","hash":"2978e14530291b98156c1a339a673c6ebb7c8a76","modified":1591842120651},{"_id":"source/_posts/2019-11-01-Hexo-Theme-Snail/.DS_Store","hash":"6418817d2a63f0fdf6742804966dcf7c8929b803","modified":1591842120651},{"_id":"source/photography/photo/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1591842120715},{"_id":"source/img/404-bg.jpg","hash":"dded479a06d5165d1f87c63677442aecdf1ac748","modified":1591842120663},{"_id":"source/img/header_img/.DS_Store","hash":"df2fbeb1400acda0909a32c1cf6bf492f1121e07","modified":1591842120667},{"_id":"source/img/signature/.DS_Store","hash":"5d4742a3eec02334dd2df5ab57fea2a143933757","modified":1591842120715},{"_id":"source/img/signature/Just-do-it-white.png","hash":"c66314974b30c23ae9da2f7e57ca1ead65f00e28","modified":1591842120715},{"_id":"source/img/signature/dusign.png","hash":"cbfb2ac6910c0ad4263f300afcdaf13060257976","modified":1591842120715},{"_id":"source/img/default.jpg","hash":"22910d296bc4d2a687e1d2c3583d984d77ff119b","modified":1591855279388},{"_id":"source/img/header_img/categories-bg.jpg","hash":"aa83bedb9e15aa971fbf7951e9924397c4a22f54","modified":1591831354000},{"_id":"source/photography/photo/yc.jpeg","hash":"89f97217bbe2cb01429fcbf3699349446c16c971","modified":1591842120739},{"_id":"source/_posts/2019-11-01-Hexo-Theme-Snail/snail-bg.jpg","hash":"91b8cdf0418c78dc45fd736c5185f96c8c4817ae","modified":1591842120655},{"_id":"source/photography/photo/wx.jpeg","hash":"2ce216e2bf8f652b16a340486f6177ba9c8b951f","modified":1591842120739},{"_id":"source/img/header_img/tag-bg.jpg","hash":"abc6dd1036b1abb9f040e7fcabeb5fecca63f59f","modified":1591842120715},{"_id":"source/photography/photo/yjyj3.jpeg","hash":"ecdee68745d94231d4dd8c1bade75e8cb62092fc","modified":1591842120751},{"_id":"source/photography/photo/yjyj2.jpeg","hash":"a2d79feac358d68c8e9b2dd96afd69f7ba31bb7b","modified":1591842120747},{"_id":"source/img/header_img/photography-bg.jpeg","hash":"bf09062486ed9ffb7af99649cf465a5de38f5f26","modified":1591860258527},{"_id":"source/photography/photo/dfmz.jpeg","hash":"e1bbfe0c2ecba12c936ba31066b92fafcd934bca","modified":1591842120723},{"_id":"source/photography/photo/yjyj1.jpeg","hash":"17e1c0b8b3732130c011b216a0569a52ddd78f4b","modified":1591842120743},{"_id":"source/photography/photo/ly.jpeg","hash":"ae4d91d457ee3d4930335655d85e12055842b684","modified":1591842120735},{"_id":"source/img/header_img/home-bg-1-dark.jpg","hash":"73afc05be88af73c70f3e736a057169b3c08ef31","modified":1591842120711},{"_id":"source/photography/photo/lsqs.jpeg","hash":"60e16189fc372bafcd1c1b3ff5938e65cda084a0","modified":1591842120731},{"_id":"source/img/header_img/archive-bg.jpg","hash":"ede78596f2b62e73d7d92118851d6a92e6de2450","modified":1591860278820},{"_id":"source/img/header_img/Iron-Man-3.jpg","hash":"157de39599633984edaf15dd6ece681e7e55dd65","modified":1591842120687},{"_id":"source/_posts/2019-11-01-Hexo-Theme-Snail/snail.png","hash":"9741ada00e6f5684efce9649c0631590f5ffe4a2","modified":1591842120663},{"_id":"public/baidusitemap.xml","hash":"a8a6103efe05079547fd7428a17966b1ac93ecff","modified":1603350769438},{"_id":"public/search.xml","hash":"2e64ed8f5c27087efc6586ef892c75cf03ac1fc9","modified":1603351183313},{"_id":"public/sitemap.xml","hash":"09444f1cffb910e908bc0c298932576e654c08d9","modified":1603351183313},{"_id":"public/404.html","hash":"762ddce5f3e4109e6b4434ee7883222f8bfcc36c","modified":1598597492854},{"_id":"public/about/index.html","hash":"9495dfdc8489567dbc979afa8cbd70a6d8ebce19","modified":1601004624321},{"_id":"public/archive/index.html","hash":"6fe09d64e2e43bc405869f3627964024a0993e8d","modified":1601004624321},{"_id":"public/categories/index.html","hash":"958793c4eeb9ff068bcf2d67582814511df1e255","modified":1601004624321},{"_id":"public/photography/index.html","hash":"e1b6278029aa49f047fae8faaf45bd82f2f3d63a","modified":1598597492854},{"_id":"public/tags/index.html","hash":"b3bd0e4cc6ebc34cce1161770753d336cd8e8d34","modified":1601004624321},{"_id":"public/2019/11/01/Hexo-Theme-Snail/index.html","hash":"b9e59985520a2f326ad42b2838e7f02e9212ce1c","modified":1591859819834},{"_id":"public/archives/index.html","hash":"67cc465d892632213781a41b78f7cd3c362eef56","modified":1601004624321},{"_id":"public/archives/2019/index.html","hash":"e7b845869b142f04c8b8d85253e3c883ab5adc57","modified":1601004624321},{"_id":"public/archives/2019/11/index.html","hash":"4a3ed14bcef9b6acc630e2128ba006d696efd5e0","modified":1601004624321},{"_id":"public/categories/hexo/index.html","hash":"1d880b776b808c44fc6ebb185f29635e0c95407b","modified":1591859819834},{"_id":"public/index.html","hash":"39bfb17bd4fe2ed318e12cc25cdb66635e372b6f","modified":1601004624321},{"_id":"public/tags/hexo-theme-snail/index.html","hash":"b04f5b18fb9c435f3d9e058c3a96b2c018ca580f","modified":1591859819834},{"_id":"public/robots.txt","hash":"a501cb86e0537a749c344cb413bace53b49b147c","modified":1598414748252},{"_id":"public/CNAME","hash":"55d5b0b4757a7d65ee4966dd161f394d06d257b7","modified":1598414748252},{"_id":"public/img/ironman-draw.png","hash":"bf6b382fe359ae325b72c485c1eb73ee024b4dc1","modified":1591842460515},{"_id":"public/img/signature/Just-do-it-white.png","hash":"c66314974b30c23ae9da2f7e57ca1ead65f00e28","modified":1591842460515},{"_id":"public/img/signature/dusign.png","hash":"cbfb2ac6910c0ad4263f300afcdaf13060257976","modified":1591842460515},{"_id":"public/img/404-bg.jpg","hash":"dded479a06d5165d1f87c63677442aecdf1ac748","modified":1591842460515},{"_id":"public/img/header_img/categories-bg.jpg","hash":"aa83bedb9e15aa971fbf7951e9924397c4a22f54","modified":1598414748252},{"_id":"public/img/default.jpg","hash":"fc75240d2a5e0b2627360cc8b956e6a43849f5dc","modified":1598414748252},{"_id":"public/2019/11/01/Hexo-Theme-Snail/snail-bg.jpg","hash":"91b8cdf0418c78dc45fd736c5185f96c8c4817ae","modified":1591854708887},{"_id":"public/photography/photo/yc.jpeg","hash":"89f97217bbe2cb01429fcbf3699349446c16c971","modified":1591854708887},{"_id":"public/photography/photo/wx.jpeg","hash":"2ce216e2bf8f652b16a340486f6177ba9c8b951f","modified":1598414748252},{"_id":"public/img/header_img/tag-bg.jpg","hash":"674cbdd26a0008f5417a2c5cf6d58d4087f66a16","modified":1598414748252},{"_id":"public/photography/photo/yjyj3.jpeg","hash":"ecdee68745d94231d4dd8c1bade75e8cb62092fc","modified":1591854708887},{"_id":"public/photography/photo/yjyj2.jpeg","hash":"a2d79feac358d68c8e9b2dd96afd69f7ba31bb7b","modified":1591854708887},{"_id":"public/img/header_img/photography-bg.jpeg","hash":"bf09062486ed9ffb7af99649cf465a5de38f5f26","modified":1598414748252},{"_id":"public/photography/photo/dfmz.jpeg","hash":"e1bbfe0c2ecba12c936ba31066b92fafcd934bca","modified":1591854708887},{"_id":"public/photography/photo/yjyj1.jpeg","hash":"17e1c0b8b3732130c011b216a0569a52ddd78f4b","modified":1591854708887},{"_id":"public/photography/photo/ly.jpeg","hash":"ae4d91d457ee3d4930335655d85e12055842b684","modified":1591854708887},{"_id":"public/img/header_img/home-bg-1-dark.jpg","hash":"73afc05be88af73c70f3e736a057169b3c08ef31","modified":1591842460515},{"_id":"public/photography/photo/lsqs.jpeg","hash":"60e16189fc372bafcd1c1b3ff5938e65cda084a0","modified":1591854708887},{"_id":"public/img/header_img/archive-bg.jpg","hash":"ede78596f2b62e73d7d92118851d6a92e6de2450","modified":1598414748252},{"_id":"public/img/header_img/Iron-Man-3.jpg","hash":"157de39599633984edaf15dd6ece681e7e55dd65","modified":1591842460515},{"_id":"public/2019/11/01/Hexo-Theme-Snail/snail.png","hash":"9741ada00e6f5684efce9649c0631590f5ffe4a2","modified":1591854708887},{"_id":"themes/snail/.DS_Store","hash":"783a3e27be97b986d0aa6bcc8e7334c52d17961c","modified":1591842120635},{"_id":"themes/snail/LICENSE","hash":"2b209f06bebeb2a8c2b7e187e436f3e1e1fbc8a7","modified":1591842120635},{"_id":"themes/snail/_config.yml","hash":"5d235aa7716657282795ee86d9c9db2374197a66","modified":1591842120635},{"_id":"themes/snail/languages_to_be_added/en.yml","hash":"97326c9e6518d9f379778178b3b8f9a58434725d","modified":1591842120635},{"_id":"themes/snail/languages_to_be_added/de.yml","hash":"424a9c1e6ab69334d7873f6574da02ca960aa572","modified":1591842120635},{"_id":"themes/snail/languages_to_be_added/es.yml","hash":"cb4eeca0ed3768a77e0cd216300f2b2549628b1b","modified":1591842120635},{"_id":"themes/snail/languages_to_be_added/default.yml","hash":"97326c9e6518d9f379778178b3b8f9a58434725d","modified":1591842120635},{"_id":"themes/snail/languages_to_be_added/no.yml","hash":"8ca475a3b4f8efe6603030f0013aae39668230e1","modified":1591842120635},{"_id":"themes/snail/languages_to_be_added/pl.yml","hash":"de7eb5850ae65ba7638e907c805fea90617a988c","modified":1591842120635},{"_id":"themes/snail/languages_to_be_added/zh-CN.yml","hash":"7bfcb0b8e97d7e5edcfca8ab26d55d9da2573c1c","modified":1591842120635},{"_id":"themes/snail/languages_to_be_added/ru.yml","hash":"42df7afeb7a35dc46d272b7f4fb880a9d9ebcaa5","modified":1591842120635},{"_id":"themes/snail/languages_to_be_added/zh-TW.yml","hash":"9acac6cc4f8002c3fa53ff69fb8cf66c915bd016","modified":1591842120635},{"_id":"themes/snail/layout/404.ejs","hash":"a4d73541a53e56b7dd46249c6d27cb59f4d97422","modified":1591842120635},{"_id":"themes/snail/layout/.DS_Store","hash":"e45cdab01049822593cf65f23f18a828ea573ab9","modified":1591842120635},{"_id":"themes/snail/layout/about.ejs","hash":"a946b4a2467fbc4709b8615f769936152a9f7f8a","modified":1591842120635},{"_id":"themes/snail/layout/categories.ejs","hash":"fb74aa2ce5a03ae5ffdbccbde20111b92e544c16","modified":1591842120635},{"_id":"themes/snail/layout/index.ejs","hash":"242a1d8784283a1d41bf64e4dc4abf70810b9ffb","modified":1591847503438},{"_id":"themes/snail/layout/archive.ejs","hash":"f8a1da07f95c2c8d042a56fe91e0f5f17998886b","modified":1597996117318},{"_id":"themes/snail/layout/page.ejs","hash":"81ed91a585e2037e50d02404b1a28127ac1013c4","modified":1591842120635},{"_id":"themes/snail/layout/keynote.ejs","hash":"76adf10eef9057cd6115866b1e8a91796d15dff0","modified":1591842120635},{"_id":"themes/snail/layout/layout.ejs","hash":"557f2b97022c02d57555385dd9d50030ee6a2a50","modified":1591858517298},{"_id":"themes/snail/layout/post.ejs","hash":"9f34d5893cb949fc699410a1533a2b7ddf9a83f7","modified":1598838760466},{"_id":"themes/snail/layout/photography.ejs","hash":"410a5b47af046b79b6f3ab8fd906e1af2c9da914","modified":1591842120635},{"_id":"themes/snail/layout/tags.ejs","hash":"369b73aba39607ba51280bb611037dba04d633fb","modified":1591842120635},{"_id":"themes/snail/source/.DS_Store","hash":"ed06a70def8b481e44815adacc512b1dd1ca9d08","modified":1591842120635},{"_id":"source/img/article/Ubuntu18.04-11.png","hash":"8ae8ed9c52709ffdde63ef92ed26578e87e05cce","modified":1586108677372},{"_id":"source/img/article/Ubuntu18.04-13.png","hash":"2f929624df2751c01731ed1ba21cda2ffb7d7092","modified":1586108677376},{"_id":"source/img/article/Ubuntu18.04-2.png","hash":"63ab9b51046225b0846b88664d90cacc1db4aab3","modified":1586108677376},{"_id":"source/img/article/Ubuntu18.04-3.png","hash":"f331b6722e7cf2035e00f1dd307c58a2379b0c7f","modified":1586108677376},{"_id":"source/img/article/dev-tools-storage2.png","hash":"a53c1d7f58f5fc2052d449e35ff4bcaaf3e1d22a","modified":1587095578980},{"_id":"source/img/article/node_pipe.png","hash":"15c7b639515b467910837bb5f2ef1a1a25f66909","modified":1586108677392},{"_id":"source/img/article/snapshot.png","hash":"3a129083f67b48903e4ae97b03f4f4512bff7d38","modified":1586108677396},{"_id":"source/img/article/snapshot_select.png","hash":"824dd884cf2adb5e242e4f9ea0fa6e01f8f2bb90","modified":1586108677396},{"_id":"source/img/article/tree-1.png","hash":"578e4bdb1137ef445656eb97ee67c435f19a8d06","modified":1586108677396},{"_id":"source/img/article/tree-2.png","hash":"a62ee08694c713d651e0172c1599e079ad63737d","modified":1586108677396},{"_id":"source/img/article/tree-3.png","hash":"db2dd99b4426807d07e845c53d951a4ddb2ea674","modified":1586108677396},{"_id":"source/img/article/tree-5.png","hash":"4d50533df3958632bc7099d7bbe49e0daffbed18","modified":1586108677396},{"_id":"source/img/article/tree-6.png","hash":"a14dd20862d5cfabd75e921a58bab86b6dc479b6","modified":1586108677396},{"_id":"source/img/article/upload.png","hash":"2ff71d516e47ee8826ecda7484b454cb7d3e719f","modified":1586108677400},{"_id":"source/img/article/waterfall-2.jpg","hash":"4d7458625acd7ac9b3768b84c32fee7b5572776d","modified":1586108677404},{"_id":"source/img/avatar/nojsja.jpeg","hash":"71fc59f8b263f90563e6f4f7c91efac2c7c97921","modified":1586108677408},{"_id":"themes/snail/layout/_partial/comment.ejs","hash":"57e7f750c795919121afc51fce7be91b24aecb83","modified":1598597471982},{"_id":"themes/snail/layout/_partial/footer.ejs","hash":"53ad56f2e5fb16a0b2e34b349576a109dbb2b06c","modified":1597994609908},{"_id":"themes/snail/layout/_partial/.DS_Store","hash":"b67df80bf88e0f64ba66ad760f724d8c44d2c390","modified":1591842120635},{"_id":"themes/snail/layout/_partial/header.ejs","hash":"a38796629f6e7e41d273bdb729516664c802fdae","modified":1597815607933},{"_id":"themes/snail/layout/_partial/head.ejs","hash":"a2ca408627482c6ad19647c303191cf3e50a3238","modified":1597995359055},{"_id":"themes/snail/layout/_partial/music.ejs","hash":"5c83764bb26191f1a21a0e9ca1de0471a37b6405","modified":1597819552986},{"_id":"themes/snail/layout/_partial/pagination.ejs","hash":"557d6bb069a1d48af49ae912994653f44b32a570","modified":1591842120635},{"_id":"themes/snail/layout/_partial/nav.ejs","hash":"0cd8a7bc62d8fba92ec56a8d5486b11cb85489ee","modified":1591842120635},{"_id":"themes/snail/layout/_partial/star.ejs","hash":"eec08202adbea86e9f53c7dfa7813833bdb343e7","modified":1591842120635},{"_id":"themes/snail/layout/_partial/sidebar.ejs","hash":"2e4e528a555917b2a267da4db2440bcc4a7a65ab","modified":1591842120635},{"_id":"themes/snail/layout/_partial/toc.ejs","hash":"6fb56caac9f6cc7701edf8c6505c007c9562e0fb","modified":1591842120635},{"_id":"themes/snail/layout/_widget/archive.ejs","hash":"7594929d472806ca4c64d9906d9903a96de111a0","modified":1591842120635},{"_id":"themes/snail/layout/_widget/.DS_Store","hash":"9c0d84234456e5db3004fe76dd78d0d93efe3fc5","modified":1591842120635},{"_id":"themes/snail/layout/_widget/category.ejs","hash":"710139c577fbb38bd23d996bfc32858da9b55d05","modified":1591848113900},{"_id":"themes/snail/layout/_widget/featured-tags.ejs","hash":"0c9ce1942f1943dc8891a9302a922ef1ffe300c5","modified":1591842120635},{"_id":"themes/snail/layout/_widget/friends-blog.ejs","hash":"734d3775017aedac185028924baf890a71a74548","modified":1591842120635},{"_id":"themes/snail/layout/_widget/recent-posts.ejs","hash":"ce2bf0c00940ef1afda73f73875ac90b6e86d748","modified":1591842120635},{"_id":"themes/snail/layout/_widget/search.ejs","hash":"5138e624a0f20abcac0132e3e5bddf4698109ed0","modified":1591842120635},{"_id":"themes/snail/layout/_widget/short-about.ejs","hash":"98041b95d0f7a24f15f2e0d70b1481a929d9a52e","modified":1591859360244},{"_id":"themes/snail/layout/_widget/visitor.ejs","hash":"5d8505f7c0e0e01ace05f1c259e8d56289a6eebd","modified":1591847200893},{"_id":"themes/snail/source/css/.DS_Store","hash":"0cff62c01dffa557aea8139bec65d19bab1a406b","modified":1591842120635},{"_id":"themes/snail/source/css/archive.styl","hash":"715bcbd085eb95ec26c9805c11c374919cde971c","modified":1591842120635},{"_id":"themes/snail/source/css/dusign-common-dark.css","hash":"09c1d5e4d5d623ca1b0f27975860625c48332b92","modified":1591842120635},{"_id":"themes/snail/source/css/dusign-common-light.css","hash":"11f0d1a854b0ef803a0f0d9c6b744b3ed74253bf","modified":1591842120635},{"_id":"themes/snail/source/css/dusign-dark.css","hash":"d27c92dbcde4253e29f67756eb4499c193a11a27","modified":1591852603965},{"_id":"themes/snail/source/css/dusign-light.css","hash":"680e2ae199c0e426b9da02e84f1bbd5559eb406a","modified":1598839139731},{"_id":"themes/snail/source/css/font-awesome.css","hash":"b488600451227b445414796e9b8550e7c1bd6d29","modified":1591842120639},{"_id":"themes/snail/source/css/font-awesome.star.css","hash":"5e536c20b1633dd798b27b1860292edb00bdc5e4","modified":1591842120639},{"_id":"themes/snail/source/css/fonts.googleapis.css","hash":"61735f2f7925a9a90d55475a6c33b6b94d39ba2e","modified":1591842120639},{"_id":"themes/snail/source/css/gitment.css","hash":"7fbb18b73b44ed11193739c55fce53a6f173cf68","modified":1591842120639},{"_id":"themes/snail/source/css/highlight.styl","hash":"e842080e6d580f0f70a7df71fbde3c4e49463c19","modified":1591842120639},{"_id":"themes/snail/source/css/photography.css","hash":"29426628144eb10ec3c0e42aaacc03ee5de1809f","modified":1591842120639},{"_id":"themes/snail/source/css/rocket.styl","hash":"ede0821bc5b8e02ff87349bd9bf2bc822a537a67","modified":1591842120639},{"_id":"themes/snail/source/css/signature.styl","hash":"88159b31c59d59c01a0b534af57242662a2a3969","modified":1591842120639},{"_id":"themes/snail/source/css/toc.styl","hash":"8126d6469f1fbf790a4e0829ed871c54557360b2","modified":1591842120639},{"_id":"themes/snail/source/css/widget.styl","hash":"4e5433414ebf838abcf7f734f960c6f6cc4d3e37","modified":1591852355277},{"_id":"themes/snail/source/fonts/.DS_Store","hash":"c62411b1d7033164ffeac47a5c5091716b1ef0ed","modified":1591842120639},{"_id":"themes/snail/source/fonts/glyphicons-halflings-regular.eot","hash":"86b6f62b7853e67d3e635f6512a5a5efc58ea3c3","modified":1591842120643},{"_id":"themes/snail/source/fonts/glyphicons-halflings-regular.woff","hash":"278e49a86e634da6f2a02f3b47dd9d2a8f26210f","modified":1591842120643},{"_id":"themes/snail/source/fonts/glyphicons-halflings-regular.ttf","hash":"44bc1850f570972267b169ae18f1cb06b611ffa2","modified":1591842120643},{"_id":"themes/snail/source/fonts/glyphicons-halflings-regular.woff2","hash":"ca35b697d99cae4d1b60f2d60fcd37771987eb07","modified":1591842120643},{"_id":"themes/snail/source/img/cd.png","hash":"9e2948f8fcdd6a33d4d88be26c26cc5a3f284a39","modified":1591842120643},{"_id":"themes/snail/source/img/.DS_Store","hash":"946c77b313a0b54b7752989d970d116de33897e1","modified":1591842120643},{"_id":"themes/snail/source/img/cd_tou.png","hash":"f3be731e88699b3221349f154675f23efe6bbcaf","modified":1591842120643},{"_id":"themes/snail/source/img/default.jpg","hash":"22910d296bc4d2a687e1d2c3583d984d77ff119b","modified":1591842120643},{"_id":"themes/snail/source/img/notice.png","hash":"7dd33804c5db9ce303c6518defb0fab36ac443c5","modified":1591842120643},{"_id":"themes/snail/source/img/top-light.png","hash":"35795d86dc6bd0fe217ed9ac5a84c69fe3d89bbc","modified":1591842120643},{"_id":"themes/snail/source/img/tp.png","hash":"4d2a36c85473c8cdbbf0cc8f5930baf27be7af9b","modified":1591842120643},{"_id":"themes/snail/source/img/wave-dark.png","hash":"af6e4c8e6923e2ecbcd8118698c826559a3410f2","modified":1591842120643},{"_id":"themes/snail/source/img/wave-light.png","hash":"876873f352f953ea90b1d428f563572291052f65","modified":1591842120643},{"_id":"themes/snail/source/js/.DS_Store","hash":"2ab9cda44457d3ffbac70955968c866c2ab41d12","modified":1591842120647},{"_id":"themes/snail/source/js/canvas-nest.js","hash":"ccfef66760b1490ebf7d510c8a3a78d7a753601a","modified":1591842120647},{"_id":"themes/snail/source/js/bootstrap.min.js","hash":"b3f2ef9f985e7906c9360756b73cd64bf7733647","modified":1591842120647},{"_id":"themes/snail/source/js/hux-blog.js","hash":"4b4d3c557405d04c3087d36c13e2834fe05c0f73","modified":1591842120647},{"_id":"themes/snail/source/js/hux-blog.min.js","hash":"1563e7f70550ac6b30803d6f449719b853200e35","modified":1591842120647},{"_id":"themes/snail/source/js/jquery.nav.js","hash":"ef2160a456176a4d09cc0b95d52b27dfbbadf2d8","modified":1591842120651},{"_id":"themes/snail/source/js/jquery.tagcloud.js","hash":"4e5fd0b07f3bd935f2e603710447e039e3677211","modified":1591842120651},{"_id":"themes/snail/source/js/line.js","hash":"f43e647e938bcc51d043b1d64ddbfb847f9fee96","modified":1591842120651},{"_id":"themes/snail/source/js/mouse-click.js","hash":"19836369f0c47643e5e2e78edd3d75c43f1717c6","modified":1591842120651},{"_id":"themes/snail/source/js/ribbonDynamic.js","hash":"f37800912f97ae4c9d375608c5aad462847c8e43","modified":1591842120651},{"_id":"themes/snail/source/js/ribbonStatic.js","hash":"552f5b67778ff6282090cf06b33aaeb1a95eca37","modified":1591842120651},{"_id":"themes/snail/source/js/search.js","hash":"7e780c538d23147e4fdc5c19eba5747a137234f3","modified":1591842120651},{"_id":"themes/snail/source/js/toc.js","hash":"41e52551731854224c249d53010c1bae5aa92ffa","modified":1591842120651},{"_id":"themes/snail/source/js/totop.js","hash":"c05360f6fc699ac12e794b1764b4a952713a3017","modified":1591842120651},{"_id":"source/img/article/Fly.jpg","hash":"88fbee27cef45dfe26b5fb0b084313fa8887b5b6","modified":1586108677368},{"_id":"source/img/article/dev-tools-debug.png","hash":"9757e8b511ce555b5c659efba249bca3f7d248be","modified":1587095383770},{"_id":"source/img/article/dev-tools-storage.png","hash":"c14bd49b84de0dd92b9d22c92b4c2fe32b558c58","modified":1587095299785},{"_id":"source/img/article/lifeIsStrange.jpg","hash":"01e12f5319efa056db6cd359d9bf820079bf69c3","modified":1586108677388},{"_id":"source/img/article/mobx9.png","hash":"0c1433628cd9227b7cb07753a1ed79a36e8125a1","modified":1586108677392},{"_id":"source/img/article/shards_upload.jpg","hash":"0fbc0f41f8db68b2d203bfeb40a10ed1db35ad1b","modified":1586108677396},{"_id":"source/img/article/tree-4.png","hash":"7e4dfbf28f940c524b7c2826847f392e7aabb942","modified":1586108677396},{"_id":"source/img/article/waterfall-3.jpg","hash":"e9ae0afb7829e68a8f46ffada84373ae026cf787","modified":1586108677404},{"_id":"source/img/header_img/about.jpg","hash":"fda614a689e2557831f157d4fad104aec259f2d1","modified":1586108677408},{"_id":"themes/snail/source/css/bootstrap.min.css","hash":"fec7b176a4b9a67c0eb5d184f57b84297efc23aa","modified":1591842120635},{"_id":"themes/snail/source/fonts/fontawesome-webfont.woff","hash":"4a313eb93b959cc4154c684b915b0a31ddb68d84","modified":1591842120643},{"_id":"themes/snail/source/fonts/fontawesome-webfont.woff2","hash":"638c652d623280a58144f93e7b552c66d1667a11","modified":1591842120643},{"_id":"themes/snail/source/fonts/glyphicons-halflings-regular.svg","hash":"de51a8494180a6db074af2dee2383f0a363c5b08","modified":1591842120643},{"_id":"themes/snail/source/js/bootstrap.js","hash":"f8752e9ae24daec0a0baffd7819122f8c6fd9103","modified":1591842120647},{"_id":"themes/snail/source/js/jquery.min.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1591842120651},{"_id":"source/img/article/Ubuntu18.04-1.jpg","hash":"2f2a11b7d0fddda07c17e99be43633f23b6583a3","modified":1586108677372},{"_id":"source/img/article/Ubuntu18.04-10.png","hash":"c869b15cada3d4690f2bdd695e4486d8db277b13","modified":1586108677372},{"_id":"source/img/article/Ubuntu18.04-12.png","hash":"9530e2c1ea32225e8674ca2fa296c0f80e450157","modified":1586108677372},{"_id":"source/img/article/Ubuntu18.04-9.png","hash":"a863261a9a1730c361887d336738a414c2f0a53f","modified":1586108677380},{"_id":"source/img/article/mobx1.png","hash":"899db5dde67d4417c78848d93794b9118dd03b99","modified":1586108677392},{"_id":"source/img/article/mobx4.png","hash":"192a7ab1f6411b166deb64d38ed67f2dbfffab50","modified":1586108677392},{"_id":"source/img/article/mobx2.png","hash":"07f4fb4a584c4ae7be2aa5256eaceb9aad03cdb9","modified":1586108677392},{"_id":"source/img/article/mobx6.png","hash":"e72cec49c559744899d5a23f0bfa30f4356045cf","modified":1586108677392},{"_id":"source/img/article/mobx8.png","hash":"fdb356e7d6388d858f9b861d95062ed72274400d","modified":1586108677392},{"_id":"source/img/article/mobx5.png","hash":"8baae467c558711224feb2c241012bdc46004716","modified":1586108677392},{"_id":"source/img/article/mobx3.png","hash":"192a7ab1f6411b166deb64d38ed67f2dbfffab50","modified":1586108677392},{"_id":"source/img/article/tree-bug1.gif","hash":"7e1143cb1125a5289dabf1e5c8b2243eaa2cea3d","modified":1586108677396},{"_id":"source/img/header_img/archive.jpg","hash":"4ef24aaf2edd05ebbbcdc024e61d6b52e1f80e0f","modified":1586108677408},{"_id":"source/img/header_img/archives-widget.jpg","hash":"3dc11cfeac5c8e05e66fe8c78f1c3a51517f738c","modified":1586108677408},{"_id":"source/img/signature/BeanTechSign-white.png","hash":"34289ed41cf9ddac2d56be46fbb1515b7d5913cd","modified":1586108677416},{"_id":"themes/snail/source/css/bootstrap.css","hash":"41c54bf695145ae0b4d9020a1da308ceb05dcaf3","modified":1591842120635},{"_id":"themes/snail/source/fonts/fontawesome-webfont.ttf","hash":"6484f1af6b485d5096b71b344e67f4164c33dd1f","modified":1591842120643},{"_id":"themes/snail/source/css/images/ironman.png","hash":"ed4cfd8d6cb29fe389768e78701c1e704de0a4b4","modified":1591842120639},{"_id":"themes/snail/source/css/images/rocket.png","hash":"76f4a29befec0558eba79e91d494b8186ac83bd9","modified":1591842120639},{"_id":"themes/snail/source/css/music-player/.DS_Store","hash":"c222d4075bfee4e45d6724c1973ae854c0faa544","modified":1591842120639},{"_id":"themes/snail/source/js/gitment.js","hash":"db4ceb1a87f2353ed378f72bdb56a4be3c976425","modified":1591842120647},{"_id":"themes/snail/source/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3g3D_vx3rCubqg.woff2","hash":"7e70fcb471e56b2a19f2252930953b3e60fe1a9f","modified":1591842120643},{"_id":"themes/snail/source/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gTD_vx3rCubqg.woff2","hash":"72816c753b283b3073922e0dbaf43b7b0eca084a","modified":1591842120643},{"_id":"themes/snail/source/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gbD_vx3rCubqg.woff2","hash":"5978679d456a2caa60c4577d88015f6287541558","modified":1591842120643},{"_id":"themes/snail/source/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gfD_vx3rCubqg.woff2","hash":"080ec6814b7c0524080725bb14771f6acaea1f81","modified":1591842120643},{"_id":"themes/snail/source/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gnD_vx3rCs.woff2","hash":"aadbddac4c13b6104b7c1e8734388b8236d21986","modified":1591842120643},{"_id":"themes/snail/source/fonts/googleapis/JTUSjIg1_i6t8kCHKm459W1hyyTh89ZNpQ.woff2","hash":"2b17a95811ba31d575f51bc355e64a5fea5bb7ee","modified":1591842120643},{"_id":"themes/snail/source/fonts/googleapis/JTUSjIg1_i6t8kCHKm459WRhyyTh89ZNpQ.woff2","hash":"87a7218891499b54fc511fba5788d6c571c530da","modified":1591842120643},{"_id":"themes/snail/source/fonts/googleapis/JTUSjIg1_i6t8kCHKm459WZhyyTh89ZNpQ.woff2","hash":"28d5bef0604f6ff6605018bf5cb0c39becf8ee7d","modified":1591842120643},{"_id":"themes/snail/source/fonts/googleapis/JTUSjIg1_i6t8kCHKm459WdhyyTh89ZNpQ.woff2","hash":"8569fb80b97a650e8af5e3617e784f9d70759a6a","modified":1591842120643},{"_id":"themes/snail/source/fonts/googleapis/JTUSjIg1_i6t8kCHKm459WlhyyTh89Y.woff2","hash":"513e3f0c1faabe03d220a4482b770b0d7b0c6c15","modified":1591842120643},{"_id":"themes/snail/source/js/music-player/.DS_Store","hash":"af71753e216d93f6e18351e06e7c1fea76198ba5","modified":1591842120651},{"_id":"themes/snail/source/js/music-player/utill.js","hash":"9ebf6aa9fd481305a0aa2f78d9beed3fc0949e8d","modified":1591842120651},{"_id":"themes/snail/source/js/music-player/player.js","hash":"7b20324fb4011203eabc99d992bd85e9bbd5fda9","modified":1591842120651},{"_id":"source/img/article/Ubuntu18.04-5.png","hash":"793113383ec939091149fdbda57e7ffb1be2be9b","modified":1586108677376},{"_id":"source/img/article/Ubuntu18.04-8.png","hash":"60000d58e2b4699fe83242c91709c87c7af06a7c","modified":1586108677380},{"_id":"source/img/article/Ubuntu18.04-7.png","hash":"73c40e7f1f5d92baa4fee2613833b78e2efde447","modified":1586108677380},{"_id":"source/img/article/mobx10.png","hash":"699ca58d9abc07172b853d85230691bc95359a8b","modified":1586108677392},{"_id":"source/img/article/tree-bug-fix.gif","hash":"879461e9e878149d4275058d141c4501776c2350","modified":1586108677396},{"_id":"themes/snail/source/js/jquery.js","hash":"1852661bd11a09ca9b9cb63d1aa6ff390fffaf4e","modified":1591842120647},{"_id":"themes/snail/source/js/music-player/jquery.min.js","hash":"77e9eed704c96c3eb0180d35c6ba430b3f69a43a","modified":1591842120651},{"_id":"source/img/article/Ubuntu18.04-14.png","hash":"33615ccf60fa2adb47aa70113e00030ddc84cd76","modified":1586108677376},{"_id":"source/img/article/dev-tools.png","hash":"b529d71e083d91f52eba17b90d1ebeeb89374475","modified":1587094240633},{"_id":"source/img/article/tree-bug2.gif","hash":"027471c8f8c9f81eec010d1f64aa9abff423e59c","modified":1586108677396},{"_id":"source/img/header_img/home.jpg","hash":"ae194734c8fddbfc4fcb673a3d9685d038e49dcc","modified":1586108677412},{"_id":"source/img/signature/BeanTechSign-black.png","hash":"94b7102e819fd6ee082d3fb0166f4de7458c22ff","modified":1586108677412},{"_id":"themes/snail/source/css/music-player/css/player.css","hash":"46a1c32c6148bb2a3e017f707fd45cb4b2419237","modified":1591842120639},{"_id":"themes/snail/source/css/music-player/css/reset.css","hash":"939d5d57d6589ee7bd9d0d0b6a4009eec35a8652","modified":1591842120639},{"_id":"themes/snail/source/css/music-player/fonts/iconfont.css","hash":"bc74788146361682bc17cba3058c62bb7b89fa11","modified":1591842120639},{"_id":"source/img/article_header/article_bg.jpg","hash":"a51db494ff5b672793985001dafb581598c9c2de","modified":1586108677404},{"_id":"source/img/avatar/ironman.png","hash":"7d6a06b4b544ab146c3b3e8474edc33f14ac6e4d","modified":1586108677408},{"_id":"source/img/article/Ubuntu18.04-6.png","hash":"0a9748216e91b802bf53cc5b589f7557af46d58c","modified":1586108677376},{"_id":"source/img/article/mobx7.png","hash":"699ca58d9abc07172b853d85230691bc95359a8b","modified":1586108677392},{"_id":"source/img/article/Desktop2.png","hash":"7bb9f6713506e7a4a57def450ea0f7f01c894fb0","modified":1586108677364},{"_id":"source/img/article/Desktop3.png","hash":"aed0dbf83defa9800c0ab059d17e9c4040f94c4b","modified":1586108677368},{"_id":"source/img/header_img/tag.png","hash":"2fc57dff9e7ca736be24b04cce54ac7476937b67","modified":1586108677412},{"_id":"themes/snail/source/fonts/fontawesome-webfont.svg","hash":"b06b5c8f67fd632cdc62a33b62ae4f74194131b3","modified":1591842120639},{"_id":"source/img/header_img/home3.jpg","hash":"d1f39791cb2a331d8bd3cedc5d7a0f940e0b4f68","modified":1586108677412},{"_id":"source/img/article_header/article_header.png","hash":"ecd26beb4e13612ff419ad794f0371be823222e6","modified":1586108677404},{"_id":"source/img/article/Desktop.png","hash":"a2214d606233f1b469428dc445f2ec2f1f8b5088","modified":1586108677360},{"_id":"source/img/header_img/home-bg-o.png","hash":"e9ba54c513f0a37bbccddfdf7841570f86cdc6a5","modified":1586108677408},{"_id":"source/img/header_img/404.png","hash":"1b98b8219ecee2e263c8c81c58a53e32a62c3526","modified":1586108677408},{"_id":"source/img/header_img/home2.png","hash":"74d23c05e93a2e4bb469737f69d1714d1074bcf9","modified":1586108677412},{"_id":"source/img/article/animation.gif","hash":"77eadaec7549bb72c597258999dc2e065eadc19b","modified":1586108677384},{"_id":"source/img/article/city.jpg","hash":"c21151177f3aa521e64586eee169915f6fd9bd37","modified":1586108677388},{"_id":"source/img/article/waterfall-1.gif","hash":"5c2321cba8e414d902be7e4ae403d2a12ac814d0","modified":1586108677404},{"_id":"public/img/article/Ubuntu18.04-11.png","hash":"8ae8ed9c52709ffdde63ef92ed26578e87e05cce","modified":1598407638921},{"_id":"public/img/article/Ubuntu18.04-13.png","hash":"2f929624df2751c01731ed1ba21cda2ffb7d7092","modified":1598407638921},{"_id":"public/img/article/Ubuntu18.04-2.png","hash":"63ab9b51046225b0846b88664d90cacc1db4aab3","modified":1598407638921},{"_id":"public/img/article/Ubuntu18.04-3.png","hash":"f331b6722e7cf2035e00f1dd307c58a2379b0c7f","modified":1598407638921},{"_id":"public/img/article/dev-tools-storage2.png","hash":"28ddb3518ae6fb334a9887e428cfcdc244f9023a","modified":1598407638921},{"_id":"public/img/article/node_pipe.png","hash":"a0c7d4ea6c5ccc5d63072c7637a2db520cffd15a","modified":1598407638921},{"_id":"public/img/article/snapshot.png","hash":"a61b806568c481c22884194c46f08cb09bdc1341","modified":1598407638921},{"_id":"public/img/article/snapshot_select.png","hash":"59ceff5d623013fa4306ab119471e710cf0aee19","modified":1598407638921},{"_id":"public/img/article/tree-1.png","hash":"d2a4646a6b46ac6e8be2865846c46c313dcce545","modified":1598407638921},{"_id":"public/img/article/tree-2.png","hash":"ca0e1f8ea884f485deb8c311ac31b6574c89f877","modified":1598407638921},{"_id":"public/img/article/tree-3.png","hash":"e6a43aeb341590efe6ae5dd852c3fc01e1d7862f","modified":1598407638921},{"_id":"public/img/article/tree-5.png","hash":"ce6c867bdd0000e4aeeb4929e642fee215a381d1","modified":1598407638921},{"_id":"public/img/article/tree-6.png","hash":"638fa008070bcc259543193a99b7612a5b2fcae3","modified":1598407638921},{"_id":"public/img/article/upload.png","hash":"2ff71d516e47ee8826ecda7484b454cb7d3e719f","modified":1598407638921},{"_id":"public/img/article/waterfall-2.jpg","hash":"bbdda0636779d855dc2ba622ec673566980aa6d4","modified":1598407638921},{"_id":"public/img/avatar/nojsja.jpeg","hash":"71fc59f8b263f90563e6f4f7c91efac2c7c97921","modified":1598414748252},{"_id":"public/fonts/glyphicons-halflings-regular.eot","hash":"86b6f62b7853e67d3e635f6512a5a5efc58ea3c3","modified":1598414748252},{"_id":"public/fonts/glyphicons-halflings-regular.woff","hash":"278e49a86e634da6f2a02f3b47dd9d2a8f26210f","modified":1598414748252},{"_id":"public/fonts/glyphicons-halflings-regular.ttf","hash":"44bc1850f570972267b169ae18f1cb06b611ffa2","modified":1598414748252},{"_id":"public/fonts/glyphicons-halflings-regular.woff2","hash":"ca35b697d99cae4d1b60f2d60fcd37771987eb07","modified":1598414748252},{"_id":"public/img/cd.png","hash":"7b1d07ff8f90b47545d3a951750b671817b7e72d","modified":1598414748252},{"_id":"public/img/cd_tou.png","hash":"493b2ee58b2ad9981d4285a8440a780d4efb406b","modified":1598414748252},{"_id":"public/img/notice.png","hash":"7dd33804c5db9ce303c6518defb0fab36ac443c5","modified":1598414748252},{"_id":"public/img/top-light.png","hash":"35795d86dc6bd0fe217ed9ac5a84c69fe3d89bbc","modified":1598414748252},{"_id":"public/img/tp.png","hash":"4d2a36c85473c8cdbbf0cc8f5930baf27be7af9b","modified":1598414748252},{"_id":"public/img/wave-dark.png","hash":"af6e4c8e6923e2ecbcd8118698c826559a3410f2","modified":1598414748252},{"_id":"public/img/wave-light.png","hash":"af75ad9bd8533cac82b74f06462a9acd0eaccdff","modified":1598414748252},{"_id":"public/css/images/ironman.png","hash":"ed4cfd8d6cb29fe389768e78701c1e704de0a4b4","modified":1598414748252},{"_id":"public/css/images/rocket.png","hash":"76f4a29befec0558eba79e91d494b8186ac83bd9","modified":1598414748252},{"_id":"public/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3g3D_vx3rCubqg.woff2","hash":"7e70fcb471e56b2a19f2252930953b3e60fe1a9f","modified":1598414748252},{"_id":"public/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gTD_vx3rCubqg.woff2","hash":"72816c753b283b3073922e0dbaf43b7b0eca084a","modified":1598414748252},{"_id":"public/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gbD_vx3rCubqg.woff2","hash":"5978679d456a2caa60c4577d88015f6287541558","modified":1598414748252},{"_id":"public/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gfD_vx3rCubqg.woff2","hash":"080ec6814b7c0524080725bb14771f6acaea1f81","modified":1598414748252},{"_id":"public/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gnD_vx3rCs.woff2","hash":"aadbddac4c13b6104b7c1e8734388b8236d21986","modified":1598414748252},{"_id":"public/fonts/googleapis/JTUSjIg1_i6t8kCHKm459W1hyyTh89ZNpQ.woff2","hash":"2b17a95811ba31d575f51bc355e64a5fea5bb7ee","modified":1598414748252},{"_id":"public/fonts/googleapis/JTUSjIg1_i6t8kCHKm459WRhyyTh89ZNpQ.woff2","hash":"87a7218891499b54fc511fba5788d6c571c530da","modified":1598414748252},{"_id":"public/fonts/googleapis/JTUSjIg1_i6t8kCHKm459WZhyyTh89ZNpQ.woff2","hash":"28d5bef0604f6ff6605018bf5cb0c39becf8ee7d","modified":1598414748252},{"_id":"public/fonts/googleapis/JTUSjIg1_i6t8kCHKm459WdhyyTh89ZNpQ.woff2","hash":"8569fb80b97a650e8af5e3617e784f9d70759a6a","modified":1598414748252},{"_id":"public/fonts/googleapis/JTUSjIg1_i6t8kCHKm459WlhyyTh89Y.woff2","hash":"513e3f0c1faabe03d220a4482b770b0d7b0c6c15","modified":1598414748252},{"_id":"public/img/article/Fly.jpg","hash":"88fbee27cef45dfe26b5fb0b084313fa8887b5b6","modified":1598407638921},{"_id":"public/img/article/dev-tools-debug.png","hash":"71e80f527196cac384e1e27e1eb0c66756758ce8","modified":1598407638921},{"_id":"public/img/article/dev-tools-storage.png","hash":"a8ab0ed159f7fd01bf9c06a1577d1a72f3926ea4","modified":1598407638921},{"_id":"public/img/article/lifeIsStrange.jpg","hash":"01e12f5319efa056db6cd359d9bf820079bf69c3","modified":1598407638921},{"_id":"public/img/article/mobx9.png","hash":"0c1433628cd9227b7cb07753a1ed79a36e8125a1","modified":1598407638921},{"_id":"public/img/article/shards_upload.jpg","hash":"820d03c9acfc4e4d4c86fee633e5cb30fa599aa1","modified":1598407638921},{"_id":"public/img/article/tree-4.png","hash":"31fcb86c18de952e529bb885fb24291639881004","modified":1598407638921},{"_id":"public/img/article/waterfall-3.jpg","hash":"e9ae0afb7829e68a8f46ffada84373ae026cf787","modified":1598407638921},{"_id":"public/img/header_img/about.jpg","hash":"ac16903ff5a66af9280fab58617a8e5c894877b3","modified":1598414748252},{"_id":"public/fonts/fontawesome-webfont.woff","hash":"4a313eb93b959cc4154c684b915b0a31ddb68d84","modified":1598414748252},{"_id":"public/fonts/fontawesome-webfont.woff2","hash":"638c652d623280a58144f93e7b552c66d1667a11","modified":1598414748252},{"_id":"public/fonts/glyphicons-halflings-regular.svg","hash":"fd31e0a5016505904ad65946b69745ec2872b4e6","modified":1598414748252},{"_id":"public/css/archive.css","hash":"e1b0bdb6585fb031f3a7f9ffc0012245453db404","modified":1598414748252},{"_id":"public/css/dusign-common-dark.css","hash":"ae3b9cade69e768da5cad7387b9a85925a67aac9","modified":1598414748252},{"_id":"public/css/dusign-common-light.css","hash":"8ea6cd8d67c09ec96de17171b32bdae458ecc366","modified":1598414748252},{"_id":"public/css/fonts.googleapis.css","hash":"9c28829a3fecff92dc9d806c74dcd49ea5dd8f62","modified":1598414748252},{"_id":"public/css/highlight.css","hash":"35fa872c2dcab6665524e782eae3df597b73846c","modified":1598414748252},{"_id":"public/css/photography.css","hash":"c77a8def3dbb8edd6897b9056b53d2444e739793","modified":1598414748252},{"_id":"public/css/rocket.css","hash":"b15770ac3ff41ef2338e7e43e8e8b38020ce33e5","modified":1598414748252},{"_id":"public/css/signature.css","hash":"b9ec3c9372942dd6a3b2a29cd66781c5147d47d7","modified":1598414748252},{"_id":"public/css/toc.css","hash":"93c52d3c1fdadb2329679ca94b6be83ccef39142","modified":1598414748252},{"_id":"public/css/widget.css","hash":"e22abcabc8e82322c27eb392c415c23bb09a010e","modified":1598414748252},{"_id":"public/js/canvas-nest.js","hash":"e8714d7991950b5bfa7b826c72d97a792dceaeed","modified":1598414748252},{"_id":"public/js/hux-blog.js","hash":"99d6b17851a85d525b46ccaa6fb95631222ae79c","modified":1598414748252},{"_id":"public/js/hux-blog.min.js","hash":"1563e7f70550ac6b30803d6f449719b853200e35","modified":1598414748252},{"_id":"public/js/jquery.nav.js","hash":"3d6db9ab6f5d7c82f9d42dfad454af62551788bf","modified":1598414748252},{"_id":"public/js/line.js","hash":"3bbd812a906c5f53f0a9bc872fd59115c31a4833","modified":1598414748252},{"_id":"public/js/jquery.tagcloud.js","hash":"5793519b8fddef3c5e62db3d24f40c8179049e59","modified":1598414748252},{"_id":"public/js/mouse-click.js","hash":"1189fa279053b84093906786734888ffbaed4bf0","modified":1598414748252},{"_id":"public/js/ribbonStatic.js","hash":"0856c2e39b127a02b351b60b4630bc541c012d6a","modified":1598414748252},{"_id":"public/js/ribbonDynamic.js","hash":"1d678d1fab2cbb1ed8cdae468a593dc921b26915","modified":1598414748252},{"_id":"public/js/search.js","hash":"47f39115e427748ffb47b2f5084e7eb55f5f0e6c","modified":1598414748252},{"_id":"public/js/toc.js","hash":"ba095e0c555d976684508eaa93ad3388a1a94c54","modified":1598414748252},{"_id":"public/js/totop.js","hash":"fd586f615e9521f890a891dba74e5664eaf23ba1","modified":1598414748252},{"_id":"public/js/music-player/utill.js","hash":"8155c50df624cf908a0aea51461686d7f5fed2e4","modified":1594032708498},{"_id":"public/js/music-player/player.js","hash":"8c45db99c0606c20622a9588960c059cec8196e3","modified":1594032708498},{"_id":"public/css/music-player/css/player.css","hash":"8676c8a79a31ab1872cc07c05a6d5c7e4625e195","modified":1594032708498},{"_id":"public/css/music-player/css/reset.css","hash":"7ed29eb21b446c2c062b27197757de156588aa9f","modified":1594032708498},{"_id":"public/css/music-player/fonts/iconfont.css","hash":"bc74788146361682bc17cba3058c62bb7b89fa11","modified":1594032708498},{"_id":"public/css/dusign-dark.css","hash":"78c4c18eeb09600dbf36cb99fae68075ba233e17","modified":1598414748252},{"_id":"public/css/dusign-light.css","hash":"91df8f991f3a991ab67bdb1a5c3e8eeb0657e952","modified":1598839237011},{"_id":"public/css/font-awesome.css","hash":"7578c98756db8157f1738f6da8107e3db85d012d","modified":1598414748252},{"_id":"public/css/font-awesome.star.css","hash":"175c63d07dc152483da4b770e7b5cbbbc5d19e4e","modified":1598414748252},{"_id":"public/css/gitment.css","hash":"7bfb40bdac7bbd214cb9974719a87b02ecd8cd78","modified":1598414748252},{"_id":"public/js/bootstrap.min.js","hash":"b3f2ef9f985e7906c9360756b73cd64bf7733647","modified":1598414748252},{"_id":"public/css/bootstrap.min.css","hash":"fec7b176a4b9a67c0eb5d184f57b84297efc23aa","modified":1598414748252},{"_id":"public/js/bootstrap.js","hash":"8017a76fe7330137757961efb0ae3125243fa791","modified":1598414748252},{"_id":"public/js/jquery.min.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1598414748252},{"_id":"public/css/bootstrap.css","hash":"f6180df6debbf3df899de51ee96a83a9a5cc603e","modified":1598414748252},{"_id":"public/js/gitment.js","hash":"db4ceb1a87f2353ed378f72bdb56a4be3c976425","modified":1594032708498},{"_id":"public/js/jquery.js","hash":"b30d74236f66524fdbeceb42d8f8d5a0a94a9775","modified":1598414748252},{"_id":"public/js/music-player/jquery.min.js","hash":"e2f3603e23711f6446f278a411d905623d65201e","modified":1594032708498},{"_id":"public/img/article/Ubuntu18.04-1.jpg","hash":"2f2a11b7d0fddda07c17e99be43633f23b6583a3","modified":1598407638921},{"_id":"public/img/article/Ubuntu18.04-10.png","hash":"c869b15cada3d4690f2bdd695e4486d8db277b13","modified":1598407638921},{"_id":"public/img/article/Ubuntu18.04-12.png","hash":"9530e2c1ea32225e8674ca2fa296c0f80e450157","modified":1598407638921},{"_id":"public/img/article/Ubuntu18.04-9.png","hash":"a863261a9a1730c361887d336738a414c2f0a53f","modified":1598407638921},{"_id":"public/img/article/mobx1.png","hash":"899db5dde67d4417c78848d93794b9118dd03b99","modified":1598407638921},{"_id":"public/img/article/mobx4.png","hash":"192a7ab1f6411b166deb64d38ed67f2dbfffab50","modified":1598407638921},{"_id":"public/img/article/mobx2.png","hash":"07f4fb4a584c4ae7be2aa5256eaceb9aad03cdb9","modified":1598407638921},{"_id":"public/img/article/mobx6.png","hash":"e72cec49c559744899d5a23f0bfa30f4356045cf","modified":1598407638921},{"_id":"public/img/article/mobx8.png","hash":"fdb356e7d6388d858f9b861d95062ed72274400d","modified":1598407638921},{"_id":"public/img/article/mobx3.png","hash":"192a7ab1f6411b166deb64d38ed67f2dbfffab50","modified":1598407638921},{"_id":"public/img/article/tree-bug1.gif","hash":"80dcce41f18fb541e51e5cf40b8f53a39723b6fd","modified":1598407638921},{"_id":"public/img/header_img/archive.jpg","hash":"d3be1abb2d3b5bdef4216cc469daea3f46349c3a","modified":1598414748252},{"_id":"public/img/header_img/archives-widget.jpg","hash":"3dc11cfeac5c8e05e66fe8c78f1c3a51517f738c","modified":1598414748252},{"_id":"public/img/article/tree-bug-fix.gif","hash":"fccce7b27fb8fc4362c2b27c0a84939dcd7bf702","modified":1598407638921},{"_id":"public/img/article/dev-tools.png","hash":"c6e411f871e7da6425839dade6496fefb48e99ad","modified":1598407638921},{"_id":"public/img/article/mobx5.png","hash":"8baae467c558711224feb2c241012bdc46004716","modified":1598407638921},{"_id":"public/img/signature/BeanTechSign-white.png","hash":"3208aada1ec75b117feea59006b08c76c1d5e150","modified":1598414748252},{"_id":"public/fonts/fontawesome-webfont.ttf","hash":"6484f1af6b485d5096b71b344e67f4164c33dd1f","modified":1598414748252},{"_id":"public/img/article/Ubuntu18.04-5.png","hash":"793113383ec939091149fdbda57e7ffb1be2be9b","modified":1598407638921},{"_id":"public/img/article/Ubuntu18.04-7.png","hash":"73c40e7f1f5d92baa4fee2613833b78e2efde447","modified":1598407638921},{"_id":"public/img/avatar/ironman.png","hash":"41c232222da8d8d6ce605f92e1b2e88243b7ed81","modified":1598414748252},{"_id":"public/img/article/mobx7.png","hash":"699ca58d9abc07172b853d85230691bc95359a8b","modified":1598407638921},{"_id":"public/img/article/Ubuntu18.04-8.png","hash":"60000d58e2b4699fe83242c91709c87c7af06a7c","modified":1598407638921},{"_id":"public/img/article/mobx10.png","hash":"699ca58d9abc07172b853d85230691bc95359a8b","modified":1598407638921},{"_id":"public/img/article_header/article_bg.jpg","hash":"6128f76ebdc20a3ccb2ca593c6842a8bb63a1d1a","modified":1598414748252},{"_id":"public/img/article/tree-bug2.gif","hash":"98e1fbff38cd13d7c03ef84e00c6c9be54735f79","modified":1598407638921},{"_id":"public/img/header_img/home.jpg","hash":"adb9e1fe9e43215a6cb7bccecae0b759bf6599cc","modified":1598414748252},{"_id":"public/img/article/Ubuntu18.04-6.png","hash":"0a9748216e91b802bf53cc5b589f7557af46d58c","modified":1598407638921},{"_id":"public/img/article/Ubuntu18.04-14.png","hash":"33615ccf60fa2adb47aa70113e00030ddc84cd76","modified":1598407638921},{"_id":"public/img/header_img/tag.png","hash":"2fc57dff9e7ca736be24b04cce54ac7476937b67","modified":1598414748252},{"_id":"public/img/signature/BeanTechSign-black.png","hash":"89b5d79b99e88d484b502a587a845bbb98ba8ba4","modified":1598414748252},{"_id":"public/fonts/fontawesome-webfont.svg","hash":"d386a2e85b1928b911eddce981fbddf85b13f220","modified":1598414748252},{"_id":"public/img/article/Desktop3.png","hash":"aed0dbf83defa9800c0ab059d17e9c4040f94c4b","modified":1598407638921},{"_id":"public/img/article/animation.gif","hash":"97e7d2d42f4f26a78c1fba1694a920e2a6c2a6a7","modified":1598407638921},{"_id":"public/img/article/Desktop2.png","hash":"7bb9f6713506e7a4a57def450ea0f7f01c894fb0","modified":1598407638921},{"_id":"public/img/header_img/home3.jpg","hash":"cd84c8b700d32784afdd7fdfec725f254cf2a45d","modified":1598414748252},{"_id":"public/img/article_header/article_header.png","hash":"ecd26beb4e13612ff419ad794f0371be823222e6","modified":1598414748252},{"_id":"public/img/article/Desktop.png","hash":"bd72f21f3745cbf2a38590a3fecd646a629046f5","modified":1598407638921},{"_id":"public/img/header_img/404.png","hash":"fd3caa0224f4bac1f0aaee3484281df775fea7a7","modified":1598414748252},{"_id":"public/img/header_img/home-bg-o.png","hash":"7023da5d25cdc38f2b552e2cc3322fe49f499163","modified":1598414748252},{"_id":"public/img/header_img/home2.png","hash":"3f74583fd6a81c30562dbc8bd504f57cb36e977f","modified":1598414748252},{"_id":"public/img/article/city.jpg","hash":"c21151177f3aa521e64586eee169915f6fd9bd37","modified":1598407638921},{"_id":"public/img/article/waterfall-1.gif","hash":"5c2321cba8e414d902be7e4ae403d2a12ac814d0","modified":1598407638921},{"_id":"public/post-sitemap.xml","hash":"3739634c4ea3ac1e62418e936278d53ef3b665a4","modified":1603351183313},{"_id":"public/page-sitemap.xml","hash":"8449fecdaaca052e71858059eaa9e724ffe4a691","modified":1603351183313},{"_id":"public/category-sitemap.xml","hash":"f8c290196d28a90bdff6c9645cac1b85655420bf","modified":1603351183313},{"_id":"public/tag-sitemap.xml","hash":"39d9b44b11a042d946fa4d04cc81bffe2ae03f2b","modified":1603351183313},{"_id":"public/sitemap.xsl","hash":"4321fa69dc1b8811d32b7a1478e5603e038cea1a","modified":1603351183313},{"_id":"source/_posts/Electron+Mobx+React().md","hash":"d0a94c900789e7fdb3bde6fb9858c0fccefa64f8","modified":1597899695363},{"_id":"source/_posts/Electron+Mobx+React().md","hash":"c4ab13403ab398fd92a042d703d8871c52269442","modified":1597905913370},{"_id":"source/_posts/echarts-.md","hash":"4db69659e45a025f14b36c540e97981f6ae98ae1","modified":1597899679699},{"_id":"source/_posts/Ubuntu18.04.md","hash":"e2a31f47c2b7e3237a84b81a5be89b430532a448","modified":1597899537811},{"_id":"source/_posts/linux-mint-configure.md","hash":"0d83a4b97718b175f91afc70424938c0f5f7ba3c","modified":1597899508379},{"_id":"source/_posts/proxychains.md","hash":"f04ca8ba046de3645ade1f62610a41107291b565","modified":1597912427565},{"_id":"source/_posts/sass.md","hash":"d1c28ab81d803c20f2cf2805c02dcaba097b5c21","modified":1597899522503},{"_id":"source/_posts/shadowsocks_polipo.md","hash":"746fcd659d77c76d72eef9c497b7d8a5b34e5954","modified":1597899527495},{"_id":"source/_posts/water-fall-layout.md","hash":"c3e7d36072f6377ca38b2b517e5e21da2f7e3b77","modified":1597899544999},{"_id":"source/_posts/ES5ES6Promise.md","hash":"ac569560b340a8383957a2dd0ecbcfa6532a616d","modified":1597899628175},{"_id":"source/_posts/.md","hash":"d647f9ec324f9fa2665edbfd17a9026b3a6348a7","modified":1597899619179},{"_id":"source/_posts/s3Javascript().md","hash":"c529cc62610402ec29231b0c5e05af71460b8f79","modified":1598325004563},{"_id":"source/_posts/s3Javascript().md","hash":"95eeea044bbe02f89e849a2b76f87849c0fd1ab7","modified":1597899580579},{"_id":"source/_posts/Javascripttootips.md","hash":"657453f9709c72246c199170e5447f5931eb0077","modified":1597899637727},{"_id":"source/_posts/Javascript.md","hash":"abd86b962fb86f35e00187bce9661546bad37b8c","modified":1597899600007},{"_id":"source/_posts/y7000ubuntu18.04.md","hash":"62300b6f713a43afd18c3cf034b9dbaad19dce59","modified":1597899608927},{"_id":"source/img/tp.png","hash":"4d2a36c85473c8cdbbf0cc8f5930baf27be7af9b","modified":1591846976321},{"_id":"source/_posts/DockerTimwechat.md","hash":"feacebe3bc0f4ecd10b689a219153a07c492d721","modified":1597899671247},{"_id":"public/2020/04/16//index.html","hash":"71a958b3fb0e61f136df8ffe7d9269592e6895c0","modified":1598407638921},{"_id":"public/2020/03/26/s3Javascript-/index.html","hash":"914b7081f1f972ac033f3651339dd267d90a7050","modified":1598407638921},{"_id":"public/2020/03/22/echarts-/index.html","hash":"ea23342054a4ec263b08d457fe918cb3b4899885","modified":1598838823257},{"_id":"public/2020/03/07/s3Javascript-/index.html","hash":"a7a67ad886c767db16009fee9f7b5b6271490a12","modified":1598407638921},{"_id":"public/2019/10/14/Electron-Mobx-React-/index.html","hash":"e500d19eb7c268a863d960e9eb0da1597b23821b","modified":1598407638921},{"_id":"public/2019/09/29/y7000ubuntu18-04/index.html","hash":"fffbc16245ca492661a91395b0528890df7d54dd","modified":1598838823257},{"_id":"public/2018/11/06/DockerTimwechat/index.html","hash":"5e50a0ccb252dfaae3588d9106da0215efa32a01","modified":1598407638921},{"_id":"public/2018/11/06/Javascripttootips/index.html","hash":"ea94757512c968eeb8ed9cb9f08be460951108f0","modified":1603351183313},{"_id":"public/2018/11/05/Javascript/index.html","hash":"6553387414d4f757478955c787eb523b7863790a","modified":1598838823257},{"_id":"public/2018/10/31/ES5ES6Promise/index.html","hash":"3fb6648966b4aa4bbb938033ccfa0183cf18da7b","modified":1598838823257},{"_id":"public/2018/10/26/Electron-Mobx-React-/index.html","hash":"89091691eaa5a787e13c8caff1fdf11d512cf8b1","modified":1598407638921},{"_id":"public/2018/04/04/Ubuntu18-04/index.html","hash":"7cfdbfbf36f3cfb71db3707968dea394c2353f7a","modified":1598407638921},{"_id":"public/2018/04/04/linux-mint-configure/index.html","hash":"c82f4c932758495a226dfda61c14af0d75f34ee1","modified":1598407638921},{"_id":"public/2018/04/04/proxychains/index.html","hash":"5b6a3d9f7d0ea0f346cd7809f28885617b1403e6","modified":1598407638921},{"_id":"public/2018/04/04/sass/index.html","hash":"f0043d9f155d110bab83d710c706e8fab44b473a","modified":1598407638921},{"_id":"public/2018/04/04/shadowsocks-polipo/index.html","hash":"b877b4bab1d4839481e6b5a03cadaeb9f45260f1","modified":1598407638921},{"_id":"public/2018/04/01/water-fall-layout/index.html","hash":"c3d46da3f98ddcd53c4ad05575b1a9e509d194d2","modified":1598407638921},{"_id":"public/archives/2/index.html","hash":"08dc97dbea5c52454d4f37e3846b7f2a046fce7d","modified":1601004624321},{"_id":"public/archives/archives/2/index.html","hash":"11f432252e11b88271cde0b7aeb229ccd77751e9","modified":1601004624321},{"_id":"public/archives/2018/index.html","hash":"cba8828efa343a42403f08226f1b78f493be1653","modified":1601004624321},{"_id":"public/archives/2018/archives/2/index.html","hash":"232b44a20fb917b5c31ecb2c81bf5466867882e5","modified":1594952099890},{"_id":"public/archives/2018/04/index.html","hash":"a8c2bfa1f685367c9bea197e0681458123a9c6c5","modified":1594952099890},{"_id":"public/archives/2018/10/index.html","hash":"541e1e95f43f7063e88231a101c65d6c964ac059","modified":1601004624321},{"_id":"public/archives/2018/11/index.html","hash":"3aa45d163ca44347b96c630293b024fb713f3ccb","modified":1601004624321},{"_id":"public/archives/2019/09/index.html","hash":"344db0aef7b87e20e04bfa43f5341eca23330224","modified":1601004624321},{"_id":"public/archives/2019/10/index.html","hash":"a4fc914f34c1b4ad181850b3ac481d2d1e5ae968","modified":1601004624321},{"_id":"public/archives/2020/index.html","hash":"052d9efe879453f911a3f47ab5c15d79520ca07e","modified":1601004624321},{"_id":"public/archives/2020/03/index.html","hash":"08f9135a9ba8c46b3d859c61d19493e09d58ead0","modified":1601004624321},{"_id":"public/archives/2020/04/index.html","hash":"e901bd649003727232a611956311627c6f7bc525","modified":1601004624321},{"_id":"public/tags/FileUpload/index.html","hash":"7961c19a92753d48d9c70c777434647cb4e4ff67","modified":1597821243930},{"_id":"public/tags/AWS/index.html","hash":"5ec4d7d069e5338770fc96c9bf78672dc012bad8","modified":1597821243930},{"_id":"public/tags/S3/index.html","hash":"68c5a9bb1d595c179708645fdfb603319b450a84","modified":1597821243930},{"_id":"public/tags/Node/index.html","hash":"f6d2282bd143d2d90b3118f3486067080d711ad9","modified":1597821243930},{"_id":"public/tags/FS/index.html","hash":"d34d4addab1fa8a8dfa2fa0139fbc317dacf36f7","modified":1597821243930},{"_id":"public/tags/Animation/index.html","hash":"ab562130b43537106f946671df158c3236b4f61d","modified":1597821243930},{"_id":"public/tags/Linux/index.html","hash":"1096c34fb35a3fdac72380292efb0e08f0ec90ab","modified":1597821243930},{"_id":"public/tags/Ubuntu18-04/index.html","hash":"218d48e3586bc0c8021dbc383ca7c2df9a7bb1c5","modified":1597821243930},{"_id":"public/tags/Docker/index.html","hash":"1c01afc0413fe99c60f3c5b819ad28e5650035b0","modified":1597821243930},{"_id":"public/tags/ES6/index.html","hash":"db79d415e14fb43826f8d4d0c9e7133cf8494d43","modified":1597821243930},{"_id":"public/tags/React/index.html","hash":"cf8ff6ee2083d13bfb3497aa07c5da16e5a13403","modified":1597821243930},{"_id":"public/tags/Mobx/index.html","hash":"e856c337d1b8305653a80c28ff13cf046e8bbe11","modified":1597821243930},{"_id":"public/tags/Electron/index.html","hash":"3f86122b6852ec39f682dd3a73531039e3289159","modified":1597821243930},{"_id":"public/tags/Echarts/index.html","hash":"7b4f8b67395d53ba8ea93b47dd91475d9bfb2abd","modified":1597821243930},{"_id":"public/tags/Mint/index.html","hash":"d201735d1d6f548b8153103a5d98d3e7d8cc6e11","modified":1597821243930},{"_id":"public/tags/Proxy/index.html","hash":"2d9e7de343bc9fcaa7d5acf04c6dc6efca85cca2","modified":1597821243930},{"_id":"public/tags/Shadowsocks/index.html","hash":"821866b935af4d445c34a9dfc91e46ddf77749a1","modified":1597821243930},{"_id":"public/tags/Sass/index.html","hash":"2ab86cb05998cf7969d58d15960a64f126db77b1","modified":1597821243930},{"_id":"public/tags/Css/index.html","hash":"cd0b89706bd2491461890cc121cddf7a12fa726f","modified":1597821243930},{"_id":"public/tags/Javascript/index.html","hash":"7126bf5ca6a3daaf343edbe44da58414e55fc1a7","modified":1597821243930},{"_id":"public/tags/WaterFall/index.html","hash":"28d72300af2e90b5801527f35799f3324be1d896","modified":1597821243930},{"_id":"public/tags/Promise/index.html","hash":"f8bc0b25a579dac05e60f8c7ae1862febd5b523d","modified":1597821243930},{"_id":"public/tags/Browser/index.html","hash":"35eb90350ed6d92cf7be72aea13f825ee9c28546","modified":1597821243930},{"_id":"public/tags/Tools/index.html","hash":"573e8dcb70d42baa3f1809bfdc736b4742cad168","modified":1597821243930},{"_id":"public/tags/ES5/index.html","hash":"55967c704425e9f929fcc889120600ff328d7c3c","modified":1597821243930},{"_id":"source/img/wave-light.png","hash":"876873f352f953ea90b1d428f563572291052f65","modified":1591847967929},{"_id":"source/js/.DS_Store","hash":"2ab9cda44457d3ffbac70955968c866c2ab41d12","modified":1591855320617},{"_id":"source/js/bootstrap.js","hash":"f8752e9ae24daec0a0baffd7819122f8c6fd9103","modified":1591855320621},{"_id":"source/js/music-player/.DS_Store","hash":"af71753e216d93f6e18351e06e7c1fea76198ba5","modified":1591855320649},{"_id":"source/js/music-player/player.js","hash":"7b20324fb4011203eabc99d992bd85e9bbd5fda9","modified":1591855320649},{"_id":"source/js/music-player/utill.js","hash":"9ebf6aa9fd481305a0aa2f78d9beed3fc0949e8d","modified":1591855320653},{"_id":"source/js/music-player/jquery.min.js","hash":"77e9eed704c96c3eb0180d35c6ba430b3f69a43a","modified":1591855320649},{"_id":"source/fonts/.DS_Store","hash":"c62411b1d7033164ffeac47a5c5091716b1ef0ed","modified":1591855334165},{"_id":"source/fonts/fontawesome-webfont.svg","hash":"b06b5c8f67fd632cdc62a33b62ae4f74194131b3","modified":1591855334165},{"_id":"source/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3g3D_vx3rCubqg.woff2","hash":"7e70fcb471e56b2a19f2252930953b3e60fe1a9f","modified":1591855334181},{"_id":"source/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gTD_vx3rCubqg.woff2","hash":"72816c753b283b3073922e0dbaf43b7b0eca084a","modified":1591855334181},{"_id":"source/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gbD_vx3rCubqg.woff2","hash":"5978679d456a2caa60c4577d88015f6287541558","modified":1591855334185},{"_id":"source/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gfD_vx3rCubqg.woff2","hash":"080ec6814b7c0524080725bb14771f6acaea1f81","modified":1591855334185},{"_id":"source/fonts/googleapis/JTURjIg1_i6t8kCHKm45_dJE3gnD_vx3rCs.woff2","hash":"aadbddac4c13b6104b7c1e8734388b8236d21986","modified":1591855334185},{"_id":"source/fonts/googleapis/JTUSjIg1_i6t8kCHKm459W1hyyTh89ZNpQ.woff2","hash":"2b17a95811ba31d575f51bc355e64a5fea5bb7ee","modified":1591855334185},{"_id":"source/fonts/googleapis/JTUSjIg1_i6t8kCHKm459WRhyyTh89ZNpQ.woff2","hash":"87a7218891499b54fc511fba5788d6c571c530da","modified":1591855334185},{"_id":"source/fonts/googleapis/JTUSjIg1_i6t8kCHKm459WZhyyTh89ZNpQ.woff2","hash":"28d5bef0604f6ff6605018bf5cb0c39becf8ee7d","modified":1591855334185},{"_id":"source/fonts/googleapis/JTUSjIg1_i6t8kCHKm459WdhyyTh89ZNpQ.woff2","hash":"8569fb80b97a650e8af5e3617e784f9d70759a6a","modified":1591855334189},{"_id":"source/fonts/googleapis/JTUSjIg1_i6t8kCHKm459WlhyyTh89Y.woff2","hash":"513e3f0c1faabe03d220a4482b770b0d7b0c6c15","modified":1591855334189},{"_id":"source/fonts/glyphicons-halflings-regular.eot","hash":"86b6f62b7853e67d3e635f6512a5a5efc58ea3c3","modified":1591855334173},{"_id":"source/fonts/glyphicons-halflings-regular.ttf","hash":"44bc1850f570972267b169ae18f1cb06b611ffa2","modified":1591855334177},{"_id":"source/fonts/glyphicons-halflings-regular.woff","hash":"278e49a86e634da6f2a02f3b47dd9d2a8f26210f","modified":1591855334177},{"_id":"source/fonts/glyphicons-halflings-regular.woff2","hash":"ca35b697d99cae4d1b60f2d60fcd37771987eb07","modified":1591855334181},{"_id":"source/img/cd.png","hash":"9e2948f8fcdd6a33d4d88be26c26cc5a3f284a39","modified":1591855279388},{"_id":"source/img/cd_tou.png","hash":"f3be731e88699b3221349f154675f23efe6bbcaf","modified":1591855279388},{"_id":"source/img/notice.png","hash":"7dd33804c5db9ce303c6518defb0fab36ac443c5","modified":1591855279388},{"_id":"source/img/top-light.png","hash":"35795d86dc6bd0fe217ed9ac5a84c69fe3d89bbc","modified":1591855279388},{"_id":"source/img/wave-dark.png","hash":"af6e4c8e6923e2ecbcd8118698c826559a3410f2","modified":1591855279388},{"_id":"source/js/bootstrap.min.js","hash":"b3f2ef9f985e7906c9360756b73cd64bf7733647","modified":1591855320625},{"_id":"source/js/canvas-nest.js","hash":"ccfef66760b1490ebf7d510c8a3a78d7a753601a","modified":1591855320625},{"_id":"source/js/hux-blog.js","hash":"4b4d3c557405d04c3087d36c13e2834fe05c0f73","modified":1591855320629},{"_id":"source/js/hux-blog.min.js","hash":"1563e7f70550ac6b30803d6f449719b853200e35","modified":1591855320629},{"_id":"source/js/jquery.nav.js","hash":"ef2160a456176a4d09cc0b95d52b27dfbbadf2d8","modified":1591855320637},{"_id":"source/js/jquery.tagcloud.js","hash":"4e5fd0b07f3bd935f2e603710447e039e3677211","modified":1591855320641},{"_id":"source/js/line.js","hash":"f43e647e938bcc51d043b1d64ddbfb847f9fee96","modified":1591855320641},{"_id":"source/js/mouse-click.js","hash":"19836369f0c47643e5e2e78edd3d75c43f1717c6","modified":1591855320645},{"_id":"source/js/ribbonDynamic.js","hash":"f37800912f97ae4c9d375608c5aad462847c8e43","modified":1591855320653},{"_id":"source/js/ribbonStatic.js","hash":"552f5b67778ff6282090cf06b33aaeb1a95eca37","modified":1591855320653},{"_id":"source/js/search.js","hash":"7e780c538d23147e4fdc5c19eba5747a137234f3","modified":1591855320653},{"_id":"source/js/toc.js","hash":"41e52551731854224c249d53010c1bae5aa92ffa","modified":1591855320653},{"_id":"source/js/totop.js","hash":"c05360f6fc699ac12e794b1764b4a952713a3017","modified":1591855320653},{"_id":"source/fonts/fontawesome-webfont.woff","hash":"4a313eb93b959cc4154c684b915b0a31ddb68d84","modified":1591855334169},{"_id":"source/fonts/fontawesome-webfont.woff2","hash":"638c652d623280a58144f93e7b552c66d1667a11","modified":1591855334173},{"_id":"source/fonts/glyphicons-halflings-regular.svg","hash":"de51a8494180a6db074af2dee2383f0a363c5b08","modified":1591855334177},{"_id":"source/js/jquery.min.js","hash":"41b4bfbaa96be6d1440db6e78004ade1c134e276","modified":1591855320637},{"_id":"source/fonts/fontawesome-webfont.ttf","hash":"6484f1af6b485d5096b71b344e67f4164c33dd1f","modified":1591855334169},{"_id":"source/js/gitment.js","hash":"db4ceb1a87f2353ed378f72bdb56a4be3c976425","modified":1591855320629},{"_id":"source/js/jquery.js","hash":"1852661bd11a09ca9b9cb63d1aa6ff390fffaf4e","modified":1591855320633},{"_id":"public/categories/Javascript/index.html","hash":"f44a84c655fc87c89713caf803491756fc3bfe91","modified":1601004624321},{"_id":"public/categories/Javascript/Node/index.html","hash":"73269863f369bb389c0e02230a2b2c1a8bfa3356","modified":1601004624321},{"_id":"public/categories/Linux/index.html","hash":"2def838feaf3f5fd4d6619d708b0d1e29dd5b943","modified":1601004624321},{"_id":"public/categories/Sass/index.html","hash":"9d380c18bc618ccf59568cf261dc5411abd93af3","modified":1601004624321},{"_id":"public/categories/Tools/index.html","hash":"c8b40bd649b0895d9718c285d5ea2d1eae118a14","modified":1601004624321},{"_id":"public/categories/Electron/index.html","hash":"b86a8fbd62a90c282e5a57faf9b794967a3148b7","modified":1601004624321},{"_id":"public/categories/Mobx/index.html","hash":"e93a59103792323034f548bbe21ebc31fe1c8b33","modified":1601004624321},{"_id":"public/categories/Echarts/index.html","hash":"d713f21c900a03b678ac51fbb81fc86b15d40be0","modified":1601004624321},{"_id":"public/categories/Mobx/Electron/index.html","hash":"702ae768cbd4ce0850bcad3a9aaa3d0da5dc307b","modified":1601004624321},{"_id":"source/img/header_img/tinified.zip","hash":"16c2d5ab633b3ce4f128ef2cf7879ed86672b878","modified":1591860158378},{"_id":"public/img/header_img/tinified.zip","hash":"16c2d5ab633b3ce4f128ef2cf7879ed86672b878","modified":1598414748252},{"_id":"source/_posts/windowssmb.md","hash":"3efa629f77df4ed7841cd6b2014f3dc4fca63026","modified":1593763037234},{"_id":"source/img/article/electron-lang.png","hash":"aeda22e50ab9801aca9a3f3d74e89ed960a5f2be","modified":1593748900888},{"_id":"source/img/article/smb_node.jpg","hash":"72c4e525a48b19119d956a702696f684f5a25288","modified":1592795005373},{"_id":"source/img/article/smb_share.jpg","hash":"03fbf2643769ccf566ce83da60211a86c15ddf0e","modified":1592795005373},{"_id":"source/img/article/smb_node_conf.jpg","hash":"d001b75a12d9565133ef54cc37faeceaf1fa2517","modified":1592795005373},{"_id":"source/img/article/smb_share_mount.jpg","hash":"ee01b63581608b8e2ad68b5da32cb06dd16b4a00","modified":1592795005373},{"_id":"source/img/article/smb_upload_now.jpg","hash":"4b28118688f086ab9e11c90b79e1073598305aa6","modified":1597573701006},{"_id":"source/img/article/smb_dir.jpg","hash":"1bd124d75fda4ef614e06332b8b1a529007a7b6b","modified":1592795005369},{"_id":"source/img/article/smb_shutdown.jpg","hash":"d438236562b837d4c18fe0bdc69b08945f651487","modified":1592795005373},{"_id":"source/img/article/smb_upload_record.jpg","hash":"5d997b622999b74664784035398ce970e7d3596a","modified":1592795005377},{"_id":"source/img/article/smb_login.jpg","hash":"81e82333a656fbf309920825555516e033c54dbf","modified":1592795005373},{"_id":"public/2020/07/17/windowssmb/index.html","hash":"3dc061ae2d8b88cdc656a77a4e648fdf76def70e","modified":1597543565576},{"_id":"public/archives/2020/07/index.html","hash":"cfef042debd4645421d0d6b0142a398ba40377b7","modified":1601004624321},{"_id":"public/categories/client/index.html","hash":"4ddd6f512eabd8b00ccbe9cacec6dc013965abb1","modified":1594032708498},{"_id":"public/tags/SMB/index.html","hash":"136064860924f092496a5ca182e8036dc4ff4fa7","modified":1597821243930},{"_id":"public/img/article/electron-lang.png","hash":"8f7cdef3e08c86e11b484c9f14c1a7c4506d5fb4","modified":1598407638921},{"_id":"public/img/article/smb_share.jpg","hash":"fa1a4abeee04e649d6a0d531e217fca9423617ad","modified":1598407638921},{"_id":"public/img/article/smb_node.jpg","hash":"8a77594e5de48f3a576c65f0569df79adc4eb166","modified":1598407638921},{"_id":"public/img/article/smb_share_mount.jpg","hash":"c7e50f9e772a8f63ab6eba41f3807de2ead168ff","modified":1598407638921},{"_id":"public/img/article/smb_node_conf.jpg","hash":"d969603b0b6bdd94fa6a811f8ed2908016940150","modified":1598407638921},{"_id":"public/img/article/smb_upload_now.jpg","hash":"d43f109ef737abb7c64b93cc22f2fbc3b01d6694","modified":1598407638921},{"_id":"public/img/article/smb_dir.jpg","hash":"0325c01b5c156a999e6499ae6542c52da0e9fa60","modified":1598407638921},{"_id":"public/img/article/smb_shutdown.jpg","hash":"0477fa80186bd539ca4400ceedb341548aaadca8","modified":1598407638921},{"_id":"public/img/article/smb_upload_record.jpg","hash":"6639dd243cb6ab18fa50babdf896791cda13e13c","modified":1598407638921},{"_id":"public/img/article/smb_login.jpg","hash":"3a161d6d5e04e2f1a5dd3deca30f1e69ef0ebf8d","modified":1598407638921},{"_id":"source/_posts/Electronsmb.md","hash":"b741764099764ea63b756d7b6ac94fc87b96c5f3","modified":1598407352713},{"_id":"source/_posts/Electronsmb.md","hash":"3dac8b85909e88e6b15282f8ebdac08facf7eef4","modified":1597572636417},{"_id":"source/img/article/electron1.png","hash":"03dfc09384dd407f3d10d3e973907d2752f9815b","modified":1597572598018},{"_id":"public/2020/07/17/Electronsmb/index.html","hash":"9806bd8c97c5cfc1e3927b02f4bbba311467d37f","modified":1598838823257},{"_id":"public/2020/07/17/Electronsmb/index.html","hash":"b7dc99f35f4602d8626e1acdfb409b594a68e36a","modified":1597572692917},{"_id":"public/categories/electron/index.html","hash":"9a0583c7f676aa1ec86c13bafa4696515ecb163d","modified":1597821243930},{"_id":"public/tags/upload/index.html","hash":"d7ac4796d9893b6706e2f276bcc9a1bc818ba923","modified":1601004624321},{"_id":"public/img/article/electron1.png","hash":"4d4f8ed9bfcad27f57b6e95c4177c5a168333bbf","modified":1598407638921},{"_id":"source/_posts/Electronsmb.md","hash":"5b495c485e56d17f03dba584f6f4df3a11add15c","modified":1598334714703},{"_id":"source/img/article/upload_performance.jpg","hash":"b5f5e38a9e7bfa908345bac9dd4fbd3dc29b6149","modified":1597578632504},{"_id":"source/img/article/upload_memory.jpg","hash":"c40aca3c3783ce3072fcb257deac73041feca60c","modified":1597578990366},{"_id":"public/2020/07/17/Electronsmb/index.html","hash":"17ddbee13dca3cfae77d8f1804ec4bf82783c009","modified":1597588324395},{"_id":"public/img/article/upload_memory.jpg","hash":"ae124eef6ab63572a91470f39179539f4bcdb0a0","modified":1598407638921},{"_id":"public/img/article/upload_performance.jpg","hash":"5fc16ee3f4e5162175e897f71efed5300dd3fce6","modified":1598407638921},{"_id":"source/img/article/refreshTasks.jpg","hash":"220ad00cc03f3f9bfc0e18a49b816124ad63cf16","modified":1597587854635},{"_id":"source/img/article/chromium.jpg","hash":"aca6a7f76b3c9d07786ab462387d7ad467ee0a11","modified":1597581194381},{"_id":"source/img/article/inspect.jpg","hash":"db57826656845f6533b405ae8b9fbd654235dc0c","modified":1597585202257},{"_id":"public/img/article/refreshTasks.jpg","hash":"0828e8df96c07b5fae359beeabb465bec4520039","modified":1598407638921},{"_id":"public/img/article/inspect.jpg","hash":"34b28afb1eda26e0de0685303adda4e23f345034","modified":1598407638921},{"_id":"public/img/article/chromium.jpg","hash":"a5e193b840a4876e4ff89cae0e277d2ef8b5e74f","modified":1598407638921},{"_id":"public/2020/08/16/Electronsmb/index.html","hash":"6038191a8f55fc32b84af96564f977433719484f","modified":1598838823257},{"_id":"public/archives/2020/08/index.html","hash":"1d8ba75726b80b502e9166aceebd99e2d2320f12","modified":1601004624321},{"_id":"themes/snail/layout/_partial/anchor.ejs","hash":"2070bdf8d41015b8bf9724df342cb269d74abf6a","modified":1597748969428},{"_id":"themes/snail/source/js/Valine.min.js","hash":"b64fbb45ba5495e16013b7d3d114071eb10c16aa","modified":1597746257487},{"_id":"public/js/Valine.min.js","hash":"b64fbb45ba5495e16013b7d3d114071eb10c16aa","modified":1598414748252},{"_id":"public/tags/smb/index.html","hash":"8b8f6aa9e9b4109fac8e031e8e2723468ff56f5a","modified":1601004624321},{"_id":"public/tags/linux/index.html","hash":"8129c4060a8288b7fcc2f09f196abee318022595","modified":1601004624321},{"_id":"public/tags/docker/index.html","hash":"4661f5e69a3a5e1cea89d01ad2052f36518e6211","modified":1601004624321},{"_id":"public/tags/desktop/index.html","hash":"9ac5064bbb132b7c25fa3ad48fd71ca459bedd7e","modified":1601004624321},{"_id":"public/tags/es6/index.html","hash":"3a6963ab1440e4dfe8bdab99b296691986901477","modified":1601004624321},{"_id":"public/tags/react/index.html","hash":"467c914c195c801c88320d8c130f94100c2bfeda","modified":1601004624321},{"_id":"public/tags/mobx/index.html","hash":"165339608c8b7a42aa2ed9464ec90f1751077475","modified":1601004624321},{"_id":"public/tags/electron/index.html","hash":"2c043fde90f239a9f4d1f48df6f13d7c23a5f136","modified":1601004624321},{"_id":"public/tags/bobx/index.html","hash":"23169a031c8e24bc1df65380a81b565e89179fa7","modified":1597903759795},{"_id":"public/tags/ubuntu18-04/index.html","hash":"5ac88bf29938b7312670eb126d74a62dd05a9a83","modified":1601004624321},{"_id":"public/tags/echarts/index.html","hash":"80feba7975873cd96d220ae59214b5bb8a49a05e","modified":1601004624321},{"_id":"public/tags/mint/index.html","hash":"31f3dfaab870ba52662f884871c0e296167fabb1","modified":1601004624321},{"_id":"public/tags/sass/index.html","hash":"7ef0d7dd5df2f1632a7366f2b44da2d1de31b868","modified":1601004624321},{"_id":"public/tags/css/index.html","hash":"8438f46776da516f3118b0ac0b4f1c9fc1a0ed35","modified":1601004624321},{"_id":"public/tags/proxy/index.html","hash":"9e5527a2e658e031f315fe05e7a1abe4e1bf43ff","modified":1601004624321},{"_id":"public/tags/shadowsocks/index.html","hash":"cbd7ca97c3ba4f08da84dc28f8f3b89df41d803a","modified":1601004624321},{"_id":"public/tags/javascript/index.html","hash":"a46fe43f11695a1ef3426d5e22dad28db2f2f3a3","modified":1601004624321},{"_id":"public/tags/promise/index.html","hash":"e233df9b8b6680da1a3e2e947b8189a7cfc10a80","modified":1601004624321},{"_id":"public/tags/browser/index.html","hash":"0ba2abf2132d57ae2a168dc1047293eb6e78a6e1","modified":1601004624321},{"_id":"public/tags/tools/index.html","hash":"9b4365d20ac060e380a126d86925901d0e530a51","modified":1601004624321},{"_id":"public/tags/aws/index.html","hash":"e92cfb100981ac38ca596cabc0bfcf9a03e3bad2","modified":1601004624321},{"_id":"public/tags/s3/index.html","hash":"5b6c37a4b45754c60204e8ce384ac10f3cf4e241","modified":1601004624321},{"_id":"public/tags/node/index.html","hash":"f3524793b1415a9f48d38f67b33d0fac098363c3","modified":1601004624321},{"_id":"public/tags/animation/index.html","hash":"44021159d9a10a186e634ede70e0715cd519ac59","modified":1601004624321},{"_id":"source/.github/workflows/sync.yml","hash":"dcf5974b616562531033c2b271dd31967b39ce72","modified":1598335113206},{"_id":"public/.github/workflows/sync.json","hash":"a9e459771eb6fd9de29adfa03630310ed1fa1399","modified":1598414748252},{"_id":"themes/snail/source/js/MathJax.js","hash":"856a82431059889d446290c2f015c60bfb58a0b5","modified":1597994267438},{"_id":"themes/snail/source/js/busuanzi.pure.mini.js","hash":"6e41f31100ae7eb3a6f23f2c168f6dd56e7f7a9a","modified":1597994563757},{"_id":"themes/snail/source/js/buttons.js","hash":"016694e3a3671df0c451334a025ce87ace1848b8","modified":1597994267638},{"_id":"public/js/buttons.js","hash":"57ca12fe599877f1d03d284e8a73a4eeca026bea","modified":1598414748252},{"_id":"public/js/busuanzi.pure.mini.js","hash":"718a25f0713ee08bc30bdcbcb6cccb7589b56a62","modified":1598414748252},{"_id":"public/js/MathJax.js","hash":"a241e02696145d159bfe9b05909e0aba399c5bb1","modified":1598414748252},{"_id":"themes/snail/source/js/font-awesome.min.css","hash":"8c15c6bd82c71e9ef1bb11cf24e502fe07518ac5","modified":1597994815095},{"_id":"public/js/font-awesome.min.css","hash":"8c15c6bd82c71e9ef1bb11cf24e502fe07518ac5","modified":1597995056843},{"_id":"themes/snail/source/css/font-awesome.min.css","hash":"8c15c6bd82c71e9ef1bb11cf24e502fe07518ac5","modified":1597995367846},{"_id":"public/css/font-awesome.min.css","hash":"8c15c6bd82c71e9ef1bb11cf24e502fe07518ac5","modified":1598414748252},{"_id":"source/_posts/2020-08-26-test-md.md","hash":"493c4437882dfac2510525d21977a1dabc0cc9ca","modified":1598406957846},{"_id":"source/_posts/2020-08-26-test-md/animation.gif","hash":"77eadaec7549bb72c597258999dc2e065eadc19b","modified":1598406663981},{"_id":"public/2020/08/26/test-md/animation.gif","hash":"97e7d2d42f4f26a78c1fba1694a920e2a6c2a6a7","modified":1598407638921},{"_id":"public/2020/08/26/test-md/index.html","hash":"b9eb2f705f16d2d6e176db4b0079d600d3dd56f0","modified":1598407638921},{"_id":"source/_posts/2020-07-17-Electronsmb/smb_node.jpg","hash":"72c4e525a48b19119d956a702696f684f5a25288","modified":1598407282749},{"_id":"source/_posts/2020-07-17-Electronsmb/smb_node_conf.jpg","hash":"d001b75a12d9565133ef54cc37faeceaf1fa2517","modified":1598407282793},{"_id":"source/_posts/2020-08-26-test-md/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598407095814},{"_id":"public/2020/08/26/test-md/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598407638921},{"_id":"source/_posts copy/.DS_Store","hash":"a04ebe66fb85ce923d4ac52d351b7da0babaa3bd","modified":1598407457507},{"_id":"source/_posts copy/2020-07-17-Electronsmb/smb_node_conf.jpg","hash":"d001b75a12d9565133ef54cc37faeceaf1fa2517","modified":1598407457511},{"_id":"source/_posts copy/2020-07-17-Electronsmb/smb_node.jpg","hash":"72c4e525a48b19119d956a702696f684f5a25288","modified":1598407457511},{"_id":"source/_posts copy/2020-08-26-test-md/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598407457519},{"_id":"source/_posts copy/2020-08-26-test-md/animation.gif","hash":"77eadaec7549bb72c597258999dc2e065eadc19b","modified":1598407457519},{"_id":"source/_posts-bak/.DS_Store","hash":"a04ebe66fb85ce923d4ac52d351b7da0babaa3bd","modified":1598407457507},{"_id":"source/_posts-bak/2020-08-26-test-md.md","hash":"493c4437882dfac2510525d21977a1dabc0cc9ca","modified":1598407457523},{"_id":"source/_posts-bak/DockerTimwechat.md","hash":"feacebe3bc0f4ecd10b689a219153a07c492d721","modified":1598407457523},{"_id":"source/_posts-bak/Electron+Mobx+React().md","hash":"d0a94c900789e7fdb3bde6fb9858c0fccefa64f8","modified":1598407457523},{"_id":"source/_posts-bak/Electron+Mobx+React().md","hash":"c4ab13403ab398fd92a042d703d8871c52269442","modified":1598407457527},{"_id":"source/_posts-bak/echarts-.md","hash":"4db69659e45a025f14b36c540e97981f6ae98ae1","modified":1598407457527},{"_id":"source/_posts-bak/linux-mint-configure.md","hash":"0d83a4b97718b175f91afc70424938c0f5f7ba3c","modified":1598407457527},{"_id":"source/_posts-bak/Ubuntu18.04.md","hash":"e2a31f47c2b7e3237a84b81a5be89b430532a448","modified":1598407457527},{"_id":"source/_posts-bak/proxychains.md","hash":"f04ca8ba046de3645ade1f62610a41107291b565","modified":1598407457531},{"_id":"source/_posts-bak/sass.md","hash":"d1c28ab81d803c20f2cf2805c02dcaba097b5c21","modified":1598407457531},{"_id":"source/_posts-bak/shadowsocks_polipo.md","hash":"746fcd659d77c76d72eef9c497b7d8a5b34e5954","modified":1598407457531},{"_id":"source/_posts-bak/water-fall-layout.md","hash":"c3e7d36072f6377ca38b2b517e5e21da2f7e3b77","modified":1598407457531},{"_id":"source/_posts-bak/ES5ES6Promise.md","hash":"ac569560b340a8383957a2dd0ecbcfa6532a616d","modified":1598407457531},{"_id":"source/_posts-bak/.md","hash":"d647f9ec324f9fa2665edbfd17a9026b3a6348a7","modified":1598407457535},{"_id":"source/_posts-bak/Electronsmb.md","hash":"b741764099764ea63b756d7b6ac94fc87b96c5f3","modified":1598407457535},{"_id":"source/_posts-bak/Electronsmb.md","hash":"5b495c485e56d17f03dba584f6f4df3a11add15c","modified":1598407457535},{"_id":"source/_posts-bak/s3Javascript().md","hash":"c529cc62610402ec29231b0c5e05af71460b8f79","modified":1598407457535},{"_id":"source/_posts-bak/s3Javascript().md","hash":"95eeea044bbe02f89e849a2b76f87849c0fd1ab7","modified":1598407457535},{"_id":"source/_posts-bak/Javascripttootips.md","hash":"657453f9709c72246c199170e5447f5931eb0077","modified":1598407457539},{"_id":"source/_posts-bak/Javascript.md","hash":"abd86b962fb86f35e00187bce9661546bad37b8c","modified":1598407457539},{"_id":"source/_posts-bak/y7000ubuntu18.04.md","hash":"62300b6f713a43afd18c3cf034b9dbaad19dce59","modified":1598407457539},{"_id":"source/_posts-bak/2020-07-17-Electronsmb/smb_node.jpg","hash":"72c4e525a48b19119d956a702696f684f5a25288","modified":1598407457511},{"_id":"source/_posts-bak/2020-07-17-Electronsmb/smb_node_conf.jpg","hash":"d001b75a12d9565133ef54cc37faeceaf1fa2517","modified":1598407457511},{"_id":"source/_posts-bak/2020-08-26-test-md/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598407457519},{"_id":"source/_posts-bak/2020-08-26-test-md/animation.gif","hash":"77eadaec7549bb72c597258999dc2e065eadc19b","modified":1598407457519},{"_id":"source/_posts/2020-07-17-Electronsmb.md","hash":"98b432604698007fc2470ca91ce82dbc1f11f61c","modified":1598618158605},{"_id":"source/_posts/2020-07-17-Electronsmb/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1594951985285},{"_id":"public/2020/07/17/Electronsmb/smb_node.jpg","hash":"8a77594e5de48f3a576c65f0569df79adc4eb166","modified":1598414748252},{"_id":"public/2020/07/17/Electronsmb/smb_node_conf.jpg","hash":"d969603b0b6bdd94fa6a811f8ed2908016940150","modified":1598414748252},{"_id":"public/2020/07/17/Electronsmb/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"source/_posts/2017-10-21-sass.md","hash":"b6eb7bd4731c314008373465eecaa7a0703ac17c","modified":1508555326752},{"_id":"source/_posts/2018-07-09-Js.md","hash":"ae96115afd05bd5d0bd0ae331d0639019498f032","modified":1560309296427},{"_id":"source/_posts/2018-10-31-ES5ES6Promise.md","hash":"9ddcc3393293a2e8e4549eaebe1d73f5355872b6","modified":1540953672256},{"_id":"source/_posts/2018-11-05-Javascript.md","hash":"cf993d8cb3e2b28feccea570c3ddfb348f256f5f","modified":1541385131868},{"_id":"source/_posts/2018-11-06-Javascripttootips.md","hash":"26f470f0ec389360855453344d07bc40239f5a83","modified":1603351127559},{"_id":"source/_posts/2019-04-04-LinuxMint18.md","hash":"c86586d6a273ca4f807590b6f9e07d348a16ca9c","modified":1598411164627},{"_id":"source/_posts/2019-04-04-proxychains.md","hash":"466a7af9ec963a98e43eb21e17ecfd90ab885908","modified":1554347314861},{"_id":"source/_posts/2019-06-12-Ubuntu18.md","hash":"ef0bc116948cc6ddaefd6f4b2fd5a3da082edb98","modified":1600304768841},{"_id":"source/_posts/2019-09-29-y7000ubuntu18-04.md","hash":"9c0ee8edc585e79cc12bf2d20b3abb3df867927d","modified":1569724591455},{"_id":"source/_posts/2019-10-01-poliposhadowsocks.md","hash":"4c9cde966bcaccc0b3b11b32e09da167fa2ba033","modified":1569899324052},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React.md","hash":"637780c52115d31c082181edb0b74120d539e000","modified":1560309364498},{"_id":"source/_posts/2019-10-26-Electron-Mobx-React.md","hash":"2f03ca6d2a93e1134ce8722434b4173eb6123c21","modified":1572058446264},{"_id":"source/_posts/2019-11-14-DockerTimWechat.md","hash":"5665ae8843c81f624533bd5795435700ce81dbd6","modified":1560309384270},{"_id":"source/_posts/2020-03-07-s3Javascript.md","hash":"dddf1adeb4de01db0ff6eced975cd67987429cd4","modified":1560309394906},{"_id":"source/_posts/2020-03-22-echarts-.md","hash":"6628088382079000fda1842d452038621a5aa910","modified":1584845501020},{"_id":"source/_posts/2020-03-26-s3Javascript.md","hash":"c07521bf6cb8ea9f872c0b325f8aa5714a350cc9","modified":1585189620155},{"_id":"source/_posts/2020-04-16-.md","hash":"6458437d1277e2cc490354add675ec7cd34e5d33","modified":1587004728035},{"_id":"source/_posts/2020-08-16-Electronsmb.md","hash":"9f1e43e716eb5baffc32159bd873ff9f687fb7ad","modified":1585189720319},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-11.png","hash":"8ae8ed9c52709ffdde63ef92ed26578e87e05cce","modified":1586108677372},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-13.png","hash":"2f929624df2751c01731ed1ba21cda2ffb7d7092","modified":1586108677376},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-2.png","hash":"63ab9b51046225b0846b88664d90cacc1db4aab3","modified":1586108677376},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-3.png","hash":"f331b6722e7cf2035e00f1dd307c58a2379b0c7f","modified":1586108677376},{"_id":"source/_posts/2019-06-12-Ubuntu18/smb_dir.jpg","hash":"1bd124d75fda4ef614e06332b8b1a529007a7b6b","modified":1592795005369},{"_id":"source/_posts/2019-06-12-Ubuntu18/waterfall-2.jpg","hash":"4d7458625acd7ac9b3768b84c32fee7b5572776d","modified":1586108677404},{"_id":"source/_posts/2019-06-12-Ubuntu18/smb_node.jpg","hash":"72c4e525a48b19119d956a702696f684f5a25288","modified":1592795005373},{"_id":"source/_posts/2019-06-12-Ubuntu18/smb_node_conf.jpg","hash":"d001b75a12d9565133ef54cc37faeceaf1fa2517","modified":1592795005373},{"_id":"source/_posts/2019-06-12-Ubuntu18/smb_shutdown.jpg","hash":"d438236562b837d4c18fe0bdc69b08945f651487","modified":1592795005373},{"_id":"source/_posts/2020-03-07-s3Javascript/upload.png","hash":"2ff71d516e47ee8826ecda7484b454cb7d3e719f","modified":1583548213080},{"_id":"source/_posts/2020-03-22-echarts-/snapshot.png","hash":"3a129083f67b48903e4ae97b03f4f4512bff7d38","modified":1586108677396},{"_id":"source/_posts/2020-03-22-echarts-/snapshot_select.png","hash":"824dd884cf2adb5e242e4f9ea0fa6e01f8f2bb90","modified":1586108677396},{"_id":"source/_posts/2020-03-22-echarts-/tree-1.png","hash":"578e4bdb1137ef445656eb97ee67c435f19a8d06","modified":1586108677396},{"_id":"source/_posts/2020-03-22-echarts-/tree-2.png","hash":"a62ee08694c713d651e0172c1599e079ad63737d","modified":1586108677396},{"_id":"source/_posts/2020-03-22-echarts-/tree-3.png","hash":"db2dd99b4426807d07e845c53d951a4ddb2ea674","modified":1586108677396},{"_id":"source/_posts/2020-03-22-echarts-/tree-5.png","hash":"4d50533df3958632bc7099d7bbe49e0daffbed18","modified":1586108677396},{"_id":"source/_posts/2020-03-22-echarts-/tree-6.png","hash":"a14dd20862d5cfabd75e921a58bab86b6dc479b6","modified":1586108677396},{"_id":"source/_posts/2020-03-26-s3Javascript/node_pipe.png","hash":"15c7b639515b467910837bb5f2ef1a1a25f66909","modified":1586108677392},{"_id":"source/_posts/2020-03-26-s3Javascript/upload.png","hash":"2ff71d516e47ee8826ecda7484b454cb7d3e719f","modified":1586108677400},{"_id":"source/_posts/2020-04-16-/dev-tools-storage2.png","hash":"a53c1d7f58f5fc2052d449e35ff4bcaaf3e1d22a","modified":1587095578980},{"_id":"source/_posts/2020-07-17-Electronsmb/electron-lang.png","hash":"aeda22e50ab9801aca9a3f3d74e89ed960a5f2be","modified":1593748900888},{"_id":"source/_posts/2020-07-17-Electronsmb/smb_share.jpg","hash":"03fbf2643769ccf566ce83da60211a86c15ddf0e","modified":1592795005373},{"_id":"source/_posts/2020-07-17-Electronsmb/smb_share_mount.jpg","hash":"ee01b63581608b8e2ad68b5da32cb06dd16b4a00","modified":1592795005373},{"_id":"source/_posts/2020-08-16-Electronsmb/electron1.png","hash":"03dfc09384dd407f3d10d3e973907d2752f9815b","modified":1597749125199},{"_id":"source/_posts/2020-08-16-Electronsmb/refreshTasks.jpg","hash":"220ad00cc03f3f9bfc0e18a49b816124ad63cf16","modified":1597749125199},{"_id":"source/_posts/2018-10-31-ES5ES6Promise/lifeIsStrange.jpg","hash":"01e12f5319efa056db6cd359d9bf820079bf69c3","modified":1586108677388},{"_id":"source/_posts/2018-11-06-Javascripttootips/tootips.gif","hash":"9eeeda2b7dfd1e51909c635b97fe5691c4bf53ca","modified":1603349453235},{"_id":"source/_posts/2019-06-12-Ubuntu18/waterfall-3.jpg","hash":"e9ae0afb7829e68a8f46ffada84373ae026cf787","modified":1586108677404},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/Fly.jpg","hash":"88fbee27cef45dfe26b5fb0b084313fa8887b5b6","modified":1571021686188},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx9.png","hash":"0c1433628cd9227b7cb07753a1ed79a36e8125a1","modified":1586108677392},{"_id":"source/_posts/2019-10-26-Electron-Mobx-React/Fly.jpg","hash":"88fbee27cef45dfe26b5fb0b084313fa8887b5b6","modified":1586108677368},{"_id":"source/_posts/2020-03-07-s3Javascript/shards_upload.jpg","hash":"0fbc0f41f8db68b2d203bfeb40a10ed1db35ad1b","modified":1583548240551},{"_id":"source/_posts/2020-03-22-echarts-/tree-4.png","hash":"7e4dfbf28f940c524b7c2826847f392e7aabb942","modified":1586108677396},{"_id":"source/_posts/2020-04-16-/dev-tools-storage.png","hash":"c14bd49b84de0dd92b9d22c92b4c2fe32b558c58","modified":1587095299785},{"_id":"source/_posts/2020-04-16-/dev-tools-debug.png","hash":"9757e8b511ce555b5c659efba249bca3f7d248be","modified":1587095383770},{"_id":"source/_posts/2020-07-17-Electronsmb/shards_upload.jpg","hash":"0fbc0f41f8db68b2d203bfeb40a10ed1db35ad1b","modified":1586108677396},{"_id":"source/_posts/2020-07-17-Electronsmb/smb_upload_record.jpg","hash":"5d997b622999b74664784035398ce970e7d3596a","modified":1592795005377},{"_id":"source/_posts/2020-08-16-Electronsmb/chromium.jpg","hash":"aca6a7f76b3c9d07786ab462387d7ad467ee0a11","modified":1597749125199},{"_id":"source/_posts/2020-08-16-Electronsmb/shards_upload.jpg","hash":"0fbc0f41f8db68b2d203bfeb40a10ed1db35ad1b","modified":1597544498871},{"_id":"source/_posts/2020-08-16-Electronsmb/upload_memory.jpg","hash":"c40aca3c3783ce3072fcb257deac73041feca60c","modified":1597749125199},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-1.jpg","hash":"2f2a11b7d0fddda07c17e99be43633f23b6583a3","modified":1586108677372},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-10.png","hash":"c869b15cada3d4690f2bdd695e4486d8db277b13","modified":1586108677372},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-12.png","hash":"9530e2c1ea32225e8674ca2fa296c0f80e450157","modified":1586108677372},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-9.png","hash":"a863261a9a1730c361887d336738a414c2f0a53f","modified":1586108677380},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx1.png","hash":"899db5dde67d4417c78848d93794b9118dd03b99","modified":1586108677392},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx3.png","hash":"192a7ab1f6411b166deb64d38ed67f2dbfffab50","modified":1586108677392},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx2.png","hash":"07f4fb4a584c4ae7be2aa5256eaceb9aad03cdb9","modified":1586108677392},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx6.png","hash":"e72cec49c559744899d5a23f0bfa30f4356045cf","modified":1586108677392},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx5.png","hash":"8baae467c558711224feb2c241012bdc46004716","modified":1586108677392},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx4.png","hash":"192a7ab1f6411b166deb64d38ed67f2dbfffab50","modified":1586108677392},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx8.png","hash":"fdb356e7d6388d858f9b861d95062ed72274400d","modified":1586108677392},{"_id":"source/_posts/2020-03-22-echarts-/tree-bug1.gif","hash":"7e1143cb1125a5289dabf1e5c8b2243eaa2cea3d","modified":1586108677396},{"_id":"source/_posts/2020-04-16-/dev-tools.png","hash":"b529d71e083d91f52eba17b90d1ebeeb89374475","modified":1587094240633},{"_id":"source/_posts/2020-07-17-Electronsmb/smb_login.jpg","hash":"81e82333a656fbf309920825555516e033c54dbf","modified":1592795005373},{"_id":"source/_posts/2020-07-17-Electronsmb/smb_upload_now.jpg","hash":"4b28118688f086ab9e11c90b79e1073598305aa6","modified":1597749125199},{"_id":"source/_posts/2020-08-16-Electronsmb/inspect.jpg","hash":"db57826656845f6533b405ae8b9fbd654235dc0c","modified":1597749125199},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-14.png","hash":"33615ccf60fa2adb47aa70113e00030ddc84cd76","modified":1586108677376},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-5.png","hash":"793113383ec939091149fdbda57e7ffb1be2be9b","modified":1586108677376},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-7.png","hash":"73c40e7f1f5d92baa4fee2613833b78e2efde447","modified":1586108677380},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-8.png","hash":"60000d58e2b4699fe83242c91709c87c7af06a7c","modified":1586108677380},{"_id":"source/_posts/2020-03-22-echarts-/tree-bug-fix.gif","hash":"879461e9e878149d4275058d141c4501776c2350","modified":1586108677396},{"_id":"source/_posts/2020-08-16-Electronsmb/upload_performance.jpg","hash":"b5f5e38a9e7bfa908345bac9dd4fbd3dc29b6149","modified":1597749125199},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx7.png","hash":"699ca58d9abc07172b853d85230691bc95359a8b","modified":1586108677392},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx10.png","hash":"699ca58d9abc07172b853d85230691bc95359a8b","modified":1586108677392},{"_id":"source/_posts/2020-03-22-echarts-/tree-bug2.gif","hash":"027471c8f8c9f81eec010d1f64aa9abff423e59c","modified":1586108677396},{"_id":"source/_posts/2020-08-16-Electronsmb/smb_upload_now.jpg","hash":"4b28118688f086ab9e11c90b79e1073598305aa6","modified":1597544448899},{"_id":"source/_posts/2018-11-05-Javascript/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1541385112472},{"_id":"source/_posts/2017-10-21-sass/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1508555305352},{"_id":"source/_posts/2018-10-31-ES5ES6Promise/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1540953612772},{"_id":"source/_posts/2018-11-06-Javascripttootips/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1541472079000},{"_id":"source/_posts/2019-04-04-proxychains/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1554347300606},{"_id":"source/_posts/2019-04-04-LinuxMint18/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1554347011943},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-6.png","hash":"0a9748216e91b802bf53cc5b589f7557af46d58c","modified":1586108677376},{"_id":"source/_posts/2019-09-29-y7000ubuntu18-04/Desktop3.png","hash":"aed0dbf83defa9800c0ab059d17e9c4040f94c4b","modified":1586108677368},{"_id":"source/_posts/2019-09-29-y7000ubuntu18-04/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1569724414852},{"_id":"source/_posts/2019-10-01-poliposhadowsocks/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1569899305756},{"_id":"source/_posts/2020-03-07-s3Javascript/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1541385111520},{"_id":"source/_posts/2020-04-16-/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1587004637884},{"_id":"source/_posts/2018-07-09-Js/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1531105761640},{"_id":"source/_posts/2019-06-12-Ubuntu18/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1560309174751},{"_id":"source/_posts/2019-09-29-y7000ubuntu18-04/Desktop2.png","hash":"7bb9f6713506e7a4a57def450ea0f7f01c894fb0","modified":1586108677364},{"_id":"source/_posts/2019-10-26-Electron-Mobx-React/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1572058388304},{"_id":"source/_posts/2019-11-14-DockerTimWechat/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1573699573044},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1571021662460},{"_id":"source/_posts/2020-03-22-echarts-/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1584845256319},{"_id":"source/_posts/2020-03-26-s3Javascript/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1541385109688},{"_id":"source/_posts/2020-08-16-Electronsmb/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1597544422436},{"_id":"source/_posts/2018-11-05-Javascript/animation.gif","hash":"77eadaec7549bb72c597258999dc2e065eadc19b","modified":1586108677384},{"_id":"source/_posts/2019-09-29-y7000ubuntu18-04/Desktop.png","hash":"a2214d606233f1b469428dc445f2ec2f1f8b5088","modified":1586108677360},{"_id":"source/_posts/2019-04-04-LinuxMint18/city.jpg","hash":"08717680f36945972e73560f62de5b4ff1334bd4","modified":1598411112966},{"_id":"source/_posts/2018-07-09-Js/waterfall-1.gif","hash":"5c2321cba8e414d902be7e4ae403d2a12ac814d0","modified":1586108677404},{"_id":"public/archives/2017/index.html","hash":"dbe2ea9845090f350079a85270227d4156a4ead7","modified":1601004624321},{"_id":"public/archives/2017/10/index.html","hash":"d64ca3c76d47e5d1fc449bf913fefcb67e74d43d","modified":1601004624321},{"_id":"public/archives/2018/07/index.html","hash":"4757d6c82359ece32310acdeaa82bcc8e6a94344","modified":1601004624321},{"_id":"public/archives/2019/04/index.html","hash":"fa1f2d4be83d7580dd8610da3497238317272445","modified":1601004624321},{"_id":"public/archives/2019/06/index.html","hash":"b416b69e9193524d21dc4a07af161c3a90083c8c","modified":1601004624321},{"_id":"public/2020/04/16//index.html","hash":"df19e92658773af122961c74cc22ab3f17181186","modified":1598838823257},{"_id":"public/2020/03/26/s3Javascript/index.html","hash":"6bf32b0194bd6098a1fdbd28b96dbbbc5a236329","modified":1598838823257},{"_id":"public/2020/03/07/s3Javascript/index.html","hash":"9eeb5af26c298c99ee2071c71675017d363e8b60","modified":1598838823257},{"_id":"public/2019/11/14/DockerTimWechat/index.html","hash":"16be636bf4ca9a67d1fae365e54e244e8f9fd30d","modified":1598838823257},{"_id":"public/2019/10/26/Electron-Mobx-React/index.html","hash":"b3322e46b98744f6b26c54165e0aa8bb97f53421","modified":1598838823257},{"_id":"public/2019/10/14/Electron-Mobx-React/index.html","hash":"b7d3941119464e55316dfe3d3398f9c4f3882405","modified":1598838823257},{"_id":"public/2019/10/01/poliposhadowsocks/index.html","hash":"8b6dbd322749c78b64b729311330f440f962eb38","modified":1598838823257},{"_id":"public/2019/06/12/Ubuntu18/index.html","hash":"b2652f5067083ee1468cec1fee70c3cd427418e4","modified":1601004624321},{"_id":"public/2019/04/04/LinuxMint18/index.html","hash":"bebac9d85456b5c116fdf52595961fc82efa5cb1","modified":1598838823257},{"_id":"public/2019/04/04/proxychains/index.html","hash":"3740e8932f3109bfd0b70ebae63d0209c6b0b6c7","modified":1598838823257},{"_id":"public/2018/07/09/Js/index.html","hash":"aae74fcf0d9bdb11959ad78894c979461dee0f0e","modified":1598838823257},{"_id":"public/2017/10/21/sass/index.html","hash":"b2ad362c73f2a700564ff4e45f06ea7e196c7de8","modified":1598838823257},{"_id":"public/2020/07/17/Electronsmb/smb_share_mount.jpg","hash":"c7e50f9e772a8f63ab6eba41f3807de2ead168ff","modified":1598414748252},{"_id":"public/2020/07/17/Electronsmb/smb_share.jpg","hash":"fa1a4abeee04e649d6a0d531e217fca9423617ad","modified":1598414748252},{"_id":"public/2020/07/17/Electronsmb/electron-lang.png","hash":"8f7cdef3e08c86e11b484c9f14c1a7c4506d5fb4","modified":1598414748252},{"_id":"public/2020/08/16/Electronsmb/electron1.png","hash":"4d4f8ed9bfcad27f57b6e95c4177c5a168333bbf","modified":1598414748252},{"_id":"public/2020/08/16/Electronsmb/refreshTasks.jpg","hash":"0828e8df96c07b5fae359beeabb465bec4520039","modified":1598414748252},{"_id":"public/2020/03/26/s3Javascript/upload.png","hash":"2ff71d516e47ee8826ecda7484b454cb7d3e719f","modified":1598414748252},{"_id":"public/2020/03/26/s3Javascript/node_pipe.png","hash":"a0c7d4ea6c5ccc5d63072c7637a2db520cffd15a","modified":1598414748252},{"_id":"public/2020/03/07/s3Javascript/upload.png","hash":"2ff71d516e47ee8826ecda7484b454cb7d3e719f","modified":1598414748252},{"_id":"public/2020/04/16//dev-tools-storage2.png","hash":"28ddb3518ae6fb334a9887e428cfcdc244f9023a","modified":1598414748252},{"_id":"public/2020/03/22/echarts-/snapshot.png","hash":"a61b806568c481c22884194c46f08cb09bdc1341","modified":1598414748252},{"_id":"public/2020/03/22/echarts-/snapshot_select.png","hash":"59ceff5d623013fa4306ab119471e710cf0aee19","modified":1598414748252},{"_id":"public/2020/03/22/echarts-/tree-1.png","hash":"d2a4646a6b46ac6e8be2865846c46c313dcce545","modified":1598414748252},{"_id":"public/2020/03/22/echarts-/tree-2.png","hash":"ca0e1f8ea884f485deb8c311ac31b6574c89f877","modified":1598414748252},{"_id":"public/2020/03/22/echarts-/tree-3.png","hash":"e6a43aeb341590efe6ae5dd852c3fc01e1d7862f","modified":1598414748252},{"_id":"public/2020/03/22/echarts-/tree-5.png","hash":"ce6c867bdd0000e4aeeb4929e642fee215a381d1","modified":1598414748252},{"_id":"public/2020/03/22/echarts-/tree-6.png","hash":"638fa008070bcc259543193a99b7612a5b2fcae3","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/Ubuntu18.04-11.png","hash":"8ae8ed9c52709ffdde63ef92ed26578e87e05cce","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/Ubuntu18.04-13.png","hash":"2f929624df2751c01731ed1ba21cda2ffb7d7092","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/Ubuntu18.04-2.png","hash":"63ab9b51046225b0846b88664d90cacc1db4aab3","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/Ubuntu18.04-3.png","hash":"f331b6722e7cf2035e00f1dd307c58a2379b0c7f","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/smb_dir.jpg","hash":"0325c01b5c156a999e6499ae6542c52da0e9fa60","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/smb_node.jpg","hash":"8a77594e5de48f3a576c65f0569df79adc4eb166","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/smb_node_conf.jpg","hash":"d969603b0b6bdd94fa6a811f8ed2908016940150","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/smb_shutdown.jpg","hash":"0477fa80186bd539ca4400ceedb341548aaadca8","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/waterfall-2.jpg","hash":"bbdda0636779d855dc2ba622ec673566980aa6d4","modified":1598414748252},{"_id":"public/2020/07/17/Electronsmb/smb_upload_record.jpg","hash":"6639dd243cb6ab18fa50babdf896791cda13e13c","modified":1598414748252},{"_id":"public/2020/07/17/Electronsmb/shards_upload.jpg","hash":"820d03c9acfc4e4d4c86fee633e5cb30fa599aa1","modified":1598414748252},{"_id":"public/2020/08/16/Electronsmb/shards_upload.jpg","hash":"820d03c9acfc4e4d4c86fee633e5cb30fa599aa1","modified":1598414748252},{"_id":"public/2020/08/16/Electronsmb/upload_memory.jpg","hash":"ae124eef6ab63572a91470f39179539f4bcdb0a0","modified":1598414748252},{"_id":"public/2020/08/16/Electronsmb/chromium.jpg","hash":"a5e193b840a4876e4ff89cae0e277d2ef8b5e74f","modified":1598414748252},{"_id":"public/2020/08/16/Electronsmb/inspect.jpg","hash":"34b28afb1eda26e0de0685303adda4e23f345034","modified":1598414748252},{"_id":"public/2020/03/07/s3Javascript/shards_upload.jpg","hash":"820d03c9acfc4e4d4c86fee633e5cb30fa599aa1","modified":1598414748252},{"_id":"public/2020/04/16//dev-tools-storage.png","hash":"a8ab0ed159f7fd01bf9c06a1577d1a72f3926ea4","modified":1598414748252},{"_id":"public/2020/04/16//dev-tools-debug.png","hash":"71e80f527196cac384e1e27e1eb0c66756758ce8","modified":1598414748252},{"_id":"public/2018/10/31/ES5ES6Promise/lifeIsStrange.jpg","hash":"01e12f5319efa056db6cd359d9bf820079bf69c3","modified":1598414748252},{"_id":"public/2018/11/06/Javascripttootips/tootips.gif","hash":"f4e99222e5a3e3f2070fd5a613172fe44f84334c","modified":1603350769438},{"_id":"public/2020/03/22/echarts-/tree-4.png","hash":"31fcb86c18de952e529bb885fb24291639881004","modified":1598414748252},{"_id":"public/2019/10/26/Electron-Mobx-React/Fly.jpg","hash":"88fbee27cef45dfe26b5fb0b084313fa8887b5b6","modified":1598414748252},{"_id":"public/2019/10/14/Electron-Mobx-React/Fly.jpg","hash":"88fbee27cef45dfe26b5fb0b084313fa8887b5b6","modified":1598414748252},{"_id":"public/2019/10/14/Electron-Mobx-React/mobx9.png","hash":"0c1433628cd9227b7cb07753a1ed79a36e8125a1","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/waterfall-3.jpg","hash":"e9ae0afb7829e68a8f46ffada84373ae026cf787","modified":1598414748252},{"_id":"public/2020/07/17/Electronsmb/smb_upload_now.jpg","hash":"d43f109ef737abb7c64b93cc22f2fbc3b01d6694","modified":1598414748252},{"_id":"public/2020/08/16/Electronsmb/upload_performance.jpg","hash":"5fc16ee3f4e5162175e897f71efed5300dd3fce6","modified":1598414748252},{"_id":"public/2020/04/16//dev-tools.png","hash":"c6e411f871e7da6425839dade6496fefb48e99ad","modified":1598414748252},{"_id":"public/2020/03/22/echarts-/tree-bug1.gif","hash":"80dcce41f18fb541e51e5cf40b8f53a39723b6fd","modified":1598414748252},{"_id":"public/2020/03/22/echarts-/tree-bug-fix.gif","hash":"fccce7b27fb8fc4362c2b27c0a84939dcd7bf702","modified":1598414748252},{"_id":"public/2019/10/14/Electron-Mobx-React/mobx1.png","hash":"899db5dde67d4417c78848d93794b9118dd03b99","modified":1598414748252},{"_id":"public/2019/10/14/Electron-Mobx-React/mobx2.png","hash":"07f4fb4a584c4ae7be2aa5256eaceb9aad03cdb9","modified":1598414748252},{"_id":"public/2019/10/14/Electron-Mobx-React/mobx3.png","hash":"192a7ab1f6411b166deb64d38ed67f2dbfffab50","modified":1598414748252},{"_id":"public/2019/10/14/Electron-Mobx-React/mobx4.png","hash":"192a7ab1f6411b166deb64d38ed67f2dbfffab50","modified":1598414748252},{"_id":"public/2019/10/14/Electron-Mobx-React/mobx5.png","hash":"8baae467c558711224feb2c241012bdc46004716","modified":1598414748252},{"_id":"public/2019/10/14/Electron-Mobx-React/mobx6.png","hash":"e72cec49c559744899d5a23f0bfa30f4356045cf","modified":1598414748252},{"_id":"public/2019/10/14/Electron-Mobx-React/mobx8.png","hash":"fdb356e7d6388d858f9b861d95062ed72274400d","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/Ubuntu18.04-1.jpg","hash":"2f2a11b7d0fddda07c17e99be43633f23b6583a3","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/Ubuntu18.04-10.png","hash":"c869b15cada3d4690f2bdd695e4486d8db277b13","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/Ubuntu18.04-12.png","hash":"9530e2c1ea32225e8674ca2fa296c0f80e450157","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/Ubuntu18.04-9.png","hash":"a863261a9a1730c361887d336738a414c2f0a53f","modified":1598414748252},{"_id":"public/2020/07/17/Electronsmb/smb_login.jpg","hash":"3a161d6d5e04e2f1a5dd3deca30f1e69ef0ebf8d","modified":1598414748252},{"_id":"public/2020/08/16/Electronsmb/smb_upload_now.jpg","hash":"d43f109ef737abb7c64b93cc22f2fbc3b01d6694","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/Ubuntu18.04-14.png","hash":"33615ccf60fa2adb47aa70113e00030ddc84cd76","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/Ubuntu18.04-5.png","hash":"793113383ec939091149fdbda57e7ffb1be2be9b","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/Ubuntu18.04-7.png","hash":"73c40e7f1f5d92baa4fee2613833b78e2efde447","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/Ubuntu18.04-8.png","hash":"60000d58e2b4699fe83242c91709c87c7af06a7c","modified":1598414748252},{"_id":"public/2019/10/14/Electron-Mobx-React/mobx7.png","hash":"699ca58d9abc07172b853d85230691bc95359a8b","modified":1598414748252},{"_id":"public/2019/10/14/Electron-Mobx-React/mobx10.png","hash":"699ca58d9abc07172b853d85230691bc95359a8b","modified":1598414748252},{"_id":"public/2020/03/22/echarts-/tree-bug2.gif","hash":"98e1fbff38cd13d7c03ef84e00c6c9be54735f79","modified":1598414748252},{"_id":"public/2018/07/09/Js/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2019/09/29/y7000ubuntu18-04/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2019/09/29/y7000ubuntu18-04/Desktop2.png","hash":"7bb9f6713506e7a4a57def450ea0f7f01c894fb0","modified":1598414748252},{"_id":"public/2020/04/16//article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2018/11/06/Javascripttootips/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2019/11/14/DockerTimWechat/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2020/03/22/echarts-/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2019/10/26/Electron-Mobx-React/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2019/10/14/Electron-Mobx-React/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2019/04/04/proxychains/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2017/10/21/sass/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2019/10/01/poliposhadowsocks/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2019/06/12/Ubuntu18/Ubuntu18.04-6.png","hash":"0a9748216e91b802bf53cc5b589f7557af46d58c","modified":1598414748252},{"_id":"public/2018/11/05/Javascript/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2019/09/29/y7000ubuntu18-04/Desktop3.png","hash":"aed0dbf83defa9800c0ab059d17e9c4040f94c4b","modified":1598414748252},{"_id":"public/2019/04/04/LinuxMint18/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2020/08/16/Electronsmb/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2020/03/26/s3Javascript/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2019/09/29/y7000ubuntu18-04/Desktop.png","hash":"bd72f21f3745cbf2a38590a3fecd646a629046f5","modified":1598414748252},{"_id":"public/2018/10/31/ES5ES6Promise/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2020/03/07/s3Javascript/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598414748252},{"_id":"public/2018/11/05/Javascript/animation.gif","hash":"97e7d2d42f4f26a78c1fba1694a920e2a6c2a6a7","modified":1598414748252},{"_id":"public/2019/04/04/LinuxMint18/city.jpg","hash":"f0df33064389912f2d01a2c50353864ae71fa6d3","modified":1598414748252},{"_id":"public/2018/07/09/Js/waterfall-1.gif","hash":"5c2321cba8e414d902be7e4ae403d2a12ac814d0","modified":1598414748252},{"_id":"source/_posts/2020-08-28-Antd.md","hash":"5e86761b71b849c46692ee6330668a5cafbc210c","modified":1598618140156},{"_id":"source/_posts/2020-08-28-Antd/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598602967832},{"_id":"public/2020/08/28/Antd/index.html","hash":"30e74136d45e9a93fe6de3997e4bb6032c5b6cef","modified":1601004624321},{"_id":"public/categories/Antd/index.html","hash":"fa0de37487d1e0ba2cb3ccd5c23f187954d1232e","modified":1601004624321},{"_id":"public/categories/Antd/React/index.html","hash":"164e092e551ac3a8c7977bce7f3da135411170de","modified":1601004624321},{"_id":"public/tags/antd/index.html","hash":"8223ee5e47cbd1cf9aef67bf3fe5b029f14fe979","modified":1601004624321},{"_id":"public/tags/tree/index.html","hash":"6d5b4585203440df41b97a1625de6526797c2dfc","modified":1601004624321},{"_id":"public/2020/08/28/Antd/article_header.png","hash":"fee615297fb2192db3c60ac731305a5b097abbc0","modified":1598614363377},{"_id":"source/_posts/2020-08-28-Antd/editable_tree.png","hash":"4e86bedd29a61a64d3a57874d84d68c95775b8ad","modified":1598615618130},{"_id":"source/_posts/2020-08-28-Antd/tree_add_sister.png","hash":"d47b4155c0ee8da2fc1cd0f143f531b31e8f9ee1","modified":1598615552654},{"_id":"source/_posts/2020-08-28-Antd/tree_add_sub.png","hash":"d94d138d96bbe1189a14507a7a47a22559f45eda","modified":1598615572004},{"_id":"source/_posts/2020-08-28-Antd/tree_in_edit.png","hash":"810de9a401ad819946b29c5fba314bc92d230436","modified":1598615588440},{"_id":"public/2020/08/28/Antd/editable_tree.png","hash":"1932bc29d5232e1b728be4d69d4bfdbd99a965da","modified":1598618176849},{"_id":"public/2020/08/28/Antd/tree_add_sister.png","hash":"6163234ae4d920ed17bcbecd1abf5dc0e9e1856e","modified":1598618176849},{"_id":"public/2020/08/28/Antd/tree_add_sub.png","hash":"038cb858f74c7dccfb53df5336749aadeb53e074","modified":1598618176849},{"_id":"public/2020/08/28/Antd/tree_in_edit.png","hash":"43e8b4da5bacb46c3ee7497db4521761a22d7178","modified":1598618176849},{"_id":"source/_posts/2020-09-25-32JS.md","hash":"78af72ba6f21a754a66c85fb4c5bec3495cfe17f","modified":1601004191353},{"_id":"public/archives/archives/3/index.html","hash":"35369f79b8471a39281e4b6d52fd7817e52d906a","modified":1601004624321},{"_id":"public/archives/2020/09/index.html","hash":"da7c7db79bd8e69c2ab4e628f09c1864990cb465","modified":1601004624321},{"_id":"public/categories/Js/index.html","hash":"addbf5188fa808617927539f51efaf463271c1af","modified":1601004624321},{"_id":"public/tags/js/index.html","hash":"05f3514af2b69dcac31c113cd4ae4d771413db51","modified":1601004624321},{"_id":"public/2020/09/25/32JS/index.html","hash":"26f9462ef7fe872efc08d8c14b9ba30717b6f64d","modified":1601004624321},{"_id":"source/_posts/2018-11-06-Javascripttootips/tootip.png","hash":"8ce8a1c43017dc63f72082da4d798cb9349cfe0c","modified":1603351087843},{"_id":"public/2018/11/06/Javascripttootips/tootip.png","hash":"0c3b8c8840a7c78b05c30475f95b1e462af65a9c","modified":1603351183313}],"Category":[{"name":"hexo","_id":"ckba5wfo50004sz95ei0u0hom"},{"name":"Javascript","_id":"ckbag369m0000ct953vhx5d2d"},{"name":"Node","parent":"ckbag369m0000ct953vhx5d2d","_id":"ckbag369o0001ct95elga18d7"},{"name":"Linux","_id":"ckbag3lfz0005ct955kov8vwh"},{"name":"Sass","_id":"ckbag3lg30007ct95eh3afdzg"},{"name":"Tools","_id":"ckbag3lg70009ct950m4cdmtz"},{"name":"Electron","_id":"ckbag3lga000cct953dkafzl4"},{"name":"Mobx","_id":"ckbag3lgm000jct95b66dee2o"},{"name":"Echarts","_id":"ckbag3lgp000mct959740913n"},{"name":"Electron","parent":"ckbag3lgm000jct95b66dee2o","_id":"ckbag3lgq000oct959y2h7p3l"},{"name":"client","_id":"ckc5wvhh900015a957a3ncf8v"},{"name":"electron","_id":"ckdwnl8pc000h0gi06f2pf64p"},{"name":"Antd","_id":"ckee5ptxb0001q595dvkeb3gs"},{"name":"React","parent":"ckee5ptxb0001q595dvkeb3gs","_id":"ckee5ptxg0004q59578139quh"},{"name":"Js","_id":"ckfhotf3d0001jy953fgj1gtp"}],"Data":[],"Page":[{"layout":"404","description":" :(","header-img":"img/404-bg.jpg","_content":"","source":"404.md","raw":"---\nlayout: 404\ndescription: \" :(\"\nheader-img: \"img/404-bg.jpg\"\n---\n","date":"2020-06-11T02:22:00.651Z","updated":"2020-06-11T02:22:00.651Z","path":"404.html","title":"","comments":1,"_id":"ckba5wfnv0000sz95gvi18hjd","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"about","title":"About","date":"2017-10-03T02:48:33.000Z","description":"","header-img":"img/header_img/about.jpg","aplayer":true,"comments":0,"_content":"\n### \n\n>Style hungry, Stay foolish.\n\n### \n\n>Coder: .\n>Photograher: .\n>Gamer: Xbox One X .\n\n### \n\n> Javascript/Electron/Linux\n\n### \n\n > :https://www.jianshu.com/u/d5c8b784c1d0\n >\n > Github:https://github.com/NoJSJa\n\n### \n\n>Email: yangwei13@outlook.com\n\n","source":"about/index.md","raw":"---\nlayout: \"about\"\ntitle: \"About\"\ndate: 2017-10-03 10:48:33\ndescription: \"\"\nheader-img: \"img/header_img/about.jpg\"\naplayer: true\ncomments: false\n---\n\n### \n\n>Style hungry, Stay foolish.\n\n### \n\n>Coder: .\n>Photograher: .\n>Gamer: Xbox One X .\n\n### \n\n> Javascript/Electron/Linux\n\n### \n\n > :https://www.jianshu.com/u/d5c8b784c1d0\n >\n > Github:https://github.com/NoJSJa\n\n### \n\n>Email: yangwei13@outlook.com\n\n","updated":"2020-08-21T07:58:24.727Z","path":"about/index.html","_id":"ckba5wfo30002sz9531gl6t7r","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote><p>Style hungry, Stay foolish.</p></blockquote><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote><p>Coder: .<br>Photograher: .<br>Gamer: Xbox One X .</p></blockquote><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote><p>Javascript/Electron/Linux</p></blockquote><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote><p>:<a href=\"https://www.jianshu.com/u/d5c8b784c1d0\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/u/d5c8b784c1d0</a></p><p>Github:<a href=\"https://github.com/NoJSJa\" target=\"_blank\" rel=\"noopener\">https://github.com/NoJSJa</a></p></blockquote><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote><p>Email: yangwei13@outlook.com</p></blockquote>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote><p>Style hungry, Stay foolish.</p></blockquote><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote><p>Coder: .<br>Photograher: .<br>Gamer: Xbox One X .</p></blockquote><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote><p>Javascript/Electron/Linux</p></blockquote><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote><p>:<a href=\"https://www.jianshu.com/u/d5c8b784c1d0\" target=\"_blank\" rel=\"noopener\">https://www.jianshu.com/u/d5c8b784c1d0</a></p><p>Github:<a href=\"https://github.com/NoJSJa\" target=\"_blank\" rel=\"noopener\">https://github.com/NoJSJa</a></p></blockquote><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><blockquote><p>Email: yangwei13@outlook.com</p></blockquote>"},{"layout":"archive","title":"Archives","header-img":"img/header_img/archive-bg.jpg","comments":0,"date":"2017-03-20T12:49:56.000Z","description":"Have goals that are actually meaningful to all of your brain, not just a piece, and immerse yourself in whatever it is you do.","_content":"","source":"archive/index.md","raw":"---\nlayout: \"archive\"\ntitle: \"Archives\"\nheader-img: \"img/header_img/archive-bg.jpg\"\ncomments: false\ndate: 2017-03-20 20:49:56\ndescription: \"Have goals that are actually meaningful to all of your brain, not just a piece, and immerse yourself in whatever it is you do.\"\n---\n","updated":"2020-06-11T02:22:00.663Z","path":"archive/index.html","_id":"ckba5wfo40003sz95405ra6ll","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"categories","title":"Categories","header-img":"img/header_img/categories-bg.jpg","comments":0,"date":"2017-03-20T12:49:56.000Z","description":"Approach the New Year with resolve to find the opportunities hidden in each new day.","_content":"","source":"categories/index.md","raw":"---\nlayout: \"categories\"\ntitle: \"Categories\"\nheader-img: \"img/header_img/categories-bg.jpg\"\ncomments: false\ndate: 2017-03-20 20:49:56\ndescription: \"Approach the New Year with resolve to find the opportunities hidden in each new day.\"\n---\n","updated":"2020-06-11T02:22:00.663Z","path":"categories/index.html","_id":"ckba5wfo70006sz95aqdmaf3f","content":"","site":{"data":{}},"excerpt":"","more":""},{"layout":"photography","title":"Photography","date":"2019-12-08T12:48:22.000Z","description":"The greatness of photography is to fix the moment into eternity, Attach importance to surprise you inadvertently, this is one of the photography's charm!","header-img":"img/header_img/photography-bg.jpeg","comments":1,"_content":"![](photo/wx.jpeg)\n<strong></strong>\n<em>Shoot by dusign on 2019-12-08</em>\n<span></span>","source":"photography/index.md","raw":"---\nlayout: \"photography\"\ntitle: \"Photography\"\ndate: 2019-12-08 20:48:22\ndescription: \"The greatness of photography is to fix the moment into eternity, Attach importance to surprise you inadvertently, this is one of the photography's charm!\"\nheader-img: \"img/header_img/photography-bg.jpeg\"\ncomments: true\n---\n![](photo/wx.jpeg)\n<strong></strong>\n<em>Shoot by dusign on 2019-12-08</em>\n<span></span>","updated":"2020-06-11T05:55:42.303Z","path":"photography/index.html","_id":"ckba5wfo80007sz957005eyof","content":"<p><img src=\"photo/wx.jpeg\" alt=\"\"><br><strong></strong><br><em>Shoot by dusign on 2019-12-08</em><br><span></span></p>\n","site":{"data":{}},"excerpt":"","more":"<p><img src=\"photo/wx.jpeg\" alt=\"\"><br><strong></strong><br><em>Shoot by dusign on 2019-12-08</em><br><span></span></p>\n"},{"layout":"tags","title":"Tags","description":"One way to get the most out of life is to look upon it as an adventure.","header-img":"img/header_img/tag-bg.jpg","_content":"","source":"tags/index.md","raw":"---\nlayout: \"tags\"\ntitle: \"Tags\"\ndescription: \"One way to get the most out of life is to look upon it as an adventure.\"\nheader-img: \"img/header_img/tag-bg.jpg\"\n---\n","date":"2020-06-11T02:22:00.755Z","updated":"2020-06-11T02:22:00.755Z","path":"tags/index.html","comments":1,"_id":"ckba5wfob000asz9509pz7syt","content":"","site":{"data":{}},"excerpt":"","more":""},{"_content":"name: Sync\n\non:\n  push:\n    branches: [ master ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n    - name: Sync to Gitee\n      uses: wearerequired/git-mirror-action@master\n      env:\n          #  Settings->Secrets  GITEE_RSA_PRIVATE_KEY\n          SSH_PRIVATE_KEY: ${{ secrets.GITEE_RSA_PRIVATE_KEY }}\n      with:\n          #  GitHub \n          source-repo: \"git@github.com:NoJsJa/blogs.git\"\n          #  Gitee \n          destination-repo: \"git@gitee.com:nojsja/blogs.git\"\n\n    - name: Build Gitee Pages\n      uses: yanglbme/gitee-pages-action@master\n      with:\n          #  Gitee \n          gitee-username: nojsja\n          #  Settings->Secrets  GITEE_PASSWORD\n          gitee-password: ${{ secrets.GITEE_PASSWORD }}\n          #  Gitee \n          gitee-repo: nojsja/blogs\n","source":".github/workflows/sync.yml","raw":"name: Sync\n\non:\n  push:\n    branches: [ master ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n    steps:\n    - name: Sync to Gitee\n      uses: wearerequired/git-mirror-action@master\n      env:\n          #  Settings->Secrets  GITEE_RSA_PRIVATE_KEY\n          SSH_PRIVATE_KEY: ${{ secrets.GITEE_RSA_PRIVATE_KEY }}\n      with:\n          #  GitHub \n          source-repo: \"git@github.com:NoJsJa/blogs.git\"\n          #  Gitee \n          destination-repo: \"git@gitee.com:nojsja/blogs.git\"\n\n    - name: Build Gitee Pages\n      uses: yanglbme/gitee-pages-action@master\n      with:\n          #  Gitee \n          gitee-username: nojsja\n          #  Settings->Secrets  GITEE_PASSWORD\n          gitee-password: ${{ secrets.GITEE_PASSWORD }}\n          #  Gitee \n          gitee-repo: nojsja/blogs\n","date":"2020-08-25T05:58:33.206Z","updated":"2020-08-25T05:58:33.206Z","path":".github/workflows/sync.json","layout":"false","_id":"cke2egsew0000jh95djc65q2c","title":"","comments":1,"content":"{\"name\":\"Sync\",\"on\":{\"push\":{\"branches\":[\"master\"]}},\"jobs\":{\"build\":{\"runs-on\":\"ubuntu-latest\",\"steps\":[{\"name\":\"Sync to Gitee\",\"uses\":\"wearerequired/git-mirror-action@master\",\"env\":{\"SSH_PRIVATE_KEY\":\"$\"},\"with\":{\"source-repo\":\"git@github.com:NoJsJa/blogs.git\",\"destination-repo\":\"git@gitee.com:nojsja/blogs.git\"}},{\"name\":\"Build Gitee Pages\",\"uses\":\"yanglbme/gitee-pages-action@master\",\"with\":{\"gitee-username\":\"nojsja\",\"gitee-password\":\"$\",\"gitee-repo\":\"nojsja/blogs\"}}]}}}","site":{"data":{}},"excerpt":"","more":"{\"name\":\"Sync\",\"on\":{\"push\":{\"branches\":[\"master\"]}},\"jobs\":{\"build\":{\"runs-on\":\"ubuntu-latest\",\"steps\":[{\"name\":\"Sync to Gitee\",\"uses\":\"wearerequired/git-mirror-action@master\",\"env\":{\"SSH_PRIVATE_KEY\":\"$\"},\"with\":{\"source-repo\":\"git@github.com:NoJsJa/blogs.git\",\"destination-repo\":\"git@gitee.com:nojsja/blogs.git\"}},{\"name\":\"Build Gitee Pages\",\"uses\":\"yanglbme/gitee-pages-action@master\",\"with\":{\"gitee-username\":\"nojsja\",\"gitee-password\":\"$\",\"gitee-repo\":\"nojsja/blogs\"}}]}}}"}],"Post":[{"title":"Electronsmb","catalog":true,"toc_nav_num":true,"date":"2020-07-17T07:59:00.000Z","subtitle":"smb samba client","header-img":"article_header.png","updateDate":"2020-07-17T07:59:00.000Z","top":null,"_content":"\n\n### \n---------------\nsmbwindowssmbelectronwebElectronjson[lowdb](https://github.com/typicode/lowdb)\n\n[DEMO](https://github.com/NoJsJa/electron-react-template)\n\n### \n---------------\n\n#### \n\n1. ()\n2. \n3. ping\n4. ID\n\nIPjson\n\n![RhinoDisk](smb_node.jpg)\n\n![RhinoDisk](smb_node_conf.jpg)\n\n#### \n\n1. \n2. \n3. QQ\n\nsmbaccess_token(smbtoken)json\n\n![RhinoDisk](smb_login.jpg)\n\n#### \n\n1. windowssmbwindows\n2. C-Z\n\nwindowssmbwindows windows cmd\n\n![RhinoDisk](smb_share.jpg)\n![RhinoDisk](smb_share_mount.jpg)\n\n#### \n\n1. \n2. \n3. ()\n4. \n\njsonjson\n\n![RhinoDisk](smb_upload_now.jpg)\n![RhinoDisk](smb_upload_record.jpg)\n\n### \n-----------\n\n#### \n\nlang\n\n![lang](electron-lang.png)\n\n```js\nconst fs = require('fs');\nconst path = require('path');\nconst { app } = require('electron');\n\n/**\n * global.lang -- \n * global.LANG -- (en_us, zh_cn, zh_tw)\n * session.lang -- sessioncookie(session )\n * cookie.lang -- session.langcookie.lang\n */\nconst lang = (function lang() {\n  const defaultLang = 'zh_CN';\n\n  /* -------------------  ------------------- */\n  const getLANG = (acceptLang) => {\n    // \n    if (['en-US', 'en', 'en-us', 'en_us', 'en_US'].indexOf(acceptLang) !== -1) {\n      return 'en_us';\n    }\n    // \n    if (['zh-CN', 'zh', 'zh-cn', 'zh_cn', 'zh_CN'].indexOf(acceptLang) !== -1) {\n      return 'zh_cn';\n    } if (['zh-TW', 'zh-tw', 'zh_tw', 'zh_TW'].indexOf(acceptLang) !== -1) {\n      return 'zh_tw';\n    // \n    }\n    return 'zh_cn';\n  };\n\n  /* -------------------  ------------------- */\n  const setLang = (langEnv) => {\n    global.lang = global.lang ? global.lang : {};\n    global.LANG = langEnv;\n\n    // \n    fs.readdir(path.join(app.getAppPath(), 'app/lang', langEnv), (err, files) => {\n      if (err) {\n        console.error(err);\n        return;\n      }\n      files.forEach((file) => {\n        global.lang[path.basename(file)] = require(path.join(app.getAppPath(), 'app/lang', langEnv, file));\n      });\n    });\n  };\n\n  return (acceptLang) => {\n    const _lang = getLANG(acceptLang || defaultLang);\n    if (global.LANG && global.LANG == _lang) {\n      return;\n    }\n    // \n    setLang(_lang);\n  };\n}());\n\nmodule.exports = lang;\n\n```\n\n#### \n\nElectronTrayMenu.buildFromTemplate\n\n```js\ncontextMenu() {\n    global.appTray = new Tray(path.join(app.getAppPath(), os.type() === 'Windows_NT' ? `resources/icon_${this.envConf.work_env}.ico` : 'resources/mac_tray.png'));\n    const menu = Menu.buildFromTemplate( [\n      {\n          label: global.lang.public.quit,\n          type: 'normal',\n          click: () => {\n            this.sendToWeb('upload', {action: 'getUploadingTask'});\n            ipcMainProcess.ipc.once('upload-getUploadingTask', (event, rsp) => {\n              if (rsp.code === 200) {\n\n                  global.ipcMainWindow.sendToWeb('shell', { action: 'upload-clear' });\n                  .then(() => {\n                    global.appTray.destroy();\n                    app.quit();\n                  }).catch(() => {\n                    global.ipcMainProcess.notifySend({\n                      body: global.lang.public['data_write_failed_before_quit']\n                    });\n                  });\n                };\n                \n                if (rsp.result !== 0) {\n                  const buttonId = dialog.showMessageBoxSync(this.windowoptions, {\n                    defaultId: 0,\n                    buttons: ['No', 'Yes'],\n                    type: 'info',\n                    title: global.lang.public.tips,\n                    message: global.lang.upload.app_quit_tips\n                  });\n                  if (buttonId === 1) quitApp();\n                } else {\n                  quitApp();\n                }\n                \n              } else {\n                global.ipcMainProcess.notifySend({\n                  body: rsp.result\n                });\n              }\n            });\n          }\n        }\n    ]);\n\n    global.appTray.on('click', ()=>{    \n      this.window.show();\n    });\n    global.appTray.setToolTip('RninoDisk');\n    global.appTray.setContextMenu(menu);\n  }\n```\n\n#### Node\n\n1. ()  \nNode.js`child_process.exec` shell shell  command\n```js\nconst child = require('child_process');\n/**\n   * [exec ]\n   * @param  { [String] }  command    []\n   * @param  { [Array | String] }   params  []\n   * @param  { [Object] }  options [exec]\n   * @return { Promise }           [Promise]\n   */\nexports.exec = (_command, _params=[], _options={}) => {\n  const params = Array.isArray(_params) ? _params.join(' ') : '';\n  const options = (String(_params) === '[object Object]') ? _params : (_options);\n  const command = `${_command} ${params}`;\n  \n  console.log(params, options, command);\n\n  return new Promise((resolve, reject) => {\n    child.exec(command, options, (_err, _stdout, _stderr) => {\n      if (_err) {\n        exports.console_log(_err, 'red');\n        resolve({code: 1, result: _err});\n      } else if (_stderr && _stderr.toString()) {\n        exports.console_log(_stderr, 'red');\n        resolve({code: 1, result: _stderr});\n      } else {\n        console.log(_stdout);\n        resolve({code: 0, result: _stdout});\n      }\n    });\n  });\n}\n```\n\n2. ()  \nNode.js`child_process.exec` shell shell  command\n```js\n  const child = require('child_process');\n  /**\n   * [execRealtime ]\n   * @param  { [String] }  command    []\n   * @param  { [Array | String] }   params  []\n   * @param  { [Object] }  options [exec]\n   * @return { Promise }           [Promise]\n   */\n  exports.execRealtime = (_command, _params=[], _options={}) => {\n    const params = Array.isArray(_params) ? _params.join(' ') : '';\n    const options = (String(_params) === '[object Object]') ? _params : (_options);\n    const command = `${_command} ${params}`;\n    let data = '', error = '';\n    \n    console.log(params, options, command);\n  \n    return new Promise((resolve, reject) => {\n      const result = child.exec(command, options);\n      \n      result.stdout.on('data', (data) => {\n        exports.console_log(data, 'white');\n        data += `${data}`;\n      });\n\n      result.stderr.on('data', (data) => {\n        exports.console_log(data, 'red');\n        error += `${data}`;\n      });\n\n      result.on('close', (code) => {\n        resolve({code, result: data, error});\n      });\n    });\n  }\n\n```\n\n#### \n\n1. \n```js\n/**\n    * getSystemDriveLetter []\n    * @return {[Array]} []\n    */\n  getSystemDriveLetter() {\n    return new Promise((resolve) => {\n      this.sudo.exec('fsutil fsinfo drives', [], { encoding: 'buffer' }).then((stdout) => {\n        const driverstr = stdout;\n        const driverstrArr = driverstr.split(' ').filter(s => s !== os.EOL).map(s => s.replace('\\\\', ''));\n        const allDrivers = [\n          'C:', 'D:', 'E:', 'F:', 'G:', 'H:', 'I:', 'J:', 'K:', 'L:',\n          'M:', 'N:', 'O:', 'P:', 'Q:', 'R:', 'S:', 'T:', 'U:', 'V:',\n          'W:', 'X:', 'Y:', 'Z:'\n        ];\n        driverstrArr.shift();\n        resolve({\n          code: 200,\n          result: {\n            mounted: driverstrArr,\n            available: allDrivers.filter(d => !driverstrArr.includes(d.toLocaleUpperCase()))\n          },\n        })\n      }, (err) => {\n        console.error(err);\n        resolve({\n          code: 600,\n          result: err,\n        });\n      });\n    })\n  }\n```\n\n2. UNC\n```js\n/*  */\n_mountSystemDriver_Windows_NT({ host, driver, path, auto = false }) {\n    const pwd = global.ipcMainProcess.userModel.get('last.pwd');\n    const { isThirdUser, nickname, isLocalUser, username } = global.ipcMainProcess.userModel.info;\n    const commandUseIPC = `net use \\\\\\\\${host}\\\\ipc$ \"${pwd}\" /user:\"${username}\"`;\n    const commandMount = `net use ${driver} \\\\\\\\${host}\\\\${path} \"${pwd}\" /user:\"${username}\"`;\n    const commandUmount = `net use ${driver} /del /y`;\n\n    return new Promise((resolve, reject) => {\n      // \n      this.getSystemDriveLetter()\n        .then((rsp) => {\n          if (rsp.code === 200) {\n            if (rsp.result.mounted.includes(driver.toLocaleUpperCase())) {\n              throw new Error(global.lang.node.driver_already_mount);\n            }\n          } else {\n            throw new Error(global.lang.node.get_system_mount_info_failed);\n          }\n        })\n        // UNC\n        .then(() => {\n          return this.sudo.exec(commandUseIPC);\n        })\n        // \n        .then(() => {\n          return this.sudo.exec(commandMount);\n        })\n        // \n        .then(() => {\n          return this.update('mountPoint', { username, host, path }, {\n            username, host, path, driver, auto\n          });\n        }).then((rsp) => {\n          resolve({\n            code: 200,\n            result: {\n              username, host, driver\n            },\n          });\n        }).catch((err) => {\n          console.error(err, err.toString());\n          resolve({\n            code: 600,\n            result: global.lang.node.net_mount_failed_reason,\n          });\n        });\n    });\n  }\n```\n\n#### \n\nAWS[s3Javascript()](https://nojsja.gitee.io/blogs/2020/03/07/%E5%9F%BA%E4%BA%8Es3%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E5%A4%9A%E6%96%87%E4%BB%B6%E5%88%86%E7%89%87%E4%B8%8A%E4%BC%A0%E7%9A%84Javascript%E5%AE%9E%E7%8E%B0-%E4%B8%80/)``smb Node.js  FS APIWindows UNC`\\\\[host]\\[sharename]\\file1`\n\n\n![upload](shards_upload.jpg)\n\n##### \n\n1) `<Input />`FileList(ElectronFile`path`)  \n2) FileListFileListFile  \n3init  \n4Node.jsinit  \n5initIDNode.jsuploadID()  \n6Node.jsuploadIDFS API  \n7uploadNode.jscompleteID  \n8Node.jsID  \n9sync  \n10Node.jssync  \n\n##### Node.js(Electron)\n\n1. \n```js\n/**\n    * init []\n    * @param  {[String]} host []\n    * @param  {[String]} username []\n    * @param  {[Object]} file []\n    * @param  {[String]} abspath []\n    * @param  {[String]} sharename [smb]\n    * @param  {[String]} fragsize []\n    */\n  init({ host, file, abspath, sharename, fragsize, prefix = '' }) {\n    const pre = `\\\\\\\\${host}\\\\${sharename}`;\n    const date = Date.now();\n    const { pwd, username } = global.ipcMainProcess.userModel.info;\n    const uploadId = getStringMd5(date + file.name + file.type + file.size);\n    let remotePath = '';\n    let size = 0;\n\n    return new Promise((resolve) => {\n      // UNCsmb\n      this.uncCommandConnect({ host, username, pwd, sharename })\n        .then(() => new Promise((reso) => {\n          remotePath = path.join(pre, prefix, file.name);\n          fsPromise.unlink(path.join(pre, prefix, file.name)).then(reso).catch(reso);\n        }))\n        .then((rsp) => {\n          // \n          const dirs = getFileDirs([path.join(prefix, file.name)]);\n          return mkdirs(pre, dirs);\n        })\n        .then((rsp) => {\n          // \n          return fileBlock.open(abspath)\n        })\n        .then((rsp) => {\n          if (rsp.code === 200) {\n            // \n            return this._setUploadRecordsInMemory({\n              username,\n              host,\n              filename: path.join(prefix, file.name),\n              size: file.size,\n              fragsize,\n              sharename,\n              abspath,\n              remotePath,\n              startime: getTime(new Date().getTime()), // \n              endtime: '',\n              uploadId,\n              index: 0,\n              total: Math.ceil(size / fragsize),\n              status: 'uploading' // \n            });\n          } else {\n            resolve(rsp);\n          }\n        }).then((rsp) => {\n          resolve({\n            code: 200,\n            result: {\n              uploadId,\n              size,\n              total: Math.ceil(size / fragsize)\n            }\n          });\n        }).catch(err => {\n          resolve({\n            code: 600,\n            result: err.toString()\n          });\n        });\n    });\n  }\n```\n2. \n```js\n/**\n    * upload []\n    * @param  {[String]} index [0]\n    * @param  {[String]} uploadId [ID]\n    */\n  upload({ uploadId, index }) {\n    // \n    const record = this._getUploadRecordsInMemory(uploadId);\n    if (!record) return Promise.resolve({ code: 600, result: lang.upload.readDataFailed });\n    if (record.status !== 'uploading') return Promise.resolve({ code: 600, result: lang.upload.readDataFailed });\n\n    const { host, filename, size, sharename, fragsize, abspath, username } = record;\n    const pwd = global.ipcMainProcess.userModel.info.pwd;\n    const pre = `\\\\\\\\${host}\\\\${sharename}`;\n    const position = fragsize * (index);\n    const slicesize = ((fragsize * (index + 1)) <= size) ? fragsize : (size - fragsize * index);\n\n    return new Promise((resolve) => {\n      if (position > size) {\n        resolve({\n          code: 600,\n          result: lang.upload.upload_index_overflow\n        });\n        return;\n      }\n      // \n      fileBlock.read(abspath, position, slicesize)\n        .then(rsp => {\n          if (rsp.code === 200) {\n            // \n            fs.appendFile(path.join(pre, filename), rsp.result, { encoding: 'binary' }, (err) => {\n              if (err) {\n                // \n                checkPermission(path.join(pre, filename, '..'), 'ew', (err2, isExit, canWrite) => {\n                  if (err2) {\n                    resolve({\n                      code: 600,\n                      result: global.lang.upload.writeDataFailed\n                    });\n                  } else if (isExit && !canWrite) {\n                    resolve({\n                      code: 600,\n                      result: global.lang.upload.insufficientPermissionUpload\n                    });\n                  } else {\n                    resolve({\n                      code: 600,\n                      result: global.lang.upload.writeDataFailed\n                    });\n                  }\n                });\n              } else {\n                // \n                this._updateUploadRecordsInMemory({ index: (index + 1) }, uploadId);\n                resolve({\n                  code: 200,\n                  result: { filename, uploadId, index, abspath, sharename }\n                });\n              }\n              if (!this._getUploadRecordsInMemory(uploadId) || this._getUploadRecordsInMemory(uploadId).status === 'error') {\n                try {\n                  console.log('--uploading-unlink', path.join(pre, filename));\n                  fs.unlinkSync(path.join(pre, filename));\n                } catch (error) {\n                  console.log(error);\n                }\n              }\n            });\n          } else {\n            resolve(rsp);\n          }\n        })\n        .catch(err => {\n          resolve({\n            code: 600,\n            result: err.toString()\n          });\n        });\n    })\n  }\n```\n3. \n```js\n/**\n    * upload []\n    * @param  {[String]} uploadId [ID]\n    */\n  complete({ uploadId }) {\n    // \n    const record = this._getUploadRecordsInMemory(uploadId);\n\n    if (!record) return Promise.resolve({ code: 600, result: lang.upload.readDataFailed });\n\n    const { abspath } = record;\n    return new Promise(resolve => {\n      // \n      this._updateUploadRecordsInMemory({ status: 'break', endtime: getTime(new Date().getTime()) }, uploadId);\n      // \n      fileBlock.close(abspath).then(() => {\n        resolve({\n          code: 200,\n          result: uploadId\n        });\n      }).catch(err => {\n        resolve({\n          code: 600,\n          result: err.toString()\n        });\n      });\n    })\n  }\n```\n4. \n`open``read`\n\n```js\n/**\n  * readFileBlock []\n  */\nexports.readFileBlock = () => {\n\n  const fdStore = {};\n  const smallFileMap = {};\n\n  return {\n    /*  */\n    open: (path, size, minSize=1024*2) => {\n      return new Promise((resolve) => {\n        try {\n          // \n          if (size <= minSize) {\n            smallFileMap[path] = true;\n            return resolve({\n              code: 200,\n              result: {\n                fd: null\n              }\n            });\n          }\n          // fd\n          fs.open(path, 'r', (err, fd) => {\n            if (err) {\n              console.trace(err);\n              resolve({\n                code: 601,\n                result: err.toString()\n              });\n            } else {\n              fdStore[path] = fd;\n              resolve({\n                code: 200,\n                result: {\n                  fd: fdStore[path]\n                }\n              });\n            }\n          });\n        } catch (err) {\n          console.trace(err);\n          resolve({\n            code: 600,\n            result: err.toString()\n          });\n        }\n      })\n    },\n  \n    /*  */\n    read: (path, position, length) => {\n      return new Promise((resolve, reject) => {\n        const callback = (err, data) => {\n          if (err) {\n            resolve({\n              code: 600,\n              result: err.toString()\n            });\n          } else {\n            resolve({\n              code: 200,\n              result: data\n            });\n          }\n        };\n        try {\n          // \n          if (smallFileMap[path]) {\n            fs.readFile(path, (err, buffer) => {\n              callback(err, buffer);\n            });\n          } else {\n            // \n            if (length === 0) return callback(null, '');\n            fs.read(fdStore[path], Buffer.alloc(length), 0, length, position, function(err, readByte, readResult){\n              callback(err, readResult);\n            });\n          }\n        } catch (err) {\n          console.trace(err);\n          resolve({\n            code: 600,\n            result: err.toString()\n          });\n        }\n      });\n    },\n\n    /*  */\n    close: (path) => {\n      return new Promise((resolve) => {\n        try {\n          if (smallFileMap[path]) {\n            delete smallFileMap[path];\n            resolve({\n              code: 200\n            });\n          } else {\n            fs.close(fdStore[path], () => {\n              resolve({code: 200});\n              delete fdStore[path];\n            });\n          }\n        } catch (err) {\n          console.trace(err);\n          resolve({\n            code: 600,\n            result: err.toString()\n          });\n        }\n      });\n    },\n\n    fdStore\n\n  }\n\n}\n\n```\n\n#### windows\n\nwindowselectron nsis`.ico`package.json`build.files``build.win`windows`build.nsis`nsis`npm run build-win`winElectron AppwebelectronNode.js[build.js](https://github.com/NoJsJa/electron-react-template/blob/master/build.js)[electron build.js](https://github.com/NoJsJa/electron-react-template/blob/master/server/build.js)`build.js`web`electron build.js`Electron App`node build.js --help`\n\n__node build.js - -help__\n\n```bash\ndescription: build command for RhinoDisk.\n    command: node build.js [action] [config]\n    |\n    |\n    |______ param: [--help | -h ] => show usage info.\n    |______ param: [build-win   ] [--edit | --office] => build package for windows, the default conf file is ./server/config.json.\n    |______ param: [build-linux ] [--edit | --office] => build package for linux, the default conf file is ./server/config.json\n    |______ param: [build-mac   ] [--edit | --office] => build package for mac, the default conf file is ./server/config.json\n    |______ param: [build-all   ] [--edit | --office] => build package for all platform, the default conf file is ./server/config.json\n    |______ param: [clean-build ] => clean build directory after build\n    |\n    |______ example1: node build.js build-win\n    |______ example2: node build.js build-linux\n    |______ example3: node build.js build-mac\n    |______ example4: node build.js build-all\n    |______ example5: node build.js build-win --edit\n    |______ example6: node build.js build-win --office\n    |______ example7: node build.js --help\n    |______ example8: node build.js clean-build\n```\n\n__package.json__\n```js\n{\n  \"name\": \"RhinoDisk\",\n  \"version\": \"1.0.0\",\n  \"description\": \"SMB management client\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    ...\n    \"build-win\": \"electron-builder --win\",\n    ...\n  },\n  \"devDependencies\": {\n    ...\n  },\n  \"dependencies\": {\n    ...\n  },\n  \"build\": {\n    \"productName\": \"RhinoDisk\",\n    \"appId\": \"org.datatom.rhinodisk\",\n    \"asar\": false,\n    \"copyright\": \"CopyRight  2011-2020 \",\n    \"directories\": {\n      \"buildResources\": \"build\",\n      \"output\": \"build\"\n    },\n    \"files\": [\n      \"package.json\",\n      \"config.json\",\n      \"index.js\",\n      \"dist/\",\n      \"app/\",\n      \"node_modules/\",\n      \"resources/*.*\"\n    ],\n    \"win\": {\n      \"icon\": \"build/iconx256.ico\",\n      \"target\": [\n        {\n          \"target\": \"zip\"\n        },\n        {\n          \"target\": \"nsis\",\n          \"arch\": [\n            \"x64\"\n          ]\n        }\n      ]\n    },\n    \"nsis\": {\n      \"oneClick\": false,\n      \"allowElevation\": true,\n      \"allowToChangeInstallationDirectory\": true,\n      \"installerIcon\": \"./build/iconx256.ico\",\n      \"uninstallerIcon\": \"./build/iconx256.ico\",\n      \"installerHeaderIcon\": \"./build/iconx256.ico\",\n      \"createDesktopShortcut\": true,\n      \"createStartMenuShortcut\": true,\n      \"deleteAppDataOnUninstall\": true,\n      \"shortcutName\": \"RhinoDisk\"\n    }\n  }\n}\n\n```\n\n### \n--------\n\nElectronrender...   \nElectronElectron\n","source":"_posts/2020-07-17-Electronsmb.md","raw":"---\ntitle: \"Electronsmb\"\ncatalog: true\ntoc_nav_num: true\ndate: 2020-07-17 15:59:00\nsubtitle: \"smb samba client\"\nheader-img: \"article_header.png\"\ntags:\n- smb\ncategories:\n- Electron\nupdateDate: 2020-07-17 15:59:00\ntop: \n---\n\n\n### \n---------------\nsmbwindowssmbelectronwebElectronjson[lowdb](https://github.com/typicode/lowdb)\n\n[DEMO](https://github.com/NoJsJa/electron-react-template)\n\n### \n---------------\n\n#### \n\n1. ()\n2. \n3. ping\n4. ID\n\nIPjson\n\n![RhinoDisk](smb_node.jpg)\n\n![RhinoDisk](smb_node_conf.jpg)\n\n#### \n\n1. \n2. \n3. QQ\n\nsmbaccess_token(smbtoken)json\n\n![RhinoDisk](smb_login.jpg)\n\n#### \n\n1. windowssmbwindows\n2. C-Z\n\nwindowssmbwindows windows cmd\n\n![RhinoDisk](smb_share.jpg)\n![RhinoDisk](smb_share_mount.jpg)\n\n#### \n\n1. \n2. \n3. ()\n4. \n\njsonjson\n\n![RhinoDisk](smb_upload_now.jpg)\n![RhinoDisk](smb_upload_record.jpg)\n\n### \n-----------\n\n#### \n\nlang\n\n![lang](electron-lang.png)\n\n```js\nconst fs = require('fs');\nconst path = require('path');\nconst { app } = require('electron');\n\n/**\n * global.lang -- \n * global.LANG -- (en_us, zh_cn, zh_tw)\n * session.lang -- sessioncookie(session )\n * cookie.lang -- session.langcookie.lang\n */\nconst lang = (function lang() {\n  const defaultLang = 'zh_CN';\n\n  /* -------------------  ------------------- */\n  const getLANG = (acceptLang) => {\n    // \n    if (['en-US', 'en', 'en-us', 'en_us', 'en_US'].indexOf(acceptLang) !== -1) {\n      return 'en_us';\n    }\n    // \n    if (['zh-CN', 'zh', 'zh-cn', 'zh_cn', 'zh_CN'].indexOf(acceptLang) !== -1) {\n      return 'zh_cn';\n    } if (['zh-TW', 'zh-tw', 'zh_tw', 'zh_TW'].indexOf(acceptLang) !== -1) {\n      return 'zh_tw';\n    // \n    }\n    return 'zh_cn';\n  };\n\n  /* -------------------  ------------------- */\n  const setLang = (langEnv) => {\n    global.lang = global.lang ? global.lang : {};\n    global.LANG = langEnv;\n\n    // \n    fs.readdir(path.join(app.getAppPath(), 'app/lang', langEnv), (err, files) => {\n      if (err) {\n        console.error(err);\n        return;\n      }\n      files.forEach((file) => {\n        global.lang[path.basename(file)] = require(path.join(app.getAppPath(), 'app/lang', langEnv, file));\n      });\n    });\n  };\n\n  return (acceptLang) => {\n    const _lang = getLANG(acceptLang || defaultLang);\n    if (global.LANG && global.LANG == _lang) {\n      return;\n    }\n    // \n    setLang(_lang);\n  };\n}());\n\nmodule.exports = lang;\n\n```\n\n#### \n\nElectronTrayMenu.buildFromTemplate\n\n```js\ncontextMenu() {\n    global.appTray = new Tray(path.join(app.getAppPath(), os.type() === 'Windows_NT' ? `resources/icon_${this.envConf.work_env}.ico` : 'resources/mac_tray.png'));\n    const menu = Menu.buildFromTemplate( [\n      {\n          label: global.lang.public.quit,\n          type: 'normal',\n          click: () => {\n            this.sendToWeb('upload', {action: 'getUploadingTask'});\n            ipcMainProcess.ipc.once('upload-getUploadingTask', (event, rsp) => {\n              if (rsp.code === 200) {\n\n                  global.ipcMainWindow.sendToWeb('shell', { action: 'upload-clear' });\n                  .then(() => {\n                    global.appTray.destroy();\n                    app.quit();\n                  }).catch(() => {\n                    global.ipcMainProcess.notifySend({\n                      body: global.lang.public['data_write_failed_before_quit']\n                    });\n                  });\n                };\n                \n                if (rsp.result !== 0) {\n                  const buttonId = dialog.showMessageBoxSync(this.windowoptions, {\n                    defaultId: 0,\n                    buttons: ['No', 'Yes'],\n                    type: 'info',\n                    title: global.lang.public.tips,\n                    message: global.lang.upload.app_quit_tips\n                  });\n                  if (buttonId === 1) quitApp();\n                } else {\n                  quitApp();\n                }\n                \n              } else {\n                global.ipcMainProcess.notifySend({\n                  body: rsp.result\n                });\n              }\n            });\n          }\n        }\n    ]);\n\n    global.appTray.on('click', ()=>{    \n      this.window.show();\n    });\n    global.appTray.setToolTip('RninoDisk');\n    global.appTray.setContextMenu(menu);\n  }\n```\n\n#### Node\n\n1. ()  \nNode.js`child_process.exec` shell shell  command\n```js\nconst child = require('child_process');\n/**\n   * [exec ]\n   * @param  { [String] }  command    []\n   * @param  { [Array | String] }   params  []\n   * @param  { [Object] }  options [exec]\n   * @return { Promise }           [Promise]\n   */\nexports.exec = (_command, _params=[], _options={}) => {\n  const params = Array.isArray(_params) ? _params.join(' ') : '';\n  const options = (String(_params) === '[object Object]') ? _params : (_options);\n  const command = `${_command} ${params}`;\n  \n  console.log(params, options, command);\n\n  return new Promise((resolve, reject) => {\n    child.exec(command, options, (_err, _stdout, _stderr) => {\n      if (_err) {\n        exports.console_log(_err, 'red');\n        resolve({code: 1, result: _err});\n      } else if (_stderr && _stderr.toString()) {\n        exports.console_log(_stderr, 'red');\n        resolve({code: 1, result: _stderr});\n      } else {\n        console.log(_stdout);\n        resolve({code: 0, result: _stdout});\n      }\n    });\n  });\n}\n```\n\n2. ()  \nNode.js`child_process.exec` shell shell  command\n```js\n  const child = require('child_process');\n  /**\n   * [execRealtime ]\n   * @param  { [String] }  command    []\n   * @param  { [Array | String] }   params  []\n   * @param  { [Object] }  options [exec]\n   * @return { Promise }           [Promise]\n   */\n  exports.execRealtime = (_command, _params=[], _options={}) => {\n    const params = Array.isArray(_params) ? _params.join(' ') : '';\n    const options = (String(_params) === '[object Object]') ? _params : (_options);\n    const command = `${_command} ${params}`;\n    let data = '', error = '';\n    \n    console.log(params, options, command);\n  \n    return new Promise((resolve, reject) => {\n      const result = child.exec(command, options);\n      \n      result.stdout.on('data', (data) => {\n        exports.console_log(data, 'white');\n        data += `${data}`;\n      });\n\n      result.stderr.on('data', (data) => {\n        exports.console_log(data, 'red');\n        error += `${data}`;\n      });\n\n      result.on('close', (code) => {\n        resolve({code, result: data, error});\n      });\n    });\n  }\n\n```\n\n#### \n\n1. \n```js\n/**\n    * getSystemDriveLetter []\n    * @return {[Array]} []\n    */\n  getSystemDriveLetter() {\n    return new Promise((resolve) => {\n      this.sudo.exec('fsutil fsinfo drives', [], { encoding: 'buffer' }).then((stdout) => {\n        const driverstr = stdout;\n        const driverstrArr = driverstr.split(' ').filter(s => s !== os.EOL).map(s => s.replace('\\\\', ''));\n        const allDrivers = [\n          'C:', 'D:', 'E:', 'F:', 'G:', 'H:', 'I:', 'J:', 'K:', 'L:',\n          'M:', 'N:', 'O:', 'P:', 'Q:', 'R:', 'S:', 'T:', 'U:', 'V:',\n          'W:', 'X:', 'Y:', 'Z:'\n        ];\n        driverstrArr.shift();\n        resolve({\n          code: 200,\n          result: {\n            mounted: driverstrArr,\n            available: allDrivers.filter(d => !driverstrArr.includes(d.toLocaleUpperCase()))\n          },\n        })\n      }, (err) => {\n        console.error(err);\n        resolve({\n          code: 600,\n          result: err,\n        });\n      });\n    })\n  }\n```\n\n2. UNC\n```js\n/*  */\n_mountSystemDriver_Windows_NT({ host, driver, path, auto = false }) {\n    const pwd = global.ipcMainProcess.userModel.get('last.pwd');\n    const { isThirdUser, nickname, isLocalUser, username } = global.ipcMainProcess.userModel.info;\n    const commandUseIPC = `net use \\\\\\\\${host}\\\\ipc$ \"${pwd}\" /user:\"${username}\"`;\n    const commandMount = `net use ${driver} \\\\\\\\${host}\\\\${path} \"${pwd}\" /user:\"${username}\"`;\n    const commandUmount = `net use ${driver} /del /y`;\n\n    return new Promise((resolve, reject) => {\n      // \n      this.getSystemDriveLetter()\n        .then((rsp) => {\n          if (rsp.code === 200) {\n            if (rsp.result.mounted.includes(driver.toLocaleUpperCase())) {\n              throw new Error(global.lang.node.driver_already_mount);\n            }\n          } else {\n            throw new Error(global.lang.node.get_system_mount_info_failed);\n          }\n        })\n        // UNC\n        .then(() => {\n          return this.sudo.exec(commandUseIPC);\n        })\n        // \n        .then(() => {\n          return this.sudo.exec(commandMount);\n        })\n        // \n        .then(() => {\n          return this.update('mountPoint', { username, host, path }, {\n            username, host, path, driver, auto\n          });\n        }).then((rsp) => {\n          resolve({\n            code: 200,\n            result: {\n              username, host, driver\n            },\n          });\n        }).catch((err) => {\n          console.error(err, err.toString());\n          resolve({\n            code: 600,\n            result: global.lang.node.net_mount_failed_reason,\n          });\n        });\n    });\n  }\n```\n\n#### \n\nAWS[s3Javascript()](https://nojsja.gitee.io/blogs/2020/03/07/%E5%9F%BA%E4%BA%8Es3%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E5%A4%9A%E6%96%87%E4%BB%B6%E5%88%86%E7%89%87%E4%B8%8A%E4%BC%A0%E7%9A%84Javascript%E5%AE%9E%E7%8E%B0-%E4%B8%80/)``smb Node.js  FS APIWindows UNC`\\\\[host]\\[sharename]\\file1`\n\n\n![upload](shards_upload.jpg)\n\n##### \n\n1) `<Input />`FileList(ElectronFile`path`)  \n2) FileListFileListFile  \n3init  \n4Node.jsinit  \n5initIDNode.jsuploadID()  \n6Node.jsuploadIDFS API  \n7uploadNode.jscompleteID  \n8Node.jsID  \n9sync  \n10Node.jssync  \n\n##### Node.js(Electron)\n\n1. \n```js\n/**\n    * init []\n    * @param  {[String]} host []\n    * @param  {[String]} username []\n    * @param  {[Object]} file []\n    * @param  {[String]} abspath []\n    * @param  {[String]} sharename [smb]\n    * @param  {[String]} fragsize []\n    */\n  init({ host, file, abspath, sharename, fragsize, prefix = '' }) {\n    const pre = `\\\\\\\\${host}\\\\${sharename}`;\n    const date = Date.now();\n    const { pwd, username } = global.ipcMainProcess.userModel.info;\n    const uploadId = getStringMd5(date + file.name + file.type + file.size);\n    let remotePath = '';\n    let size = 0;\n\n    return new Promise((resolve) => {\n      // UNCsmb\n      this.uncCommandConnect({ host, username, pwd, sharename })\n        .then(() => new Promise((reso) => {\n          remotePath = path.join(pre, prefix, file.name);\n          fsPromise.unlink(path.join(pre, prefix, file.name)).then(reso).catch(reso);\n        }))\n        .then((rsp) => {\n          // \n          const dirs = getFileDirs([path.join(prefix, file.name)]);\n          return mkdirs(pre, dirs);\n        })\n        .then((rsp) => {\n          // \n          return fileBlock.open(abspath)\n        })\n        .then((rsp) => {\n          if (rsp.code === 200) {\n            // \n            return this._setUploadRecordsInMemory({\n              username,\n              host,\n              filename: path.join(prefix, file.name),\n              size: file.size,\n              fragsize,\n              sharename,\n              abspath,\n              remotePath,\n              startime: getTime(new Date().getTime()), // \n              endtime: '',\n              uploadId,\n              index: 0,\n              total: Math.ceil(size / fragsize),\n              status: 'uploading' // \n            });\n          } else {\n            resolve(rsp);\n          }\n        }).then((rsp) => {\n          resolve({\n            code: 200,\n            result: {\n              uploadId,\n              size,\n              total: Math.ceil(size / fragsize)\n            }\n          });\n        }).catch(err => {\n          resolve({\n            code: 600,\n            result: err.toString()\n          });\n        });\n    });\n  }\n```\n2. \n```js\n/**\n    * upload []\n    * @param  {[String]} index [0]\n    * @param  {[String]} uploadId [ID]\n    */\n  upload({ uploadId, index }) {\n    // \n    const record = this._getUploadRecordsInMemory(uploadId);\n    if (!record) return Promise.resolve({ code: 600, result: lang.upload.readDataFailed });\n    if (record.status !== 'uploading') return Promise.resolve({ code: 600, result: lang.upload.readDataFailed });\n\n    const { host, filename, size, sharename, fragsize, abspath, username } = record;\n    const pwd = global.ipcMainProcess.userModel.info.pwd;\n    const pre = `\\\\\\\\${host}\\\\${sharename}`;\n    const position = fragsize * (index);\n    const slicesize = ((fragsize * (index + 1)) <= size) ? fragsize : (size - fragsize * index);\n\n    return new Promise((resolve) => {\n      if (position > size) {\n        resolve({\n          code: 600,\n          result: lang.upload.upload_index_overflow\n        });\n        return;\n      }\n      // \n      fileBlock.read(abspath, position, slicesize)\n        .then(rsp => {\n          if (rsp.code === 200) {\n            // \n            fs.appendFile(path.join(pre, filename), rsp.result, { encoding: 'binary' }, (err) => {\n              if (err) {\n                // \n                checkPermission(path.join(pre, filename, '..'), 'ew', (err2, isExit, canWrite) => {\n                  if (err2) {\n                    resolve({\n                      code: 600,\n                      result: global.lang.upload.writeDataFailed\n                    });\n                  } else if (isExit && !canWrite) {\n                    resolve({\n                      code: 600,\n                      result: global.lang.upload.insufficientPermissionUpload\n                    });\n                  } else {\n                    resolve({\n                      code: 600,\n                      result: global.lang.upload.writeDataFailed\n                    });\n                  }\n                });\n              } else {\n                // \n                this._updateUploadRecordsInMemory({ index: (index + 1) }, uploadId);\n                resolve({\n                  code: 200,\n                  result: { filename, uploadId, index, abspath, sharename }\n                });\n              }\n              if (!this._getUploadRecordsInMemory(uploadId) || this._getUploadRecordsInMemory(uploadId).status === 'error') {\n                try {\n                  console.log('--uploading-unlink', path.join(pre, filename));\n                  fs.unlinkSync(path.join(pre, filename));\n                } catch (error) {\n                  console.log(error);\n                }\n              }\n            });\n          } else {\n            resolve(rsp);\n          }\n        })\n        .catch(err => {\n          resolve({\n            code: 600,\n            result: err.toString()\n          });\n        });\n    })\n  }\n```\n3. \n```js\n/**\n    * upload []\n    * @param  {[String]} uploadId [ID]\n    */\n  complete({ uploadId }) {\n    // \n    const record = this._getUploadRecordsInMemory(uploadId);\n\n    if (!record) return Promise.resolve({ code: 600, result: lang.upload.readDataFailed });\n\n    const { abspath } = record;\n    return new Promise(resolve => {\n      // \n      this._updateUploadRecordsInMemory({ status: 'break', endtime: getTime(new Date().getTime()) }, uploadId);\n      // \n      fileBlock.close(abspath).then(() => {\n        resolve({\n          code: 200,\n          result: uploadId\n        });\n      }).catch(err => {\n        resolve({\n          code: 600,\n          result: err.toString()\n        });\n      });\n    })\n  }\n```\n4. \n`open``read`\n\n```js\n/**\n  * readFileBlock []\n  */\nexports.readFileBlock = () => {\n\n  const fdStore = {};\n  const smallFileMap = {};\n\n  return {\n    /*  */\n    open: (path, size, minSize=1024*2) => {\n      return new Promise((resolve) => {\n        try {\n          // \n          if (size <= minSize) {\n            smallFileMap[path] = true;\n            return resolve({\n              code: 200,\n              result: {\n                fd: null\n              }\n            });\n          }\n          // fd\n          fs.open(path, 'r', (err, fd) => {\n            if (err) {\n              console.trace(err);\n              resolve({\n                code: 601,\n                result: err.toString()\n              });\n            } else {\n              fdStore[path] = fd;\n              resolve({\n                code: 200,\n                result: {\n                  fd: fdStore[path]\n                }\n              });\n            }\n          });\n        } catch (err) {\n          console.trace(err);\n          resolve({\n            code: 600,\n            result: err.toString()\n          });\n        }\n      })\n    },\n  \n    /*  */\n    read: (path, position, length) => {\n      return new Promise((resolve, reject) => {\n        const callback = (err, data) => {\n          if (err) {\n            resolve({\n              code: 600,\n              result: err.toString()\n            });\n          } else {\n            resolve({\n              code: 200,\n              result: data\n            });\n          }\n        };\n        try {\n          // \n          if (smallFileMap[path]) {\n            fs.readFile(path, (err, buffer) => {\n              callback(err, buffer);\n            });\n          } else {\n            // \n            if (length === 0) return callback(null, '');\n            fs.read(fdStore[path], Buffer.alloc(length), 0, length, position, function(err, readByte, readResult){\n              callback(err, readResult);\n            });\n          }\n        } catch (err) {\n          console.trace(err);\n          resolve({\n            code: 600,\n            result: err.toString()\n          });\n        }\n      });\n    },\n\n    /*  */\n    close: (path) => {\n      return new Promise((resolve) => {\n        try {\n          if (smallFileMap[path]) {\n            delete smallFileMap[path];\n            resolve({\n              code: 200\n            });\n          } else {\n            fs.close(fdStore[path], () => {\n              resolve({code: 200});\n              delete fdStore[path];\n            });\n          }\n        } catch (err) {\n          console.trace(err);\n          resolve({\n            code: 600,\n            result: err.toString()\n          });\n        }\n      });\n    },\n\n    fdStore\n\n  }\n\n}\n\n```\n\n#### windows\n\nwindowselectron nsis`.ico`package.json`build.files``build.win`windows`build.nsis`nsis`npm run build-win`winElectron AppwebelectronNode.js[build.js](https://github.com/NoJsJa/electron-react-template/blob/master/build.js)[electron build.js](https://github.com/NoJsJa/electron-react-template/blob/master/server/build.js)`build.js`web`electron build.js`Electron App`node build.js --help`\n\n__node build.js - -help__\n\n```bash\ndescription: build command for RhinoDisk.\n    command: node build.js [action] [config]\n    |\n    |\n    |______ param: [--help | -h ] => show usage info.\n    |______ param: [build-win   ] [--edit | --office] => build package for windows, the default conf file is ./server/config.json.\n    |______ param: [build-linux ] [--edit | --office] => build package for linux, the default conf file is ./server/config.json\n    |______ param: [build-mac   ] [--edit | --office] => build package for mac, the default conf file is ./server/config.json\n    |______ param: [build-all   ] [--edit | --office] => build package for all platform, the default conf file is ./server/config.json\n    |______ param: [clean-build ] => clean build directory after build\n    |\n    |______ example1: node build.js build-win\n    |______ example2: node build.js build-linux\n    |______ example3: node build.js build-mac\n    |______ example4: node build.js build-all\n    |______ example5: node build.js build-win --edit\n    |______ example6: node build.js build-win --office\n    |______ example7: node build.js --help\n    |______ example8: node build.js clean-build\n```\n\n__package.json__\n```js\n{\n  \"name\": \"RhinoDisk\",\n  \"version\": \"1.0.0\",\n  \"description\": \"SMB management client\",\n  \"main\": \"index.js\",\n  \"scripts\": {\n    ...\n    \"build-win\": \"electron-builder --win\",\n    ...\n  },\n  \"devDependencies\": {\n    ...\n  },\n  \"dependencies\": {\n    ...\n  },\n  \"build\": {\n    \"productName\": \"RhinoDisk\",\n    \"appId\": \"org.datatom.rhinodisk\",\n    \"asar\": false,\n    \"copyright\": \"CopyRight  2011-2020 \",\n    \"directories\": {\n      \"buildResources\": \"build\",\n      \"output\": \"build\"\n    },\n    \"files\": [\n      \"package.json\",\n      \"config.json\",\n      \"index.js\",\n      \"dist/\",\n      \"app/\",\n      \"node_modules/\",\n      \"resources/*.*\"\n    ],\n    \"win\": {\n      \"icon\": \"build/iconx256.ico\",\n      \"target\": [\n        {\n          \"target\": \"zip\"\n        },\n        {\n          \"target\": \"nsis\",\n          \"arch\": [\n            \"x64\"\n          ]\n        }\n      ]\n    },\n    \"nsis\": {\n      \"oneClick\": false,\n      \"allowElevation\": true,\n      \"allowToChangeInstallationDirectory\": true,\n      \"installerIcon\": \"./build/iconx256.ico\",\n      \"uninstallerIcon\": \"./build/iconx256.ico\",\n      \"installerHeaderIcon\": \"./build/iconx256.ico\",\n      \"createDesktopShortcut\": true,\n      \"createStartMenuShortcut\": true,\n      \"deleteAppDataOnUninstall\": true,\n      \"shortcutName\": \"RhinoDisk\"\n    }\n  }\n}\n\n```\n\n### \n--------\n\nElectronrender...   \nElectronElectron\n","slug":"Electronsmb","published":1,"updated":"2020-08-28T12:35:58.605Z","_id":"ckcplatj40000hl953xrb6hxo","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p>smbwindowssmbelectronwebElectronjson<a href=\"https://github.com/typicode/lowdb\" target=\"_blank\" rel=\"noopener\">lowdb</a></p><p>[DEMO](<a href=\"https://github.com/NoJsJa/electron-react-template\" target=\"_blank\" rel=\"noopener\">https://github.com/NoJsJa/electron-react-template</a>)</p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li>()</li><li></li><li>ping</li><li>ID</li></ol><p>IPjson</p><p><img src=\"smb_node.jpg\" alt=\"RhinoDisk\"></p><p><img src=\"smb_node_conf.jpg\" alt=\"RhinoDisk\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li></li><li></li><li>QQ</li></ol><p>smbaccess_token(smbtoken)json</p><p><img src=\"smb_login.jpg\" alt=\"RhinoDisk\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li>windowssmbwindows</li><li>C-Z</li></ol><p>windowssmbwindows windows cmd</p><p><img src=\"smb_share.jpg\" alt=\"RhinoDisk\"><br><img src=\"smb_share_mount.jpg\" alt=\"RhinoDisk\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li></li><li></li><li>()</li><li></li></ol><p>jsonjson</p><p><img src=\"smb_upload_now.jpg\" alt=\"RhinoDisk\"><br><img src=\"smb_upload_record.jpg\" alt=\"RhinoDisk\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>lang</p><p><img src=\"electron-lang.png\" alt=\"lang\"></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; app &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'electron'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * global.lang -- </span></span><br><span class=\"line\"><span class=\"comment\"> * global.LANG -- (en_us, zh_cn, zh_tw)</span></span><br><span class=\"line\"><span class=\"comment\"> * session.lang -- sessioncookie(session )</span></span><br><span class=\"line\"><span class=\"comment\"> * cookie.lang -- session.langcookie.lang</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> lang = (<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">lang</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> defaultLang = <span class=\"string\">'zh_CN'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* -------------------  ------------------- */</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> getLANG = <span class=\"function\">(<span class=\"params\">acceptLang</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ([<span class=\"string\">'en-US'</span>, <span class=\"string\">'en'</span>, <span class=\"string\">'en-us'</span>, <span class=\"string\">'en_us'</span>, <span class=\"string\">'en_US'</span>].indexOf(acceptLang) !== <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'en_us'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ([<span class=\"string\">'zh-CN'</span>, <span class=\"string\">'zh'</span>, <span class=\"string\">'zh-cn'</span>, <span class=\"string\">'zh_cn'</span>, <span class=\"string\">'zh_CN'</span>].indexOf(acceptLang) !== <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'zh_cn'</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">if</span> ([<span class=\"string\">'zh-TW'</span>, <span class=\"string\">'zh-tw'</span>, <span class=\"string\">'zh_tw'</span>, <span class=\"string\">'zh_TW'</span>].indexOf(acceptLang) !== <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'zh_tw'</span>;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'zh_cn'</span>;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* -------------------  ------------------- */</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> setLang = <span class=\"function\">(<span class=\"params\">langEnv</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    global.lang = global.lang ? global.lang : &#123;&#125;;</span><br><span class=\"line\">    global.LANG = langEnv;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    fs.readdir(path.join(app.getAppPath(), <span class=\"string\">'app/lang'</span>, langEnv), (err, files) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.error(err);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      files.forEach(<span class=\"function\">(<span class=\"params\">file</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        global.lang[path.basename(file)] = <span class=\"built_in\">require</span>(path.join(app.getAppPath(), <span class=\"string\">'app/lang'</span>, langEnv, file));</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">acceptLang</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> _lang = getLANG(acceptLang || defaultLang);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (global.LANG &amp;&amp; global.LANG == _lang) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    setLang(_lang);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = lang;</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>ElectronTrayMenu.buildFromTemplate</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">contextMenu() &#123;</span><br><span class=\"line\">    global.appTray = <span class=\"keyword\">new</span> Tray(path.join(app.getAppPath(), os.type() === <span class=\"string\">'Windows_NT'</span> ? <span class=\"string\">`resources/icon_<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.envConf.work_env&#125;</span>.ico`</span> : <span class=\"string\">'resources/mac_tray.png'</span>));</span><br><span class=\"line\">    <span class=\"keyword\">const</span> menu = Menu.buildFromTemplate( [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">          label: global.lang.public.quit,</span><br><span class=\"line\">          type: <span class=\"string\">'normal'</span>,</span><br><span class=\"line\">          click: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.sendToWeb(<span class=\"string\">'upload'</span>, &#123;<span class=\"attr\">action</span>: <span class=\"string\">'getUploadingTask'</span>&#125;);</span><br><span class=\"line\">            ipcMainProcess.ipc.once(<span class=\"string\">'upload-getUploadingTask'</span>, (event, rsp) =&gt; &#123;</span><br><span class=\"line\">              <span class=\"keyword\">if</span> (rsp.code === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">                  global.ipcMainWindow.sendToWeb(<span class=\"string\">'shell'</span>, &#123; <span class=\"attr\">action</span>: <span class=\"string\">'upload-clear'</span> &#125;);</span><br><span class=\"line\">                  .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">                    global.appTray.destroy();</span><br><span class=\"line\">                    app.quit();</span><br><span class=\"line\">                  &#125;).catch(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">                    global.ipcMainProcess.notifySend(&#123;</span><br><span class=\"line\">                      body: global.lang.public[<span class=\"string\">'data_write_failed_before_quit'</span>]</span><br><span class=\"line\">                    &#125;);</span><br><span class=\"line\">                  &#125;);</span><br><span class=\"line\">                &#125;;</span><br><span class=\"line\">                </span><br><span class=\"line\">                <span class=\"keyword\">if</span> (rsp.result !== <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                  <span class=\"keyword\">const</span> buttonId = dialog.showMessageBoxSync(<span class=\"keyword\">this</span>.windowoptions, &#123;</span><br><span class=\"line\">                    defaultId: <span class=\"number\">0</span>,</span><br><span class=\"line\">                    buttons: [<span class=\"string\">'No'</span>, <span class=\"string\">'Yes'</span>],</span><br><span class=\"line\">                    type: <span class=\"string\">'info'</span>,</span><br><span class=\"line\">                    title: global.lang.public.tips,</span><br><span class=\"line\">                    message: global.lang.upload.app_quit_tips</span><br><span class=\"line\">                  &#125;);</span><br><span class=\"line\">                  <span class=\"keyword\">if</span> (buttonId === <span class=\"number\">1</span>) quitApp();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                  quitApp();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                </span><br><span class=\"line\">              &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                global.ipcMainProcess.notifySend(&#123;</span><br><span class=\"line\">                  body: rsp.result</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]);</span><br><span class=\"line\"></span><br><span class=\"line\">    global.appTray.on(<span class=\"string\">'click'</span>, ()=&gt;&#123;    </span><br><span class=\"line\">      <span class=\"keyword\">this</span>.window.show();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    global.appTray.setToolTip(<span class=\"string\">'RninoDisk'</span>);</span><br><span class=\"line\">    global.appTray.setContextMenu(menu);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure><h4 id=\"Node\"><a href=\"#Node\" class=\"headerlink\" title=\"Node\"></a>Node</h4><ol><li><p>()<br>Node.js<code>child_process.exec</code> shell shell  command</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> child = <span class=\"built_in\">require</span>(<span class=\"string\">'child_process'</span>);</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [exec ]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123; [String] &#125;</span>  </span>command    []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123; [Array | String] &#125;</span>   </span>params  []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123; [Object] &#125;</span>  </span>options [exec]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@return <span class=\"type\">&#123; Promise &#125;</span>           </span>[Promise]</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">exports.exec = <span class=\"function\">(<span class=\"params\">_command, _params=[], _options=&#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> params = <span class=\"built_in\">Array</span>.isArray(_params) ? _params.join(<span class=\"string\">' '</span>) : <span class=\"string\">''</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> options = (<span class=\"built_in\">String</span>(_params) === <span class=\"string\">'[object Object]'</span>) ? _params : (_options);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> command = <span class=\"string\">`<span class=\"subst\">$&#123;_command&#125;</span> <span class=\"subst\">$&#123;params&#125;</span>`</span>;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(params, options, command);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    child.exec(command, options, (_err, _stdout, _stderr) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (_err) &#123;</span><br><span class=\"line\">        exports.console_log(_err, <span class=\"string\">'red'</span>);</span><br><span class=\"line\">        resolve(&#123;<span class=\"attr\">code</span>: <span class=\"number\">1</span>, <span class=\"attr\">result</span>: _err&#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (_stderr &amp;&amp; _stderr.toString()) &#123;</span><br><span class=\"line\">        exports.console_log(_stderr, <span class=\"string\">'red'</span>);</span><br><span class=\"line\">        resolve(&#123;<span class=\"attr\">code</span>: <span class=\"number\">1</span>, <span class=\"attr\">result</span>: _stderr&#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(_stdout);</span><br><span class=\"line\">        resolve(&#123;<span class=\"attr\">code</span>: <span class=\"number\">0</span>, <span class=\"attr\">result</span>: _stdout&#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li><li><p>()<br>Node.js<code>child_process.exec</code> shell shell  command</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> child = <span class=\"built_in\">require</span>(<span class=\"string\">'child_process'</span>);</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [execRealtime ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123; [String] &#125;</span>  </span>command    []</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123; [Array | String] &#125;</span>   </span>params  []</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123; [Object] &#125;</span>  </span>options [exec]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return <span class=\"type\">&#123; Promise &#125;</span>           </span>[Promise]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">exports.execRealtime = <span class=\"function\">(<span class=\"params\">_command, _params=[], _options=&#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> params = <span class=\"built_in\">Array</span>.isArray(_params) ? _params.join(<span class=\"string\">' '</span>) : <span class=\"string\">''</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> options = (<span class=\"built_in\">String</span>(_params) === <span class=\"string\">'[object Object]'</span>) ? _params : (_options);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> command = <span class=\"string\">`<span class=\"subst\">$&#123;_command&#125;</span> <span class=\"subst\">$&#123;params&#125;</span>`</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> data = <span class=\"string\">''</span>, error = <span class=\"string\">''</span>;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(params, options, command);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> result = child.exec(command, options);</span><br><span class=\"line\">    </span><br><span class=\"line\">    result.stdout.on(<span class=\"string\">'data'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">      exports.console_log(data, <span class=\"string\">'white'</span>);</span><br><span class=\"line\">      data += <span class=\"string\">`<span class=\"subst\">$&#123;data&#125;</span>`</span>;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    result.stderr.on(<span class=\"string\">'data'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">      exports.console_log(data, <span class=\"string\">'red'</span>);</span><br><span class=\"line\">      error += <span class=\"string\">`<span class=\"subst\">$&#123;data&#125;</span>`</span>;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    result.on(<span class=\"string\">'close'</span>, (code) =&gt; &#123;</span><br><span class=\"line\">      resolve(&#123;code, <span class=\"attr\">result</span>: data, error&#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><ol><li><p></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * getSystemDriveLetter []</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@return <span class=\"type\">&#123;[Array]&#125;</span> </span>[]</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">  getSystemDriveLetter() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.sudo.exec(<span class=\"string\">'fsutil fsinfo drives'</span>, [], &#123; <span class=\"attr\">encoding</span>: <span class=\"string\">'buffer'</span> &#125;).then(<span class=\"function\">(<span class=\"params\">stdout</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> driverstr = stdout;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> driverstrArr = driverstr.split(<span class=\"string\">' '</span>).filter(<span class=\"function\"><span class=\"params\">s</span> =&gt;</span> s !== os.EOL).map(<span class=\"function\"><span class=\"params\">s</span> =&gt;</span> s.replace(<span class=\"string\">'\\\\'</span>, <span class=\"string\">''</span>));</span><br><span class=\"line\">        <span class=\"keyword\">const</span> allDrivers = [</span><br><span class=\"line\">          <span class=\"string\">'C:'</span>, <span class=\"string\">'D:'</span>, <span class=\"string\">'E:'</span>, <span class=\"string\">'F:'</span>, <span class=\"string\">'G:'</span>, <span class=\"string\">'H:'</span>, <span class=\"string\">'I:'</span>, <span class=\"string\">'J:'</span>, <span class=\"string\">'K:'</span>, <span class=\"string\">'L:'</span>,</span><br><span class=\"line\">          <span class=\"string\">'M:'</span>, <span class=\"string\">'N:'</span>, <span class=\"string\">'O:'</span>, <span class=\"string\">'P:'</span>, <span class=\"string\">'Q:'</span>, <span class=\"string\">'R:'</span>, <span class=\"string\">'S:'</span>, <span class=\"string\">'T:'</span>, <span class=\"string\">'U:'</span>, <span class=\"string\">'V:'</span>,</span><br><span class=\"line\">          <span class=\"string\">'W:'</span>, <span class=\"string\">'X:'</span>, <span class=\"string\">'Y:'</span>, <span class=\"string\">'Z:'</span></span><br><span class=\"line\">        ];</span><br><span class=\"line\">        driverstrArr.shift();</span><br><span class=\"line\">        resolve(&#123;</span><br><span class=\"line\">          code: <span class=\"number\">200</span>,</span><br><span class=\"line\">          result: &#123;</span><br><span class=\"line\">            mounted: driverstrArr,</span><br><span class=\"line\">            available: allDrivers.filter(<span class=\"function\"><span class=\"params\">d</span> =&gt;</span> !driverstrArr.includes(d.toLocaleUpperCase()))</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;, (err) =&gt; &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.error(err);</span><br><span class=\"line\">        resolve(&#123;</span><br><span class=\"line\">          code: <span class=\"number\">600</span>,</span><br><span class=\"line\">          result: err,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>UNC</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*  */</span></span><br><span class=\"line\">_mountSystemDriver_Windows_NT(&#123; host, driver, path, auto = <span class=\"literal\">false</span> &#125;) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> pwd = global.ipcMainProcess.userModel.get(<span class=\"string\">'last.pwd'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; isThirdUser, nickname, isLocalUser, username &#125; = global.ipcMainProcess.userModel.info;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> commandUseIPC = <span class=\"string\">`net use \\\\\\\\<span class=\"subst\">$&#123;host&#125;</span>\\\\ipc$ \"<span class=\"subst\">$&#123;pwd&#125;</span>\" /user:\"<span class=\"subst\">$&#123;username&#125;</span>\"`</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> commandMount = <span class=\"string\">`net use <span class=\"subst\">$&#123;driver&#125;</span> \\\\\\\\<span class=\"subst\">$&#123;host&#125;</span>\\\\<span class=\"subst\">$&#123;path&#125;</span> \"<span class=\"subst\">$&#123;pwd&#125;</span>\" /user:\"<span class=\"subst\">$&#123;username&#125;</span>\"`</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> commandUmount = <span class=\"string\">`net use <span class=\"subst\">$&#123;driver&#125;</span> /del /y`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.getSystemDriveLetter()</span><br><span class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">rsp</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (rsp.code === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (rsp.result.mounted.includes(driver.toLocaleUpperCase())) &#123;</span><br><span class=\"line\">              <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(global.lang.node.driver_already_mount);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(global.lang.node.get_system_mount_info_failed);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        <span class=\"comment\">// UNC</span></span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.sudo.exec(commandUseIPC);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.sudo.exec(commandMount);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.update(<span class=\"string\">'mountPoint'</span>, &#123; username, host, path &#125;, &#123;</span><br><span class=\"line\">            username, host, path, driver, auto</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;).then(<span class=\"function\">(<span class=\"params\">rsp</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">200</span>,</span><br><span class=\"line\">            result: &#123;</span><br><span class=\"line\">              username, host, driver</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;).catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.error(err, err.toString());</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: global.lang.node.net_mount_failed_reason,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><p>AWS<a href=\"https://nojsja.gitee.io/blogs/2020/03/07/%E5%9F%BA%E4%BA%8Es3%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E5%A4%9A%E6%96%87%E4%BB%B6%E5%88%86%E7%89%87%E4%B8%8A%E4%BC%A0%E7%9A%84Javascript%E5%AE%9E%E7%8E%B0-%E4%B8%80/\" target=\"_blank\" rel=\"noopener\">s3Javascript()</a><code></code>smb Node.js  FS APIWindows UNC<code>\\\\[host]\\[sharename]\\file1</code></p><p><br><img src=\"shards_upload.jpg\" alt=\"upload\"></p><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>1) <code>&lt;Input /&gt;</code>FileList(ElectronFile<code>path</code>)<br>2) FileListFileListFile<br>3init<br>4Node.jsinit<br>5initIDNode.jsuploadID()<br>6Node.jsuploadIDFS API<br>7uploadNode.jscompleteID<br>8Node.jsID<br>9sync<br>10Node.jssync</p><h5 id=\"Node-js-Electron-\"><a href=\"#Node-js-Electron-\" class=\"headerlink\" title=\"Node.js(Electron)\"></a>Node.js(Electron)</h5><ol><li><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * init []</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>host []</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>username []</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>file []</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>abspath []</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>sharename [smb]</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>fragsize []</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">  init(&#123; host, file, abspath, sharename, fragsize, prefix = <span class=\"string\">''</span> &#125;) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> pre = <span class=\"string\">`\\\\\\\\<span class=\"subst\">$&#123;host&#125;</span>\\\\<span class=\"subst\">$&#123;sharename&#125;</span>`</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> date = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; pwd, username &#125; = global.ipcMainProcess.userModel.info;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> uploadId = getStringMd5(date + file.name + file.type + file.size);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> remotePath = <span class=\"string\">''</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> size = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// UNCsmb</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.uncCommandConnect(&#123; host, username, pwd, sharename &#125;)</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">reso</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          remotePath = path.join(pre, prefix, file.name);</span><br><span class=\"line\">          fsPromise.unlink(path.join(pre, prefix, file.name)).then(reso).catch(reso);</span><br><span class=\"line\">        &#125;))</span><br><span class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">rsp</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// </span></span><br><span class=\"line\">          <span class=\"keyword\">const</span> dirs = getFileDirs([path.join(prefix, file.name)]);</span><br><span class=\"line\">          <span class=\"keyword\">return</span> mkdirs(pre, dirs);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">rsp</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// </span></span><br><span class=\"line\">          <span class=\"keyword\">return</span> fileBlock.open(abspath)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">rsp</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (rsp.code === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>._setUploadRecordsInMemory(&#123;</span><br><span class=\"line\">              username,</span><br><span class=\"line\">              host,</span><br><span class=\"line\">              filename: path.join(prefix, file.name),</span><br><span class=\"line\">              size: file.size,</span><br><span class=\"line\">              fragsize,</span><br><span class=\"line\">              sharename,</span><br><span class=\"line\">              abspath,</span><br><span class=\"line\">              remotePath,</span><br><span class=\"line\">              startime: getTime(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime()), <span class=\"comment\">// </span></span><br><span class=\"line\">              endtime: <span class=\"string\">''</span>,</span><br><span class=\"line\">              uploadId,</span><br><span class=\"line\">              index: <span class=\"number\">0</span>,</span><br><span class=\"line\">              total: <span class=\"built_in\">Math</span>.ceil(size / fragsize),</span><br><span class=\"line\">              status: <span class=\"string\">'uploading'</span> <span class=\"comment\">// </span></span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            resolve(rsp);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;).then(<span class=\"function\">(<span class=\"params\">rsp</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">200</span>,</span><br><span class=\"line\">            result: &#123;</span><br><span class=\"line\">              uploadId,</span><br><span class=\"line\">              size,</span><br><span class=\"line\">              total: <span class=\"built_in\">Math</span>.ceil(size / fragsize)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: err.toString()</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * upload []</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>index [0]</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>uploadId [ID]</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">  upload(&#123; uploadId, index &#125;) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> record = <span class=\"keyword\">this</span>._getUploadRecordsInMemory(uploadId);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!record) <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(&#123; <span class=\"attr\">code</span>: <span class=\"number\">600</span>, <span class=\"attr\">result</span>: lang.upload.readDataFailed &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (record.status !== <span class=\"string\">'uploading'</span>) <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(&#123; <span class=\"attr\">code</span>: <span class=\"number\">600</span>, <span class=\"attr\">result</span>: lang.upload.readDataFailed &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; host, filename, size, sharename, fragsize, abspath, username &#125; = record;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> pwd = global.ipcMainProcess.userModel.info.pwd;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> pre = <span class=\"string\">`\\\\\\\\<span class=\"subst\">$&#123;host&#125;</span>\\\\<span class=\"subst\">$&#123;sharename&#125;</span>`</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> position = fragsize * (index);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> slicesize = ((fragsize * (index + <span class=\"number\">1</span>)) &lt;= size) ? fragsize : (size - fragsize * index);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (position &gt; size) &#123;</span><br><span class=\"line\">        resolve(&#123;</span><br><span class=\"line\">          code: <span class=\"number\">600</span>,</span><br><span class=\"line\">          result: lang.upload.upload_index_overflow</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      fileBlock.read(abspath, position, slicesize)</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">rsp</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (rsp.code === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            fs.appendFile(path.join(pre, filename), rsp.result, &#123; <span class=\"attr\">encoding</span>: <span class=\"string\">'binary'</span> &#125;, (err) =&gt; &#123;</span><br><span class=\"line\">              <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                checkPermission(path.join(pre, filename, <span class=\"string\">'..'</span>), <span class=\"string\">'ew'</span>, (err2, isExit, canWrite) =&gt; &#123;</span><br><span class=\"line\">                  <span class=\"keyword\">if</span> (err2) &#123;</span><br><span class=\"line\">                    resolve(&#123;</span><br><span class=\"line\">                      code: <span class=\"number\">600</span>,</span><br><span class=\"line\">                      result: global.lang.upload.writeDataFailed</span><br><span class=\"line\">                    &#125;);</span><br><span class=\"line\">                  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (isExit &amp;&amp; !canWrite) &#123;</span><br><span class=\"line\">                    resolve(&#123;</span><br><span class=\"line\">                      code: <span class=\"number\">600</span>,</span><br><span class=\"line\">                      result: global.lang.upload.insufficientPermissionUpload</span><br><span class=\"line\">                    &#125;);</span><br><span class=\"line\">                  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    resolve(&#123;</span><br><span class=\"line\">                      code: <span class=\"number\">600</span>,</span><br><span class=\"line\">                      result: global.lang.upload.writeDataFailed</span><br><span class=\"line\">                    &#125;);</span><br><span class=\"line\">                  &#125;</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">              &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                <span class=\"keyword\">this</span>._updateUploadRecordsInMemory(&#123; <span class=\"attr\">index</span>: (index + <span class=\"number\">1</span>) &#125;, uploadId);</span><br><span class=\"line\">                resolve(&#123;</span><br><span class=\"line\">                  code: <span class=\"number\">200</span>,</span><br><span class=\"line\">                  result: &#123; filename, uploadId, index, abspath, sharename &#125;</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">              <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>._getUploadRecordsInMemory(uploadId) || <span class=\"keyword\">this</span>._getUploadRecordsInMemory(uploadId).status === <span class=\"string\">'error'</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                  <span class=\"built_in\">console</span>.log(<span class=\"string\">'--uploading-unlink'</span>, path.join(pre, filename));</span><br><span class=\"line\">                  fs.unlinkSync(path.join(pre, filename));</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">                  <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            resolve(rsp);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: err.toString()</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * upload []</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>uploadId [ID]</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">  complete(&#123; uploadId &#125;) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> record = <span class=\"keyword\">this</span>._getUploadRecordsInMemory(uploadId);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!record) <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(&#123; <span class=\"attr\">code</span>: <span class=\"number\">600</span>, <span class=\"attr\">result</span>: lang.upload.readDataFailed &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; abspath &#125; = record;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>._updateUploadRecordsInMemory(&#123; <span class=\"attr\">status</span>: <span class=\"string\">'break'</span>, <span class=\"attr\">endtime</span>: getTime(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime()) &#125;, uploadId);</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      fileBlock.close(abspath).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        resolve(&#123;</span><br><span class=\"line\">          code: <span class=\"number\">200</span>,</span><br><span class=\"line\">          result: uploadId</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">        resolve(&#123;</span><br><span class=\"line\">          code: <span class=\"number\">600</span>,</span><br><span class=\"line\">          result: err.toString()</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><br><code>open</code><code>read</code></li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * readFileBlock []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">exports.readFileBlock = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> fdStore = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> smallFileMap = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/*  */</span></span><br><span class=\"line\">    open: <span class=\"function\">(<span class=\"params\">path, size, minSize=<span class=\"number\">1024</span>*<span class=\"number\">2</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// </span></span><br><span class=\"line\">          <span class=\"keyword\">if</span> (size &lt;= minSize) &#123;</span><br><span class=\"line\">            smallFileMap[path] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> resolve(&#123;</span><br><span class=\"line\">              code: <span class=\"number\">200</span>,</span><br><span class=\"line\">              result: &#123;</span><br><span class=\"line\">                fd: <span class=\"literal\">null</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          <span class=\"comment\">// fd</span></span><br><span class=\"line\">          fs.open(path, <span class=\"string\">'r'</span>, (err, fd) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">              <span class=\"built_in\">console</span>.trace(err);</span><br><span class=\"line\">              resolve(&#123;</span><br><span class=\"line\">                code: <span class=\"number\">601</span>,</span><br><span class=\"line\">                result: err.toString()</span><br><span class=\"line\">              &#125;);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">              fdStore[path] = fd;</span><br><span class=\"line\">              resolve(&#123;</span><br><span class=\"line\">                code: <span class=\"number\">200</span>,</span><br><span class=\"line\">                result: &#123;</span><br><span class=\"line\">                  fd: fdStore[path]</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.trace(err);</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: err.toString()</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">/*  */</span></span><br><span class=\"line\">    read: <span class=\"function\">(<span class=\"params\">path, position, length</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> callback = <span class=\"function\">(<span class=\"params\">err, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">            resolve(&#123;</span><br><span class=\"line\">              code: <span class=\"number\">600</span>,</span><br><span class=\"line\">              result: err.toString()</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            resolve(&#123;</span><br><span class=\"line\">              code: <span class=\"number\">200</span>,</span><br><span class=\"line\">              result: data</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// </span></span><br><span class=\"line\">          <span class=\"keyword\">if</span> (smallFileMap[path]) &#123;</span><br><span class=\"line\">            fs.readFile(path, (err, buffer) =&gt; &#123;</span><br><span class=\"line\">              callback(err, buffer);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (length === <span class=\"number\">0</span>) <span class=\"keyword\">return</span> callback(<span class=\"literal\">null</span>, <span class=\"string\">''</span>);</span><br><span class=\"line\">            fs.read(fdStore[path], Buffer.alloc(length), <span class=\"number\">0</span>, length, position, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, readByte, readResult</span>)</span>&#123;</span><br><span class=\"line\">              callback(err, readResult);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.trace(err);</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: err.toString()</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*  */</span></span><br><span class=\"line\">    close: <span class=\"function\">(<span class=\"params\">path</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (smallFileMap[path]) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">delete</span> smallFileMap[path];</span><br><span class=\"line\">            resolve(&#123;</span><br><span class=\"line\">              code: <span class=\"number\">200</span></span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            fs.close(fdStore[path], () =&gt; &#123;</span><br><span class=\"line\">              resolve(&#123;<span class=\"attr\">code</span>: <span class=\"number\">200</span>&#125;);</span><br><span class=\"line\">              <span class=\"keyword\">delete</span> fdStore[path];</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.trace(err);</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: err.toString()</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    fdStore</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h4 id=\"windows\"><a href=\"#windows\" class=\"headerlink\" title=\"windows\"></a>windows</h4><p>windowselectron nsis<code>.ico</code>package.json<code>build.files</code><code>build.win</code>windows<code>build.nsis</code>nsis<code>npm run build-win</code>winElectron AppwebelectronNode.js<a href=\"https://github.com/NoJsJa/electron-react-template/blob/master/build.js\" target=\"_blank\" rel=\"noopener\">build.js</a><a href=\"https://github.com/NoJsJa/electron-react-template/blob/master/server/build.js\" target=\"_blank\" rel=\"noopener\">electron build.js</a><code>build.js</code>web<code>electron build.js</code>Electron App<code>node build.js --help</code></p><p><strong>node build.js - -help</strong></p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">description: build <span class=\"built_in\">command</span> <span class=\"keyword\">for</span> RhinoDisk.</span><br><span class=\"line\">    <span class=\"built_in\">command</span>: node build.js [action] [config]</span><br><span class=\"line\">    |</span><br><span class=\"line\">    |</span><br><span class=\"line\">    |______ param: [--<span class=\"built_in\">help</span> | -h ] =&gt; show usage info.</span><br><span class=\"line\">    |______ param: [build-win   ] [--edit | --office] =&gt; build package <span class=\"keyword\">for</span> windows, the default conf file is ./server/config.json.</span><br><span class=\"line\">    |______ param: [build-linux ] [--edit | --office] =&gt; build package <span class=\"keyword\">for</span> linux, the default conf file is ./server/config.json</span><br><span class=\"line\">    |______ param: [build-mac   ] [--edit | --office] =&gt; build package <span class=\"keyword\">for</span> mac, the default conf file is ./server/config.json</span><br><span class=\"line\">    |______ param: [build-all   ] [--edit | --office] =&gt; build package <span class=\"keyword\">for</span> all platform, the default conf file is ./server/config.json</span><br><span class=\"line\">    |______ param: [clean-build ] =&gt; clean build directory after build</span><br><span class=\"line\">    |</span><br><span class=\"line\">    |______ example1: node build.js build-win</span><br><span class=\"line\">    |______ example2: node build.js build-linux</span><br><span class=\"line\">    |______ example3: node build.js build-mac</span><br><span class=\"line\">    |______ example4: node build.js build-all</span><br><span class=\"line\">    |______ example5: node build.js build-win --edit</span><br><span class=\"line\">    |______ example6: node build.js build-win --office</span><br><span class=\"line\">    |______ example7: node build.js --<span class=\"built_in\">help</span></span><br><span class=\"line\">    |______ example8: node build.js clean-build</span><br></pre></td></tr></table></figure><p><strong>package.json</strong><br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"RhinoDisk\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"version\"</span>: <span class=\"string\">\"1.0.0\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"description\"</span>: <span class=\"string\">\"SMB management client\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"main\"</span>: <span class=\"string\">\"index.js\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"string\">\"build-win\"</span>: <span class=\"string\">\"electron-builder --win\"</span>,</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">\"devDependencies\"</span>: &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">\"dependencies\"</span>: &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">\"build\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"productName\"</span>: <span class=\"string\">\"RhinoDisk\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"appId\"</span>: <span class=\"string\">\"org.datatom.rhinodisk\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"asar\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"string\">\"copyright\"</span>: <span class=\"string\">\"CopyRight  2011-2020 \"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"directories\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"buildResources\"</span>: <span class=\"string\">\"build\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"output\"</span>: <span class=\"string\">\"build\"</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">\"files\"</span>: [</span><br><span class=\"line\">      <span class=\"string\">\"package.json\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"config.json\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"index.js\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"dist/\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"node_modules/\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"resources/*.*\"</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">\"win\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"icon\"</span>: <span class=\"string\">\"build/iconx256.ico\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"target\"</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          <span class=\"string\">\"target\"</span>: <span class=\"string\">\"zip\"</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          <span class=\"string\">\"target\"</span>: <span class=\"string\">\"nsis\"</span>,</span><br><span class=\"line\">          <span class=\"string\">\"arch\"</span>: [</span><br><span class=\"line\">            <span class=\"string\">\"x64\"</span></span><br><span class=\"line\">          ]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">\"nsis\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"oneClick\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      <span class=\"string\">\"allowElevation\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"string\">\"allowToChangeInstallationDirectory\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"string\">\"installerIcon\"</span>: <span class=\"string\">\"./build/iconx256.ico\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"uninstallerIcon\"</span>: <span class=\"string\">\"./build/iconx256.ico\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"installerHeaderIcon\"</span>: <span class=\"string\">\"./build/iconx256.ico\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"createDesktopShortcut\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"string\">\"createStartMenuShortcut\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"string\">\"deleteAppDataOnUninstall\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"string\">\"shortcutName\"</span>: <span class=\"string\">\"RhinoDisk\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p>Electronrender <br>ElectronElectron</p>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p>smbwindowssmbelectronwebElectronjson<a href=\"https://github.com/typicode/lowdb\" target=\"_blank\" rel=\"noopener\">lowdb</a></p><p>[DEMO](<a href=\"https://github.com/NoJsJa/electron-react-template\" target=\"_blank\" rel=\"noopener\">https://github.com/NoJsJa/electron-react-template</a>)</p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li>()</li><li></li><li>ping</li><li>ID</li></ol><p>IPjson</p><p><img src=\"smb_node.jpg\" alt=\"RhinoDisk\"></p><p><img src=\"smb_node_conf.jpg\" alt=\"RhinoDisk\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li></li><li></li><li>QQ</li></ol><p>smbaccess_token(smbtoken)json</p><p><img src=\"smb_login.jpg\" alt=\"RhinoDisk\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li>windowssmbwindows</li><li>C-Z</li></ol><p>windowssmbwindows windows cmd</p><p><img src=\"smb_share.jpg\" alt=\"RhinoDisk\"><br><img src=\"smb_share_mount.jpg\" alt=\"RhinoDisk\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li></li><li></li><li>()</li><li></li></ol><p>jsonjson</p><p><img src=\"smb_upload_now.jpg\" alt=\"RhinoDisk\"><br><img src=\"smb_upload_record.jpg\" alt=\"RhinoDisk\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>lang</p><p><img src=\"electron-lang.png\" alt=\"lang\"></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; app &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'electron'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * global.lang -- </span></span><br><span class=\"line\"><span class=\"comment\"> * global.LANG -- (en_us, zh_cn, zh_tw)</span></span><br><span class=\"line\"><span class=\"comment\"> * session.lang -- sessioncookie(session )</span></span><br><span class=\"line\"><span class=\"comment\"> * cookie.lang -- session.langcookie.lang</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> lang = (<span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">lang</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> defaultLang = <span class=\"string\">'zh_CN'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* -------------------  ------------------- */</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> getLANG = <span class=\"function\">(<span class=\"params\">acceptLang</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ([<span class=\"string\">'en-US'</span>, <span class=\"string\">'en'</span>, <span class=\"string\">'en-us'</span>, <span class=\"string\">'en_us'</span>, <span class=\"string\">'en_US'</span>].indexOf(acceptLang) !== <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'en_us'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> ([<span class=\"string\">'zh-CN'</span>, <span class=\"string\">'zh'</span>, <span class=\"string\">'zh-cn'</span>, <span class=\"string\">'zh_cn'</span>, <span class=\"string\">'zh_CN'</span>].indexOf(acceptLang) !== <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'zh_cn'</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">if</span> ([<span class=\"string\">'zh-TW'</span>, <span class=\"string\">'zh-tw'</span>, <span class=\"string\">'zh_tw'</span>, <span class=\"string\">'zh_TW'</span>].indexOf(acceptLang) !== <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'zh_tw'</span>;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"string\">'zh_cn'</span>;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* -------------------  ------------------- */</span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> setLang = <span class=\"function\">(<span class=\"params\">langEnv</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    global.lang = global.lang ? global.lang : &#123;&#125;;</span><br><span class=\"line\">    global.LANG = langEnv;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    fs.readdir(path.join(app.getAppPath(), <span class=\"string\">'app/lang'</span>, langEnv), (err, files) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.error(err);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      files.forEach(<span class=\"function\">(<span class=\"params\">file</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        global.lang[path.basename(file)] = <span class=\"built_in\">require</span>(path.join(app.getAppPath(), <span class=\"string\">'app/lang'</span>, langEnv, file));</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">acceptLang</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> _lang = getLANG(acceptLang || defaultLang);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (global.LANG &amp;&amp; global.LANG == _lang) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    setLang(_lang);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;());</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = lang;</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>ElectronTrayMenu.buildFromTemplate</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">contextMenu() &#123;</span><br><span class=\"line\">    global.appTray = <span class=\"keyword\">new</span> Tray(path.join(app.getAppPath(), os.type() === <span class=\"string\">'Windows_NT'</span> ? <span class=\"string\">`resources/icon_<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.envConf.work_env&#125;</span>.ico`</span> : <span class=\"string\">'resources/mac_tray.png'</span>));</span><br><span class=\"line\">    <span class=\"keyword\">const</span> menu = Menu.buildFromTemplate( [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">          label: global.lang.public.quit,</span><br><span class=\"line\">          type: <span class=\"string\">'normal'</span>,</span><br><span class=\"line\">          click: <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.sendToWeb(<span class=\"string\">'upload'</span>, &#123;<span class=\"attr\">action</span>: <span class=\"string\">'getUploadingTask'</span>&#125;);</span><br><span class=\"line\">            ipcMainProcess.ipc.once(<span class=\"string\">'upload-getUploadingTask'</span>, (event, rsp) =&gt; &#123;</span><br><span class=\"line\">              <span class=\"keyword\">if</span> (rsp.code === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">                  global.ipcMainWindow.sendToWeb(<span class=\"string\">'shell'</span>, &#123; <span class=\"attr\">action</span>: <span class=\"string\">'upload-clear'</span> &#125;);</span><br><span class=\"line\">                  .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">                    global.appTray.destroy();</span><br><span class=\"line\">                    app.quit();</span><br><span class=\"line\">                  &#125;).catch(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">                    global.ipcMainProcess.notifySend(&#123;</span><br><span class=\"line\">                      body: global.lang.public[<span class=\"string\">'data_write_failed_before_quit'</span>]</span><br><span class=\"line\">                    &#125;);</span><br><span class=\"line\">                  &#125;);</span><br><span class=\"line\">                &#125;;</span><br><span class=\"line\">                </span><br><span class=\"line\">                <span class=\"keyword\">if</span> (rsp.result !== <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">                  <span class=\"keyword\">const</span> buttonId = dialog.showMessageBoxSync(<span class=\"keyword\">this</span>.windowoptions, &#123;</span><br><span class=\"line\">                    defaultId: <span class=\"number\">0</span>,</span><br><span class=\"line\">                    buttons: [<span class=\"string\">'No'</span>, <span class=\"string\">'Yes'</span>],</span><br><span class=\"line\">                    type: <span class=\"string\">'info'</span>,</span><br><span class=\"line\">                    title: global.lang.public.tips,</span><br><span class=\"line\">                    message: global.lang.upload.app_quit_tips</span><br><span class=\"line\">                  &#125;);</span><br><span class=\"line\">                  <span class=\"keyword\">if</span> (buttonId === <span class=\"number\">1</span>) quitApp();</span><br><span class=\"line\">                &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                  quitApp();</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">                </span><br><span class=\"line\">              &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                global.ipcMainProcess.notifySend(&#123;</span><br><span class=\"line\">                  body: rsp.result</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    ]);</span><br><span class=\"line\"></span><br><span class=\"line\">    global.appTray.on(<span class=\"string\">'click'</span>, ()=&gt;&#123;    </span><br><span class=\"line\">      <span class=\"keyword\">this</span>.window.show();</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    global.appTray.setToolTip(<span class=\"string\">'RninoDisk'</span>);</span><br><span class=\"line\">    global.appTray.setContextMenu(menu);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure><h4 id=\"Node\"><a href=\"#Node\" class=\"headerlink\" title=\"Node\"></a>Node</h4><ol><li><p>()<br>Node.js<code>child_process.exec</code> shell shell  command</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> child = <span class=\"built_in\">require</span>(<span class=\"string\">'child_process'</span>);</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [exec ]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123; [String] &#125;</span>  </span>command    []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123; [Array | String] &#125;</span>   </span>params  []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123; [Object] &#125;</span>  </span>options [exec]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@return <span class=\"type\">&#123; Promise &#125;</span>           </span>[Promise]</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">exports.exec = <span class=\"function\">(<span class=\"params\">_command, _params=[], _options=&#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> params = <span class=\"built_in\">Array</span>.isArray(_params) ? _params.join(<span class=\"string\">' '</span>) : <span class=\"string\">''</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> options = (<span class=\"built_in\">String</span>(_params) === <span class=\"string\">'[object Object]'</span>) ? _params : (_options);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> command = <span class=\"string\">`<span class=\"subst\">$&#123;_command&#125;</span> <span class=\"subst\">$&#123;params&#125;</span>`</span>;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(params, options, command);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    child.exec(command, options, (_err, _stdout, _stderr) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (_err) &#123;</span><br><span class=\"line\">        exports.console_log(_err, <span class=\"string\">'red'</span>);</span><br><span class=\"line\">        resolve(&#123;<span class=\"attr\">code</span>: <span class=\"number\">1</span>, <span class=\"attr\">result</span>: _err&#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (_stderr &amp;&amp; _stderr.toString()) &#123;</span><br><span class=\"line\">        exports.console_log(_stderr, <span class=\"string\">'red'</span>);</span><br><span class=\"line\">        resolve(&#123;<span class=\"attr\">code</span>: <span class=\"number\">1</span>, <span class=\"attr\">result</span>: _stderr&#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(_stdout);</span><br><span class=\"line\">        resolve(&#123;<span class=\"attr\">code</span>: <span class=\"number\">0</span>, <span class=\"attr\">result</span>: _stdout&#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li><li><p>()<br>Node.js<code>child_process.exec</code> shell shell  command</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> child = <span class=\"built_in\">require</span>(<span class=\"string\">'child_process'</span>);</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [execRealtime ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123; [String] &#125;</span>  </span>command    []</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123; [Array | String] &#125;</span>   </span>params  []</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123; [Object] &#125;</span>  </span>options [exec]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return <span class=\"type\">&#123; Promise &#125;</span>           </span>[Promise]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">exports.execRealtime = <span class=\"function\">(<span class=\"params\">_command, _params=[], _options=&#123;&#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> params = <span class=\"built_in\">Array</span>.isArray(_params) ? _params.join(<span class=\"string\">' '</span>) : <span class=\"string\">''</span>;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> options = (<span class=\"built_in\">String</span>(_params) === <span class=\"string\">'[object Object]'</span>) ? _params : (_options);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> command = <span class=\"string\">`<span class=\"subst\">$&#123;_command&#125;</span> <span class=\"subst\">$&#123;params&#125;</span>`</span>;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> data = <span class=\"string\">''</span>, error = <span class=\"string\">''</span>;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(params, options, command);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> result = child.exec(command, options);</span><br><span class=\"line\">    </span><br><span class=\"line\">    result.stdout.on(<span class=\"string\">'data'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">      exports.console_log(data, <span class=\"string\">'white'</span>);</span><br><span class=\"line\">      data += <span class=\"string\">`<span class=\"subst\">$&#123;data&#125;</span>`</span>;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    result.stderr.on(<span class=\"string\">'data'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">      exports.console_log(data, <span class=\"string\">'red'</span>);</span><br><span class=\"line\">      error += <span class=\"string\">`<span class=\"subst\">$&#123;data&#125;</span>`</span>;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    result.on(<span class=\"string\">'close'</span>, (code) =&gt; &#123;</span><br><span class=\"line\">      resolve(&#123;code, <span class=\"attr\">result</span>: data, error&#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><ol><li><p></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * getSystemDriveLetter []</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@return <span class=\"type\">&#123;[Array]&#125;</span> </span>[]</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">  getSystemDriveLetter() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.sudo.exec(<span class=\"string\">'fsutil fsinfo drives'</span>, [], &#123; <span class=\"attr\">encoding</span>: <span class=\"string\">'buffer'</span> &#125;).then(<span class=\"function\">(<span class=\"params\">stdout</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> driverstr = stdout;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> driverstrArr = driverstr.split(<span class=\"string\">' '</span>).filter(<span class=\"function\"><span class=\"params\">s</span> =&gt;</span> s !== os.EOL).map(<span class=\"function\"><span class=\"params\">s</span> =&gt;</span> s.replace(<span class=\"string\">'\\\\'</span>, <span class=\"string\">''</span>));</span><br><span class=\"line\">        <span class=\"keyword\">const</span> allDrivers = [</span><br><span class=\"line\">          <span class=\"string\">'C:'</span>, <span class=\"string\">'D:'</span>, <span class=\"string\">'E:'</span>, <span class=\"string\">'F:'</span>, <span class=\"string\">'G:'</span>, <span class=\"string\">'H:'</span>, <span class=\"string\">'I:'</span>, <span class=\"string\">'J:'</span>, <span class=\"string\">'K:'</span>, <span class=\"string\">'L:'</span>,</span><br><span class=\"line\">          <span class=\"string\">'M:'</span>, <span class=\"string\">'N:'</span>, <span class=\"string\">'O:'</span>, <span class=\"string\">'P:'</span>, <span class=\"string\">'Q:'</span>, <span class=\"string\">'R:'</span>, <span class=\"string\">'S:'</span>, <span class=\"string\">'T:'</span>, <span class=\"string\">'U:'</span>, <span class=\"string\">'V:'</span>,</span><br><span class=\"line\">          <span class=\"string\">'W:'</span>, <span class=\"string\">'X:'</span>, <span class=\"string\">'Y:'</span>, <span class=\"string\">'Z:'</span></span><br><span class=\"line\">        ];</span><br><span class=\"line\">        driverstrArr.shift();</span><br><span class=\"line\">        resolve(&#123;</span><br><span class=\"line\">          code: <span class=\"number\">200</span>,</span><br><span class=\"line\">          result: &#123;</span><br><span class=\"line\">            mounted: driverstrArr,</span><br><span class=\"line\">            available: allDrivers.filter(<span class=\"function\"><span class=\"params\">d</span> =&gt;</span> !driverstrArr.includes(d.toLocaleUpperCase()))</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;, (err) =&gt; &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.error(err);</span><br><span class=\"line\">        resolve(&#123;</span><br><span class=\"line\">          code: <span class=\"number\">600</span>,</span><br><span class=\"line\">          result: err,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>UNC</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*  */</span></span><br><span class=\"line\">_mountSystemDriver_Windows_NT(&#123; host, driver, path, auto = <span class=\"literal\">false</span> &#125;) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> pwd = global.ipcMainProcess.userModel.get(<span class=\"string\">'last.pwd'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; isThirdUser, nickname, isLocalUser, username &#125; = global.ipcMainProcess.userModel.info;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> commandUseIPC = <span class=\"string\">`net use \\\\\\\\<span class=\"subst\">$&#123;host&#125;</span>\\\\ipc$ \"<span class=\"subst\">$&#123;pwd&#125;</span>\" /user:\"<span class=\"subst\">$&#123;username&#125;</span>\"`</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> commandMount = <span class=\"string\">`net use <span class=\"subst\">$&#123;driver&#125;</span> \\\\\\\\<span class=\"subst\">$&#123;host&#125;</span>\\\\<span class=\"subst\">$&#123;path&#125;</span> \"<span class=\"subst\">$&#123;pwd&#125;</span>\" /user:\"<span class=\"subst\">$&#123;username&#125;</span>\"`</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> commandUmount = <span class=\"string\">`net use <span class=\"subst\">$&#123;driver&#125;</span> /del /y`</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.getSystemDriveLetter()</span><br><span class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">rsp</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (rsp.code === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (rsp.result.mounted.includes(driver.toLocaleUpperCase())) &#123;</span><br><span class=\"line\">              <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(global.lang.node.driver_already_mount);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(global.lang.node.get_system_mount_info_failed);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        <span class=\"comment\">// UNC</span></span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.sudo.exec(commandUseIPC);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.sudo.exec(commandMount);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>.update(<span class=\"string\">'mountPoint'</span>, &#123; username, host, path &#125;, &#123;</span><br><span class=\"line\">            username, host, path, driver, auto</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;).then(<span class=\"function\">(<span class=\"params\">rsp</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">200</span>,</span><br><span class=\"line\">            result: &#123;</span><br><span class=\"line\">              username, host, driver</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;).catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.error(err, err.toString());</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: global.lang.node.net_mount_failed_reason,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"-1\"><a href=\"#-1\" class=\"headerlink\" title=\"\"></a></h4><p>AWS<a href=\"https://nojsja.gitee.io/blogs/2020/03/07/%E5%9F%BA%E4%BA%8Es3%E5%AF%B9%E8%B1%A1%E5%AD%98%E5%82%A8%E5%A4%9A%E6%96%87%E4%BB%B6%E5%88%86%E7%89%87%E4%B8%8A%E4%BC%A0%E7%9A%84Javascript%E5%AE%9E%E7%8E%B0-%E4%B8%80/\" target=\"_blank\" rel=\"noopener\">s3Javascript()</a><code></code>smb Node.js  FS APIWindows UNC<code>\\\\[host]\\[sharename]\\file1</code></p><p><br><img src=\"shards_upload.jpg\" alt=\"upload\"></p><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>1) <code>&lt;Input /&gt;</code>FileList(ElectronFile<code>path</code>)<br>2) FileListFileListFile<br>3init<br>4Node.jsinit<br>5initIDNode.jsuploadID()<br>6Node.jsuploadIDFS API<br>7uploadNode.jscompleteID<br>8Node.jsID<br>9sync<br>10Node.jssync</p><h5 id=\"Node-js-Electron-\"><a href=\"#Node-js-Electron-\" class=\"headerlink\" title=\"Node.js(Electron)\"></a>Node.js(Electron)</h5><ol><li><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * init []</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>host []</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>username []</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>file []</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>abspath []</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>sharename [smb]</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>fragsize []</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">  init(&#123; host, file, abspath, sharename, fragsize, prefix = <span class=\"string\">''</span> &#125;) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> pre = <span class=\"string\">`\\\\\\\\<span class=\"subst\">$&#123;host&#125;</span>\\\\<span class=\"subst\">$&#123;sharename&#125;</span>`</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> date = <span class=\"built_in\">Date</span>.now();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; pwd, username &#125; = global.ipcMainProcess.userModel.info;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> uploadId = getStringMd5(date + file.name + file.type + file.size);</span><br><span class=\"line\">    <span class=\"keyword\">let</span> remotePath = <span class=\"string\">''</span>;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> size = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// UNCsmb</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.uncCommandConnect(&#123; host, username, pwd, sharename &#125;)</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">reso</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          remotePath = path.join(pre, prefix, file.name);</span><br><span class=\"line\">          fsPromise.unlink(path.join(pre, prefix, file.name)).then(reso).catch(reso);</span><br><span class=\"line\">        &#125;))</span><br><span class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">rsp</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// </span></span><br><span class=\"line\">          <span class=\"keyword\">const</span> dirs = getFileDirs([path.join(prefix, file.name)]);</span><br><span class=\"line\">          <span class=\"keyword\">return</span> mkdirs(pre, dirs);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">rsp</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// </span></span><br><span class=\"line\">          <span class=\"keyword\">return</span> fileBlock.open(abspath)</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .then(<span class=\"function\">(<span class=\"params\">rsp</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (rsp.code === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>._setUploadRecordsInMemory(&#123;</span><br><span class=\"line\">              username,</span><br><span class=\"line\">              host,</span><br><span class=\"line\">              filename: path.join(prefix, file.name),</span><br><span class=\"line\">              size: file.size,</span><br><span class=\"line\">              fragsize,</span><br><span class=\"line\">              sharename,</span><br><span class=\"line\">              abspath,</span><br><span class=\"line\">              remotePath,</span><br><span class=\"line\">              startime: getTime(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime()), <span class=\"comment\">// </span></span><br><span class=\"line\">              endtime: <span class=\"string\">''</span>,</span><br><span class=\"line\">              uploadId,</span><br><span class=\"line\">              index: <span class=\"number\">0</span>,</span><br><span class=\"line\">              total: <span class=\"built_in\">Math</span>.ceil(size / fragsize),</span><br><span class=\"line\">              status: <span class=\"string\">'uploading'</span> <span class=\"comment\">// </span></span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            resolve(rsp);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;).then(<span class=\"function\">(<span class=\"params\">rsp</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">200</span>,</span><br><span class=\"line\">            result: &#123;</span><br><span class=\"line\">              uploadId,</span><br><span class=\"line\">              size,</span><br><span class=\"line\">              total: <span class=\"built_in\">Math</span>.ceil(size / fragsize)</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: err.toString()</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * upload []</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>index [0]</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>uploadId [ID]</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">  upload(&#123; uploadId, index &#125;) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> record = <span class=\"keyword\">this</span>._getUploadRecordsInMemory(uploadId);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!record) <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(&#123; <span class=\"attr\">code</span>: <span class=\"number\">600</span>, <span class=\"attr\">result</span>: lang.upload.readDataFailed &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (record.status !== <span class=\"string\">'uploading'</span>) <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(&#123; <span class=\"attr\">code</span>: <span class=\"number\">600</span>, <span class=\"attr\">result</span>: lang.upload.readDataFailed &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; host, filename, size, sharename, fragsize, abspath, username &#125; = record;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> pwd = global.ipcMainProcess.userModel.info.pwd;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> pre = <span class=\"string\">`\\\\\\\\<span class=\"subst\">$&#123;host&#125;</span>\\\\<span class=\"subst\">$&#123;sharename&#125;</span>`</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> position = fragsize * (index);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> slicesize = ((fragsize * (index + <span class=\"number\">1</span>)) &lt;= size) ? fragsize : (size - fragsize * index);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (position &gt; size) &#123;</span><br><span class=\"line\">        resolve(&#123;</span><br><span class=\"line\">          code: <span class=\"number\">600</span>,</span><br><span class=\"line\">          result: lang.upload.upload_index_overflow</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      fileBlock.read(abspath, position, slicesize)</span><br><span class=\"line\">        .then(<span class=\"function\"><span class=\"params\">rsp</span> =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (rsp.code === <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            fs.appendFile(path.join(pre, filename), rsp.result, &#123; <span class=\"attr\">encoding</span>: <span class=\"string\">'binary'</span> &#125;, (err) =&gt; &#123;</span><br><span class=\"line\">              <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                checkPermission(path.join(pre, filename, <span class=\"string\">'..'</span>), <span class=\"string\">'ew'</span>, (err2, isExit, canWrite) =&gt; &#123;</span><br><span class=\"line\">                  <span class=\"keyword\">if</span> (err2) &#123;</span><br><span class=\"line\">                    resolve(&#123;</span><br><span class=\"line\">                      code: <span class=\"number\">600</span>,</span><br><span class=\"line\">                      result: global.lang.upload.writeDataFailed</span><br><span class=\"line\">                    &#125;);</span><br><span class=\"line\">                  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (isExit &amp;&amp; !canWrite) &#123;</span><br><span class=\"line\">                    resolve(&#123;</span><br><span class=\"line\">                      code: <span class=\"number\">600</span>,</span><br><span class=\"line\">                      result: global.lang.upload.insufficientPermissionUpload</span><br><span class=\"line\">                    &#125;);</span><br><span class=\"line\">                  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                    resolve(&#123;</span><br><span class=\"line\">                      code: <span class=\"number\">600</span>,</span><br><span class=\"line\">                      result: global.lang.upload.writeDataFailed</span><br><span class=\"line\">                    &#125;);</span><br><span class=\"line\">                  &#125;</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">              &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">                <span class=\"comment\">// </span></span><br><span class=\"line\">                <span class=\"keyword\">this</span>._updateUploadRecordsInMemory(&#123; <span class=\"attr\">index</span>: (index + <span class=\"number\">1</span>) &#125;, uploadId);</span><br><span class=\"line\">                resolve(&#123;</span><br><span class=\"line\">                  code: <span class=\"number\">200</span>,</span><br><span class=\"line\">                  result: &#123; filename, uploadId, index, abspath, sharename &#125;</span><br><span class=\"line\">                &#125;);</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">              <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>._getUploadRecordsInMemory(uploadId) || <span class=\"keyword\">this</span>._getUploadRecordsInMemory(uploadId).status === <span class=\"string\">'error'</span>) &#123;</span><br><span class=\"line\">                <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">                  <span class=\"built_in\">console</span>.log(<span class=\"string\">'--uploading-unlink'</span>, path.join(pre, filename));</span><br><span class=\"line\">                  fs.unlinkSync(path.join(pre, filename));</span><br><span class=\"line\">                &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">                  <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            resolve(rsp);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">        .catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: err.toString()</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">    * upload []</span></span><br><span class=\"line\"><span class=\"comment\">    * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>uploadId [ID]</span></span><br><span class=\"line\"><span class=\"comment\">    */</span></span><br><span class=\"line\">  complete(&#123; uploadId &#125;) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> record = <span class=\"keyword\">this</span>._getUploadRecordsInMemory(uploadId);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!record) <span class=\"keyword\">return</span> <span class=\"built_in\">Promise</span>.resolve(&#123; <span class=\"attr\">code</span>: <span class=\"number\">600</span>, <span class=\"attr\">result</span>: lang.upload.readDataFailed &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; abspath &#125; = record;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>._updateUploadRecordsInMemory(&#123; <span class=\"attr\">status</span>: <span class=\"string\">'break'</span>, <span class=\"attr\">endtime</span>: getTime(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime()) &#125;, uploadId);</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      fileBlock.close(abspath).then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        resolve(&#123;</span><br><span class=\"line\">          code: <span class=\"number\">200</span>,</span><br><span class=\"line\">          result: uploadId</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;).catch(<span class=\"function\"><span class=\"params\">err</span> =&gt;</span> &#123;</span><br><span class=\"line\">        resolve(&#123;</span><br><span class=\"line\">          code: <span class=\"number\">600</span>,</span><br><span class=\"line\">          result: err.toString()</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><br><code>open</code><code>read</code></li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * readFileBlock []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">exports.readFileBlock = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> fdStore = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> smallFileMap = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/*  */</span></span><br><span class=\"line\">    open: <span class=\"function\">(<span class=\"params\">path, size, minSize=<span class=\"number\">1024</span>*<span class=\"number\">2</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// </span></span><br><span class=\"line\">          <span class=\"keyword\">if</span> (size &lt;= minSize) &#123;</span><br><span class=\"line\">            smallFileMap[path] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> resolve(&#123;</span><br><span class=\"line\">              code: <span class=\"number\">200</span>,</span><br><span class=\"line\">              result: &#123;</span><br><span class=\"line\">                fd: <span class=\"literal\">null</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          <span class=\"comment\">// fd</span></span><br><span class=\"line\">          fs.open(path, <span class=\"string\">'r'</span>, (err, fd) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">              <span class=\"built_in\">console</span>.trace(err);</span><br><span class=\"line\">              resolve(&#123;</span><br><span class=\"line\">                code: <span class=\"number\">601</span>,</span><br><span class=\"line\">                result: err.toString()</span><br><span class=\"line\">              &#125;);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">              fdStore[path] = fd;</span><br><span class=\"line\">              resolve(&#123;</span><br><span class=\"line\">                code: <span class=\"number\">200</span>,</span><br><span class=\"line\">                result: &#123;</span><br><span class=\"line\">                  fd: fdStore[path]</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.trace(err);</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: err.toString()</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">/*  */</span></span><br><span class=\"line\">    read: <span class=\"function\">(<span class=\"params\">path, position, length</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> callback = <span class=\"function\">(<span class=\"params\">err, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">            resolve(&#123;</span><br><span class=\"line\">              code: <span class=\"number\">600</span>,</span><br><span class=\"line\">              result: err.toString()</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            resolve(&#123;</span><br><span class=\"line\">              code: <span class=\"number\">200</span>,</span><br><span class=\"line\">              result: data</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// </span></span><br><span class=\"line\">          <span class=\"keyword\">if</span> (smallFileMap[path]) &#123;</span><br><span class=\"line\">            fs.readFile(path, (err, buffer) =&gt; &#123;</span><br><span class=\"line\">              callback(err, buffer);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (length === <span class=\"number\">0</span>) <span class=\"keyword\">return</span> callback(<span class=\"literal\">null</span>, <span class=\"string\">''</span>);</span><br><span class=\"line\">            fs.read(fdStore[path], Buffer.alloc(length), <span class=\"number\">0</span>, length, position, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, readByte, readResult</span>)</span>&#123;</span><br><span class=\"line\">              callback(err, readResult);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.trace(err);</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: err.toString()</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*  */</span></span><br><span class=\"line\">    close: <span class=\"function\">(<span class=\"params\">path</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (smallFileMap[path]) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">delete</span> smallFileMap[path];</span><br><span class=\"line\">            resolve(&#123;</span><br><span class=\"line\">              code: <span class=\"number\">200</span></span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            fs.close(fdStore[path], () =&gt; &#123;</span><br><span class=\"line\">              resolve(&#123;<span class=\"attr\">code</span>: <span class=\"number\">200</span>&#125;);</span><br><span class=\"line\">              <span class=\"keyword\">delete</span> fdStore[path];</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.trace(err);</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: err.toString()</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    fdStore</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h4 id=\"windows\"><a href=\"#windows\" class=\"headerlink\" title=\"windows\"></a>windows</h4><p>windowselectron nsis<code>.ico</code>package.json<code>build.files</code><code>build.win</code>windows<code>build.nsis</code>nsis<code>npm run build-win</code>winElectron AppwebelectronNode.js<a href=\"https://github.com/NoJsJa/electron-react-template/blob/master/build.js\" target=\"_blank\" rel=\"noopener\">build.js</a><a href=\"https://github.com/NoJsJa/electron-react-template/blob/master/server/build.js\" target=\"_blank\" rel=\"noopener\">electron build.js</a><code>build.js</code>web<code>electron build.js</code>Electron App<code>node build.js --help</code></p><p><strong>node build.js - -help</strong></p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">description: build <span class=\"built_in\">command</span> <span class=\"keyword\">for</span> RhinoDisk.</span><br><span class=\"line\">    <span class=\"built_in\">command</span>: node build.js [action] [config]</span><br><span class=\"line\">    |</span><br><span class=\"line\">    |</span><br><span class=\"line\">    |______ param: [--<span class=\"built_in\">help</span> | -h ] =&gt; show usage info.</span><br><span class=\"line\">    |______ param: [build-win   ] [--edit | --office] =&gt; build package <span class=\"keyword\">for</span> windows, the default conf file is ./server/config.json.</span><br><span class=\"line\">    |______ param: [build-linux ] [--edit | --office] =&gt; build package <span class=\"keyword\">for</span> linux, the default conf file is ./server/config.json</span><br><span class=\"line\">    |______ param: [build-mac   ] [--edit | --office] =&gt; build package <span class=\"keyword\">for</span> mac, the default conf file is ./server/config.json</span><br><span class=\"line\">    |______ param: [build-all   ] [--edit | --office] =&gt; build package <span class=\"keyword\">for</span> all platform, the default conf file is ./server/config.json</span><br><span class=\"line\">    |______ param: [clean-build ] =&gt; clean build directory after build</span><br><span class=\"line\">    |</span><br><span class=\"line\">    |______ example1: node build.js build-win</span><br><span class=\"line\">    |______ example2: node build.js build-linux</span><br><span class=\"line\">    |______ example3: node build.js build-mac</span><br><span class=\"line\">    |______ example4: node build.js build-all</span><br><span class=\"line\">    |______ example5: node build.js build-win --edit</span><br><span class=\"line\">    |______ example6: node build.js build-win --office</span><br><span class=\"line\">    |______ example7: node build.js --<span class=\"built_in\">help</span></span><br><span class=\"line\">    |______ example8: node build.js clean-build</span><br></pre></td></tr></table></figure><p><strong>package.json</strong><br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"string\">\"name\"</span>: <span class=\"string\">\"RhinoDisk\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"version\"</span>: <span class=\"string\">\"1.0.0\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"description\"</span>: <span class=\"string\">\"SMB management client\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"main\"</span>: <span class=\"string\">\"index.js\"</span>,</span><br><span class=\"line\">  <span class=\"string\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">    <span class=\"string\">\"build-win\"</span>: <span class=\"string\">\"electron-builder --win\"</span>,</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">\"devDependencies\"</span>: &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">\"dependencies\"</span>: &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"string\">\"build\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"string\">\"productName\"</span>: <span class=\"string\">\"RhinoDisk\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"appId\"</span>: <span class=\"string\">\"org.datatom.rhinodisk\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"asar\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    <span class=\"string\">\"copyright\"</span>: <span class=\"string\">\"CopyRight  2011-2020 \"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"directories\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"buildResources\"</span>: <span class=\"string\">\"build\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"output\"</span>: <span class=\"string\">\"build\"</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">\"files\"</span>: [</span><br><span class=\"line\">      <span class=\"string\">\"package.json\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"config.json\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"index.js\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"dist/\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"node_modules/\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"resources/*.*\"</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"string\">\"win\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"icon\"</span>: <span class=\"string\">\"build/iconx256.ico\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"target\"</span>: [</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          <span class=\"string\">\"target\"</span>: <span class=\"string\">\"zip\"</span></span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        &#123;</span><br><span class=\"line\">          <span class=\"string\">\"target\"</span>: <span class=\"string\">\"nsis\"</span>,</span><br><span class=\"line\">          <span class=\"string\">\"arch\"</span>: [</span><br><span class=\"line\">            <span class=\"string\">\"x64\"</span></span><br><span class=\"line\">          ]</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      ]</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    <span class=\"string\">\"nsis\"</span>: &#123;</span><br><span class=\"line\">      <span class=\"string\">\"oneClick\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">      <span class=\"string\">\"allowElevation\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"string\">\"allowToChangeInstallationDirectory\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"string\">\"installerIcon\"</span>: <span class=\"string\">\"./build/iconx256.ico\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"uninstallerIcon\"</span>: <span class=\"string\">\"./build/iconx256.ico\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"installerHeaderIcon\"</span>: <span class=\"string\">\"./build/iconx256.ico\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"createDesktopShortcut\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"string\">\"createStartMenuShortcut\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"string\">\"deleteAppDataOnUninstall\"</span>: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      <span class=\"string\">\"shortcutName\"</span>: <span class=\"string\">\"RhinoDisk\"</span></span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p>Electronrender <br>ElectronElectron</p>"},{"title":"Electronsmb","catalog":true,"toc_nav_num":true,"date":"2020-08-16T14:30:00.000Z","subtitle":"smb samba client upload","header-img":"article_header.png","updateDate":"2020-08-16T14:30:00.000Z","top":2,"_content":"\n\n### \n---------------\n\n![RhinoDisk](smb_upload_now.jpg)\n\n[Electronsmb](https://nojsja.gitee.io/blogs/2020/07/17/%E5%9F%BA%E4%BA%8EElectron%E7%9A%84smb%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/)SMB``Electron  \n\n[DEMO](https://github.com/NoJsJa/electron-react-template)\n\n### Electron\n-------------------\n\n#### \n\n![electron](electron1.png)\n\nElectron  package.json  main web Electron   \n BrowserWindow  BrowserWindow  BrowserWindow \nweb web   \n\nweb  Electron  Node.js  API \n GUI  API  web  GUI   web  GUI  GUI \n\n#### \n\n1. remote\nremoteremote, main, remoteBrowserWindows  \n```js\n/* (web) */\nconst { BrowserWindow } = require('electron').remote\nlet win = new BrowserWindow({ width: 800, height: 600 })\nwin.loadURL('https://github.com')\n```\nremoteipc(=)Node.jsIOremote\n\n2. ipc  \nipcipcRenderer(webContentsId)ipcMain\n```js\n/*  */\nipcMain.on(channel, listener) //  - \nipcMain.once(channel, listener) //  - \nipcMain.handle(channel, listener) // invoke\nipcMain.handleOnce(channel, listener) // invoke\nbrowserWindow.webContents.send(channel, args); //  - \n\n\n/*  */\nipcRenderer.on(channel, listener); //  - \nipcRenderer.once(channel, listener); //  - \nipcRenderer.sendSync(channel, args); //  - \nipcRenderer.invoke(channel, args); //  - Promise\nipcRenderer.sendTo(webContentsId, channel, ...args); //  - \nipcRenderer.sendToHost(channel, ...args) // hostwebview - \n```\n\n### \n---------------\nJSrenderElectronNode.jsrender\n\n#### \n\n* `Input`FileList(HTML5 APIweb)\n\n* smbNode.js NPMsmbsmbnpmNode.jsFS APIWindows UNCsmb`\\\\[host]\\[sharename]\\file1`file1uncNode.js FS APIsmbsmbWindows `UNC`\n\n```js\n/* uncsmb */\n_uncCommandConnect_Windows_NT({ host, username, pwd }) {\n    const { isThirdUser, nickname, isLocalUser } = global.ipcMainProcess.userModel.info;\n    const commandUse = `net use \\\\\\\\${host}\\\\ipc$ \"${pwd}\" /user:\"${username}\"`;\n    return new Promise((resolve) => {\n      this.sudo.exec(commandUse).then((res) => {\n        resolve({\n          code: 200,\n        });\n      }).catch((err) => {\n        resolve({\n          code: 600,\n          result: global.lang.upload.unc_connection_failed\n        });\n      });\n    });\n  }\n```\n\n#### \n\n\n\n![upload](shards_upload.jpg)\n\n1. `<Input />`FileList(ElectronFile`path`)  \n2. FileListFileListFile  \n3. init  \n4. Node.jsinitIDNode.js  \n5. initIDNode.jsuploadID()  \n6. Node.jsuploadIDFS APISMB  \n7. uploadNode.jscompleteID  \n8. Node.jsID  \n9. sync()  \n10. Node.jssync  \n\n#### Node.js\n\n* `open`\n* `read`\n* `close`\n\n`path`\n\n```js\n/**\n  * readFileBlock []\n  */\nexports.readFileBlock = () => {\n\n  const fdStore = {};\n  const smallFileMap = {};\n\n  return {\n    /*  */\n    open: (path, size, minSize=1024*2) => {\n      return new Promise((resolve) => {\n        try {\n          // \n          if (size <= minSize) {\n            smallFileMap[path] = true;\n            return resolve({\n              code: 200,\n              result: {\n                fd: null\n              }\n            });\n          }\n          // fd\n          fs.open(path, 'r', (err, fd) => {\n            if (err) {\n              console.trace(err);\n              resolve({\n                code: 601,\n                result: err.toString()\n              });\n            } else {\n              fdStore[path] = fd;\n              resolve({\n                code: 200,\n                result: {\n                  fd: fdStore[path]\n                }\n              });\n            }\n          });\n        } catch (err) {\n          console.trace(err);\n          resolve({\n            code: 600,\n            result: err.toString()\n          });\n        }\n      })\n    },\n  \n    /*  */\n    read: (path, position, length) => {\n      return new Promise((resolve, reject) => {\n        const callback = (err, data) => {\n          if (err) {\n            resolve({\n              code: 600,\n              result: err.toString()\n            });\n          } else {\n            resolve({\n              code: 200,\n              result: data\n            });\n          }\n        };\n        try {\n          // \n          if (smallFileMap[path]) {\n            fs.readFile(path, (err, buffer) => {\n              callback(err, buffer);\n            });\n          } else {\n            // \n            if (length === 0) return callback(null, '');\n            fs.read(fdStore[path], Buffer.alloc(length), 0, length, position, function(err, readByte, readResult){\n              callback(err, readResult);\n            });\n          }\n        } catch (err) {\n          console.trace(err);\n          resolve({\n            code: 600,\n            result: err.toString()\n          });\n        }\n      });\n    },\n\n    /*  */\n    close: (path) => {\n      return new Promise((resolve) => {\n        try {\n          if (smallFileMap[path]) {\n            delete smallFileMap[path];\n            resolve({\n              code: 200\n            });\n          } else {\n            fs.close(fdStore[path], () => {\n              resolve({code: 200});\n              delete fdStore[path];\n            });\n          }\n        } catch (err) {\n          console.trace(err);\n          resolve({\n            code: 600,\n            result: err.toString()\n          });\n        }\n      });\n    },\n\n    fdStore\n\n  }\n\n}\n\n```\n\n### Electron\n----------------------\n\nElectron\n\n#### ElectronDevtools\n\n`Performance`\n\n![upload_performance.jpg](upload_performance.jpg)\n\n`Memory`\n\n![upload_memory.jpg](upload_memory.jpg)\n\n#### Antd Table\n\n10006Antd TableAntd TableAntd TabletableTableTable\n\n#### Electron\n\nchromiumRenderProcessRenderProcessHostChromiumIPCchromiumUImain processIPCmain processUIprocessIPC\n\n![upload_memory.jpg](chromium.jpg)\n\nCPUIOIPCIPCUI\n\nNode.jsIONode.jsFS callbackFs Promise\n\n#### Node.js\n\n(~)ElectronNode.js`child_process`([](http://nodejs.cn/api/child_process.html))\n\n```js\nconst electron = require('electron');\nconst { app, BrowserWindow, Menu, Tray, dialog } = require('electron');\nconst { fork } = require('child_process');\nconst path = require('path');\nconst url = require('url');\nconst os = require('os');\nconst { EventEmitter } = require('events');\nconst { getRandomString } = require(path.join(app.getAppPath(), 'app/utils/utils'));\n\n/**\n  * ChildProcessPool []\n  * @author nojsja\n  * @param  {[String]} path []\n  * @param  {[Number]} max []\n  * @param  {[String]} cwd []\n  * @param  {[Object]} env []\n  */\nclass ChildProcessPool {\n  constructor({ path, max=6, cwd, env })\n  {\n    this.cwd = cwd || undefined;\n    this.env = env || undefined;\n    this.inspectStartIndex = 5858;\n    this.callbacks = {};\n    this.pidMap = new Map();\n    this.collaborationMap = new Map();\n    this.event = new EventEmitter();\n    this.forked = [];\n    this.forkedPath = path;\n    this.forkIndex = 0;\n    this.forkMaxIndex = max;\n    // \n    this.event.on('fork-callback', (data) => {\n      if (this.collaborationMap.get(data.id) !== undefined) {\n        this.dataRespondAll(data)\n      } else {\n        this.dataRespond(data);\n      }\n    })\n  }\n  \n  /*  */\n  dataRespond = (data) => {\n    if (data.id && this.callbacks[data.id]) {\n      this.callbacks[data.id](data.result);\n      delete this.callbacks[data.id];\n    };\n  }\n\n  /*  */\n  dataRespondAll = (data) => {\n    let resultAll = this.collaborationMap.get(data.id);\n    if (!data.id) return;\n    if (resultAll !== undefined) {\n      this.collaborationMap.set(data.id, [...resultAll, data.result]);\n    } else {\n      this.collaborationMap.set(data.id, [data.result]);\n    }\n    resultAll = this.collaborationMap.get(data.id);\n    if (resultAll.length === this.forked.length) {\n      this.callbacks[data.id](resultAll);\n      delete this.callbacks[data.id];\n      this.collaborationMap.delete(data.id);\n    }\n  }\n\n  /*  */\n  getForkedFromPool(id=\"default\") {\n    let forked;\n    if (!this.pidMap.get(id)) {\n      if (this.forked.length < this.forkMaxIndex) {\n        this.inspectStartIndex ++;\n        forked = fork(\n          this.forkedPath,\n          // inspect\n          this.env.NODE_ENV === \"development\" ? [`--inspect=${this.inspectStartIndex}`] : [],\n          {\n            cwd: this.cwd,\n            env: this.env,\n          }\n        );\n        this.forked.push(forked);\n        this.forkIndex += 1;\n        forked.on('message', (data) => {\n          this.event.emit('fork-callback', data);\n        });\n        this.pidMap.set(id, forked.pid);\n      } else {\n        this.forkIndex = this.forkIndex % this.forkMaxIndex;\n        forked = this.forked[this.forkIndex];\n        this.pidMap.set(id, forked.pid);\n        this.forkIndex += 1;\n      }\n    } else {\n      forked = this.forked.filter(f => f.pid === this.pidMap.get(id))[0];\n      if (!forked) throw new Error(`Get forked process from pool failed! the process pid: ${this.pidMap.get(id)}.`);\n    }\n\n    return forked;\n  }\n\n  /*  */\n  send(params, givenId) {\n    const id = givenId || getRandomString();\n    const forked = this.getForkedFromPool(id);\n    return new Promise(resolve => {\n      this.callbacks[id] = resolve;\n      forked.send({...params, id});\n    });\n  }\n\n  /*  */\n  sendToAll(params) {\n    const id = getRandomString(); \n    return new Promise(resolve => {\n      this.callbacks[id] = resolve;\n      this.collaborationMap.set(id, []);\n      if (this.forked.length) {\n        this.forked.forEach((forked) => {\n          forked.send({...params, id});\n        })\n      } else {\n        this.getForkedFromPool().send({...params, id});\n      }\n    });\n  }\n}\n\nmodule.exports = ChildProcessPool;\n\n```\n\n1. `send``sendToAll`idid\n\n2. `dataRespond``dataRespondAll`\n\n3. `getForkedFromPool`\n\n4. `getForkedFromPool````this.env.NODE_ENV === \"development\" ? [`--inspect=${this.inspectStartIndex}`] : []```Node.jsjs`- -inspect=` Devtools`chrome://inspect/#devices``Open dedicated DevTools for Node`\n![upload_memory.jpg](inspect.jpg)\n\n5. `path`CPU`uploadStore`io`fileBlock`IO\n[](https://github.com/NoJsJa/electron-react-template/blob/master/server/app/services/child/upload.js)\n```js\n  const fs = require('fs');\n  const fsPromise = fs.promises;\n  const path = require('path');\n  const utils = require('./child.utils');\n  const requireLang = require('../../lang');\n  const { readFileBlock, uploadRecordStore, unlink } = utils;\n  const fileBlock = readFileBlock();\n  const uploadStore = uploadRecordStore();\n  requireLang(process.env.LANG);\n\n  process.on('message', ({action, params, id }) => {\n    switch (action) {\n      case 'init-works':\n        initWorks(params).then((rsp) => {\n          process.send({result: rsp, id});\n        });\n        break;\n      case 'upload-works':\n        uploadWorks(params, id).then(rsp => {\n          process.send({result: rsp, id});\n        });\n        break;\n      case 'close':\n        close(params, id).then(rsp => {\n          process.send({result: rsp, id});\n        });\n        break;\n      case 'record-set':\n        uploadStore.set(params);\n        process.send({result: null, id});\n        break;\n      case 'record-get':\n        process.send({result: uploadStore.get(params), id});\n        break;\n      case 'record-get-all':\n        process.send({result: uploadStore.getAll(params), id});\n        break;\n      case 'record-update':\n        uploadStore.update(params);\n        process.send({result: null, id});\n        break;\n      case 'record-remove':\n        uploadStore.remove(params);\n        process.send({result: null, id});\n        break;\n      case 'record-reset': \n        uploadStore.reset(params);\n        process.send({result: null, id});\n      break;\n      case 'unlink': \n        unlink(params).then(rsp => {\n          process.send({result: rsp, id});\n        })\n      break;\n      default:\n        break;\n    }\n  });\n\n  // \n  ...\n\n```\n\n#### \n\n* ()Electron  \n* CPU`refreshTasks`()` = ` `refreshTasks`for(O(n)n)\n* 100010000\n\n![refreshTasks](refreshTasks.jpg)\n\n### \n--------\n\nElectronrender...   \nElectronElectron\n","source":"_posts/2020-08-16-Electronsmb.md","raw":"---\ntitle: \"Electronsmb\"\ncatalog: true\ntoc_nav_num: true\ndate: 2020-08-16 22:30:00\nsubtitle: \"smb samba client upload\"\nheader-img: \"article_header.png\"\ntags:\n- upload\n- smb\ncategories:\n- Electron\nupdateDate: 2020-08-16 22:30:00\ntop: 2\n---\n\n\n### \n---------------\n\n![RhinoDisk](smb_upload_now.jpg)\n\n[Electronsmb](https://nojsja.gitee.io/blogs/2020/07/17/%E5%9F%BA%E4%BA%8EElectron%E7%9A%84smb%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/)SMB``Electron  \n\n[DEMO](https://github.com/NoJsJa/electron-react-template)\n\n### Electron\n-------------------\n\n#### \n\n![electron](electron1.png)\n\nElectron  package.json  main web Electron   \n BrowserWindow  BrowserWindow  BrowserWindow \nweb web   \n\nweb  Electron  Node.js  API \n GUI  API  web  GUI   web  GUI  GUI \n\n#### \n\n1. remote\nremoteremote, main, remoteBrowserWindows  \n```js\n/* (web) */\nconst { BrowserWindow } = require('electron').remote\nlet win = new BrowserWindow({ width: 800, height: 600 })\nwin.loadURL('https://github.com')\n```\nremoteipc(=)Node.jsIOremote\n\n2. ipc  \nipcipcRenderer(webContentsId)ipcMain\n```js\n/*  */\nipcMain.on(channel, listener) //  - \nipcMain.once(channel, listener) //  - \nipcMain.handle(channel, listener) // invoke\nipcMain.handleOnce(channel, listener) // invoke\nbrowserWindow.webContents.send(channel, args); //  - \n\n\n/*  */\nipcRenderer.on(channel, listener); //  - \nipcRenderer.once(channel, listener); //  - \nipcRenderer.sendSync(channel, args); //  - \nipcRenderer.invoke(channel, args); //  - Promise\nipcRenderer.sendTo(webContentsId, channel, ...args); //  - \nipcRenderer.sendToHost(channel, ...args) // hostwebview - \n```\n\n### \n---------------\nJSrenderElectronNode.jsrender\n\n#### \n\n* `Input`FileList(HTML5 APIweb)\n\n* smbNode.js NPMsmbsmbnpmNode.jsFS APIWindows UNCsmb`\\\\[host]\\[sharename]\\file1`file1uncNode.js FS APIsmbsmbWindows `UNC`\n\n```js\n/* uncsmb */\n_uncCommandConnect_Windows_NT({ host, username, pwd }) {\n    const { isThirdUser, nickname, isLocalUser } = global.ipcMainProcess.userModel.info;\n    const commandUse = `net use \\\\\\\\${host}\\\\ipc$ \"${pwd}\" /user:\"${username}\"`;\n    return new Promise((resolve) => {\n      this.sudo.exec(commandUse).then((res) => {\n        resolve({\n          code: 200,\n        });\n      }).catch((err) => {\n        resolve({\n          code: 600,\n          result: global.lang.upload.unc_connection_failed\n        });\n      });\n    });\n  }\n```\n\n#### \n\n\n\n![upload](shards_upload.jpg)\n\n1. `<Input />`FileList(ElectronFile`path`)  \n2. FileListFileListFile  \n3. init  \n4. Node.jsinitIDNode.js  \n5. initIDNode.jsuploadID()  \n6. Node.jsuploadIDFS APISMB  \n7. uploadNode.jscompleteID  \n8. Node.jsID  \n9. sync()  \n10. Node.jssync  \n\n#### Node.js\n\n* `open`\n* `read`\n* `close`\n\n`path`\n\n```js\n/**\n  * readFileBlock []\n  */\nexports.readFileBlock = () => {\n\n  const fdStore = {};\n  const smallFileMap = {};\n\n  return {\n    /*  */\n    open: (path, size, minSize=1024*2) => {\n      return new Promise((resolve) => {\n        try {\n          // \n          if (size <= minSize) {\n            smallFileMap[path] = true;\n            return resolve({\n              code: 200,\n              result: {\n                fd: null\n              }\n            });\n          }\n          // fd\n          fs.open(path, 'r', (err, fd) => {\n            if (err) {\n              console.trace(err);\n              resolve({\n                code: 601,\n                result: err.toString()\n              });\n            } else {\n              fdStore[path] = fd;\n              resolve({\n                code: 200,\n                result: {\n                  fd: fdStore[path]\n                }\n              });\n            }\n          });\n        } catch (err) {\n          console.trace(err);\n          resolve({\n            code: 600,\n            result: err.toString()\n          });\n        }\n      })\n    },\n  \n    /*  */\n    read: (path, position, length) => {\n      return new Promise((resolve, reject) => {\n        const callback = (err, data) => {\n          if (err) {\n            resolve({\n              code: 600,\n              result: err.toString()\n            });\n          } else {\n            resolve({\n              code: 200,\n              result: data\n            });\n          }\n        };\n        try {\n          // \n          if (smallFileMap[path]) {\n            fs.readFile(path, (err, buffer) => {\n              callback(err, buffer);\n            });\n          } else {\n            // \n            if (length === 0) return callback(null, '');\n            fs.read(fdStore[path], Buffer.alloc(length), 0, length, position, function(err, readByte, readResult){\n              callback(err, readResult);\n            });\n          }\n        } catch (err) {\n          console.trace(err);\n          resolve({\n            code: 600,\n            result: err.toString()\n          });\n        }\n      });\n    },\n\n    /*  */\n    close: (path) => {\n      return new Promise((resolve) => {\n        try {\n          if (smallFileMap[path]) {\n            delete smallFileMap[path];\n            resolve({\n              code: 200\n            });\n          } else {\n            fs.close(fdStore[path], () => {\n              resolve({code: 200});\n              delete fdStore[path];\n            });\n          }\n        } catch (err) {\n          console.trace(err);\n          resolve({\n            code: 600,\n            result: err.toString()\n          });\n        }\n      });\n    },\n\n    fdStore\n\n  }\n\n}\n\n```\n\n### Electron\n----------------------\n\nElectron\n\n#### ElectronDevtools\n\n`Performance`\n\n![upload_performance.jpg](upload_performance.jpg)\n\n`Memory`\n\n![upload_memory.jpg](upload_memory.jpg)\n\n#### Antd Table\n\n10006Antd TableAntd TableAntd TabletableTableTable\n\n#### Electron\n\nchromiumRenderProcessRenderProcessHostChromiumIPCchromiumUImain processIPCmain processUIprocessIPC\n\n![upload_memory.jpg](chromium.jpg)\n\nCPUIOIPCIPCUI\n\nNode.jsIONode.jsFS callbackFs Promise\n\n#### Node.js\n\n(~)ElectronNode.js`child_process`([](http://nodejs.cn/api/child_process.html))\n\n```js\nconst electron = require('electron');\nconst { app, BrowserWindow, Menu, Tray, dialog } = require('electron');\nconst { fork } = require('child_process');\nconst path = require('path');\nconst url = require('url');\nconst os = require('os');\nconst { EventEmitter } = require('events');\nconst { getRandomString } = require(path.join(app.getAppPath(), 'app/utils/utils'));\n\n/**\n  * ChildProcessPool []\n  * @author nojsja\n  * @param  {[String]} path []\n  * @param  {[Number]} max []\n  * @param  {[String]} cwd []\n  * @param  {[Object]} env []\n  */\nclass ChildProcessPool {\n  constructor({ path, max=6, cwd, env })\n  {\n    this.cwd = cwd || undefined;\n    this.env = env || undefined;\n    this.inspectStartIndex = 5858;\n    this.callbacks = {};\n    this.pidMap = new Map();\n    this.collaborationMap = new Map();\n    this.event = new EventEmitter();\n    this.forked = [];\n    this.forkedPath = path;\n    this.forkIndex = 0;\n    this.forkMaxIndex = max;\n    // \n    this.event.on('fork-callback', (data) => {\n      if (this.collaborationMap.get(data.id) !== undefined) {\n        this.dataRespondAll(data)\n      } else {\n        this.dataRespond(data);\n      }\n    })\n  }\n  \n  /*  */\n  dataRespond = (data) => {\n    if (data.id && this.callbacks[data.id]) {\n      this.callbacks[data.id](data.result);\n      delete this.callbacks[data.id];\n    };\n  }\n\n  /*  */\n  dataRespondAll = (data) => {\n    let resultAll = this.collaborationMap.get(data.id);\n    if (!data.id) return;\n    if (resultAll !== undefined) {\n      this.collaborationMap.set(data.id, [...resultAll, data.result]);\n    } else {\n      this.collaborationMap.set(data.id, [data.result]);\n    }\n    resultAll = this.collaborationMap.get(data.id);\n    if (resultAll.length === this.forked.length) {\n      this.callbacks[data.id](resultAll);\n      delete this.callbacks[data.id];\n      this.collaborationMap.delete(data.id);\n    }\n  }\n\n  /*  */\n  getForkedFromPool(id=\"default\") {\n    let forked;\n    if (!this.pidMap.get(id)) {\n      if (this.forked.length < this.forkMaxIndex) {\n        this.inspectStartIndex ++;\n        forked = fork(\n          this.forkedPath,\n          // inspect\n          this.env.NODE_ENV === \"development\" ? [`--inspect=${this.inspectStartIndex}`] : [],\n          {\n            cwd: this.cwd,\n            env: this.env,\n          }\n        );\n        this.forked.push(forked);\n        this.forkIndex += 1;\n        forked.on('message', (data) => {\n          this.event.emit('fork-callback', data);\n        });\n        this.pidMap.set(id, forked.pid);\n      } else {\n        this.forkIndex = this.forkIndex % this.forkMaxIndex;\n        forked = this.forked[this.forkIndex];\n        this.pidMap.set(id, forked.pid);\n        this.forkIndex += 1;\n      }\n    } else {\n      forked = this.forked.filter(f => f.pid === this.pidMap.get(id))[0];\n      if (!forked) throw new Error(`Get forked process from pool failed! the process pid: ${this.pidMap.get(id)}.`);\n    }\n\n    return forked;\n  }\n\n  /*  */\n  send(params, givenId) {\n    const id = givenId || getRandomString();\n    const forked = this.getForkedFromPool(id);\n    return new Promise(resolve => {\n      this.callbacks[id] = resolve;\n      forked.send({...params, id});\n    });\n  }\n\n  /*  */\n  sendToAll(params) {\n    const id = getRandomString(); \n    return new Promise(resolve => {\n      this.callbacks[id] = resolve;\n      this.collaborationMap.set(id, []);\n      if (this.forked.length) {\n        this.forked.forEach((forked) => {\n          forked.send({...params, id});\n        })\n      } else {\n        this.getForkedFromPool().send({...params, id});\n      }\n    });\n  }\n}\n\nmodule.exports = ChildProcessPool;\n\n```\n\n1. `send``sendToAll`idid\n\n2. `dataRespond``dataRespondAll`\n\n3. `getForkedFromPool`\n\n4. `getForkedFromPool````this.env.NODE_ENV === \"development\" ? [`--inspect=${this.inspectStartIndex}`] : []```Node.jsjs`- -inspect=` Devtools`chrome://inspect/#devices``Open dedicated DevTools for Node`\n![upload_memory.jpg](inspect.jpg)\n\n5. `path`CPU`uploadStore`io`fileBlock`IO\n[](https://github.com/NoJsJa/electron-react-template/blob/master/server/app/services/child/upload.js)\n```js\n  const fs = require('fs');\n  const fsPromise = fs.promises;\n  const path = require('path');\n  const utils = require('./child.utils');\n  const requireLang = require('../../lang');\n  const { readFileBlock, uploadRecordStore, unlink } = utils;\n  const fileBlock = readFileBlock();\n  const uploadStore = uploadRecordStore();\n  requireLang(process.env.LANG);\n\n  process.on('message', ({action, params, id }) => {\n    switch (action) {\n      case 'init-works':\n        initWorks(params).then((rsp) => {\n          process.send({result: rsp, id});\n        });\n        break;\n      case 'upload-works':\n        uploadWorks(params, id).then(rsp => {\n          process.send({result: rsp, id});\n        });\n        break;\n      case 'close':\n        close(params, id).then(rsp => {\n          process.send({result: rsp, id});\n        });\n        break;\n      case 'record-set':\n        uploadStore.set(params);\n        process.send({result: null, id});\n        break;\n      case 'record-get':\n        process.send({result: uploadStore.get(params), id});\n        break;\n      case 'record-get-all':\n        process.send({result: uploadStore.getAll(params), id});\n        break;\n      case 'record-update':\n        uploadStore.update(params);\n        process.send({result: null, id});\n        break;\n      case 'record-remove':\n        uploadStore.remove(params);\n        process.send({result: null, id});\n        break;\n      case 'record-reset': \n        uploadStore.reset(params);\n        process.send({result: null, id});\n      break;\n      case 'unlink': \n        unlink(params).then(rsp => {\n          process.send({result: rsp, id});\n        })\n      break;\n      default:\n        break;\n    }\n  });\n\n  // \n  ...\n\n```\n\n#### \n\n* ()Electron  \n* CPU`refreshTasks`()` = ` `refreshTasks`for(O(n)n)\n* 100010000\n\n![refreshTasks](refreshTasks.jpg)\n\n### \n--------\n\nElectronrender...   \nElectronElectron\n","slug":"Electronsmb","published":1,"updated":"2020-03-26T02:28:40.319Z","_id":"ckdwgo7fi0000in951ov5fot3","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p><img src=\"smb_upload_now.jpg\" alt=\"RhinoDisk\"></p><p><a href=\"https://nojsja.gitee.io/blogs/2020/07/17/%E5%9F%BA%E4%BA%8EElectron%E7%9A%84smb%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/\" target=\"_blank\" rel=\"noopener\">Electronsmb</a>SMB<code></code>Electron</p><p><a href=\"https://github.com/NoJsJa/electron-react-template\" target=\"_blank\" rel=\"noopener\">DEMO</a></p><h3 id=\"Electron\"><a href=\"#Electron\" class=\"headerlink\" title=\"Electron\"></a>Electron</h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"electron1.png\" alt=\"electron\"></p><p>Electron  package.json  main web Electron <br> BrowserWindow  BrowserWindow  BrowserWindow <br>web web </p><p>web  Electron  Node.js  API <br> GUI  API  web  GUI   web  GUI  GUI </p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li><p>remote<br>remoteremote, main, remoteBrowserWindows</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* (web) */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; BrowserWindow &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'electron'</span>).remote</span><br><span class=\"line\"><span class=\"keyword\">let</span> win = <span class=\"keyword\">new</span> BrowserWindow(&#123; <span class=\"attr\">width</span>: <span class=\"number\">800</span>, <span class=\"attr\">height</span>: <span class=\"number\">600</span> &#125;)</span><br><span class=\"line\">win.loadURL(<span class=\"string\">'https://github.com'</span>)</span><br></pre></td></tr></table></figure><p>remoteipc(=)Node.jsIOremote</p></li><li><p>ipc<br>ipcipcRenderer(webContentsId)ipcMain</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*  */</span></span><br><span class=\"line\">ipcMain.on(channel, listener) <span class=\"comment\">//  - </span></span><br><span class=\"line\">ipcMain.once(channel, listener) <span class=\"comment\">//  - </span></span><br><span class=\"line\">ipcMain.handle(channel, listener) <span class=\"comment\">// invoke</span></span><br><span class=\"line\">ipcMain.handleOnce(channel, listener) <span class=\"comment\">// invoke</span></span><br><span class=\"line\">browserWindow.webContents.send(channel, args); <span class=\"comment\">//  - </span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*  */</span></span><br><span class=\"line\">ipcRenderer.on(channel, listener); <span class=\"comment\">//  - </span></span><br><span class=\"line\">ipcRenderer.once(channel, listener); <span class=\"comment\">//  - </span></span><br><span class=\"line\">ipcRenderer.sendSync(channel, args); <span class=\"comment\">//  - </span></span><br><span class=\"line\">ipcRenderer.invoke(channel, args); <span class=\"comment\">//  - Promise</span></span><br><span class=\"line\">ipcRenderer.sendTo(webContentsId, channel, ...args); <span class=\"comment\">//  - </span></span><br><span class=\"line\">ipcRenderer.sendToHost(channel, ...args) <span class=\"comment\">// hostwebview - </span></span><br></pre></td></tr></table></figure></li></ol><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p>JSrenderElectronNode.jsrender</p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li><p><code>Input</code>FileList(HTML5 APIweb)</p></li><li><p>smbNode.js NPMsmbsmbnpmNode.jsFS APIWindows UNCsmb<code>\\\\[host]\\[sharename]\\file1</code>file1uncNode.js FS APIsmbsmbWindows <code>UNC</code></p></li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* uncsmb */</span></span><br><span class=\"line\">_uncCommandConnect_Windows_NT(&#123; host, username, pwd &#125;) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; isThirdUser, nickname, isLocalUser &#125; = global.ipcMainProcess.userModel.info;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> commandUse = <span class=\"string\">`net use \\\\\\\\<span class=\"subst\">$&#123;host&#125;</span>\\\\ipc$ \"<span class=\"subst\">$&#123;pwd&#125;</span>\" /user:\"<span class=\"subst\">$&#123;username&#125;</span>\"`</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.sudo.exec(commandUse).then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        resolve(&#123;</span><br><span class=\"line\">          code: <span class=\"number\">200</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;).catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        resolve(&#123;</span><br><span class=\"line\">          code: <span class=\"number\">600</span>,</span><br><span class=\"line\">          result: global.lang.upload.unc_connection_failed</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p><p><img src=\"shards_upload.jpg\" alt=\"upload\"></p><ol><li><code>&lt;Input /&gt;</code>FileList(ElectronFile<code>path</code>)</li><li>FileListFileListFile</li><li>init</li><li>Node.jsinitIDNode.js</li><li>initIDNode.jsuploadID()</li><li>Node.jsuploadIDFS APISMB</li><li>uploadNode.jscompleteID</li><li>Node.jsID</li><li>sync()</li><li>Node.jssync</li></ol><h4 id=\"Node-js\"><a href=\"#Node-js\" class=\"headerlink\" title=\"Node.js\"></a>Node.js</h4><ul><li><code>open</code></li><li><code>read</code></li><li><code>close</code></li></ul><p><code>path</code></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * readFileBlock []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">exports.readFileBlock = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> fdStore = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> smallFileMap = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/*  */</span></span><br><span class=\"line\">    open: <span class=\"function\">(<span class=\"params\">path, size, minSize=<span class=\"number\">1024</span>*<span class=\"number\">2</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// </span></span><br><span class=\"line\">          <span class=\"keyword\">if</span> (size &lt;= minSize) &#123;</span><br><span class=\"line\">            smallFileMap[path] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> resolve(&#123;</span><br><span class=\"line\">              code: <span class=\"number\">200</span>,</span><br><span class=\"line\">              result: &#123;</span><br><span class=\"line\">                fd: <span class=\"literal\">null</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          <span class=\"comment\">// fd</span></span><br><span class=\"line\">          fs.open(path, <span class=\"string\">'r'</span>, (err, fd) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">              <span class=\"built_in\">console</span>.trace(err);</span><br><span class=\"line\">              resolve(&#123;</span><br><span class=\"line\">                code: <span class=\"number\">601</span>,</span><br><span class=\"line\">                result: err.toString()</span><br><span class=\"line\">              &#125;);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">              fdStore[path] = fd;</span><br><span class=\"line\">              resolve(&#123;</span><br><span class=\"line\">                code: <span class=\"number\">200</span>,</span><br><span class=\"line\">                result: &#123;</span><br><span class=\"line\">                  fd: fdStore[path]</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.trace(err);</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: err.toString()</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">/*  */</span></span><br><span class=\"line\">    read: <span class=\"function\">(<span class=\"params\">path, position, length</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> callback = <span class=\"function\">(<span class=\"params\">err, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">            resolve(&#123;</span><br><span class=\"line\">              code: <span class=\"number\">600</span>,</span><br><span class=\"line\">              result: err.toString()</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            resolve(&#123;</span><br><span class=\"line\">              code: <span class=\"number\">200</span>,</span><br><span class=\"line\">              result: data</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// </span></span><br><span class=\"line\">          <span class=\"keyword\">if</span> (smallFileMap[path]) &#123;</span><br><span class=\"line\">            fs.readFile(path, (err, buffer) =&gt; &#123;</span><br><span class=\"line\">              callback(err, buffer);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (length === <span class=\"number\">0</span>) <span class=\"keyword\">return</span> callback(<span class=\"literal\">null</span>, <span class=\"string\">''</span>);</span><br><span class=\"line\">            fs.read(fdStore[path], Buffer.alloc(length), <span class=\"number\">0</span>, length, position, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, readByte, readResult</span>)</span>&#123;</span><br><span class=\"line\">              callback(err, readResult);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.trace(err);</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: err.toString()</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*  */</span></span><br><span class=\"line\">    close: <span class=\"function\">(<span class=\"params\">path</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (smallFileMap[path]) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">delete</span> smallFileMap[path];</span><br><span class=\"line\">            resolve(&#123;</span><br><span class=\"line\">              code: <span class=\"number\">200</span></span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            fs.close(fdStore[path], () =&gt; &#123;</span><br><span class=\"line\">              resolve(&#123;<span class=\"attr\">code</span>: <span class=\"number\">200</span>&#125;);</span><br><span class=\"line\">              <span class=\"keyword\">delete</span> fdStore[path];</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.trace(err);</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: err.toString()</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    fdStore</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h3 id=\"Electron\"><a href=\"#Electron\" class=\"headerlink\" title=\"Electron\"></a>Electron</h3><hr><p>Electron</p><h4 id=\"ElectronDevtools\"><a href=\"#ElectronDevtools\" class=\"headerlink\" title=\"ElectronDevtools\"></a>ElectronDevtools</h4><p><code>Performance</code></p><p><img src=\"upload_performance.jpg\" alt=\"upload_performance.jpg\"></p><p><code>Memory</code></p><p><img src=\"upload_memory.jpg\" alt=\"upload_memory.jpg\"></p><h4 id=\"Antd-Table\"><a href=\"#Antd-Table\" class=\"headerlink\" title=\"Antd Table\"></a>Antd Table</h4><p>10006Antd TableAntd TableAntd TabletableTableTable</p><h4 id=\"Electron\"><a href=\"#Electron\" class=\"headerlink\" title=\"Electron\"></a>Electron</h4><p>chromiumRenderProcessRenderProcessHostChromiumIPCchromiumUImain processIPCmain processUIprocessIPC</p><p><img src=\"chromium.jpg\" alt=\"upload_memory.jpg\"></p><p>CPUIOIPCIPCUI</p><p>Node.jsIONode.jsFS callbackFs Promise</p><h4 id=\"Node-js\"><a href=\"#Node-js\" class=\"headerlink\" title=\"Node.js\"></a>Node.js</h4><p>(~)ElectronNode.js<code>child_process</code>(<a href=\"http://nodejs.cn/api/child_process.html\" target=\"_blank\" rel=\"noopener\"></a>)</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> electron = <span class=\"built_in\">require</span>(<span class=\"string\">'electron'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; app, BrowserWindow, Menu, Tray, dialog &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'electron'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; fork &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'child_process'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">'url'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> os = <span class=\"built_in\">require</span>(<span class=\"string\">'os'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; EventEmitter &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'events'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; getRandomString &#125; = <span class=\"built_in\">require</span>(path.join(app.getAppPath(), <span class=\"string\">'app/utils/utils'</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * ChildProcessPool []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@author <span class=\"variable\">nojsja</span></span></span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>path []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Number]&#125;</span> </span>max []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>cwd []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>env []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ChildProcessPool</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(&#123; path, max=<span class=\"number\">6</span>, cwd, env &#125;)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.cwd = cwd || <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.env = env || <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.inspectStartIndex = <span class=\"number\">5858</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.callbacks = &#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.pidMap = <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.collaborationMap = <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.event = <span class=\"keyword\">new</span> EventEmitter();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.forked = [];</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.forkedPath = path;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.forkIndex = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.forkMaxIndex = max;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.event.on(<span class=\"string\">'fork-callback'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.collaborationMap.get(data.id) !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dataRespondAll(data)</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dataRespond(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  dataRespond = <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (data.id &amp;&amp; <span class=\"keyword\">this</span>.callbacks[data.id]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.callbacks[data.id](data.result);</span><br><span class=\"line\">      <span class=\"keyword\">delete</span> <span class=\"keyword\">this</span>.callbacks[data.id];</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  dataRespondAll = <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> resultAll = <span class=\"keyword\">this</span>.collaborationMap.get(data.id);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!data.id) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (resultAll !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.collaborationMap.set(data.id, [...resultAll, data.result]);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.collaborationMap.set(data.id, [data.result]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    resultAll = <span class=\"keyword\">this</span>.collaborationMap.get(data.id);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (resultAll.length === <span class=\"keyword\">this</span>.forked.length) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.callbacks[data.id](resultAll);</span><br><span class=\"line\">      <span class=\"keyword\">delete</span> <span class=\"keyword\">this</span>.callbacks[data.id];</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.collaborationMap.delete(data.id);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  getForkedFromPool(id=<span class=\"string\">\"default\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> forked;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.pidMap.get(id)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.forked.length &lt; <span class=\"keyword\">this</span>.forkMaxIndex) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.inspectStartIndex ++;</span><br><span class=\"line\">        forked = fork(</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.forkedPath,</span><br><span class=\"line\">          <span class=\"comment\">// inspect</span></span><br><span class=\"line\">          <span class=\"keyword\">this</span>.env.NODE_ENV === <span class=\"string\">\"development\"</span> ? [<span class=\"string\">`--inspect=<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.inspectStartIndex&#125;</span>`</span>] : [],</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            cwd: <span class=\"keyword\">this</span>.cwd,</span><br><span class=\"line\">            env: <span class=\"keyword\">this</span>.env,</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        );</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.forked.push(forked);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.forkIndex += <span class=\"number\">1</span>;</span><br><span class=\"line\">        forked.on(<span class=\"string\">'message'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.event.emit(<span class=\"string\">'fork-callback'</span>, data);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.pidMap.set(id, forked.pid);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.forkIndex = <span class=\"keyword\">this</span>.forkIndex % <span class=\"keyword\">this</span>.forkMaxIndex;</span><br><span class=\"line\">        forked = <span class=\"keyword\">this</span>.forked[<span class=\"keyword\">this</span>.forkIndex];</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.pidMap.set(id, forked.pid);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.forkIndex += <span class=\"number\">1</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      forked = <span class=\"keyword\">this</span>.forked.filter(<span class=\"function\"><span class=\"params\">f</span> =&gt;</span> f.pid === <span class=\"keyword\">this</span>.pidMap.get(id))[<span class=\"number\">0</span>];</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!forked) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">`Get forked process from pool failed! the process pid: <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.pidMap.get(id)&#125;</span>.`</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> forked;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  send(params, givenId) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> id = givenId || getRandomString();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> forked = <span class=\"keyword\">this</span>.getForkedFromPool(id);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.callbacks[id] = resolve;</span><br><span class=\"line\">      forked.send(&#123;...params, id&#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  sendToAll(params) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> id = getRandomString(); </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.callbacks[id] = resolve;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.collaborationMap.set(id, []);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.forked.length) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.forked.forEach(<span class=\"function\">(<span class=\"params\">forked</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          forked.send(&#123;...params, id&#125;);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.getForkedFromPool().send(&#123;...params, id&#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = ChildProcessPool;</span><br></pre></td></tr></table></figure><ol><li><p><code>send</code><code>sendToAll</code>idid</p></li><li><p><code>dataRespond</code><code>dataRespondAll</code></p></li><li><p><code>getForkedFromPool</code></p></li><li><p><code>getForkedFromPool</code><code>this.env.NODE_ENV === &quot;development&quot; ? [`--inspect=${this.inspectStartIndex}`] : []</code>Node.jsjs<code>- -inspect=</code> Devtools<code>chrome://inspect/#devices</code><code>Open dedicated DevTools for Node</code><br><img src=\"inspect.jpg\" alt=\"upload_memory.jpg\"></p></li><li><p><code>path</code>CPU<code>uploadStore</code>io<code>fileBlock</code>IO<br><a href=\"https://github.com/NoJsJa/electron-react-template/blob/master/server/app/services/child/upload.js\" target=\"_blank\" rel=\"noopener\"></a></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> fsPromise = fs.promises;</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> utils = <span class=\"built_in\">require</span>(<span class=\"string\">'./child.utils'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> requireLang = <span class=\"built_in\">require</span>(<span class=\"string\">'../../lang'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; readFileBlock, uploadRecordStore, unlink &#125; = utils;</span><br><span class=\"line\"><span class=\"keyword\">const</span> fileBlock = readFileBlock();</span><br><span class=\"line\"><span class=\"keyword\">const</span> uploadStore = uploadRecordStore();</span><br><span class=\"line\">requireLang(process.env.LANG);</span><br><span class=\"line\"></span><br><span class=\"line\">process.on(<span class=\"string\">'message'</span>, (&#123;action, params, id &#125;) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'init-works'</span>:</span><br><span class=\"line\">      initWorks(params).then(<span class=\"function\">(<span class=\"params\">rsp</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        process.send(&#123;<span class=\"attr\">result</span>: rsp, id&#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'upload-works'</span>:</span><br><span class=\"line\">      uploadWorks(params, id).then(<span class=\"function\"><span class=\"params\">rsp</span> =&gt;</span> &#123;</span><br><span class=\"line\">        process.send(&#123;<span class=\"attr\">result</span>: rsp, id&#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'close'</span>:</span><br><span class=\"line\">      close(params, id).then(<span class=\"function\"><span class=\"params\">rsp</span> =&gt;</span> &#123;</span><br><span class=\"line\">        process.send(&#123;<span class=\"attr\">result</span>: rsp, id&#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'record-set'</span>:</span><br><span class=\"line\">      uploadStore.set(params);</span><br><span class=\"line\">      process.send(&#123;<span class=\"attr\">result</span>: <span class=\"literal\">null</span>, id&#125;);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'record-get'</span>:</span><br><span class=\"line\">      process.send(&#123;<span class=\"attr\">result</span>: uploadStore.get(params), id&#125;);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'record-get-all'</span>:</span><br><span class=\"line\">      process.send(&#123;<span class=\"attr\">result</span>: uploadStore.getAll(params), id&#125;);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'record-update'</span>:</span><br><span class=\"line\">      uploadStore.update(params);</span><br><span class=\"line\">      process.send(&#123;<span class=\"attr\">result</span>: <span class=\"literal\">null</span>, id&#125;);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'record-remove'</span>:</span><br><span class=\"line\">      uploadStore.remove(params);</span><br><span class=\"line\">      process.send(&#123;<span class=\"attr\">result</span>: <span class=\"literal\">null</span>, id&#125;);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'record-reset'</span>: </span><br><span class=\"line\">      uploadStore.reset(params);</span><br><span class=\"line\">      process.send(&#123;<span class=\"attr\">result</span>: <span class=\"literal\">null</span>, id&#125;);</span><br><span class=\"line\">    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'unlink'</span>: </span><br><span class=\"line\">      unlink(params).then(<span class=\"function\"><span class=\"params\">rsp</span> =&gt;</span> &#123;</span><br><span class=\"line\">        process.send(&#123;<span class=\"attr\">result</span>: rsp, id&#125;);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li>()Electron</li><li>CPU<code>refreshTasks</code>()<code> = </code> <code>refreshTasks</code>for(O(n)n)</li><li>100010000</li></ul><p><img src=\"refreshTasks.jpg\" alt=\"refreshTasks\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p>Electronrender <br>ElectronElectron</p>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p><img src=\"smb_upload_now.jpg\" alt=\"RhinoDisk\"></p><p><a href=\"https://nojsja.gitee.io/blogs/2020/07/17/%E5%9F%BA%E4%BA%8EElectron%E7%9A%84smb%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BC%80%E5%8F%91%E8%AE%B0%E5%BD%95/\" target=\"_blank\" rel=\"noopener\">Electronsmb</a>SMB<code></code>Electron</p><p><a href=\"https://github.com/NoJsJa/electron-react-template\" target=\"_blank\" rel=\"noopener\">DEMO</a></p><h3 id=\"Electron\"><a href=\"#Electron\" class=\"headerlink\" title=\"Electron\"></a>Electron</h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"electron1.png\" alt=\"electron\"></p><p>Electron  package.json  main web Electron <br> BrowserWindow  BrowserWindow  BrowserWindow <br>web web </p><p>web  Electron  Node.js  API <br> GUI  API  web  GUI   web  GUI  GUI </p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li><p>remote<br>remoteremote, main, remoteBrowserWindows</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* (web) */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; BrowserWindow &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'electron'</span>).remote</span><br><span class=\"line\"><span class=\"keyword\">let</span> win = <span class=\"keyword\">new</span> BrowserWindow(&#123; <span class=\"attr\">width</span>: <span class=\"number\">800</span>, <span class=\"attr\">height</span>: <span class=\"number\">600</span> &#125;)</span><br><span class=\"line\">win.loadURL(<span class=\"string\">'https://github.com'</span>)</span><br></pre></td></tr></table></figure><p>remoteipc(=)Node.jsIOremote</p></li><li><p>ipc<br>ipcipcRenderer(webContentsId)ipcMain</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*  */</span></span><br><span class=\"line\">ipcMain.on(channel, listener) <span class=\"comment\">//  - </span></span><br><span class=\"line\">ipcMain.once(channel, listener) <span class=\"comment\">//  - </span></span><br><span class=\"line\">ipcMain.handle(channel, listener) <span class=\"comment\">// invoke</span></span><br><span class=\"line\">ipcMain.handleOnce(channel, listener) <span class=\"comment\">// invoke</span></span><br><span class=\"line\">browserWindow.webContents.send(channel, args); <span class=\"comment\">//  - </span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/*  */</span></span><br><span class=\"line\">ipcRenderer.on(channel, listener); <span class=\"comment\">//  - </span></span><br><span class=\"line\">ipcRenderer.once(channel, listener); <span class=\"comment\">//  - </span></span><br><span class=\"line\">ipcRenderer.sendSync(channel, args); <span class=\"comment\">//  - </span></span><br><span class=\"line\">ipcRenderer.invoke(channel, args); <span class=\"comment\">//  - Promise</span></span><br><span class=\"line\">ipcRenderer.sendTo(webContentsId, channel, ...args); <span class=\"comment\">//  - </span></span><br><span class=\"line\">ipcRenderer.sendToHost(channel, ...args) <span class=\"comment\">// hostwebview - </span></span><br></pre></td></tr></table></figure></li></ol><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p>JSrenderElectronNode.jsrender</p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li><p><code>Input</code>FileList(HTML5 APIweb)</p></li><li><p>smbNode.js NPMsmbsmbnpmNode.jsFS APIWindows UNCsmb<code>\\\\[host]\\[sharename]\\file1</code>file1uncNode.js FS APIsmbsmbWindows <code>UNC</code></p></li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* uncsmb */</span></span><br><span class=\"line\">_uncCommandConnect_Windows_NT(&#123; host, username, pwd &#125;) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; isThirdUser, nickname, isLocalUser &#125; = global.ipcMainProcess.userModel.info;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> commandUse = <span class=\"string\">`net use \\\\\\\\<span class=\"subst\">$&#123;host&#125;</span>\\\\ipc$ \"<span class=\"subst\">$&#123;pwd&#125;</span>\" /user:\"<span class=\"subst\">$&#123;username&#125;</span>\"`</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.sudo.exec(commandUse).then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        resolve(&#123;</span><br><span class=\"line\">          code: <span class=\"number\">200</span>,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;).catch(<span class=\"function\">(<span class=\"params\">err</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        resolve(&#123;</span><br><span class=\"line\">          code: <span class=\"number\">600</span>,</span><br><span class=\"line\">          result: global.lang.upload.unc_connection_failed</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p><p><img src=\"shards_upload.jpg\" alt=\"upload\"></p><ol><li><code>&lt;Input /&gt;</code>FileList(ElectronFile<code>path</code>)</li><li>FileListFileListFile</li><li>init</li><li>Node.jsinitIDNode.js</li><li>initIDNode.jsuploadID()</li><li>Node.jsuploadIDFS APISMB</li><li>uploadNode.jscompleteID</li><li>Node.jsID</li><li>sync()</li><li>Node.jssync</li></ol><h4 id=\"Node-js\"><a href=\"#Node-js\" class=\"headerlink\" title=\"Node.js\"></a>Node.js</h4><ul><li><code>open</code></li><li><code>read</code></li><li><code>close</code></li></ul><p><code>path</code></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * readFileBlock []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">exports.readFileBlock = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">const</span> fdStore = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> smallFileMap = &#123;&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">/*  */</span></span><br><span class=\"line\">    open: <span class=\"function\">(<span class=\"params\">path, size, minSize=<span class=\"number\">1024</span>*<span class=\"number\">2</span></span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// </span></span><br><span class=\"line\">          <span class=\"keyword\">if</span> (size &lt;= minSize) &#123;</span><br><span class=\"line\">            smallFileMap[path] = <span class=\"literal\">true</span>;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> resolve(&#123;</span><br><span class=\"line\">              code: <span class=\"number\">200</span>,</span><br><span class=\"line\">              result: &#123;</span><br><span class=\"line\">                fd: <span class=\"literal\">null</span></span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          <span class=\"comment\">// fd</span></span><br><span class=\"line\">          fs.open(path, <span class=\"string\">'r'</span>, (err, fd) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">              <span class=\"built_in\">console</span>.trace(err);</span><br><span class=\"line\">              resolve(&#123;</span><br><span class=\"line\">                code: <span class=\"number\">601</span>,</span><br><span class=\"line\">                result: err.toString()</span><br><span class=\"line\">              &#125;);</span><br><span class=\"line\">            &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">              fdStore[path] = fd;</span><br><span class=\"line\">              resolve(&#123;</span><br><span class=\"line\">                code: <span class=\"number\">200</span>,</span><br><span class=\"line\">                result: &#123;</span><br><span class=\"line\">                  fd: fdStore[path]</span><br><span class=\"line\">                &#125;</span><br><span class=\"line\">              &#125;);</span><br><span class=\"line\">            &#125;</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.trace(err);</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: err.toString()</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  </span><br><span class=\"line\">    <span class=\"comment\">/*  */</span></span><br><span class=\"line\">    read: <span class=\"function\">(<span class=\"params\">path, position, length</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> callback = <span class=\"function\">(<span class=\"params\">err, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">            resolve(&#123;</span><br><span class=\"line\">              code: <span class=\"number\">600</span>,</span><br><span class=\"line\">              result: err.toString()</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            resolve(&#123;</span><br><span class=\"line\">              code: <span class=\"number\">200</span>,</span><br><span class=\"line\">              result: data</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          <span class=\"comment\">// </span></span><br><span class=\"line\">          <span class=\"keyword\">if</span> (smallFileMap[path]) &#123;</span><br><span class=\"line\">            fs.readFile(path, (err, buffer) =&gt; &#123;</span><br><span class=\"line\">              callback(err, buffer);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            <span class=\"comment\">// </span></span><br><span class=\"line\">            <span class=\"keyword\">if</span> (length === <span class=\"number\">0</span>) <span class=\"keyword\">return</span> callback(<span class=\"literal\">null</span>, <span class=\"string\">''</span>);</span><br><span class=\"line\">            fs.read(fdStore[path], Buffer.alloc(length), <span class=\"number\">0</span>, length, position, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">err, readByte, readResult</span>)</span>&#123;</span><br><span class=\"line\">              callback(err, readResult);</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.trace(err);</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: err.toString()</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*  */</span></span><br><span class=\"line\">    close: <span class=\"function\">(<span class=\"params\">path</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (smallFileMap[path]) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">delete</span> smallFileMap[path];</span><br><span class=\"line\">            resolve(&#123;</span><br><span class=\"line\">              code: <span class=\"number\">200</span></span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            fs.close(fdStore[path], () =&gt; &#123;</span><br><span class=\"line\">              resolve(&#123;<span class=\"attr\">code</span>: <span class=\"number\">200</span>&#125;);</span><br><span class=\"line\">              <span class=\"keyword\">delete</span> fdStore[path];</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (err) &#123;</span><br><span class=\"line\">          <span class=\"built_in\">console</span>.trace(err);</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">600</span>,</span><br><span class=\"line\">            result: err.toString()</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">    fdStore</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h3 id=\"Electron\"><a href=\"#Electron\" class=\"headerlink\" title=\"Electron\"></a>Electron</h3><hr><p>Electron</p><h4 id=\"ElectronDevtools\"><a href=\"#ElectronDevtools\" class=\"headerlink\" title=\"ElectronDevtools\"></a>ElectronDevtools</h4><p><code>Performance</code></p><p><img src=\"upload_performance.jpg\" alt=\"upload_performance.jpg\"></p><p><code>Memory</code></p><p><img src=\"upload_memory.jpg\" alt=\"upload_memory.jpg\"></p><h4 id=\"Antd-Table\"><a href=\"#Antd-Table\" class=\"headerlink\" title=\"Antd Table\"></a>Antd Table</h4><p>10006Antd TableAntd TableAntd TabletableTableTable</p><h4 id=\"Electron\"><a href=\"#Electron\" class=\"headerlink\" title=\"Electron\"></a>Electron</h4><p>chromiumRenderProcessRenderProcessHostChromiumIPCchromiumUImain processIPCmain processUIprocessIPC</p><p><img src=\"chromium.jpg\" alt=\"upload_memory.jpg\"></p><p>CPUIOIPCIPCUI</p><p>Node.jsIONode.jsFS callbackFs Promise</p><h4 id=\"Node-js\"><a href=\"#Node-js\" class=\"headerlink\" title=\"Node.js\"></a>Node.js</h4><p>(~)ElectronNode.js<code>child_process</code>(<a href=\"http://nodejs.cn/api/child_process.html\" target=\"_blank\" rel=\"noopener\"></a>)</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> electron = <span class=\"built_in\">require</span>(<span class=\"string\">'electron'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; app, BrowserWindow, Menu, Tray, dialog &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'electron'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; fork &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'child_process'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> url = <span class=\"built_in\">require</span>(<span class=\"string\">'url'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> os = <span class=\"built_in\">require</span>(<span class=\"string\">'os'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; EventEmitter &#125; = <span class=\"built_in\">require</span>(<span class=\"string\">'events'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; getRandomString &#125; = <span class=\"built_in\">require</span>(path.join(app.getAppPath(), <span class=\"string\">'app/utils/utils'</span>));</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * ChildProcessPool []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@author <span class=\"variable\">nojsja</span></span></span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>path []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Number]&#125;</span> </span>max []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>cwd []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>env []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ChildProcessPool</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(&#123; path, max=<span class=\"number\">6</span>, cwd, env &#125;)</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.cwd = cwd || <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.env = env || <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.inspectStartIndex = <span class=\"number\">5858</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.callbacks = &#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.pidMap = <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.collaborationMap = <span class=\"keyword\">new</span> <span class=\"built_in\">Map</span>();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.event = <span class=\"keyword\">new</span> EventEmitter();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.forked = [];</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.forkedPath = path;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.forkIndex = <span class=\"number\">0</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.forkMaxIndex = max;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.event.on(<span class=\"string\">'fork-callback'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.collaborationMap.get(data.id) !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dataRespondAll(data)</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dataRespond(data);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;)</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  dataRespond = <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (data.id &amp;&amp; <span class=\"keyword\">this</span>.callbacks[data.id]) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.callbacks[data.id](data.result);</span><br><span class=\"line\">      <span class=\"keyword\">delete</span> <span class=\"keyword\">this</span>.callbacks[data.id];</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  dataRespondAll = <span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> resultAll = <span class=\"keyword\">this</span>.collaborationMap.get(data.id);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!data.id) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (resultAll !== <span class=\"literal\">undefined</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.collaborationMap.set(data.id, [...resultAll, data.result]);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.collaborationMap.set(data.id, [data.result]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    resultAll = <span class=\"keyword\">this</span>.collaborationMap.get(data.id);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (resultAll.length === <span class=\"keyword\">this</span>.forked.length) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.callbacks[data.id](resultAll);</span><br><span class=\"line\">      <span class=\"keyword\">delete</span> <span class=\"keyword\">this</span>.callbacks[data.id];</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.collaborationMap.delete(data.id);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  getForkedFromPool(id=<span class=\"string\">\"default\"</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> forked;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.pidMap.get(id)) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.forked.length &lt; <span class=\"keyword\">this</span>.forkMaxIndex) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.inspectStartIndex ++;</span><br><span class=\"line\">        forked = fork(</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.forkedPath,</span><br><span class=\"line\">          <span class=\"comment\">// inspect</span></span><br><span class=\"line\">          <span class=\"keyword\">this</span>.env.NODE_ENV === <span class=\"string\">\"development\"</span> ? [<span class=\"string\">`--inspect=<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.inspectStartIndex&#125;</span>`</span>] : [],</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            cwd: <span class=\"keyword\">this</span>.cwd,</span><br><span class=\"line\">            env: <span class=\"keyword\">this</span>.env,</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        );</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.forked.push(forked);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.forkIndex += <span class=\"number\">1</span>;</span><br><span class=\"line\">        forked.on(<span class=\"string\">'message'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">          <span class=\"keyword\">this</span>.event.emit(<span class=\"string\">'fork-callback'</span>, data);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.pidMap.set(id, forked.pid);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.forkIndex = <span class=\"keyword\">this</span>.forkIndex % <span class=\"keyword\">this</span>.forkMaxIndex;</span><br><span class=\"line\">        forked = <span class=\"keyword\">this</span>.forked[<span class=\"keyword\">this</span>.forkIndex];</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.pidMap.set(id, forked.pid);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.forkIndex += <span class=\"number\">1</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      forked = <span class=\"keyword\">this</span>.forked.filter(<span class=\"function\"><span class=\"params\">f</span> =&gt;</span> f.pid === <span class=\"keyword\">this</span>.pidMap.get(id))[<span class=\"number\">0</span>];</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!forked) <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">`Get forked process from pool failed! the process pid: <span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.pidMap.get(id)&#125;</span>.`</span>);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> forked;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  send(params, givenId) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> id = givenId || getRandomString();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> forked = <span class=\"keyword\">this</span>.getForkedFromPool(id);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.callbacks[id] = resolve;</span><br><span class=\"line\">      forked.send(&#123;...params, id&#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  sendToAll(params) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> id = getRandomString(); </span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"params\">resolve</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.callbacks[id] = resolve;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.collaborationMap.set(id, []);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.forked.length) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.forked.forEach(<span class=\"function\">(<span class=\"params\">forked</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          forked.send(&#123;...params, id&#125;);</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.getForkedFromPool().send(&#123;...params, id&#125;);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = ChildProcessPool;</span><br></pre></td></tr></table></figure><ol><li><p><code>send</code><code>sendToAll</code>idid</p></li><li><p><code>dataRespond</code><code>dataRespondAll</code></p></li><li><p><code>getForkedFromPool</code></p></li><li><p><code>getForkedFromPool</code><code>this.env.NODE_ENV === &quot;development&quot; ? [`--inspect=${this.inspectStartIndex}`] : []</code>Node.jsjs<code>- -inspect=</code> Devtools<code>chrome://inspect/#devices</code><code>Open dedicated DevTools for Node</code><br><img src=\"inspect.jpg\" alt=\"upload_memory.jpg\"></p></li><li><p><code>path</code>CPU<code>uploadStore</code>io<code>fileBlock</code>IO<br><a href=\"https://github.com/NoJsJa/electron-react-template/blob/master/server/app/services/child/upload.js\" target=\"_blank\" rel=\"noopener\"></a></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> fsPromise = fs.promises;</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> utils = <span class=\"built_in\">require</span>(<span class=\"string\">'./child.utils'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> requireLang = <span class=\"built_in\">require</span>(<span class=\"string\">'../../lang'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> &#123; readFileBlock, uploadRecordStore, unlink &#125; = utils;</span><br><span class=\"line\"><span class=\"keyword\">const</span> fileBlock = readFileBlock();</span><br><span class=\"line\"><span class=\"keyword\">const</span> uploadStore = uploadRecordStore();</span><br><span class=\"line\">requireLang(process.env.LANG);</span><br><span class=\"line\"></span><br><span class=\"line\">process.on(<span class=\"string\">'message'</span>, (&#123;action, params, id &#125;) =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">switch</span> (action) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'init-works'</span>:</span><br><span class=\"line\">      initWorks(params).then(<span class=\"function\">(<span class=\"params\">rsp</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        process.send(&#123;<span class=\"attr\">result</span>: rsp, id&#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'upload-works'</span>:</span><br><span class=\"line\">      uploadWorks(params, id).then(<span class=\"function\"><span class=\"params\">rsp</span> =&gt;</span> &#123;</span><br><span class=\"line\">        process.send(&#123;<span class=\"attr\">result</span>: rsp, id&#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'close'</span>:</span><br><span class=\"line\">      close(params, id).then(<span class=\"function\"><span class=\"params\">rsp</span> =&gt;</span> &#123;</span><br><span class=\"line\">        process.send(&#123;<span class=\"attr\">result</span>: rsp, id&#125;);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'record-set'</span>:</span><br><span class=\"line\">      uploadStore.set(params);</span><br><span class=\"line\">      process.send(&#123;<span class=\"attr\">result</span>: <span class=\"literal\">null</span>, id&#125;);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'record-get'</span>:</span><br><span class=\"line\">      process.send(&#123;<span class=\"attr\">result</span>: uploadStore.get(params), id&#125;);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'record-get-all'</span>:</span><br><span class=\"line\">      process.send(&#123;<span class=\"attr\">result</span>: uploadStore.getAll(params), id&#125;);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'record-update'</span>:</span><br><span class=\"line\">      uploadStore.update(params);</span><br><span class=\"line\">      process.send(&#123;<span class=\"attr\">result</span>: <span class=\"literal\">null</span>, id&#125;);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'record-remove'</span>:</span><br><span class=\"line\">      uploadStore.remove(params);</span><br><span class=\"line\">      process.send(&#123;<span class=\"attr\">result</span>: <span class=\"literal\">null</span>, id&#125;);</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'record-reset'</span>: </span><br><span class=\"line\">      uploadStore.reset(params);</span><br><span class=\"line\">      process.send(&#123;<span class=\"attr\">result</span>: <span class=\"literal\">null</span>, id&#125;);</span><br><span class=\"line\">    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">case</span> <span class=\"string\">'unlink'</span>: </span><br><span class=\"line\">      unlink(params).then(<span class=\"function\"><span class=\"params\">rsp</span> =&gt;</span> &#123;</span><br><span class=\"line\">        process.send(&#123;<span class=\"attr\">result</span>: rsp, id&#125;);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    <span class=\"keyword\">break</span>;</span><br><span class=\"line\">    <span class=\"keyword\">default</span>:</span><br><span class=\"line\">      <span class=\"keyword\">break</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li>()Electron</li><li>CPU<code>refreshTasks</code>()<code> = </code> <code>refreshTasks</code>for(O(n)n)</li><li>100010000</li></ul><p><img src=\"refreshTasks.jpg\" alt=\"refreshTasks\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p>Electronrender <br>ElectronElectron</p>"},{"title":"s3Javascript","catalog":true,"toc_nav_num":true,"date":"2020-03-26T08:18:00.000Z","subtitle":"fileupload node fs","header-img":"article_header.png","updateDate":"2020-03-26T08:18:00.000Z","_content":"\n### \n------------\n\n1. \n\n2. -JsNode\n\n3. -Node\n\n4. -Node\n\n5. -Js\n\n### \n-------\n\n![upload](upload.png)\n\n### \n-------\n\nAmazon S3  Web  Web  Amazon   \n[s3Javascript()](./s3Javascript().md)JsCoder\n\n### -JsNode\n----------------------------------\n\n#### Axios\n```js\nconst XHR = axios.create({\n  baseURl: '',\n  timeout: 30e3,\n  headers: originHeaders,\n  validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n});\n```\n\n#### \n>fileShardsDataFile.slice\n```js\nconst data = new FormData();\nformData.append('file', fileShardsData, 'file');\n```\n\n#### \n>\n```js\nXHR({\n  api,\n  method,\n  data,\n  headers: {\n    'Content-Type': 'multipart/form-data',\n  },\n}).then((response) => {\n  ...\n});\n```\n\n### -Node\n>Expressmiddleware\n\n\n* Express V4\n* Node.js V8\n\n#### 1formidable\n1. \n```js\nconst formidable = require('formidable');\n/**\n  * parseFile [formidable - ]\n  * @author nojsja\n  * @param  {[Object]} req [req obj]\n  * @param  {[Object]} res [res obj]\n  */\nexports.formidableParseFile = (req, res, callback) => {\n  try {\n    const form = new formidable.IncomingForm();\n    form.parse(req, (err, fields, files) => {\n      if (fs.existsSync(files.file.path)) {\n        fs.readFile(files.file.path, (err, fileBuffer) => {\n          fs.unlink(files.file.path, (err) => {\n            if (err) console.log(err);\n          });\n          if (err) {\n            return callback(err);\n          }\n          callback(null, fileBuffer);\n        });\n      } else {\n        callback(null, '');\n      }\n    });\n  } catch (error) {\n    console.error(error);\n    callback(error);\n  }\n}\n```\n\n2. \n```js\nrouter.post('/object/object/upload', function(req, res, next) {\n  console.log('upload');\n  const random = Math.random();\n  console.time(`${random} -> 1`);\n  formidableParseFile(req, res, (err, fileBuffer) => {\n    console.timeEnd(`${random} -> 1`);\n    if (err) {\n      return res.json({\n        code: 500,\n        result: err.toString(),\n      })\n    }\n    console.time(`${random} -> 2`);\n    commonRequestAuth(req.query, objectsresourceApi.object.uploadObject, req, fileBuffer).then(\n      (response) => {\n        console.timeEnd(`${random} -> 2`);\n        res.json({\n          code: response.code,\n          result: {\n            ...{ etag: response.headers ? response.headers.etag : '' },\n            ...response.result\n          },\n        });\n      },\n      );\n    });\n});\n```\n\n#### 2\n\n1. \n```js\n/**\n  * parseFile [form-data - ]\n  * @author nojsja\n  * @param  {[Object]} req [req obj]\n  * @param  {[Object]} res [res obj]\n  */\nexports.parseFile = (req, res, callback) => {\n  req.setEncoding('binary');\n  let body = '';   // \n  let fileName = '';  // \n\n  // \n  const boundary = req.headers['content-type'].split('; ')[1].replace('boundary=', '');\n\n  req.on('data', function (chunk) {\n    body += chunk;\n  });\n\n  req.on('end', function () {\n    try {\n      // (\\r\\n)(:)\n      const file = querystring.parse(body, '\\r\\n', ':')\n      //\n      const fileInfo = file['Content-Disposition'].split('; ');\n      for (value in fileInfo) {\n        if (fileInfo[value].indexOf(\"filename=\") != -1) {\n          fileName = fileInfo[value].substring(10, fileInfo[value].length - 1);\n\n          if (fileName.indexOf('\\\\') != -1) {\n            fileName = fileName.substring(fileName.lastIndexOf('\\\\') + 1);\n          }\n        }\n      }\n\n      // (image/gif  image/png))\n      const entireData = body.toString();\n\n      contentType = file['Content-Type'].substring(1);\n\n      //contentType\n      const upperBoundary = entireData.indexOf(contentType) + contentType.length;\n      const shorterData = entireData.substring(upperBoundary);\n\n      // \n      const binaryDataAlmost = shorterData.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n\n      // : \"--\"+ boundary + \"--\"\n      const binaryData = binaryDataAlmost.substring(0, binaryDataAlmost.indexOf('--' + boundary + '--'));\n\n      callback(null, binaryData);\n    } catch (error) {\n      callback(new Error('form-data parse error!'));\n    }\n\n  });\n};\n```\n2. \n\n### -Node\n------------------------------------------\n>Axios\n\n#### \n\n\n1. header`resType: \"arraybuffer\"`\n```js\n// \nrouter.post('/resource/object/detailinfo/all', function(req, res, next) {\n  commonRequestAuth({ ...req.body, ...{ $no_timeout$: true }}, objectsresourceApi.object.objectinfoAll, req).then((response) => {\n    res.type('file').send(response.result)\n  });\n});\n```\n\n#### \n> Node.jspipe\n1. Node Pipe\n![node pipe](node_pipe.png)\n\n2. header`resType: \"stream\"`\n\n3. \nfs.createWriteStream\n\n4. \n\n\n5. \nfinish\n\n```js\n// \nrouter.post('/resource/object/detailinfo', function(req, res, next) {\n  console.log('download');\n  commonRequestAuth({ ...req.body, ...{ $no_timeout$: true }}, objectsresourceApi.object.objectinfo, req).then((response) => {\n    console.log('download callback');\n    const fileName = req.body.object.split('/').pop();\n    const fileSymbol = `${fileName}-${Date.now()}`;\n    const filePath = path.join(_path.public, 'download', fileSymbol);\n    const ws = fs.createWriteStream(filePath);\n    response.result.pipe(ws);\n    ws.on('finish', () => { \n      console.log('download finish');\n      res.header({\n        'Content-Disposition': fileName\n      });\n      res.json({\n        code: 200,\n        result: filePath.split('node-express-react/public/public')[1],\n      });\n    }); \n  });\n});\n```\n\n### -Js\n-------------------------------------\n\n#### DataURL  \n\n1. header`responseType:arraybuffer`  \n  \n\n2. `Blob`\nnew Blob(DataArray, { type: mimetype })mimetypejpegmimetypeimage/jpeg\n\n3. HTML5 FileReader\nreader.readAsDataURLbase64DataURL\n\n4. adownloadDataURL\nwindow.open(dataUrl)\n\n```js\ndownloadObjectInMemory = (para, info) => {\n    const iAxios = axios.create();\n    // iAxios.defaults.timeout = 60 * 1000 * 60 * 10;\n    iAxios.defaults.timeout = 0;\n\n    const options = {\n      method: 'POST',\n      url: '/resource/object/detailinfo/all',\n      withCredentials: true,\n      responseType: 'arraybuffer',\n      headers: {\n        'Cache-Control': 'max-age=0',\n        'X-Requested-With': 'XMLHttpRequest',\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n      data: para,\n    };\n\n    const readAsDataUrl = (data, emptyData) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(data);\n      reader.onload = (e) => {\n        const url = e.target.result;\n        const a = document.createElement('a');\n        const filename = para.object.split('/').pop();\n        a.href = url === 'data:' ? emptyData : url;\n        a.download = filename;\n        a.click();\n        window.URL.revokeObjectURL(url);\n      };\n    };\n    const typename = mapMimeType(info.name).mime;\n    iAxios.request(options)\n      .then((res) => {\n        const blobData = new Blob([res.data], { type: typename });\n        readAsDataUrl(blobData, `data:${typename};base64,`);\n      }).catch((error) => {\n        console.log(error);\n      });\n  }\n```\n\n#### \nDataURLaURL\n\n```js\ndownloadObjectWithURL = (para) => {\n    const iAxios = axios.create();\n    // iAxios.defaults.timeout = 60 * 1000 * 60 * 10;\n    iAxios.defaults.timeout = 0;\n\n    const options = {\n      method: 'POST',\n      url: '/resource/object/detailinfo',\n      withCredentials: true,\n      responseType: 'json',\n      headers: {\n        'Cache-Control': 'max-age=0',\n        'X-Requested-With': 'XMLHttpRequest',\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n      data: para,\n    };\n\n    let timer;\n    iAxios.request(options)\n      .then((res) => {\n        clearTimeout(timer);\n        const a = document.createElement('a');\n        const filename = para.object.split('/').pop();\n        const address = process.env.NODE_ENV === 'development' ? `${window.location.protocol}//10.0.6.206:3000${res.data.result}` : `${window.location.protocol}//${window.location.hostname}:3000${res.data.result}`;\n        a.href = address;\n        a.download = filename;\n        a.click();\n      }).catch((error) => {\n        console.log(error);\n      });\n    timer = setTimeout(() => {\n      openNotification('info', null, this.lang.lang.fileDownloadTips);\n    }, 1e3);\n  }\n```","source":"_posts/2020-03-26-s3Javascript.md","raw":"---\ntitle: \"s3Javascript\"\ncatalog: true\ntoc_nav_num: true\ndate: 2020-03-26 16:18:00\nsubtitle: \"fileupload node fs\"\nheader-img: \"article_header.png\"\ntags:\n- upload\n- node\nupdateDate: 2020-03-26 16:18:00\ncategories:\n- Javascript\n- Node\n---\n\n### \n------------\n\n1. \n\n2. -JsNode\n\n3. -Node\n\n4. -Node\n\n5. -Js\n\n### \n-------\n\n![upload](upload.png)\n\n### \n-------\n\nAmazon S3  Web  Web  Amazon   \n[s3Javascript()](./s3Javascript().md)JsCoder\n\n### -JsNode\n----------------------------------\n\n#### Axios\n```js\nconst XHR = axios.create({\n  baseURl: '',\n  timeout: 30e3,\n  headers: originHeaders,\n  validateStatus(status) {\n    return status >= 200 && status < 300;\n  },\n});\n```\n\n#### \n>fileShardsDataFile.slice\n```js\nconst data = new FormData();\nformData.append('file', fileShardsData, 'file');\n```\n\n#### \n>\n```js\nXHR({\n  api,\n  method,\n  data,\n  headers: {\n    'Content-Type': 'multipart/form-data',\n  },\n}).then((response) => {\n  ...\n});\n```\n\n### -Node\n>Expressmiddleware\n\n\n* Express V4\n* Node.js V8\n\n#### 1formidable\n1. \n```js\nconst formidable = require('formidable');\n/**\n  * parseFile [formidable - ]\n  * @author nojsja\n  * @param  {[Object]} req [req obj]\n  * @param  {[Object]} res [res obj]\n  */\nexports.formidableParseFile = (req, res, callback) => {\n  try {\n    const form = new formidable.IncomingForm();\n    form.parse(req, (err, fields, files) => {\n      if (fs.existsSync(files.file.path)) {\n        fs.readFile(files.file.path, (err, fileBuffer) => {\n          fs.unlink(files.file.path, (err) => {\n            if (err) console.log(err);\n          });\n          if (err) {\n            return callback(err);\n          }\n          callback(null, fileBuffer);\n        });\n      } else {\n        callback(null, '');\n      }\n    });\n  } catch (error) {\n    console.error(error);\n    callback(error);\n  }\n}\n```\n\n2. \n```js\nrouter.post('/object/object/upload', function(req, res, next) {\n  console.log('upload');\n  const random = Math.random();\n  console.time(`${random} -> 1`);\n  formidableParseFile(req, res, (err, fileBuffer) => {\n    console.timeEnd(`${random} -> 1`);\n    if (err) {\n      return res.json({\n        code: 500,\n        result: err.toString(),\n      })\n    }\n    console.time(`${random} -> 2`);\n    commonRequestAuth(req.query, objectsresourceApi.object.uploadObject, req, fileBuffer).then(\n      (response) => {\n        console.timeEnd(`${random} -> 2`);\n        res.json({\n          code: response.code,\n          result: {\n            ...{ etag: response.headers ? response.headers.etag : '' },\n            ...response.result\n          },\n        });\n      },\n      );\n    });\n});\n```\n\n#### 2\n\n1. \n```js\n/**\n  * parseFile [form-data - ]\n  * @author nojsja\n  * @param  {[Object]} req [req obj]\n  * @param  {[Object]} res [res obj]\n  */\nexports.parseFile = (req, res, callback) => {\n  req.setEncoding('binary');\n  let body = '';   // \n  let fileName = '';  // \n\n  // \n  const boundary = req.headers['content-type'].split('; ')[1].replace('boundary=', '');\n\n  req.on('data', function (chunk) {\n    body += chunk;\n  });\n\n  req.on('end', function () {\n    try {\n      // (\\r\\n)(:)\n      const file = querystring.parse(body, '\\r\\n', ':')\n      //\n      const fileInfo = file['Content-Disposition'].split('; ');\n      for (value in fileInfo) {\n        if (fileInfo[value].indexOf(\"filename=\") != -1) {\n          fileName = fileInfo[value].substring(10, fileInfo[value].length - 1);\n\n          if (fileName.indexOf('\\\\') != -1) {\n            fileName = fileName.substring(fileName.lastIndexOf('\\\\') + 1);\n          }\n        }\n      }\n\n      // (image/gif  image/png))\n      const entireData = body.toString();\n\n      contentType = file['Content-Type'].substring(1);\n\n      //contentType\n      const upperBoundary = entireData.indexOf(contentType) + contentType.length;\n      const shorterData = entireData.substring(upperBoundary);\n\n      // \n      const binaryDataAlmost = shorterData.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n\n      // : \"--\"+ boundary + \"--\"\n      const binaryData = binaryDataAlmost.substring(0, binaryDataAlmost.indexOf('--' + boundary + '--'));\n\n      callback(null, binaryData);\n    } catch (error) {\n      callback(new Error('form-data parse error!'));\n    }\n\n  });\n};\n```\n2. \n\n### -Node\n------------------------------------------\n>Axios\n\n#### \n\n\n1. header`resType: \"arraybuffer\"`\n```js\n// \nrouter.post('/resource/object/detailinfo/all', function(req, res, next) {\n  commonRequestAuth({ ...req.body, ...{ $no_timeout$: true }}, objectsresourceApi.object.objectinfoAll, req).then((response) => {\n    res.type('file').send(response.result)\n  });\n});\n```\n\n#### \n> Node.jspipe\n1. Node Pipe\n![node pipe](node_pipe.png)\n\n2. header`resType: \"stream\"`\n\n3. \nfs.createWriteStream\n\n4. \n\n\n5. \nfinish\n\n```js\n// \nrouter.post('/resource/object/detailinfo', function(req, res, next) {\n  console.log('download');\n  commonRequestAuth({ ...req.body, ...{ $no_timeout$: true }}, objectsresourceApi.object.objectinfo, req).then((response) => {\n    console.log('download callback');\n    const fileName = req.body.object.split('/').pop();\n    const fileSymbol = `${fileName}-${Date.now()}`;\n    const filePath = path.join(_path.public, 'download', fileSymbol);\n    const ws = fs.createWriteStream(filePath);\n    response.result.pipe(ws);\n    ws.on('finish', () => { \n      console.log('download finish');\n      res.header({\n        'Content-Disposition': fileName\n      });\n      res.json({\n        code: 200,\n        result: filePath.split('node-express-react/public/public')[1],\n      });\n    }); \n  });\n});\n```\n\n### -Js\n-------------------------------------\n\n#### DataURL  \n\n1. header`responseType:arraybuffer`  \n  \n\n2. `Blob`\nnew Blob(DataArray, { type: mimetype })mimetypejpegmimetypeimage/jpeg\n\n3. HTML5 FileReader\nreader.readAsDataURLbase64DataURL\n\n4. adownloadDataURL\nwindow.open(dataUrl)\n\n```js\ndownloadObjectInMemory = (para, info) => {\n    const iAxios = axios.create();\n    // iAxios.defaults.timeout = 60 * 1000 * 60 * 10;\n    iAxios.defaults.timeout = 0;\n\n    const options = {\n      method: 'POST',\n      url: '/resource/object/detailinfo/all',\n      withCredentials: true,\n      responseType: 'arraybuffer',\n      headers: {\n        'Cache-Control': 'max-age=0',\n        'X-Requested-With': 'XMLHttpRequest',\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n      data: para,\n    };\n\n    const readAsDataUrl = (data, emptyData) => {\n      const reader = new FileReader();\n      reader.readAsDataURL(data);\n      reader.onload = (e) => {\n        const url = e.target.result;\n        const a = document.createElement('a');\n        const filename = para.object.split('/').pop();\n        a.href = url === 'data:' ? emptyData : url;\n        a.download = filename;\n        a.click();\n        window.URL.revokeObjectURL(url);\n      };\n    };\n    const typename = mapMimeType(info.name).mime;\n    iAxios.request(options)\n      .then((res) => {\n        const blobData = new Blob([res.data], { type: typename });\n        readAsDataUrl(blobData, `data:${typename};base64,`);\n      }).catch((error) => {\n        console.log(error);\n      });\n  }\n```\n\n#### \nDataURLaURL\n\n```js\ndownloadObjectWithURL = (para) => {\n    const iAxios = axios.create();\n    // iAxios.defaults.timeout = 60 * 1000 * 60 * 10;\n    iAxios.defaults.timeout = 0;\n\n    const options = {\n      method: 'POST',\n      url: '/resource/object/detailinfo',\n      withCredentials: true,\n      responseType: 'json',\n      headers: {\n        'Cache-Control': 'max-age=0',\n        'X-Requested-With': 'XMLHttpRequest',\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n      data: para,\n    };\n\n    let timer;\n    iAxios.request(options)\n      .then((res) => {\n        clearTimeout(timer);\n        const a = document.createElement('a');\n        const filename = para.object.split('/').pop();\n        const address = process.env.NODE_ENV === 'development' ? `${window.location.protocol}//10.0.6.206:3000${res.data.result}` : `${window.location.protocol}//${window.location.hostname}:3000${res.data.result}`;\n        a.href = address;\n        a.download = filename;\n        a.click();\n      }).catch((error) => {\n        console.log(error);\n      });\n    timer = setTimeout(() => {\n      openNotification('info', null, this.lang.lang.fileDownloadTips);\n    }, 1e3);\n  }\n```","slug":"s3Javascript","published":1,"updated":"2020-03-26T02:27:00.155Z","_id":"ck884wxri0008in95d9qq70a9","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><ol><li><p></p></li><li><p>-JsNode</p></li><li><p>-Node</p></li><li><p>-Node</p></li><li><p>-Js</p></li></ol><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p><img src=\"upload.png\" alt=\"upload\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p>Amazon S3  Web  Web  Amazon <br><a href=\"./s3Javascript(\">s3Javascript()</a>.md)JsCoder</p><h3 id=\"-JsNode\"><a href=\"#-JsNode\" class=\"headerlink\" title=\"-JsNode\"></a>-JsNode</h3><hr><h4 id=\"Axios\"><a href=\"#Axios\" class=\"headerlink\" title=\"Axios\"></a>Axios</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> XHR = axios.create(&#123;</span><br><span class=\"line\">  baseURl: <span class=\"string\">''</span>,</span><br><span class=\"line\">  timeout: <span class=\"number\">30e3</span>,</span><br><span class=\"line\">  headers: originHeaders,</span><br><span class=\"line\">  validateStatus(status) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> status &gt;= <span class=\"number\">200</span> &amp;&amp; status &lt; <span class=\"number\">300</span>;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p>fileShardsDataFile.slice<br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> data = <span class=\"keyword\">new</span> FormData();</span><br><span class=\"line\">formData.append(<span class=\"string\">'file'</span>, fileShardsData, <span class=\"string\">'file'</span>);</span><br></pre></td></tr></table></figure><p></p></blockquote><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p><br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">XHR(&#123;</span><br><span class=\"line\">  api,</span><br><span class=\"line\">  method,</span><br><span class=\"line\">  data,</span><br><span class=\"line\">  headers: &#123;</span><br><span class=\"line\">    <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'multipart/form-data'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;).then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure><p></p></blockquote><h3 id=\"-Node\"><a href=\"#-Node\" class=\"headerlink\" title=\"-Node\"></a>-Node</h3><blockquote><p>Expressmiddleware</p></blockquote><p></p><ul><li>Express V4</li><li>Node.js V8</li></ul><h4 id=\"1formidable\"><a href=\"#1formidable\" class=\"headerlink\" title=\"1formidable\"></a>1formidable</h4><ol><li><p></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> formidable = <span class=\"built_in\">require</span>(<span class=\"string\">'formidable'</span>);</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * parseFile [formidable - ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@author <span class=\"variable\">nojsja</span></span></span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>req [req obj]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>res [res obj]</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">exports.formidableParseFile = <span class=\"function\">(<span class=\"params\">req, res, callback</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">    form.parse(req, (err, fields, files) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (fs.existsSync(files.file.path)) &#123;</span><br><span class=\"line\">        fs.readFile(files.file.path, (err, fileBuffer) =&gt; &#123;</span><br><span class=\"line\">          fs.unlink(files.file.path, (err) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (err) <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> callback(err);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          callback(<span class=\"literal\">null</span>, fileBuffer);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        callback(<span class=\"literal\">null</span>, <span class=\"string\">''</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(error);</span><br><span class=\"line\">    callback(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li><li><p></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">router.post(<span class=\"string\">'/object/object/upload'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'upload'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> random = <span class=\"built_in\">Math</span>.random();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">`<span class=\"subst\">$&#123;random&#125;</span> -&gt; 1`</span>);</span><br><span class=\"line\">  formidableParseFile(req, res, (err, fileBuffer) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">`<span class=\"subst\">$&#123;random&#125;</span> -&gt; 1`</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.json(&#123;</span><br><span class=\"line\">        code: <span class=\"number\">500</span>,</span><br><span class=\"line\">        result: err.toString(),</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.time(<span class=\"string\">`<span class=\"subst\">$&#123;random&#125;</span> -&gt; 2`</span>);</span><br><span class=\"line\">    commonRequestAuth(req.query, objectsresourceApi.object.uploadObject, req, fileBuffer).then(</span><br><span class=\"line\">      (response) =&gt; &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">`<span class=\"subst\">$&#123;random&#125;</span> -&gt; 2`</span>);</span><br><span class=\"line\">        res.json(&#123;</span><br><span class=\"line\">          code: response.code,</span><br><span class=\"line\">          result: &#123;</span><br><span class=\"line\">            ...&#123; <span class=\"attr\">etag</span>: response.headers ? response.headers.etag : <span class=\"string\">''</span> &#125;,</span><br><span class=\"line\">            ...response.result</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h4><ol><li><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * parseFile [form-data - ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@author <span class=\"variable\">nojsja</span></span></span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>req [req obj]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>res [res obj]</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">exports.parseFile = <span class=\"function\">(<span class=\"params\">req, res, callback</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  req.setEncoding(<span class=\"string\">'binary'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> body = <span class=\"string\">''</span>;   <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> fileName = <span class=\"string\">''</span>;  <span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> boundary = req.headers[<span class=\"string\">'content-type'</span>].split(<span class=\"string\">'; '</span>)[<span class=\"number\">1</span>].replace(<span class=\"string\">'boundary='</span>, <span class=\"string\">''</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  req.on(<span class=\"string\">'data'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">chunk</span>) </span>&#123;</span><br><span class=\"line\">    body += chunk;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  req.on(<span class=\"string\">'end'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// (\\r\\n)(:)</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> file = querystring.parse(body, <span class=\"string\">'\\r\\n'</span>, <span class=\"string\">':'</span>)</span><br><span class=\"line\">      <span class=\"comment\">//</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> fileInfo = file[<span class=\"string\">'Content-Disposition'</span>].split(<span class=\"string\">'; '</span>);</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (value <span class=\"keyword\">in</span> fileInfo) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (fileInfo[value].indexOf(<span class=\"string\">\"filename=\"</span>) != <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">          fileName = fileInfo[value].substring(<span class=\"number\">10</span>, fileInfo[value].length - <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"keyword\">if</span> (fileName.indexOf(<span class=\"string\">'\\\\'</span>) != <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">            fileName = fileName.substring(fileName.lastIndexOf(<span class=\"string\">'\\\\'</span>) + <span class=\"number\">1</span>);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// (image/gif  image/png))</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> entireData = body.toString();</span><br><span class=\"line\"></span><br><span class=\"line\">      contentType = file[<span class=\"string\">'Content-Type'</span>].substring(<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//contentType</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> upperBoundary = entireData.indexOf(contentType) + contentType.length;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> shorterData = entireData.substring(upperBoundary);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> binaryDataAlmost = shorterData.replace(<span class=\"regexp\">/^\\s\\s*/</span>, <span class=\"string\">''</span>).replace(<span class=\"regexp\">/\\s\\s*$/</span>, <span class=\"string\">''</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// : \"--\"+ boundary + \"--\"</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> binaryData = binaryDataAlmost.substring(<span class=\"number\">0</span>, binaryDataAlmost.indexOf(<span class=\"string\">'--'</span> + boundary + <span class=\"string\">'--'</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">      callback(<span class=\"literal\">null</span>, binaryData);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">      callback(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'form-data parse error!'</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li><li></li></ol><h3 id=\"-Node\"><a href=\"#-Node\" class=\"headerlink\" title=\"-Node\"></a>-Node</h3><hr><blockquote><p>Axios</p></blockquote><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p><ol><li>header<code>resType: &quot;arraybuffer&quot;</code><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">router.post(<span class=\"string\">'/resource/object/detailinfo/all'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">  commonRequestAuth(&#123; ...req.body, ...&#123; <span class=\"attr\">$no_timeout$</span>: <span class=\"literal\">true</span> &#125;&#125;, objectsresourceApi.object.objectinfoAll, req).then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    res.type(<span class=\"string\">'file'</span>).send(response.result)</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p>Node.jspipe</p><ol><li>Node Pipe<br><img src=\"node_pipe.png\" alt=\"node pipe\"></li></ol></blockquote><ol><li><p>header<code>resType: &quot;stream&quot;</code></p></li><li><p><br>fs.createWriteStream</p></li><li><p><br></p></li><li><p><br>finish</p></li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">router.post(<span class=\"string\">'/resource/object/detailinfo'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'download'</span>);</span><br><span class=\"line\">  commonRequestAuth(&#123; ...req.body, ...&#123; <span class=\"attr\">$no_timeout$</span>: <span class=\"literal\">true</span> &#125;&#125;, objectsresourceApi.object.objectinfo, req).then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'download callback'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fileName = req.body.object.split(<span class=\"string\">'/'</span>).pop();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fileSymbol = <span class=\"string\">`<span class=\"subst\">$&#123;fileName&#125;</span>-<span class=\"subst\">$&#123;<span class=\"built_in\">Date</span>.now()&#125;</span>`</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> filePath = path.join(_path.public, <span class=\"string\">'download'</span>, fileSymbol);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> ws = fs.createWriteStream(filePath);</span><br><span class=\"line\">    response.result.pipe(ws);</span><br><span class=\"line\">    ws.on(<span class=\"string\">'finish'</span>, () =&gt; &#123; </span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'download finish'</span>);</span><br><span class=\"line\">      res.header(&#123;</span><br><span class=\"line\">        <span class=\"string\">'Content-Disposition'</span>: fileName</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      res.json(&#123;</span><br><span class=\"line\">        code: <span class=\"number\">200</span>,</span><br><span class=\"line\">        result: filePath.split(<span class=\"string\">'node-express-react/public/public'</span>)[<span class=\"number\">1</span>],</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;); </span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure><h3 id=\"-Js\"><a href=\"#-Js\" class=\"headerlink\" title=\"-Js\"></a>-Js</h3><hr><h4 id=\"DataURL\"><a href=\"#DataURL\" class=\"headerlink\" title=\"DataURL\"></a>DataURL</h4><ol><li><p>header<code>responseType:arraybuffer</code><br></p></li><li><p><code>Blob</code><br>new Blob(DataArray, { type: mimetype })mimetypejpegmimetypeimage/jpeg</p></li><li><p>HTML5 FileReader<br>reader.readAsDataURLbase64DataURL</p></li><li><p>adownloadDataURL<br>window.open(dataUrl)</p></li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">downloadObjectInMemory = <span class=\"function\">(<span class=\"params\">para, info</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> iAxios = axios.create();</span><br><span class=\"line\">    <span class=\"comment\">// iAxios.defaults.timeout = 60 * 1000 * 60 * 10;</span></span><br><span class=\"line\">    iAxios.defaults.timeout = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> options = &#123;</span><br><span class=\"line\">      method: <span class=\"string\">'POST'</span>,</span><br><span class=\"line\">      url: <span class=\"string\">'/resource/object/detailinfo/all'</span>,</span><br><span class=\"line\">      withCredentials: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      responseType: <span class=\"string\">'arraybuffer'</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        <span class=\"string\">'Cache-Control'</span>: <span class=\"string\">'max-age=0'</span>,</span><br><span class=\"line\">        <span class=\"string\">'X-Requested-With'</span>: <span class=\"string\">'XMLHttpRequest'</span>,</span><br><span class=\"line\">        <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/json'</span>,</span><br><span class=\"line\">        <span class=\"string\">'Access-Control-Allow-Origin'</span>: <span class=\"string\">'*'</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      data: para,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> readAsDataUrl = <span class=\"function\">(<span class=\"params\">data, emptyData</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> reader = <span class=\"keyword\">new</span> FileReader();</span><br><span class=\"line\">      reader.readAsDataURL(data);</span><br><span class=\"line\">      reader.onload = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> url = e.target.result;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> a = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'a'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">const</span> filename = para.object.split(<span class=\"string\">'/'</span>).pop();</span><br><span class=\"line\">        a.href = url === <span class=\"string\">'data:'</span> ? emptyData : url;</span><br><span class=\"line\">        a.download = filename;</span><br><span class=\"line\">        a.click();</span><br><span class=\"line\">        <span class=\"built_in\">window</span>.URL.revokeObjectURL(url);</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> typename = mapMimeType(info.name).mime;</span><br><span class=\"line\">    iAxios.request(options)</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> blobData = <span class=\"keyword\">new</span> Blob([res.data], &#123; <span class=\"attr\">type</span>: typename &#125;);</span><br><span class=\"line\">        readAsDataUrl(blobData, <span class=\"string\">`data:<span class=\"subst\">$&#123;typename&#125;</span>;base64,`</span>);</span><br><span class=\"line\">      &#125;).catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>DataURLaURL</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">downloadObjectWithURL = <span class=\"function\">(<span class=\"params\">para</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> iAxios = axios.create();</span><br><span class=\"line\">    <span class=\"comment\">// iAxios.defaults.timeout = 60 * 1000 * 60 * 10;</span></span><br><span class=\"line\">    iAxios.defaults.timeout = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> options = &#123;</span><br><span class=\"line\">      method: <span class=\"string\">'POST'</span>,</span><br><span class=\"line\">      url: <span class=\"string\">'/resource/object/detailinfo'</span>,</span><br><span class=\"line\">      withCredentials: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      responseType: <span class=\"string\">'json'</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        <span class=\"string\">'Cache-Control'</span>: <span class=\"string\">'max-age=0'</span>,</span><br><span class=\"line\">        <span class=\"string\">'X-Requested-With'</span>: <span class=\"string\">'XMLHttpRequest'</span>,</span><br><span class=\"line\">        <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/json'</span>,</span><br><span class=\"line\">        <span class=\"string\">'Access-Control-Allow-Origin'</span>: <span class=\"string\">'*'</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      data: para,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> timer;</span><br><span class=\"line\">    iAxios.request(options)</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        clearTimeout(timer);</span><br><span class=\"line\">        <span class=\"keyword\">const</span> a = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'a'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">const</span> filename = para.object.split(<span class=\"string\">'/'</span>).pop();</span><br><span class=\"line\">        <span class=\"keyword\">const</span> address = process.env.NODE_ENV === <span class=\"string\">'development'</span> ? <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">window</span>.location.protocol&#125;</span>//10.0.6.206:3000<span class=\"subst\">$&#123;res.data.result&#125;</span>`</span> : <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">window</span>.location.protocol&#125;</span>//<span class=\"subst\">$&#123;<span class=\"built_in\">window</span>.location.hostname&#125;</span>:3000<span class=\"subst\">$&#123;res.data.result&#125;</span>`</span>;</span><br><span class=\"line\">        a.href = address;</span><br><span class=\"line\">        a.download = filename;</span><br><span class=\"line\">        a.click();</span><br><span class=\"line\">      &#125;).catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    timer = setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      openNotification(<span class=\"string\">'info'</span>, <span class=\"literal\">null</span>, <span class=\"keyword\">this</span>.lang.lang.fileDownloadTips);</span><br><span class=\"line\">    &#125;, <span class=\"number\">1e3</span>);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><ol><li><p></p></li><li><p>-JsNode</p></li><li><p>-Node</p></li><li><p>-Node</p></li><li><p>-Js</p></li></ol><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p><img src=\"upload.png\" alt=\"upload\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p>Amazon S3  Web  Web  Amazon <br><a href=\"./s3Javascript(\">s3Javascript()</a>.md)JsCoder</p><h3 id=\"-JsNode\"><a href=\"#-JsNode\" class=\"headerlink\" title=\"-JsNode\"></a>-JsNode</h3><hr><h4 id=\"Axios\"><a href=\"#Axios\" class=\"headerlink\" title=\"Axios\"></a>Axios</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> XHR = axios.create(&#123;</span><br><span class=\"line\">  baseURl: <span class=\"string\">''</span>,</span><br><span class=\"line\">  timeout: <span class=\"number\">30e3</span>,</span><br><span class=\"line\">  headers: originHeaders,</span><br><span class=\"line\">  validateStatus(status) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> status &gt;= <span class=\"number\">200</span> &amp;&amp; status &lt; <span class=\"number\">300</span>;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p>fileShardsDataFile.slice<br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> data = <span class=\"keyword\">new</span> FormData();</span><br><span class=\"line\">formData.append(<span class=\"string\">'file'</span>, fileShardsData, <span class=\"string\">'file'</span>);</span><br></pre></td></tr></table></figure><p></p></blockquote><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p><br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">XHR(&#123;</span><br><span class=\"line\">  api,</span><br><span class=\"line\">  method,</span><br><span class=\"line\">  data,</span><br><span class=\"line\">  headers: &#123;</span><br><span class=\"line\">    <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'multipart/form-data'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">&#125;).then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure><p></p></blockquote><h3 id=\"-Node\"><a href=\"#-Node\" class=\"headerlink\" title=\"-Node\"></a>-Node</h3><blockquote><p>Expressmiddleware</p></blockquote><p></p><ul><li>Express V4</li><li>Node.js V8</li></ul><h4 id=\"1formidable\"><a href=\"#1formidable\" class=\"headerlink\" title=\"1formidable\"></a>1formidable</h4><ol><li><p></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> formidable = <span class=\"built_in\">require</span>(<span class=\"string\">'formidable'</span>);</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * parseFile [formidable - ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@author <span class=\"variable\">nojsja</span></span></span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>req [req obj]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>res [res obj]</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">exports.formidableParseFile = <span class=\"function\">(<span class=\"params\">req, res, callback</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> form = <span class=\"keyword\">new</span> formidable.IncomingForm();</span><br><span class=\"line\">    form.parse(req, (err, fields, files) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (fs.existsSync(files.file.path)) &#123;</span><br><span class=\"line\">        fs.readFile(files.file.path, (err, fileBuffer) =&gt; &#123;</span><br><span class=\"line\">          fs.unlink(files.file.path, (err) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">if</span> (err) <span class=\"built_in\">console</span>.log(err);</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> callback(err);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">          callback(<span class=\"literal\">null</span>, fileBuffer);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        callback(<span class=\"literal\">null</span>, <span class=\"string\">''</span>);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(error);</span><br><span class=\"line\">    callback(error);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li><li><p></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">router.post(<span class=\"string\">'/object/object/upload'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'upload'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> random = <span class=\"built_in\">Math</span>.random();</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.time(<span class=\"string\">`<span class=\"subst\">$&#123;random&#125;</span> -&gt; 1`</span>);</span><br><span class=\"line\">  formidableParseFile(req, res, (err, fileBuffer) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">`<span class=\"subst\">$&#123;random&#125;</span> -&gt; 1`</span>);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (err) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> res.json(&#123;</span><br><span class=\"line\">        code: <span class=\"number\">500</span>,</span><br><span class=\"line\">        result: err.toString(),</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.time(<span class=\"string\">`<span class=\"subst\">$&#123;random&#125;</span> -&gt; 2`</span>);</span><br><span class=\"line\">    commonRequestAuth(req.query, objectsresourceApi.object.uploadObject, req, fileBuffer).then(</span><br><span class=\"line\">      (response) =&gt; &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.timeEnd(<span class=\"string\">`<span class=\"subst\">$&#123;random&#125;</span> -&gt; 2`</span>);</span><br><span class=\"line\">        res.json(&#123;</span><br><span class=\"line\">          code: response.code,</span><br><span class=\"line\">          result: &#123;</span><br><span class=\"line\">            ...&#123; <span class=\"attr\">etag</span>: response.headers ? response.headers.etag : <span class=\"string\">''</span> &#125;,</span><br><span class=\"line\">            ...response.result</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      );</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h4><ol><li><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * parseFile [form-data - ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@author <span class=\"variable\">nojsja</span></span></span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>req [req obj]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>res [res obj]</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">exports.parseFile = <span class=\"function\">(<span class=\"params\">req, res, callback</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  req.setEncoding(<span class=\"string\">'binary'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">let</span> body = <span class=\"string\">''</span>;   <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">let</span> fileName = <span class=\"string\">''</span>;  <span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> boundary = req.headers[<span class=\"string\">'content-type'</span>].split(<span class=\"string\">'; '</span>)[<span class=\"number\">1</span>].replace(<span class=\"string\">'boundary='</span>, <span class=\"string\">''</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  req.on(<span class=\"string\">'data'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">chunk</span>) </span>&#123;</span><br><span class=\"line\">    body += chunk;</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  req.on(<span class=\"string\">'end'</span>, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">      <span class=\"comment\">// (\\r\\n)(:)</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> file = querystring.parse(body, <span class=\"string\">'\\r\\n'</span>, <span class=\"string\">':'</span>)</span><br><span class=\"line\">      <span class=\"comment\">//</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> fileInfo = file[<span class=\"string\">'Content-Disposition'</span>].split(<span class=\"string\">'; '</span>);</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (value <span class=\"keyword\">in</span> fileInfo) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (fileInfo[value].indexOf(<span class=\"string\">\"filename=\"</span>) != <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">          fileName = fileInfo[value].substring(<span class=\"number\">10</span>, fileInfo[value].length - <span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"keyword\">if</span> (fileName.indexOf(<span class=\"string\">'\\\\'</span>) != <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">            fileName = fileName.substring(fileName.lastIndexOf(<span class=\"string\">'\\\\'</span>) + <span class=\"number\">1</span>);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// (image/gif  image/png))</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> entireData = body.toString();</span><br><span class=\"line\"></span><br><span class=\"line\">      contentType = file[<span class=\"string\">'Content-Type'</span>].substring(<span class=\"number\">1</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//contentType</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> upperBoundary = entireData.indexOf(contentType) + contentType.length;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> shorterData = entireData.substring(upperBoundary);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> binaryDataAlmost = shorterData.replace(<span class=\"regexp\">/^\\s\\s*/</span>, <span class=\"string\">''</span>).replace(<span class=\"regexp\">/\\s\\s*$/</span>, <span class=\"string\">''</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// : \"--\"+ boundary + \"--\"</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> binaryData = binaryDataAlmost.substring(<span class=\"number\">0</span>, binaryDataAlmost.indexOf(<span class=\"string\">'--'</span> + boundary + <span class=\"string\">'--'</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">      callback(<span class=\"literal\">null</span>, binaryData);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">      callback(<span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'form-data parse error!'</span>));</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li><li></li></ol><h3 id=\"-Node\"><a href=\"#-Node\" class=\"headerlink\" title=\"-Node\"></a>-Node</h3><hr><blockquote><p>Axios</p></blockquote><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p><ol><li>header<code>resType: &quot;arraybuffer&quot;</code><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">router.post(<span class=\"string\">'/resource/object/detailinfo/all'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">  commonRequestAuth(&#123; ...req.body, ...&#123; <span class=\"attr\">$no_timeout$</span>: <span class=\"literal\">true</span> &#125;&#125;, objectsresourceApi.object.objectinfoAll, req).then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    res.type(<span class=\"string\">'file'</span>).send(response.result)</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p>Node.jspipe</p><ol><li>Node Pipe<br><img src=\"node_pipe.png\" alt=\"node pipe\"></li></ol></blockquote><ol><li><p>header<code>resType: &quot;stream&quot;</code></p></li><li><p><br>fs.createWriteStream</p></li><li><p><br></p></li><li><p><br>finish</p></li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">router.post(<span class=\"string\">'/resource/object/detailinfo'</span>, <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">req, res, next</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'download'</span>);</span><br><span class=\"line\">  commonRequestAuth(&#123; ...req.body, ...&#123; <span class=\"attr\">$no_timeout$</span>: <span class=\"literal\">true</span> &#125;&#125;, objectsresourceApi.object.objectinfo, req).then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'download callback'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fileName = req.body.object.split(<span class=\"string\">'/'</span>).pop();</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fileSymbol = <span class=\"string\">`<span class=\"subst\">$&#123;fileName&#125;</span>-<span class=\"subst\">$&#123;<span class=\"built_in\">Date</span>.now()&#125;</span>`</span>;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> filePath = path.join(_path.public, <span class=\"string\">'download'</span>, fileSymbol);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> ws = fs.createWriteStream(filePath);</span><br><span class=\"line\">    response.result.pipe(ws);</span><br><span class=\"line\">    ws.on(<span class=\"string\">'finish'</span>, () =&gt; &#123; </span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">'download finish'</span>);</span><br><span class=\"line\">      res.header(&#123;</span><br><span class=\"line\">        <span class=\"string\">'Content-Disposition'</span>: fileName</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      res.json(&#123;</span><br><span class=\"line\">        code: <span class=\"number\">200</span>,</span><br><span class=\"line\">        result: filePath.split(<span class=\"string\">'node-express-react/public/public'</span>)[<span class=\"number\">1</span>],</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;); </span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure><h3 id=\"-Js\"><a href=\"#-Js\" class=\"headerlink\" title=\"-Js\"></a>-Js</h3><hr><h4 id=\"DataURL\"><a href=\"#DataURL\" class=\"headerlink\" title=\"DataURL\"></a>DataURL</h4><ol><li><p>header<code>responseType:arraybuffer</code><br></p></li><li><p><code>Blob</code><br>new Blob(DataArray, { type: mimetype })mimetypejpegmimetypeimage/jpeg</p></li><li><p>HTML5 FileReader<br>reader.readAsDataURLbase64DataURL</p></li><li><p>adownloadDataURL<br>window.open(dataUrl)</p></li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">downloadObjectInMemory = <span class=\"function\">(<span class=\"params\">para, info</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> iAxios = axios.create();</span><br><span class=\"line\">    <span class=\"comment\">// iAxios.defaults.timeout = 60 * 1000 * 60 * 10;</span></span><br><span class=\"line\">    iAxios.defaults.timeout = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> options = &#123;</span><br><span class=\"line\">      method: <span class=\"string\">'POST'</span>,</span><br><span class=\"line\">      url: <span class=\"string\">'/resource/object/detailinfo/all'</span>,</span><br><span class=\"line\">      withCredentials: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      responseType: <span class=\"string\">'arraybuffer'</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        <span class=\"string\">'Cache-Control'</span>: <span class=\"string\">'max-age=0'</span>,</span><br><span class=\"line\">        <span class=\"string\">'X-Requested-With'</span>: <span class=\"string\">'XMLHttpRequest'</span>,</span><br><span class=\"line\">        <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/json'</span>,</span><br><span class=\"line\">        <span class=\"string\">'Access-Control-Allow-Origin'</span>: <span class=\"string\">'*'</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      data: para,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> readAsDataUrl = <span class=\"function\">(<span class=\"params\">data, emptyData</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> reader = <span class=\"keyword\">new</span> FileReader();</span><br><span class=\"line\">      reader.readAsDataURL(data);</span><br><span class=\"line\">      reader.onload = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> url = e.target.result;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> a = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'a'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">const</span> filename = para.object.split(<span class=\"string\">'/'</span>).pop();</span><br><span class=\"line\">        a.href = url === <span class=\"string\">'data:'</span> ? emptyData : url;</span><br><span class=\"line\">        a.download = filename;</span><br><span class=\"line\">        a.click();</span><br><span class=\"line\">        <span class=\"built_in\">window</span>.URL.revokeObjectURL(url);</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> typename = mapMimeType(info.name).mime;</span><br><span class=\"line\">    iAxios.request(options)</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> blobData = <span class=\"keyword\">new</span> Blob([res.data], &#123; <span class=\"attr\">type</span>: typename &#125;);</span><br><span class=\"line\">        readAsDataUrl(blobData, <span class=\"string\">`data:<span class=\"subst\">$&#123;typename&#125;</span>;base64,`</span>);</span><br><span class=\"line\">      &#125;).catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>DataURLaURL</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">downloadObjectWithURL = <span class=\"function\">(<span class=\"params\">para</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> iAxios = axios.create();</span><br><span class=\"line\">    <span class=\"comment\">// iAxios.defaults.timeout = 60 * 1000 * 60 * 10;</span></span><br><span class=\"line\">    iAxios.defaults.timeout = <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> options = &#123;</span><br><span class=\"line\">      method: <span class=\"string\">'POST'</span>,</span><br><span class=\"line\">      url: <span class=\"string\">'/resource/object/detailinfo'</span>,</span><br><span class=\"line\">      withCredentials: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      responseType: <span class=\"string\">'json'</span>,</span><br><span class=\"line\">      headers: &#123;</span><br><span class=\"line\">        <span class=\"string\">'Cache-Control'</span>: <span class=\"string\">'max-age=0'</span>,</span><br><span class=\"line\">        <span class=\"string\">'X-Requested-With'</span>: <span class=\"string\">'XMLHttpRequest'</span>,</span><br><span class=\"line\">        <span class=\"string\">'Content-Type'</span>: <span class=\"string\">'application/json'</span>,</span><br><span class=\"line\">        <span class=\"string\">'Access-Control-Allow-Origin'</span>: <span class=\"string\">'*'</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      data: para,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> timer;</span><br><span class=\"line\">    iAxios.request(options)</span><br><span class=\"line\">      .then(<span class=\"function\">(<span class=\"params\">res</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        clearTimeout(timer);</span><br><span class=\"line\">        <span class=\"keyword\">const</span> a = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'a'</span>);</span><br><span class=\"line\">        <span class=\"keyword\">const</span> filename = para.object.split(<span class=\"string\">'/'</span>).pop();</span><br><span class=\"line\">        <span class=\"keyword\">const</span> address = process.env.NODE_ENV === <span class=\"string\">'development'</span> ? <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">window</span>.location.protocol&#125;</span>//10.0.6.206:3000<span class=\"subst\">$&#123;res.data.result&#125;</span>`</span> : <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"built_in\">window</span>.location.protocol&#125;</span>//<span class=\"subst\">$&#123;<span class=\"built_in\">window</span>.location.hostname&#125;</span>:3000<span class=\"subst\">$&#123;res.data.result&#125;</span>`</span>;</span><br><span class=\"line\">        a.href = address;</span><br><span class=\"line\">        a.download = filename;</span><br><span class=\"line\">        a.click();</span><br><span class=\"line\">      &#125;).catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        <span class=\"built_in\">console</span>.log(error);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    timer = setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      openNotification(<span class=\"string\">'info'</span>, <span class=\"literal\">null</span>, <span class=\"keyword\">this</span>.lang.lang.fileDownloadTips);</span><br><span class=\"line\">    &#125;, <span class=\"number\">1e3</span>);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure>"},{"title":"s3Javascript","catalog":true,"toc_nav_num":true,"date":"2020-03-07T08:18:00.000Z","subtitle":"aws s3 javascript","header-img":"article_header.png","updateDate":"2020-03-07T08:18:00.000Z","_content":"\n### \n\n1. \n\n2. \n\n3. \n\n### \n\n![upload](upload.png)\n\n### \n\nAmazon S3  Web  Web  Amazon   \naws-s3sdkRestfulJavascript\n\n### \n\n* HTML5`input[type=file]`JSJSAjax\n* JSJS \n* \n\n### \n\n_Github[](https://github.com/NoJsJa/javascript-learning/tree/master/file-slice-upload)_\n\n> React16/Webpack4/Mobx\n\n* \n* ////\n* \n\n#### \n\n![upload](shards_upload.jpg)\n\n#### \n\n1. cacheFile  \ninput\n```js\n /**\n   * [cacheFile ]\n   */\n  @action\n  cacheFile = (files, bucket) => {\n    const symbolArr = this.filesCache.map(file => this.getSymbol(file));\n    const filtedFiles = [];\n    let uploadingFileFound = false;\n    files.forEach((file) => {\n      if (!symbolArr.includes(this.getSymbol(file))) {\n        if (this.findIsUploading(this.getSymbol(file), bucket)) {\n          uploadingFileFound = true;\n          filtedFiles.push(file.name);\n        } else {\n          this.filesCache.push(file);\n          symbolArr.push(this.getSymbol(file));\n        }\n      }\n    });\n    if (!files.length) openNotification('warning', null, this.lang.lang.noFilCanBeUploaded);\n    if (uploadingFileFound) openNotification('warning', null, this.lang.lang.uploadingFileReuploadTips + filtedFiles.join(', '));\n  }\n```\n\n2. registry  \nMobx observable()uninitial()/pending()/uploading()/pause()/error()/break()Mobx observableweakMapfileobservable\n```js\n/**\n   * [registry ]\n   * @param {[Object]} file []\n   * @param {[String]} uploadId [id]\n   * @param {[Object]} state []\n   */\n  @action registry = (files, region, prefix) => {\n    let fileObj = null;\n    this.loading = true;\n    files.forEach((file) => {\n      if (this.files.includes(file)) {\n        return;\n      }\n      this.files.push(file);\n      fileObj = {\n        name: file.webkitRelativePath || file.name,\n        prefix: prefix || '',\n        size: file.size,\n        type: file.type || mapMimeType((file.webkitRelativePath || file.name).split('.').pop()).type,\n        state: 'uninitial',\n        creationTime: '',\n        completionTime: '',\n        index: 0,\n        file,\n        initialized: false,\n        partEtags: [],\n        region,\n        blockSize: this.blockSize,\n        total: Math.ceil(file.size / this.blockSize),\n        activePoint: new Date(),\n        speed: '0 MB/S',\n        id: encodeURIComponent(new Date() + file.name + file.type + file.size),\n      };\n      const obj = observable(fileObj);\n      this.taskType.uninitial.push(obj);\n      this.taskType.series.push(obj);\n      if (!this.fileStorage.get(region)) {\n        this.fileStorage.set(region, [obj]);\n      } else {\n        this.fileStorage.get(region).push(obj);\n      }\n      // this.fileStorageMap.set(file, obj);\n    });\n    this.loading = false;\n  }\n}\n```\n\n3. startTasks  \nMobx observable(=/)etag()4(uninitial/pending/uploading/pause/eror/break)(=/)\n```js\n/**\n   * [startTasks ]\n   * @param  {[String]} region []\n   */\n  startTasks = (region) => {\n    // \n    // let storageObject;\n    this.refreshTasks(region);\n    if (this.isUploadListEmpty(region)) return;\n\n    const maxLength = this.multiTaskCount - this.taskType.uploading.length;\n    const taskSeries = [];\n    for (let i = 0; i < (maxLength) && this.taskType.series[i]; i += 1) {\n      // const file = this.taskType.series.shift();\n      const storageObject = this.taskType.series[i];\n      if (storageObject.state === 'uploading') continue; // \n      if (storageObject.state === 'pause') continue;\n      taskSeries.push(storageObject);\n    }\n\n    let index;\n    taskSeries.forEach((storageObject) => {\n      index = this.taskType.series.indexOf(storageObject);\n      index !== -1 && this.taskType.series.splice(index, 1);\n      if (this.taskType.uninitial.includes(storageObject)) {\n        this.initRequest(storageObject).then(({ err, init }) => {\n          if (!err && init) {\n            this.upload(storageObject);\n          }\n        });\n      } else {\n        this.upload(storageObject);\n      }\n    });\n  }\n\n```\n\n4. refreshTasks  \n\n```js\n/*  */\n  @action\n  refreshTasks = (region) => {\n    // \n    const storageObject = this.fileStorage.get(region);\n    if (!storageObject) return;\n\n    if (this.taskType.series.length >= this.multiTaskCount) return;\n\n    for (let i = 0; i < storageObject.length; i += 1) {\n      if (this.taskType.series.length === this.multiTaskCount) break;\n      if (\n        storageObject[i].index !== storageObject[i].total\n        &&\n        (storageObject[i].state === 'pending' || storageObject[i].state === 'uninitial')\n        &&\n        !this.taskType.series.includes(storageObject[i])\n      ) {\n        this.taskType.series.push(storageObject[i]);\n      }\n    }\n  }\n```\n\n5. upload & update  \nAjaxetagetagetag\n```js\n/**\n   * [upload ]\n   * @param  {[Object]} file    [description]\n   * @param  {[Object]} _params [...]\n   * @param  {[String]}   _params.bucket [bucket name]\n   * @param  {[String]}   _params.object [object name]\n   * @param  {[String]}   _params.uploadId [upload id]\n   */\n  @action\n  upload = (storageObject) => {\n    let params = {\n      bucket: storageObject.region,\n      object: storageObject.name,\n      prefix: storageObject.prefix,\n      uploadId: storageObject.uploadId,\n    };\n    let single = false; // \n    /*  */\n    if (!this.isValidUploadingTask(storageObject)) return;\n\n    if (storageObject.state === 'pending') {\n      this.taskType.pending.splice(this.taskType.pending.indexOf(storageObject), 1);\n      this.taskType.uploading.push(storageObject);\n      storageObject.state = 'uploading';\n    }\n\n    const num = storageObject.index;\n\n    if (num === 0 && storageObject.size <= storageObject.blockSize) {\n      // \n      single = true;\n    } else if (num === storageObject.total) {\n      // \n      return;\n    }\n    const nextSize = Math.min((num + 1) * storageObject.blockSize, storageObject.size);\n    const fileData = storageObject.file.slice(num * storageObject.blockSize, nextSize);\n    params = Object.assign(params, {\n      partNumber: num + 1,\n    });\n    storageObject.activePoint = new Date();\n\n    this.uploadRequest({ params, data: fileData, single }).then((rsp) => {\n      if (rsp.code !== 200) {\n        openNotification('error', null, (rsp.result.data ? rsp.result.data.Code : this.lang.lang.uploadError));\n        this.markError(storageObject);\n        this.startTasks(params.bucket);\n        return;\n      }\n      const { completed, etags } = this.update({\n        region: params.bucket,\n        etag: rsp.result.etag,\n        size: fileData.size,\n        id: storageObject.id,\n        index: params.partNumber,\n      });\n      if (completed) {\n        (single ?\n          () => {\n            this.complete(storageObject, params.bucket);\n          } :\n          (partEtags) => {\n            this.completeRequest({\n              bucket: params.bucket,\n              uploadId: params.uploadId,\n              object: params.object,\n              prefix: params.prefix,\n              partEtags,\n            }, storageObject);\n          })(etags);\n      } else {\n        this.upload(storageObject);\n      }\n    }).catch((error) => {\n      this.markError(storageObject);\n      this.startTasks(params.bucket);\n      console.log(`${params.bucket}_${params.object} upload error: ${error}`);\n    });\n    storageObject.index += 1;\n  }\n\n```\n\n7. complete  \netagetagetagetag\n```js\n/**\n   * [completeRequest ]\n   * @param  {[Object]} _params [...]\n   * @param  {[String]}   _params.bucket [bucket name]\n   * @param  {[String]}   _params.object [object name]\n   * @param  {[String]}   _params.uploadId [upload id]\n   * @param  {[String]}   _params.partEtags [upload id]\n   * @param  {[Object]} file []\n   */\n  @action completeRequest = (params, file) => {\n    postDataPro(\n      {\n        ...{\n          ...params,\n          ...{\n            object: params.prefix + params.object,\n          },\n        },\n        partEtags: {\n          CompleteMultipartUpload: {\n            Part: params.partEtags.map(info => ({\n              PartNumber: info.number,\n              ETag: info.etag,\n            })),\n          },\n        },\n      },\n      objectResourceApi.object.completeFragmentUpload\n    ).then((data) => {\n      this.complete(file, params.bucket);\n    }).catch((error) => {\n      this.startTasks(params.bucket);\n      this.markError(file);\n    });\n  }\n\n  /**\n   * [complete ]\n   * @param {[Object]} file []\n   * @param {[String]} bucket []\n   */\n  @action\n  complete = (storageObject) => {\n    const index = this.taskType.uploading.indexOf(storageObject);\n    this.taskType.uploading.splice(index, 1);\n    this.taskType.break.push(storageObject);\n    storageObject.completionTime = (new Date().toTimeString()).split(' ')[0];\n    storageObject.state = 'break';\n    storageObject.speed = '';\n    storageObject.index = storageObject.total;\n\n    this.startTasks(storageObject.region);\n  };\n\n```\n\n#### \n\n1.   \nuploadingpause\n\n2.   \npausepending\n\n3. \nerrorpending\n\n4. \nerrorpending\n\n#### \n\n1. etag\n```js\n/**\n   * [update ]\n   * @param {[String]} region []\n   * @param {[String]} etag []\n   */\n  @action\n  update = ({\n    region, etag, size, id, index,\n  }) => {\n    const target = this.fileStorage.get(region);\n    for (let i = 0; i < target.length; i += 1) {\n      if (target[i].id === id) {\n        target[i].speed = `${(size / 1024 / 1024 / (((new Date() - target[i].activePoint) / 1000))).toFixed(2)} MB/S`;\n        if (target[i].speed === '0.00 MB/S') {\n          target[i].speed = `${formatSizeStr(size)}/S`;\n        }\n        target[i].partEtags = target[i].partEtags.filter(etagItem => etagItem.number !== index);\n        target[i].partEtags.push({\n          number: index,\n          etag,\n        });\n        // \n        if (index === target[i].total) {\n          if (target[i].state === 'pause') {\n            index -= 1;\n          }\n        }\n        // \n        if (target[i].total === 0 || target[i].partEtags.toJS().length === target[i].total) {\n          return {\n            completed: true,\n            etags: target[i].partEtags,\n          };\n        }\n        return {\n          completed: false,\n        };\n      }\n    }\n  }\n```\n\n2. Node.jsak/sk s3 restful   \naws s3-version4Node.jssignatureNode.jsnpm[aws4](https://github.com/mhart/aws4)`ak/sk`url`Request`\n```js\n\n/**\n  * templateStrTranform [s3urlbucketobject]\n  * params1: {bucket: testBucket, uid: testUid, bucketId: testID}\n  * params2: /admin/bucket?format=json&bucket={bucket}&uid={uid}&bucket-id={bucketId}\n  * return: /admin/bucket?format=json&bucket=testBucket&uid=testUid&bucket-id=testID\n  * \n  * @author nojsja\n  * @param  {[Object]} varObj []\n  * @param {[String]} templateStr []\n  * @return {[String]} result []\n  */\nexports.templateStrTransform = (varObj, templateStr) => {\n  if (typeof varObj !== 'object' || !templateStr) return templateStr;\n  for (const attr in varObj) {\n    if (varObj.hasOwnProperty(attr) && (!Number(attr) && Number(attr) !== 0 )) {\n      templateStr = templateStr.replace(new RegExp(`{${attr}}`, 'g'), varObj[attr]);\n    }\n  }\n  return templateStr;\n};\n\n /**\n  * api\n    listFragmentUpload: {\n      url: '/{bucket}/{object}?uploadId={uploadId}', // \n      method: 'get',\n      port: '7480',\n      type: 'xml', // xml -> json\n      reqType: 'xml', // xml json -> xml\n    }\n  *\n */\ncommonApiConfig = (headers, api, data) => {\n  if (isEnvDev && !isEnvMock) {\n    return {\n      url: `http://10.0.9.149:${api.port}${templateStrTransform(data, api.url)}`,\n      data: paramsObjectParse(data, api.url),\n      host: `http://10.0.9.149:${api.port}`,\n      hostname: `http://10.0.9.149`,\n      ip: '10.0.9.149',\n    };\n  } else if(isEnvDev && isEnvMock) {\n    return {\n      url: `http://10.0.7.15/mock/63${templateStrTransform(data, api.url)}`,\n      data: paramsObjectParse(data, api.url),\n      host: `http://10.0.9.154:${api.port}`,\n      hostname: `http://10.0.9.154`,\n      ip: '10.0.9.154',\n    };\n  } else {\n    return {\n      url: `http://127.0.0.1:${api.port}${templateStrTransform(data, api.url)}`,\n      data: paramsObjectParse(data, api.url),\n      host: `http://127.0.0.1:${api.port}`,\n      hostname: `http://127.0.0.1`,\n      ip: `127.0.0.1`,\n    };\n  }\n\n}\n\n/**\n  * aws4RequestSign [asw4signurl]\n  * @param  {[Object]} req [Express.jsreq]\n  * @param  {[String]} path [s3url]\n  * @param  {[Object]} api [api]\n  * @param  {[Buffer|String]} data [body]\n  */\n\n/**\n * Tips: aws4.signnode process ak/sk env\n *  signoptionsak/sknpm\n*/\naws4RequestSign = (req, path, api, data) => {\n  const aws4 = require('aws4');\n  var opts = {\n    host: `${(commonApiConfig(req.headers, api, data)).host}`,\n    path,\n    url: (commonApiConfig(req.headers, api, data)).hostname,\n    signQuery: true,\n    service: process.env.AWS_SERVICE,\n    region: process.env.AWS_REGION,\n    method: api.method.toUpperCase(),\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n    },\n    body: req.body,\n    data: '',\n  }\n  // assumes AWS credentials are available in process.env\n  aws4.sign(opts)\n\n  return opts;\n}\n\n/**\n  * commonRequestAuth [url]\n  * @param  {[Object]} req [Express.jsreq]\n  * @param  {[String]} path [s3url]\n  * @param  {[Object]} api [api]\n  * @param  {[Buffer|String]} data [body]\n  */\nconst commonRequestAuth = (params, api, req, data) => {\n  const iAxios = axios.create();\n  iAxios.defaults.timeout = params['$no_timeout$'] ? 0 : 30e3;\n  // paramsurl  \n  const parsedUrl = templateStrTransform(params, api.url);\n  // aws env set\n  awsEnvRegistry({\n    key: req.cookies.access_key,\n    secret: req.cookies.secret_key,\n  });\n  // \n  const postData = jsonToXml(data, api.reqType);\n  const awsOpts = exports.aws4RequestSign(req, parsedUrl, api, params);\n\n  return new Promise((resolve, reject) => {\n    iAxios.request({\n      baseURL: awsOpts.host,\n      url: awsOpts.path,\n      method: awsOpts.method,\n      headers: getContentType(awsOpts.headers, api.reqType, postData, params._headers),\n      data: postData,\n      responseType: api.resType,\n    }).then((response) => {\n\n      // header\n      if (api.type === 'header') return resolve({\n        result: response.headers,\n        code: 200,\n      });\n      \n      // xml\n      if (api.type === 'xml') {\n        try {\n          xmlToJson(response.data, api.type, (data) => {\n            resolve({\n              result: data,\n              code: 200,\n              // data: jsonArrayToString(data),\n              headers: response.headers,\n            });\n          });\n        } catch (error) {\n          resolve({\n            code: 500,\n            result: global.lang.xml_parse_error,\n          });\n        }\n      }\n\n      resolve({\n        result: response.data,\n        code: 200,\n      });\n    }).catch((error) => {\n      console.log(error.response.data);\n      xmlToJson(error.response.data, 'xml', (data) => {\n        resolve({\n          code: 600,\n          result: { headers: error.config, data: data.Error ? data.Error : error.response.data}\n        })\n      })\n    });\n  });\n};\n```\n\n3. webak/sk s3 restful   \nwebs3/requests3axios[aws4-axios](https://github.com/jamesmbourne/aws4-axios)\n```js\nimport axios from \"axios\";\nimport { aws4Interceptor } from \"aws4-axios\";\n\nconst client = axios.create();\n\nconst interceptor = aws4Interceptor({\n  region: \"eu-west-2\",\n  service: \"execute-api\"\n}, {\n  accessKeyId: '',\n  secretAccessKey: ''\n});\n\nclient.interceptors.request.use(interceptor);\n\n// Requests made using Axios will now be signed\nclient.get(\"https://example.com/foo\").then(res => {\n  // ...\n});\n\n```\n","source":"_posts/2020-03-07-s3Javascript.md","raw":"---\ntitle: \"s3Javascript\"\ncatalog: true\ntoc_nav_num: true\ndate: 2020-03-07 16:18:00\nsubtitle: \"aws s3 javascript\"\nheader-img: \"article_header.png\"\ntags:\n- upload\n- aws\n- s3\ncategories:\n- Javascript\nupdateDate: 2020-03-07 16:18:00\n---\n\n### \n\n1. \n\n2. \n\n3. \n\n### \n\n![upload](upload.png)\n\n### \n\nAmazon S3  Web  Web  Amazon   \naws-s3sdkRestfulJavascript\n\n### \n\n* HTML5`input[type=file]`JSJSAjax\n* JSJS \n* \n\n### \n\n_Github[](https://github.com/NoJsJa/javascript-learning/tree/master/file-slice-upload)_\n\n> React16/Webpack4/Mobx\n\n* \n* ////\n* \n\n#### \n\n![upload](shards_upload.jpg)\n\n#### \n\n1. cacheFile  \ninput\n```js\n /**\n   * [cacheFile ]\n   */\n  @action\n  cacheFile = (files, bucket) => {\n    const symbolArr = this.filesCache.map(file => this.getSymbol(file));\n    const filtedFiles = [];\n    let uploadingFileFound = false;\n    files.forEach((file) => {\n      if (!symbolArr.includes(this.getSymbol(file))) {\n        if (this.findIsUploading(this.getSymbol(file), bucket)) {\n          uploadingFileFound = true;\n          filtedFiles.push(file.name);\n        } else {\n          this.filesCache.push(file);\n          symbolArr.push(this.getSymbol(file));\n        }\n      }\n    });\n    if (!files.length) openNotification('warning', null, this.lang.lang.noFilCanBeUploaded);\n    if (uploadingFileFound) openNotification('warning', null, this.lang.lang.uploadingFileReuploadTips + filtedFiles.join(', '));\n  }\n```\n\n2. registry  \nMobx observable()uninitial()/pending()/uploading()/pause()/error()/break()Mobx observableweakMapfileobservable\n```js\n/**\n   * [registry ]\n   * @param {[Object]} file []\n   * @param {[String]} uploadId [id]\n   * @param {[Object]} state []\n   */\n  @action registry = (files, region, prefix) => {\n    let fileObj = null;\n    this.loading = true;\n    files.forEach((file) => {\n      if (this.files.includes(file)) {\n        return;\n      }\n      this.files.push(file);\n      fileObj = {\n        name: file.webkitRelativePath || file.name,\n        prefix: prefix || '',\n        size: file.size,\n        type: file.type || mapMimeType((file.webkitRelativePath || file.name).split('.').pop()).type,\n        state: 'uninitial',\n        creationTime: '',\n        completionTime: '',\n        index: 0,\n        file,\n        initialized: false,\n        partEtags: [],\n        region,\n        blockSize: this.blockSize,\n        total: Math.ceil(file.size / this.blockSize),\n        activePoint: new Date(),\n        speed: '0 MB/S',\n        id: encodeURIComponent(new Date() + file.name + file.type + file.size),\n      };\n      const obj = observable(fileObj);\n      this.taskType.uninitial.push(obj);\n      this.taskType.series.push(obj);\n      if (!this.fileStorage.get(region)) {\n        this.fileStorage.set(region, [obj]);\n      } else {\n        this.fileStorage.get(region).push(obj);\n      }\n      // this.fileStorageMap.set(file, obj);\n    });\n    this.loading = false;\n  }\n}\n```\n\n3. startTasks  \nMobx observable(=/)etag()4(uninitial/pending/uploading/pause/eror/break)(=/)\n```js\n/**\n   * [startTasks ]\n   * @param  {[String]} region []\n   */\n  startTasks = (region) => {\n    // \n    // let storageObject;\n    this.refreshTasks(region);\n    if (this.isUploadListEmpty(region)) return;\n\n    const maxLength = this.multiTaskCount - this.taskType.uploading.length;\n    const taskSeries = [];\n    for (let i = 0; i < (maxLength) && this.taskType.series[i]; i += 1) {\n      // const file = this.taskType.series.shift();\n      const storageObject = this.taskType.series[i];\n      if (storageObject.state === 'uploading') continue; // \n      if (storageObject.state === 'pause') continue;\n      taskSeries.push(storageObject);\n    }\n\n    let index;\n    taskSeries.forEach((storageObject) => {\n      index = this.taskType.series.indexOf(storageObject);\n      index !== -1 && this.taskType.series.splice(index, 1);\n      if (this.taskType.uninitial.includes(storageObject)) {\n        this.initRequest(storageObject).then(({ err, init }) => {\n          if (!err && init) {\n            this.upload(storageObject);\n          }\n        });\n      } else {\n        this.upload(storageObject);\n      }\n    });\n  }\n\n```\n\n4. refreshTasks  \n\n```js\n/*  */\n  @action\n  refreshTasks = (region) => {\n    // \n    const storageObject = this.fileStorage.get(region);\n    if (!storageObject) return;\n\n    if (this.taskType.series.length >= this.multiTaskCount) return;\n\n    for (let i = 0; i < storageObject.length; i += 1) {\n      if (this.taskType.series.length === this.multiTaskCount) break;\n      if (\n        storageObject[i].index !== storageObject[i].total\n        &&\n        (storageObject[i].state === 'pending' || storageObject[i].state === 'uninitial')\n        &&\n        !this.taskType.series.includes(storageObject[i])\n      ) {\n        this.taskType.series.push(storageObject[i]);\n      }\n    }\n  }\n```\n\n5. upload & update  \nAjaxetagetagetag\n```js\n/**\n   * [upload ]\n   * @param  {[Object]} file    [description]\n   * @param  {[Object]} _params [...]\n   * @param  {[String]}   _params.bucket [bucket name]\n   * @param  {[String]}   _params.object [object name]\n   * @param  {[String]}   _params.uploadId [upload id]\n   */\n  @action\n  upload = (storageObject) => {\n    let params = {\n      bucket: storageObject.region,\n      object: storageObject.name,\n      prefix: storageObject.prefix,\n      uploadId: storageObject.uploadId,\n    };\n    let single = false; // \n    /*  */\n    if (!this.isValidUploadingTask(storageObject)) return;\n\n    if (storageObject.state === 'pending') {\n      this.taskType.pending.splice(this.taskType.pending.indexOf(storageObject), 1);\n      this.taskType.uploading.push(storageObject);\n      storageObject.state = 'uploading';\n    }\n\n    const num = storageObject.index;\n\n    if (num === 0 && storageObject.size <= storageObject.blockSize) {\n      // \n      single = true;\n    } else if (num === storageObject.total) {\n      // \n      return;\n    }\n    const nextSize = Math.min((num + 1) * storageObject.blockSize, storageObject.size);\n    const fileData = storageObject.file.slice(num * storageObject.blockSize, nextSize);\n    params = Object.assign(params, {\n      partNumber: num + 1,\n    });\n    storageObject.activePoint = new Date();\n\n    this.uploadRequest({ params, data: fileData, single }).then((rsp) => {\n      if (rsp.code !== 200) {\n        openNotification('error', null, (rsp.result.data ? rsp.result.data.Code : this.lang.lang.uploadError));\n        this.markError(storageObject);\n        this.startTasks(params.bucket);\n        return;\n      }\n      const { completed, etags } = this.update({\n        region: params.bucket,\n        etag: rsp.result.etag,\n        size: fileData.size,\n        id: storageObject.id,\n        index: params.partNumber,\n      });\n      if (completed) {\n        (single ?\n          () => {\n            this.complete(storageObject, params.bucket);\n          } :\n          (partEtags) => {\n            this.completeRequest({\n              bucket: params.bucket,\n              uploadId: params.uploadId,\n              object: params.object,\n              prefix: params.prefix,\n              partEtags,\n            }, storageObject);\n          })(etags);\n      } else {\n        this.upload(storageObject);\n      }\n    }).catch((error) => {\n      this.markError(storageObject);\n      this.startTasks(params.bucket);\n      console.log(`${params.bucket}_${params.object} upload error: ${error}`);\n    });\n    storageObject.index += 1;\n  }\n\n```\n\n7. complete  \netagetagetagetag\n```js\n/**\n   * [completeRequest ]\n   * @param  {[Object]} _params [...]\n   * @param  {[String]}   _params.bucket [bucket name]\n   * @param  {[String]}   _params.object [object name]\n   * @param  {[String]}   _params.uploadId [upload id]\n   * @param  {[String]}   _params.partEtags [upload id]\n   * @param  {[Object]} file []\n   */\n  @action completeRequest = (params, file) => {\n    postDataPro(\n      {\n        ...{\n          ...params,\n          ...{\n            object: params.prefix + params.object,\n          },\n        },\n        partEtags: {\n          CompleteMultipartUpload: {\n            Part: params.partEtags.map(info => ({\n              PartNumber: info.number,\n              ETag: info.etag,\n            })),\n          },\n        },\n      },\n      objectResourceApi.object.completeFragmentUpload\n    ).then((data) => {\n      this.complete(file, params.bucket);\n    }).catch((error) => {\n      this.startTasks(params.bucket);\n      this.markError(file);\n    });\n  }\n\n  /**\n   * [complete ]\n   * @param {[Object]} file []\n   * @param {[String]} bucket []\n   */\n  @action\n  complete = (storageObject) => {\n    const index = this.taskType.uploading.indexOf(storageObject);\n    this.taskType.uploading.splice(index, 1);\n    this.taskType.break.push(storageObject);\n    storageObject.completionTime = (new Date().toTimeString()).split(' ')[0];\n    storageObject.state = 'break';\n    storageObject.speed = '';\n    storageObject.index = storageObject.total;\n\n    this.startTasks(storageObject.region);\n  };\n\n```\n\n#### \n\n1.   \nuploadingpause\n\n2.   \npausepending\n\n3. \nerrorpending\n\n4. \nerrorpending\n\n#### \n\n1. etag\n```js\n/**\n   * [update ]\n   * @param {[String]} region []\n   * @param {[String]} etag []\n   */\n  @action\n  update = ({\n    region, etag, size, id, index,\n  }) => {\n    const target = this.fileStorage.get(region);\n    for (let i = 0; i < target.length; i += 1) {\n      if (target[i].id === id) {\n        target[i].speed = `${(size / 1024 / 1024 / (((new Date() - target[i].activePoint) / 1000))).toFixed(2)} MB/S`;\n        if (target[i].speed === '0.00 MB/S') {\n          target[i].speed = `${formatSizeStr(size)}/S`;\n        }\n        target[i].partEtags = target[i].partEtags.filter(etagItem => etagItem.number !== index);\n        target[i].partEtags.push({\n          number: index,\n          etag,\n        });\n        // \n        if (index === target[i].total) {\n          if (target[i].state === 'pause') {\n            index -= 1;\n          }\n        }\n        // \n        if (target[i].total === 0 || target[i].partEtags.toJS().length === target[i].total) {\n          return {\n            completed: true,\n            etags: target[i].partEtags,\n          };\n        }\n        return {\n          completed: false,\n        };\n      }\n    }\n  }\n```\n\n2. Node.jsak/sk s3 restful   \naws s3-version4Node.jssignatureNode.jsnpm[aws4](https://github.com/mhart/aws4)`ak/sk`url`Request`\n```js\n\n/**\n  * templateStrTranform [s3urlbucketobject]\n  * params1: {bucket: testBucket, uid: testUid, bucketId: testID}\n  * params2: /admin/bucket?format=json&bucket={bucket}&uid={uid}&bucket-id={bucketId}\n  * return: /admin/bucket?format=json&bucket=testBucket&uid=testUid&bucket-id=testID\n  * \n  * @author nojsja\n  * @param  {[Object]} varObj []\n  * @param {[String]} templateStr []\n  * @return {[String]} result []\n  */\nexports.templateStrTransform = (varObj, templateStr) => {\n  if (typeof varObj !== 'object' || !templateStr) return templateStr;\n  for (const attr in varObj) {\n    if (varObj.hasOwnProperty(attr) && (!Number(attr) && Number(attr) !== 0 )) {\n      templateStr = templateStr.replace(new RegExp(`{${attr}}`, 'g'), varObj[attr]);\n    }\n  }\n  return templateStr;\n};\n\n /**\n  * api\n    listFragmentUpload: {\n      url: '/{bucket}/{object}?uploadId={uploadId}', // \n      method: 'get',\n      port: '7480',\n      type: 'xml', // xml -> json\n      reqType: 'xml', // xml json -> xml\n    }\n  *\n */\ncommonApiConfig = (headers, api, data) => {\n  if (isEnvDev && !isEnvMock) {\n    return {\n      url: `http://10.0.9.149:${api.port}${templateStrTransform(data, api.url)}`,\n      data: paramsObjectParse(data, api.url),\n      host: `http://10.0.9.149:${api.port}`,\n      hostname: `http://10.0.9.149`,\n      ip: '10.0.9.149',\n    };\n  } else if(isEnvDev && isEnvMock) {\n    return {\n      url: `http://10.0.7.15/mock/63${templateStrTransform(data, api.url)}`,\n      data: paramsObjectParse(data, api.url),\n      host: `http://10.0.9.154:${api.port}`,\n      hostname: `http://10.0.9.154`,\n      ip: '10.0.9.154',\n    };\n  } else {\n    return {\n      url: `http://127.0.0.1:${api.port}${templateStrTransform(data, api.url)}`,\n      data: paramsObjectParse(data, api.url),\n      host: `http://127.0.0.1:${api.port}`,\n      hostname: `http://127.0.0.1`,\n      ip: `127.0.0.1`,\n    };\n  }\n\n}\n\n/**\n  * aws4RequestSign [asw4signurl]\n  * @param  {[Object]} req [Express.jsreq]\n  * @param  {[String]} path [s3url]\n  * @param  {[Object]} api [api]\n  * @param  {[Buffer|String]} data [body]\n  */\n\n/**\n * Tips: aws4.signnode process ak/sk env\n *  signoptionsak/sknpm\n*/\naws4RequestSign = (req, path, api, data) => {\n  const aws4 = require('aws4');\n  var opts = {\n    host: `${(commonApiConfig(req.headers, api, data)).host}`,\n    path,\n    url: (commonApiConfig(req.headers, api, data)).hostname,\n    signQuery: true,\n    service: process.env.AWS_SERVICE,\n    region: process.env.AWS_REGION,\n    method: api.method.toUpperCase(),\n    headers: {\n      'Access-Control-Allow-Origin': '*',\n    },\n    body: req.body,\n    data: '',\n  }\n  // assumes AWS credentials are available in process.env\n  aws4.sign(opts)\n\n  return opts;\n}\n\n/**\n  * commonRequestAuth [url]\n  * @param  {[Object]} req [Express.jsreq]\n  * @param  {[String]} path [s3url]\n  * @param  {[Object]} api [api]\n  * @param  {[Buffer|String]} data [body]\n  */\nconst commonRequestAuth = (params, api, req, data) => {\n  const iAxios = axios.create();\n  iAxios.defaults.timeout = params['$no_timeout$'] ? 0 : 30e3;\n  // paramsurl  \n  const parsedUrl = templateStrTransform(params, api.url);\n  // aws env set\n  awsEnvRegistry({\n    key: req.cookies.access_key,\n    secret: req.cookies.secret_key,\n  });\n  // \n  const postData = jsonToXml(data, api.reqType);\n  const awsOpts = exports.aws4RequestSign(req, parsedUrl, api, params);\n\n  return new Promise((resolve, reject) => {\n    iAxios.request({\n      baseURL: awsOpts.host,\n      url: awsOpts.path,\n      method: awsOpts.method,\n      headers: getContentType(awsOpts.headers, api.reqType, postData, params._headers),\n      data: postData,\n      responseType: api.resType,\n    }).then((response) => {\n\n      // header\n      if (api.type === 'header') return resolve({\n        result: response.headers,\n        code: 200,\n      });\n      \n      // xml\n      if (api.type === 'xml') {\n        try {\n          xmlToJson(response.data, api.type, (data) => {\n            resolve({\n              result: data,\n              code: 200,\n              // data: jsonArrayToString(data),\n              headers: response.headers,\n            });\n          });\n        } catch (error) {\n          resolve({\n            code: 500,\n            result: global.lang.xml_parse_error,\n          });\n        }\n      }\n\n      resolve({\n        result: response.data,\n        code: 200,\n      });\n    }).catch((error) => {\n      console.log(error.response.data);\n      xmlToJson(error.response.data, 'xml', (data) => {\n        resolve({\n          code: 600,\n          result: { headers: error.config, data: data.Error ? data.Error : error.response.data}\n        })\n      })\n    });\n  });\n};\n```\n\n3. webak/sk s3 restful   \nwebs3/requests3axios[aws4-axios](https://github.com/jamesmbourne/aws4-axios)\n```js\nimport axios from \"axios\";\nimport { aws4Interceptor } from \"aws4-axios\";\n\nconst client = axios.create();\n\nconst interceptor = aws4Interceptor({\n  region: \"eu-west-2\",\n  service: \"execute-api\"\n}, {\n  accessKeyId: '',\n  secretAccessKey: ''\n});\n\nclient.interceptors.request.use(interceptor);\n\n// Requests made using Axios will now be signed\nclient.get(\"https://example.com/foo\").then(res => {\n  // ...\n});\n\n```\n","slug":"s3Javascript","published":1,"updated":"2019-06-12T03:16:34.906Z","_id":"ck7gzonts000din956kae6kby","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol><li><p></p></li><li><p></p></li><li><p></p></li></ol><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img src=\"upload.png\" alt=\"upload\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Amazon S3  Web  Web  Amazon <br>aws-s3sdkRestfulJavascript</p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul><li>HTML5<code>input[type=file]</code>JSJSAjax</li><li>JSJS</li><li></li></ul><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><em>Github<a href=\"https://github.com/NoJsJa/javascript-learning/tree/master/file-slice-upload\" target=\"_blank\" rel=\"noopener\"></a></em></p><blockquote><p>React16/Webpack4/Mobx</p></blockquote><ul><li></li><li>////</li><li></li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"shards_upload.jpg\" alt=\"upload\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li><p>cacheFile<br>input</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [cacheFile ]</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> @action</span><br><span class=\"line\"> cacheFile = <span class=\"function\">(<span class=\"params\">files, bucket</span>) =&gt;</span> &#123;</span><br><span class=\"line\">   <span class=\"keyword\">const</span> symbolArr = <span class=\"keyword\">this</span>.filesCache.map(<span class=\"function\"><span class=\"params\">file</span> =&gt;</span> <span class=\"keyword\">this</span>.getSymbol(file));</span><br><span class=\"line\">   <span class=\"keyword\">const</span> filtedFiles = [];</span><br><span class=\"line\">   <span class=\"keyword\">let</span> uploadingFileFound = <span class=\"literal\">false</span>;</span><br><span class=\"line\">   files.forEach(<span class=\"function\">(<span class=\"params\">file</span>) =&gt;</span> &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (!symbolArr.includes(<span class=\"keyword\">this</span>.getSymbol(file))) &#123;</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.findIsUploading(<span class=\"keyword\">this</span>.getSymbol(file), bucket)) &#123;</span><br><span class=\"line\">         uploadingFileFound = <span class=\"literal\">true</span>;</span><br><span class=\"line\">         filtedFiles.push(file.name);</span><br><span class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         <span class=\"keyword\">this</span>.filesCache.push(file);</span><br><span class=\"line\">         symbolArr.push(<span class=\"keyword\">this</span>.getSymbol(file));</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!files.length) openNotification(<span class=\"string\">'warning'</span>, <span class=\"literal\">null</span>, <span class=\"keyword\">this</span>.lang.lang.noFilCanBeUploaded);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (uploadingFileFound) openNotification(<span class=\"string\">'warning'</span>, <span class=\"literal\">null</span>, <span class=\"keyword\">this</span>.lang.lang.uploadingFileReuploadTips + filtedFiles.join(<span class=\"string\">', '</span>));</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure></li><li><p>registry<br>Mobx observable()uninitial()/pending()/uploading()/pause()/error()/break()Mobx observableweakMapfileobservable</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [registry ]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param <span class=\"type\">&#123;[Object]&#125;</span> </span>file []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param <span class=\"type\">&#123;[String]&#125;</span> </span>uploadId [id]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param <span class=\"type\">&#123;[Object]&#125;</span> </span>state []</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  @action registry = <span class=\"function\">(<span class=\"params\">files, region, prefix</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> fileObj = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.loading = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    files.forEach(<span class=\"function\">(<span class=\"params\">file</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.files.includes(file)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.files.push(file);</span><br><span class=\"line\">      fileObj = &#123;</span><br><span class=\"line\">        name: file.webkitRelativePath || file.name,</span><br><span class=\"line\">        prefix: prefix || <span class=\"string\">''</span>,</span><br><span class=\"line\">        size: file.size,</span><br><span class=\"line\">        type: file.type || mapMimeType((file.webkitRelativePath || file.name).split(<span class=\"string\">'.'</span>).pop()).type,</span><br><span class=\"line\">        state: <span class=\"string\">'uninitial'</span>,</span><br><span class=\"line\">        creationTime: <span class=\"string\">''</span>,</span><br><span class=\"line\">        completionTime: <span class=\"string\">''</span>,</span><br><span class=\"line\">        index: <span class=\"number\">0</span>,</span><br><span class=\"line\">        file,</span><br><span class=\"line\">        initialized: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        partEtags: [],</span><br><span class=\"line\">        region,</span><br><span class=\"line\">        blockSize: <span class=\"keyword\">this</span>.blockSize,</span><br><span class=\"line\">        total: <span class=\"built_in\">Math</span>.ceil(file.size / <span class=\"keyword\">this</span>.blockSize),</span><br><span class=\"line\">        activePoint: <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(),</span><br><span class=\"line\">        speed: <span class=\"string\">'0 MB/S'</span>,</span><br><span class=\"line\">        id: <span class=\"built_in\">encodeURIComponent</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>() + file.name + file.type + file.size),</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> obj = observable(fileObj);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.taskType.uninitial.push(obj);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.taskType.series.push(obj);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.fileStorage.get(region)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.fileStorage.set(region, [obj]);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.fileStorage.get(region).push(obj);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">// this.fileStorageMap.set(file, obj);</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.loading = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li><li><p>startTasks<br>Mobx observable(=/)etag()4(uninitial/pending/uploading/pause/eror/break)(=/)</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [startTasks ]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>region []</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  startTasks = <span class=\"function\">(<span class=\"params\">region</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"comment\">// let storageObject;</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.refreshTasks(region);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.isUploadListEmpty(region)) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> maxLength = <span class=\"keyword\">this</span>.multiTaskCount - <span class=\"keyword\">this</span>.taskType.uploading.length;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> taskSeries = [];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; (maxLength) &amp;&amp; <span class=\"keyword\">this</span>.taskType.series[i]; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// const file = this.taskType.series.shift();</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> storageObject = <span class=\"keyword\">this</span>.taskType.series[i];</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (storageObject.state === <span class=\"string\">'uploading'</span>) <span class=\"keyword\">continue</span>; <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (storageObject.state === <span class=\"string\">'pause'</span>) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">      taskSeries.push(storageObject);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> index;</span><br><span class=\"line\">    taskSeries.forEach(<span class=\"function\">(<span class=\"params\">storageObject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      index = <span class=\"keyword\">this</span>.taskType.series.indexOf(storageObject);</span><br><span class=\"line\">      index !== <span class=\"number\">-1</span> &amp;&amp; <span class=\"keyword\">this</span>.taskType.series.splice(index, <span class=\"number\">1</span>);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.taskType.uninitial.includes(storageObject)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.initRequest(storageObject).then(<span class=\"function\">(<span class=\"params\">&#123; err, init &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (!err &amp;&amp; init) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.upload(storageObject);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.upload(storageObject);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>refreshTasks<br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*  */</span></span><br><span class=\"line\">  @action</span><br><span class=\"line\">  refreshTasks = <span class=\"function\">(<span class=\"params\">region</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> storageObject = <span class=\"keyword\">this</span>.fileStorage.get(region);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!storageObject) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.taskType.series.length &gt;= <span class=\"keyword\">this</span>.multiTaskCount) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; storageObject.length; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.taskType.series.length === <span class=\"keyword\">this</span>.multiTaskCount) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (</span><br><span class=\"line\">        storageObject[i].index !== storageObject[i].total</span><br><span class=\"line\">        &amp;&amp;</span><br><span class=\"line\">        (storageObject[i].state === <span class=\"string\">'pending'</span> || storageObject[i].state === <span class=\"string\">'uninitial'</span>)</span><br><span class=\"line\">        &amp;&amp;</span><br><span class=\"line\">        !<span class=\"keyword\">this</span>.taskType.series.includes(storageObject[i])</span><br><span class=\"line\">      ) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.taskType.series.push(storageObject[i]);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>upload &amp; update<br>Ajaxetagetagetag</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [upload ]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>file    [description]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>_params [...]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span>   </span>_params.bucket [bucket name]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span>   </span>_params.object [object name]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span>   </span>_params.uploadId [upload id]</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  @action</span><br><span class=\"line\">  upload = <span class=\"function\">(<span class=\"params\">storageObject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> params = &#123;</span><br><span class=\"line\">      bucket: storageObject.region,</span><br><span class=\"line\">      object: storageObject.name,</span><br><span class=\"line\">      prefix: storageObject.prefix,</span><br><span class=\"line\">      uploadId: storageObject.uploadId,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> single = <span class=\"literal\">false</span>; <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"comment\">/*  */</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.isValidUploadingTask(storageObject)) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (storageObject.state === <span class=\"string\">'pending'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.taskType.pending.splice(<span class=\"keyword\">this</span>.taskType.pending.indexOf(storageObject), <span class=\"number\">1</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.taskType.uploading.push(storageObject);</span><br><span class=\"line\">      storageObject.state = <span class=\"string\">'uploading'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> num = storageObject.index;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (num === <span class=\"number\">0</span> &amp;&amp; storageObject.size &lt;= storageObject.blockSize) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      single = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (num === storageObject.total) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> nextSize = <span class=\"built_in\">Math</span>.min((num + <span class=\"number\">1</span>) * storageObject.blockSize, storageObject.size);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fileData = storageObject.file.slice(num * storageObject.blockSize, nextSize);</span><br><span class=\"line\">    params = <span class=\"built_in\">Object</span>.assign(params, &#123;</span><br><span class=\"line\">      partNumber: num + <span class=\"number\">1</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    storageObject.activePoint = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.uploadRequest(&#123; params, <span class=\"attr\">data</span>: fileData, single &#125;).then(<span class=\"function\">(<span class=\"params\">rsp</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (rsp.code !== <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">        openNotification(<span class=\"string\">'error'</span>, <span class=\"literal\">null</span>, (rsp.result.data ? rsp.result.data.Code : <span class=\"keyword\">this</span>.lang.lang.uploadError));</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.markError(storageObject);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.startTasks(params.bucket);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> &#123; completed, etags &#125; = <span class=\"keyword\">this</span>.update(&#123;</span><br><span class=\"line\">        region: params.bucket,</span><br><span class=\"line\">        etag: rsp.result.etag,</span><br><span class=\"line\">        size: fileData.size,</span><br><span class=\"line\">        id: storageObject.id,</span><br><span class=\"line\">        index: params.partNumber,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (completed) &#123;</span><br><span class=\"line\">        (single ?</span><br><span class=\"line\">          () =&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.complete(storageObject, params.bucket);</span><br><span class=\"line\">          &#125; :</span><br><span class=\"line\">          (partEtags) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.completeRequest(&#123;</span><br><span class=\"line\">              bucket: params.bucket,</span><br><span class=\"line\">              uploadId: params.uploadId,</span><br><span class=\"line\">              object: params.object,</span><br><span class=\"line\">              prefix: params.prefix,</span><br><span class=\"line\">              partEtags,</span><br><span class=\"line\">            &#125;, storageObject);</span><br><span class=\"line\">          &#125;)(etags);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.upload(storageObject);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;).catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.markError(storageObject);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.startTasks(params.bucket);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;params.bucket&#125;</span>_<span class=\"subst\">$&#123;params.object&#125;</span> upload error: <span class=\"subst\">$&#123;error&#125;</span>`</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    storageObject.index += <span class=\"number\">1</span>;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>complete<br>etagetagetagetag</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [completeRequest ]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>_params [...]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span>   </span>_params.bucket [bucket name]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span>   </span>_params.object [object name]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span>   </span>_params.uploadId [upload id]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span>   </span>_params.partEtags [upload id]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>file []</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  @action completeRequest = <span class=\"function\">(<span class=\"params\">params, file</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    postDataPro(</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        ...&#123;</span><br><span class=\"line\">          ...params,</span><br><span class=\"line\">          ...&#123;</span><br><span class=\"line\">            object: params.prefix + params.object,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        partEtags: &#123;</span><br><span class=\"line\">          CompleteMultipartUpload: &#123;</span><br><span class=\"line\">            Part: params.partEtags.map(<span class=\"function\"><span class=\"params\">info</span> =&gt;</span> (&#123;</span><br><span class=\"line\">              PartNumber: info.number,</span><br><span class=\"line\">              ETag: info.etag,</span><br><span class=\"line\">            &#125;)),</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      objectResourceApi.object.completeFragmentUpload</span><br><span class=\"line\">    ).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.complete(file, params.bucket);</span><br><span class=\"line\">    &#125;).catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.startTasks(params.bucket);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.markError(file);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [complete ]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param <span class=\"type\">&#123;[Object]&#125;</span> </span>file []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param <span class=\"type\">&#123;[String]&#125;</span> </span>bucket []</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  @action</span><br><span class=\"line\">  complete = <span class=\"function\">(<span class=\"params\">storageObject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> index = <span class=\"keyword\">this</span>.taskType.uploading.indexOf(storageObject);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.taskType.uploading.splice(index, <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.taskType.break.push(storageObject);</span><br><span class=\"line\">    storageObject.completionTime = (<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().toTimeString()).split(<span class=\"string\">' '</span>)[<span class=\"number\">0</span>];</span><br><span class=\"line\">    storageObject.state = <span class=\"string\">'break'</span>;</span><br><span class=\"line\">    storageObject.speed = <span class=\"string\">''</span>;</span><br><span class=\"line\">    storageObject.index = storageObject.total;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.startTasks(storageObject.region);</span><br><span class=\"line\">  &#125;;</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li><p><br>uploadingpause</p></li><li><p><br>pausepending</p></li><li><p><br>errorpending</p></li><li><p><br>errorpending</p></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li><p>etag</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [update ]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param <span class=\"type\">&#123;[String]&#125;</span> </span>region []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param <span class=\"type\">&#123;[String]&#125;</span> </span>etag []</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  @action</span><br><span class=\"line\">  update = (&#123;</span><br><span class=\"line\">    region, etag, size, id, index,</span><br><span class=\"line\">  &#125;) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> target = <span class=\"keyword\">this</span>.fileStorage.get(region);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; target.length; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (target[i].id === id) &#123;</span><br><span class=\"line\">        target[i].speed = <span class=\"string\">`<span class=\"subst\">$&#123;(size <span class=\"regexp\">/ 1024 /</span> <span class=\"number\">1024</span> <span class=\"regexp\">/ (((new Date() - target[i].activePoint) /</span> <span class=\"number\">1000</span>))).toFixed(<span class=\"number\">2</span>)&#125;</span> MB/S`</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (target[i].speed === <span class=\"string\">'0.00 MB/S'</span>) &#123;</span><br><span class=\"line\">          target[i].speed = <span class=\"string\">`<span class=\"subst\">$&#123;formatSizeStr(size)&#125;</span>/S`</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        target[i].partEtags = target[i].partEtags.filter(<span class=\"function\"><span class=\"params\">etagItem</span> =&gt;</span> etagItem.number !== index);</span><br><span class=\"line\">        target[i].partEtags.push(&#123;</span><br><span class=\"line\">          number: index,</span><br><span class=\"line\">          etag,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (index === target[i].total) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (target[i].state === <span class=\"string\">'pause'</span>) &#123;</span><br><span class=\"line\">            index -= <span class=\"number\">1</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (target[i].total === <span class=\"number\">0</span> || target[i].partEtags.toJS().length === target[i].total) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">            completed: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            etags: target[i].partEtags,</span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">          completed: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>Node.jsak/sk s3 restful <br>aws s3-version4Node.jssignatureNode.jsnpm<a href=\"https://github.com/mhart/aws4\" target=\"_blank\" rel=\"noopener\">aws4</a><code>ak/sk</code>url<code>Request</code></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * templateStrTranform [s3urlbucketobject]</span></span><br><span class=\"line\"><span class=\"comment\">  * params1: &#123;bucket: testBucket, uid: testUid, bucketId: testID&#125;</span></span><br><span class=\"line\"><span class=\"comment\">  * params2: /admin/bucket?format=json&amp;bucket=&#123;bucket&#125;&amp;uid=&#123;uid&#125;&amp;bucket-id=&#123;bucketId&#125;</span></span><br><span class=\"line\"><span class=\"comment\">  * return: /admin/bucket?format=json&amp;bucket=testBucket&amp;uid=testUid&amp;bucket-id=testID</span></span><br><span class=\"line\"><span class=\"comment\">  * </span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@author <span class=\"variable\">nojsja</span></span></span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>varObj []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param <span class=\"type\">&#123;[String]&#125;</span> </span>templateStr []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@return <span class=\"type\">&#123;[String]&#125;</span> </span>result []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">exports.templateStrTransform = <span class=\"function\">(<span class=\"params\">varObj, templateStr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> varObj !== <span class=\"string\">'object'</span> || !templateStr) <span class=\"keyword\">return</span> templateStr;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> attr <span class=\"keyword\">in</span> varObj) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (varObj.hasOwnProperty(attr) &amp;&amp; (!<span class=\"built_in\">Number</span>(attr) &amp;&amp; <span class=\"built_in\">Number</span>(attr) !== <span class=\"number\">0</span> )) &#123;</span><br><span class=\"line\">      templateStr = templateStr.replace(<span class=\"keyword\">new</span> <span class=\"built_in\">RegExp</span>(<span class=\"string\">`&#123;<span class=\"subst\">$&#123;attr&#125;</span>&#125;`</span>, <span class=\"string\">'g'</span>), varObj[attr]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> templateStr;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * api</span></span><br><span class=\"line\"><span class=\"comment\">    listFragmentUpload: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">      url: '/&#123;bucket&#125;/&#123;object&#125;?uploadId=&#123;uploadId&#125;', // </span></span><br><span class=\"line\"><span class=\"comment\">      method: 'get',</span></span><br><span class=\"line\"><span class=\"comment\">      port: '7480',</span></span><br><span class=\"line\"><span class=\"comment\">      type: 'xml', // xml -&gt; json</span></span><br><span class=\"line\"><span class=\"comment\">      reqType: 'xml', // xml json -&gt; xml</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;</span></span><br><span class=\"line\"><span class=\"comment\">  *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">commonApiConfig = <span class=\"function\">(<span class=\"params\">headers, api, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isEnvDev &amp;&amp; !isEnvMock) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      url: <span class=\"string\">`http://10.0.9.149:<span class=\"subst\">$&#123;api.port&#125;</span><span class=\"subst\">$&#123;templateStrTransform(data, api.url)&#125;</span>`</span>,</span><br><span class=\"line\">      data: paramsObjectParse(data, api.url),</span><br><span class=\"line\">      host: <span class=\"string\">`http://10.0.9.149:<span class=\"subst\">$&#123;api.port&#125;</span>`</span>,</span><br><span class=\"line\">      hostname: <span class=\"string\">`http://10.0.9.149`</span>,</span><br><span class=\"line\">      ip: <span class=\"string\">'10.0.9.149'</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(isEnvDev &amp;&amp; isEnvMock) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      url: <span class=\"string\">`http://10.0.7.15/mock/63<span class=\"subst\">$&#123;templateStrTransform(data, api.url)&#125;</span>`</span>,</span><br><span class=\"line\">      data: paramsObjectParse(data, api.url),</span><br><span class=\"line\">      host: <span class=\"string\">`http://10.0.9.154:<span class=\"subst\">$&#123;api.port&#125;</span>`</span>,</span><br><span class=\"line\">      hostname: <span class=\"string\">`http://10.0.9.154`</span>,</span><br><span class=\"line\">      ip: <span class=\"string\">'10.0.9.154'</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      url: <span class=\"string\">`http://127.0.0.1:<span class=\"subst\">$&#123;api.port&#125;</span><span class=\"subst\">$&#123;templateStrTransform(data, api.url)&#125;</span>`</span>,</span><br><span class=\"line\">      data: paramsObjectParse(data, api.url),</span><br><span class=\"line\">      host: <span class=\"string\">`http://127.0.0.1:<span class=\"subst\">$&#123;api.port&#125;</span>`</span>,</span><br><span class=\"line\">      hostname: <span class=\"string\">`http://127.0.0.1`</span>,</span><br><span class=\"line\">      ip: <span class=\"string\">`127.0.0.1`</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * aws4RequestSign [asw4signurl]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>req [Express.jsreq]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>path [s3url]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>api [api]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Buffer|String]&#125;</span> </span>data [body]</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Tips: aws4.signnode process ak/sk env</span></span><br><span class=\"line\"><span class=\"comment\"> *  signoptionsak/sknpm</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">aws4RequestSign = <span class=\"function\">(<span class=\"params\">req, path, api, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> aws4 = <span class=\"built_in\">require</span>(<span class=\"string\">'aws4'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> opts = &#123;</span><br><span class=\"line\">    host: <span class=\"string\">`<span class=\"subst\">$&#123;(commonApiConfig(req.headers, api, data)).host&#125;</span>`</span>,</span><br><span class=\"line\">    path,</span><br><span class=\"line\">    url: (commonApiConfig(req.headers, api, data)).hostname,</span><br><span class=\"line\">    signQuery: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    service: process.env.AWS_SERVICE,</span><br><span class=\"line\">    region: process.env.AWS_REGION,</span><br><span class=\"line\">    method: api.method.toUpperCase(),</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      <span class=\"string\">'Access-Control-Allow-Origin'</span>: <span class=\"string\">'*'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    body: req.body,</span><br><span class=\"line\">    data: <span class=\"string\">''</span>,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// assumes AWS credentials are available in process.env</span></span><br><span class=\"line\">  aws4.sign(opts)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> opts;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * commonRequestAuth [url]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>req [Express.jsreq]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>path [s3url]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>api [api]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Buffer|String]&#125;</span> </span>data [body]</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> commonRequestAuth = <span class=\"function\">(<span class=\"params\">params, api, req, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> iAxios = axios.create();</span><br><span class=\"line\">  iAxios.defaults.timeout = params[<span class=\"string\">'$no_timeout$'</span>] ? <span class=\"number\">0</span> : <span class=\"number\">30e3</span>;</span><br><span class=\"line\">  <span class=\"comment\">// paramsurl  </span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> parsedUrl = templateStrTransform(params, api.url);</span><br><span class=\"line\">  <span class=\"comment\">// aws env set</span></span><br><span class=\"line\">  awsEnvRegistry(&#123;</span><br><span class=\"line\">    key: req.cookies.access_key,</span><br><span class=\"line\">    secret: req.cookies.secret_key,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> postData = jsonToXml(data, api.reqType);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> awsOpts = exports.aws4RequestSign(req, parsedUrl, api, params);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    iAxios.request(&#123;</span><br><span class=\"line\">      baseURL: awsOpts.host,</span><br><span class=\"line\">      url: awsOpts.path,</span><br><span class=\"line\">      method: awsOpts.method,</span><br><span class=\"line\">      headers: getContentType(awsOpts.headers, api.reqType, postData, params._headers),</span><br><span class=\"line\">      data: postData,</span><br><span class=\"line\">      responseType: api.resType,</span><br><span class=\"line\">    &#125;).then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// header</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (api.type === <span class=\"string\">'header'</span>) <span class=\"keyword\">return</span> resolve(&#123;</span><br><span class=\"line\">        result: response.headers,</span><br><span class=\"line\">        code: <span class=\"number\">200</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"comment\">// xml</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (api.type === <span class=\"string\">'xml'</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          xmlToJson(response.data, api.type, (data) =&gt; &#123;</span><br><span class=\"line\">            resolve(&#123;</span><br><span class=\"line\">              result: data,</span><br><span class=\"line\">              code: <span class=\"number\">200</span>,</span><br><span class=\"line\">              <span class=\"comment\">// data: jsonArrayToString(data),</span></span><br><span class=\"line\">              headers: response.headers,</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">500</span>,</span><br><span class=\"line\">            result: global.lang.xml_parse_error,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      resolve(&#123;</span><br><span class=\"line\">        result: response.data,</span><br><span class=\"line\">        code: <span class=\"number\">200</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;).catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(error.response.data);</span><br><span class=\"line\">      xmlToJson(error.response.data, <span class=\"string\">'xml'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">        resolve(&#123;</span><br><span class=\"line\">          code: <span class=\"number\">600</span>,</span><br><span class=\"line\">          result: &#123; <span class=\"attr\">headers</span>: error.config, <span class=\"attr\">data</span>: data.Error ? data.Error : error.response.data&#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>webak/sk s3 restful <br>webs3/requests3axios<a href=\"https://github.com/jamesmbourne/aws4-axios\" target=\"_blank\" rel=\"noopener\">aws4-axios</a></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">\"axios\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; aws4Interceptor &#125; <span class=\"keyword\">from</span> <span class=\"string\">\"aws4-axios\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> client = axios.create();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> interceptor = aws4Interceptor(&#123;</span><br><span class=\"line\">  region: <span class=\"string\">\"eu-west-2\"</span>,</span><br><span class=\"line\">  service: <span class=\"string\">\"execute-api\"</span></span><br><span class=\"line\">&#125;, &#123;</span><br><span class=\"line\">  accessKeyId: <span class=\"string\">''</span>,</span><br><span class=\"line\">  secretAccessKey: <span class=\"string\">''</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">client.interceptors.request.use(interceptor);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Requests made using Axios will now be signed</span></span><br><span class=\"line\">client.get(<span class=\"string\">\"https://example.com/foo\"</span>).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></li></ol>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol><li><p></p></li><li><p></p></li><li><p></p></li></ol><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><img src=\"upload.png\" alt=\"upload\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>Amazon S3  Web  Web  Amazon <br>aws-s3sdkRestfulJavascript</p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul><li>HTML5<code>input[type=file]</code>JSJSAjax</li><li>JSJS</li><li></li></ul><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><em>Github<a href=\"https://github.com/NoJsJa/javascript-learning/tree/master/file-slice-upload\" target=\"_blank\" rel=\"noopener\"></a></em></p><blockquote><p>React16/Webpack4/Mobx</p></blockquote><ul><li></li><li>////</li><li></li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"shards_upload.jpg\" alt=\"upload\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li><p>cacheFile<br>input</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [cacheFile ]</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> @action</span><br><span class=\"line\"> cacheFile = <span class=\"function\">(<span class=\"params\">files, bucket</span>) =&gt;</span> &#123;</span><br><span class=\"line\">   <span class=\"keyword\">const</span> symbolArr = <span class=\"keyword\">this</span>.filesCache.map(<span class=\"function\"><span class=\"params\">file</span> =&gt;</span> <span class=\"keyword\">this</span>.getSymbol(file));</span><br><span class=\"line\">   <span class=\"keyword\">const</span> filtedFiles = [];</span><br><span class=\"line\">   <span class=\"keyword\">let</span> uploadingFileFound = <span class=\"literal\">false</span>;</span><br><span class=\"line\">   files.forEach(<span class=\"function\">(<span class=\"params\">file</span>) =&gt;</span> &#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (!symbolArr.includes(<span class=\"keyword\">this</span>.getSymbol(file))) &#123;</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.findIsUploading(<span class=\"keyword\">this</span>.getSymbol(file), bucket)) &#123;</span><br><span class=\"line\">         uploadingFileFound = <span class=\"literal\">true</span>;</span><br><span class=\"line\">         filtedFiles.push(file.name);</span><br><span class=\"line\">       &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">         <span class=\"keyword\">this</span>.filesCache.push(file);</span><br><span class=\"line\">         symbolArr.push(<span class=\"keyword\">this</span>.getSymbol(file));</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!files.length) openNotification(<span class=\"string\">'warning'</span>, <span class=\"literal\">null</span>, <span class=\"keyword\">this</span>.lang.lang.noFilCanBeUploaded);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (uploadingFileFound) openNotification(<span class=\"string\">'warning'</span>, <span class=\"literal\">null</span>, <span class=\"keyword\">this</span>.lang.lang.uploadingFileReuploadTips + filtedFiles.join(<span class=\"string\">', '</span>));</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure></li><li><p>registry<br>Mobx observable()uninitial()/pending()/uploading()/pause()/error()/break()Mobx observableweakMapfileobservable</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [registry ]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param <span class=\"type\">&#123;[Object]&#125;</span> </span>file []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param <span class=\"type\">&#123;[String]&#125;</span> </span>uploadId [id]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param <span class=\"type\">&#123;[Object]&#125;</span> </span>state []</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  @action registry = <span class=\"function\">(<span class=\"params\">files, region, prefix</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> fileObj = <span class=\"literal\">null</span>;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.loading = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    files.forEach(<span class=\"function\">(<span class=\"params\">file</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.files.includes(file)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.files.push(file);</span><br><span class=\"line\">      fileObj = &#123;</span><br><span class=\"line\">        name: file.webkitRelativePath || file.name,</span><br><span class=\"line\">        prefix: prefix || <span class=\"string\">''</span>,</span><br><span class=\"line\">        size: file.size,</span><br><span class=\"line\">        type: file.type || mapMimeType((file.webkitRelativePath || file.name).split(<span class=\"string\">'.'</span>).pop()).type,</span><br><span class=\"line\">        state: <span class=\"string\">'uninitial'</span>,</span><br><span class=\"line\">        creationTime: <span class=\"string\">''</span>,</span><br><span class=\"line\">        completionTime: <span class=\"string\">''</span>,</span><br><span class=\"line\">        index: <span class=\"number\">0</span>,</span><br><span class=\"line\">        file,</span><br><span class=\"line\">        initialized: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        partEtags: [],</span><br><span class=\"line\">        region,</span><br><span class=\"line\">        blockSize: <span class=\"keyword\">this</span>.blockSize,</span><br><span class=\"line\">        total: <span class=\"built_in\">Math</span>.ceil(file.size / <span class=\"keyword\">this</span>.blockSize),</span><br><span class=\"line\">        activePoint: <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>(),</span><br><span class=\"line\">        speed: <span class=\"string\">'0 MB/S'</span>,</span><br><span class=\"line\">        id: <span class=\"built_in\">encodeURIComponent</span>(<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>() + file.name + file.type + file.size),</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> obj = observable(fileObj);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.taskType.uninitial.push(obj);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.taskType.series.push(obj);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.fileStorage.get(region)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.fileStorage.set(region, [obj]);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.fileStorage.get(region).push(obj);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">// this.fileStorageMap.set(file, obj);</span></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.loading = <span class=\"literal\">false</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li><li><p>startTasks<br>Mobx observable(=/)etag()4(uninitial/pending/uploading/pause/eror/break)(=/)</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [startTasks ]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>region []</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  startTasks = <span class=\"function\">(<span class=\"params\">region</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"comment\">// let storageObject;</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.refreshTasks(region);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.isUploadListEmpty(region)) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> maxLength = <span class=\"keyword\">this</span>.multiTaskCount - <span class=\"keyword\">this</span>.taskType.uploading.length;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> taskSeries = [];</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; (maxLength) &amp;&amp; <span class=\"keyword\">this</span>.taskType.series[i]; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// const file = this.taskType.series.shift();</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> storageObject = <span class=\"keyword\">this</span>.taskType.series[i];</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (storageObject.state === <span class=\"string\">'uploading'</span>) <span class=\"keyword\">continue</span>; <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (storageObject.state === <span class=\"string\">'pause'</span>) <span class=\"keyword\">continue</span>;</span><br><span class=\"line\">      taskSeries.push(storageObject);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">let</span> index;</span><br><span class=\"line\">    taskSeries.forEach(<span class=\"function\">(<span class=\"params\">storageObject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      index = <span class=\"keyword\">this</span>.taskType.series.indexOf(storageObject);</span><br><span class=\"line\">      index !== <span class=\"number\">-1</span> &amp;&amp; <span class=\"keyword\">this</span>.taskType.series.splice(index, <span class=\"number\">1</span>);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.taskType.uninitial.includes(storageObject)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.initRequest(storageObject).then(<span class=\"function\">(<span class=\"params\">&#123; err, init &#125;</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (!err &amp;&amp; init) &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.upload(storageObject);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.upload(storageObject);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>refreshTasks<br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*  */</span></span><br><span class=\"line\">  @action</span><br><span class=\"line\">  refreshTasks = <span class=\"function\">(<span class=\"params\">region</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> storageObject = <span class=\"keyword\">this</span>.fileStorage.get(region);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!storageObject) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.taskType.series.length &gt;= <span class=\"keyword\">this</span>.multiTaskCount) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; storageObject.length; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.taskType.series.length === <span class=\"keyword\">this</span>.multiTaskCount) <span class=\"keyword\">break</span>;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (</span><br><span class=\"line\">        storageObject[i].index !== storageObject[i].total</span><br><span class=\"line\">        &amp;&amp;</span><br><span class=\"line\">        (storageObject[i].state === <span class=\"string\">'pending'</span> || storageObject[i].state === <span class=\"string\">'uninitial'</span>)</span><br><span class=\"line\">        &amp;&amp;</span><br><span class=\"line\">        !<span class=\"keyword\">this</span>.taskType.series.includes(storageObject[i])</span><br><span class=\"line\">      ) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.taskType.series.push(storageObject[i]);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>upload &amp; update<br>Ajaxetagetagetag</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [upload ]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>file    [description]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>_params [...]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span>   </span>_params.bucket [bucket name]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span>   </span>_params.object [object name]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span>   </span>_params.uploadId [upload id]</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  @action</span><br><span class=\"line\">  upload = <span class=\"function\">(<span class=\"params\">storageObject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> params = &#123;</span><br><span class=\"line\">      bucket: storageObject.region,</span><br><span class=\"line\">      object: storageObject.name,</span><br><span class=\"line\">      prefix: storageObject.prefix,</span><br><span class=\"line\">      uploadId: storageObject.uploadId,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> single = <span class=\"literal\">false</span>; <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"comment\">/*  */</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!<span class=\"keyword\">this</span>.isValidUploadingTask(storageObject)) <span class=\"keyword\">return</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (storageObject.state === <span class=\"string\">'pending'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.taskType.pending.splice(<span class=\"keyword\">this</span>.taskType.pending.indexOf(storageObject), <span class=\"number\">1</span>);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.taskType.uploading.push(storageObject);</span><br><span class=\"line\">      storageObject.state = <span class=\"string\">'uploading'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">const</span> num = storageObject.index;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (num === <span class=\"number\">0</span> &amp;&amp; storageObject.size &lt;= storageObject.blockSize) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      single = <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (num === storageObject.total) &#123;</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> nextSize = <span class=\"built_in\">Math</span>.min((num + <span class=\"number\">1</span>) * storageObject.blockSize, storageObject.size);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> fileData = storageObject.file.slice(num * storageObject.blockSize, nextSize);</span><br><span class=\"line\">    params = <span class=\"built_in\">Object</span>.assign(params, &#123;</span><br><span class=\"line\">      partNumber: num + <span class=\"number\">1</span>,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    storageObject.activePoint = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>();</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.uploadRequest(&#123; params, <span class=\"attr\">data</span>: fileData, single &#125;).then(<span class=\"function\">(<span class=\"params\">rsp</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (rsp.code !== <span class=\"number\">200</span>) &#123;</span><br><span class=\"line\">        openNotification(<span class=\"string\">'error'</span>, <span class=\"literal\">null</span>, (rsp.result.data ? rsp.result.data.Code : <span class=\"keyword\">this</span>.lang.lang.uploadError));</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.markError(storageObject);</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.startTasks(params.bucket);</span><br><span class=\"line\">        <span class=\"keyword\">return</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> &#123; completed, etags &#125; = <span class=\"keyword\">this</span>.update(&#123;</span><br><span class=\"line\">        region: params.bucket,</span><br><span class=\"line\">        etag: rsp.result.etag,</span><br><span class=\"line\">        size: fileData.size,</span><br><span class=\"line\">        id: storageObject.id,</span><br><span class=\"line\">        index: params.partNumber,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (completed) &#123;</span><br><span class=\"line\">        (single ?</span><br><span class=\"line\">          () =&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.complete(storageObject, params.bucket);</span><br><span class=\"line\">          &#125; :</span><br><span class=\"line\">          (partEtags) =&gt; &#123;</span><br><span class=\"line\">            <span class=\"keyword\">this</span>.completeRequest(&#123;</span><br><span class=\"line\">              bucket: params.bucket,</span><br><span class=\"line\">              uploadId: params.uploadId,</span><br><span class=\"line\">              object: params.object,</span><br><span class=\"line\">              prefix: params.prefix,</span><br><span class=\"line\">              partEtags,</span><br><span class=\"line\">            &#125;, storageObject);</span><br><span class=\"line\">          &#125;)(etags);</span><br><span class=\"line\">      &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.upload(storageObject);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;).catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.markError(storageObject);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.startTasks(params.bucket);</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(<span class=\"string\">`<span class=\"subst\">$&#123;params.bucket&#125;</span>_<span class=\"subst\">$&#123;params.object&#125;</span> upload error: <span class=\"subst\">$&#123;error&#125;</span>`</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    storageObject.index += <span class=\"number\">1</span>;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>complete<br>etagetagetagetag</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [completeRequest ]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>_params [...]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span>   </span>_params.bucket [bucket name]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span>   </span>_params.object [object name]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span>   </span>_params.uploadId [upload id]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span>   </span>_params.partEtags [upload id]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>file []</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  @action completeRequest = <span class=\"function\">(<span class=\"params\">params, file</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    postDataPro(</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        ...&#123;</span><br><span class=\"line\">          ...params,</span><br><span class=\"line\">          ...&#123;</span><br><span class=\"line\">            object: params.prefix + params.object,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">        partEtags: &#123;</span><br><span class=\"line\">          CompleteMultipartUpload: &#123;</span><br><span class=\"line\">            Part: params.partEtags.map(<span class=\"function\"><span class=\"params\">info</span> =&gt;</span> (&#123;</span><br><span class=\"line\">              PartNumber: info.number,</span><br><span class=\"line\">              ETag: info.etag,</span><br><span class=\"line\">            &#125;)),</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      objectResourceApi.object.completeFragmentUpload</span><br><span class=\"line\">    ).then(<span class=\"function\">(<span class=\"params\">data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.complete(file, params.bucket);</span><br><span class=\"line\">    &#125;).catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.startTasks(params.bucket);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.markError(file);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [complete ]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param <span class=\"type\">&#123;[Object]&#125;</span> </span>file []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param <span class=\"type\">&#123;[String]&#125;</span> </span>bucket []</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  @action</span><br><span class=\"line\">  complete = <span class=\"function\">(<span class=\"params\">storageObject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> index = <span class=\"keyword\">this</span>.taskType.uploading.indexOf(storageObject);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.taskType.uploading.splice(index, <span class=\"number\">1</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.taskType.break.push(storageObject);</span><br><span class=\"line\">    storageObject.completionTime = (<span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().toTimeString()).split(<span class=\"string\">' '</span>)[<span class=\"number\">0</span>];</span><br><span class=\"line\">    storageObject.state = <span class=\"string\">'break'</span>;</span><br><span class=\"line\">    storageObject.speed = <span class=\"string\">''</span>;</span><br><span class=\"line\">    storageObject.index = storageObject.total;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.startTasks(storageObject.region);</span><br><span class=\"line\">  &#125;;</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li><p><br>uploadingpause</p></li><li><p><br>pausepending</p></li><li><p><br>errorpending</p></li><li><p><br>errorpending</p></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li><p>etag</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [update ]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param <span class=\"type\">&#123;[String]&#125;</span> </span>region []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param <span class=\"type\">&#123;[String]&#125;</span> </span>etag []</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  @action</span><br><span class=\"line\">  update = (&#123;</span><br><span class=\"line\">    region, etag, size, id, index,</span><br><span class=\"line\">  &#125;) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> target = <span class=\"keyword\">this</span>.fileStorage.get(region);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; target.length; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (target[i].id === id) &#123;</span><br><span class=\"line\">        target[i].speed = <span class=\"string\">`<span class=\"subst\">$&#123;(size <span class=\"regexp\">/ 1024 /</span> <span class=\"number\">1024</span> <span class=\"regexp\">/ (((new Date() - target[i].activePoint) /</span> <span class=\"number\">1000</span>))).toFixed(<span class=\"number\">2</span>)&#125;</span> MB/S`</span>;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (target[i].speed === <span class=\"string\">'0.00 MB/S'</span>) &#123;</span><br><span class=\"line\">          target[i].speed = <span class=\"string\">`<span class=\"subst\">$&#123;formatSizeStr(size)&#125;</span>/S`</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        target[i].partEtags = target[i].partEtags.filter(<span class=\"function\"><span class=\"params\">etagItem</span> =&gt;</span> etagItem.number !== index);</span><br><span class=\"line\">        target[i].partEtags.push(&#123;</span><br><span class=\"line\">          number: index,</span><br><span class=\"line\">          etag,</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (index === target[i].total) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (target[i].state === <span class=\"string\">'pause'</span>) &#123;</span><br><span class=\"line\">            index -= <span class=\"number\">1</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (target[i].total === <span class=\"number\">0</span> || target[i].partEtags.toJS().length === target[i].total) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">            completed: <span class=\"literal\">true</span>,</span><br><span class=\"line\">            etags: target[i].partEtags,</span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">          completed: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><p>Node.jsak/sk s3 restful <br>aws s3-version4Node.jssignatureNode.jsnpm<a href=\"https://github.com/mhart/aws4\" target=\"_blank\" rel=\"noopener\">aws4</a><code>ak/sk</code>url<code>Request</code></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * templateStrTranform [s3urlbucketobject]</span></span><br><span class=\"line\"><span class=\"comment\">  * params1: &#123;bucket: testBucket, uid: testUid, bucketId: testID&#125;</span></span><br><span class=\"line\"><span class=\"comment\">  * params2: /admin/bucket?format=json&amp;bucket=&#123;bucket&#125;&amp;uid=&#123;uid&#125;&amp;bucket-id=&#123;bucketId&#125;</span></span><br><span class=\"line\"><span class=\"comment\">  * return: /admin/bucket?format=json&amp;bucket=testBucket&amp;uid=testUid&amp;bucket-id=testID</span></span><br><span class=\"line\"><span class=\"comment\">  * </span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@author <span class=\"variable\">nojsja</span></span></span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>varObj []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param <span class=\"type\">&#123;[String]&#125;</span> </span>templateStr []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@return <span class=\"type\">&#123;[String]&#125;</span> </span>result []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">exports.templateStrTransform = <span class=\"function\">(<span class=\"params\">varObj, templateStr</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> varObj !== <span class=\"string\">'object'</span> || !templateStr) <span class=\"keyword\">return</span> templateStr;</span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">const</span> attr <span class=\"keyword\">in</span> varObj) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (varObj.hasOwnProperty(attr) &amp;&amp; (!<span class=\"built_in\">Number</span>(attr) &amp;&amp; <span class=\"built_in\">Number</span>(attr) !== <span class=\"number\">0</span> )) &#123;</span><br><span class=\"line\">      templateStr = templateStr.replace(<span class=\"keyword\">new</span> <span class=\"built_in\">RegExp</span>(<span class=\"string\">`&#123;<span class=\"subst\">$&#123;attr&#125;</span>&#125;`</span>, <span class=\"string\">'g'</span>), varObj[attr]);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> templateStr;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * api</span></span><br><span class=\"line\"><span class=\"comment\">    listFragmentUpload: &#123;</span></span><br><span class=\"line\"><span class=\"comment\">      url: '/&#123;bucket&#125;/&#123;object&#125;?uploadId=&#123;uploadId&#125;', // </span></span><br><span class=\"line\"><span class=\"comment\">      method: 'get',</span></span><br><span class=\"line\"><span class=\"comment\">      port: '7480',</span></span><br><span class=\"line\"><span class=\"comment\">      type: 'xml', // xml -&gt; json</span></span><br><span class=\"line\"><span class=\"comment\">      reqType: 'xml', // xml json -&gt; xml</span></span><br><span class=\"line\"><span class=\"comment\">    &#125;</span></span><br><span class=\"line\"><span class=\"comment\">  *</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">commonApiConfig = <span class=\"function\">(<span class=\"params\">headers, api, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (isEnvDev &amp;&amp; !isEnvMock) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      url: <span class=\"string\">`http://10.0.9.149:<span class=\"subst\">$&#123;api.port&#125;</span><span class=\"subst\">$&#123;templateStrTransform(data, api.url)&#125;</span>`</span>,</span><br><span class=\"line\">      data: paramsObjectParse(data, api.url),</span><br><span class=\"line\">      host: <span class=\"string\">`http://10.0.9.149:<span class=\"subst\">$&#123;api.port&#125;</span>`</span>,</span><br><span class=\"line\">      hostname: <span class=\"string\">`http://10.0.9.149`</span>,</span><br><span class=\"line\">      ip: <span class=\"string\">'10.0.9.149'</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> <span class=\"keyword\">if</span>(isEnvDev &amp;&amp; isEnvMock) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      url: <span class=\"string\">`http://10.0.7.15/mock/63<span class=\"subst\">$&#123;templateStrTransform(data, api.url)&#125;</span>`</span>,</span><br><span class=\"line\">      data: paramsObjectParse(data, api.url),</span><br><span class=\"line\">      host: <span class=\"string\">`http://10.0.9.154:<span class=\"subst\">$&#123;api.port&#125;</span>`</span>,</span><br><span class=\"line\">      hostname: <span class=\"string\">`http://10.0.9.154`</span>,</span><br><span class=\"line\">      ip: <span class=\"string\">'10.0.9.154'</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      url: <span class=\"string\">`http://127.0.0.1:<span class=\"subst\">$&#123;api.port&#125;</span><span class=\"subst\">$&#123;templateStrTransform(data, api.url)&#125;</span>`</span>,</span><br><span class=\"line\">      data: paramsObjectParse(data, api.url),</span><br><span class=\"line\">      host: <span class=\"string\">`http://127.0.0.1:<span class=\"subst\">$&#123;api.port&#125;</span>`</span>,</span><br><span class=\"line\">      hostname: <span class=\"string\">`http://127.0.0.1`</span>,</span><br><span class=\"line\">      ip: <span class=\"string\">`127.0.0.1`</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * aws4RequestSign [asw4signurl]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>req [Express.jsreq]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>path [s3url]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>api [api]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Buffer|String]&#125;</span> </span>data [body]</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * Tips: aws4.signnode process ak/sk env</span></span><br><span class=\"line\"><span class=\"comment\"> *  signoptionsak/sknpm</span></span><br><span class=\"line\"><span class=\"comment\">*/</span></span><br><span class=\"line\">aws4RequestSign = <span class=\"function\">(<span class=\"params\">req, path, api, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> aws4 = <span class=\"built_in\">require</span>(<span class=\"string\">'aws4'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">var</span> opts = &#123;</span><br><span class=\"line\">    host: <span class=\"string\">`<span class=\"subst\">$&#123;(commonApiConfig(req.headers, api, data)).host&#125;</span>`</span>,</span><br><span class=\"line\">    path,</span><br><span class=\"line\">    url: (commonApiConfig(req.headers, api, data)).hostname,</span><br><span class=\"line\">    signQuery: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    service: process.env.AWS_SERVICE,</span><br><span class=\"line\">    region: process.env.AWS_REGION,</span><br><span class=\"line\">    method: api.method.toUpperCase(),</span><br><span class=\"line\">    headers: &#123;</span><br><span class=\"line\">      <span class=\"string\">'Access-Control-Allow-Origin'</span>: <span class=\"string\">'*'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    body: req.body,</span><br><span class=\"line\">    data: <span class=\"string\">''</span>,</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  <span class=\"comment\">// assumes AWS credentials are available in process.env</span></span><br><span class=\"line\">  aws4.sign(opts)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> opts;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * commonRequestAuth [url]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>req [Express.jsreq]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>path [s3url]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>api [api]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Buffer|String]&#125;</span> </span>data [body]</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"keyword\">const</span> commonRequestAuth = <span class=\"function\">(<span class=\"params\">params, api, req, data</span>) =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> iAxios = axios.create();</span><br><span class=\"line\">  iAxios.defaults.timeout = params[<span class=\"string\">'$no_timeout$'</span>] ? <span class=\"number\">0</span> : <span class=\"number\">30e3</span>;</span><br><span class=\"line\">  <span class=\"comment\">// paramsurl  </span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> parsedUrl = templateStrTransform(params, api.url);</span><br><span class=\"line\">  <span class=\"comment\">// aws env set</span></span><br><span class=\"line\">  awsEnvRegistry(&#123;</span><br><span class=\"line\">    key: req.cookies.access_key,</span><br><span class=\"line\">    secret: req.cookies.secret_key,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> postData = jsonToXml(data, api.reqType);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> awsOpts = exports.aws4RequestSign(req, parsedUrl, api, params);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\">(<span class=\"params\">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    iAxios.request(&#123;</span><br><span class=\"line\">      baseURL: awsOpts.host,</span><br><span class=\"line\">      url: awsOpts.path,</span><br><span class=\"line\">      method: awsOpts.method,</span><br><span class=\"line\">      headers: getContentType(awsOpts.headers, api.reqType, postData, params._headers),</span><br><span class=\"line\">      data: postData,</span><br><span class=\"line\">      responseType: api.resType,</span><br><span class=\"line\">    &#125;).then(<span class=\"function\">(<span class=\"params\">response</span>) =&gt;</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// header</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (api.type === <span class=\"string\">'header'</span>) <span class=\"keyword\">return</span> resolve(&#123;</span><br><span class=\"line\">        result: response.headers,</span><br><span class=\"line\">        code: <span class=\"number\">200</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">      </span><br><span class=\"line\">      <span class=\"comment\">// xml</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (api.type === <span class=\"string\">'xml'</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          xmlToJson(response.data, api.type, (data) =&gt; &#123;</span><br><span class=\"line\">            resolve(&#123;</span><br><span class=\"line\">              result: data,</span><br><span class=\"line\">              code: <span class=\"number\">200</span>,</span><br><span class=\"line\">              <span class=\"comment\">// data: jsonArrayToString(data),</span></span><br><span class=\"line\">              headers: response.headers,</span><br><span class=\"line\">            &#125;);</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (error) &#123;</span><br><span class=\"line\">          resolve(&#123;</span><br><span class=\"line\">            code: <span class=\"number\">500</span>,</span><br><span class=\"line\">            result: global.lang.xml_parse_error,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      resolve(&#123;</span><br><span class=\"line\">        result: response.data,</span><br><span class=\"line\">        code: <span class=\"number\">200</span>,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;).catch(<span class=\"function\">(<span class=\"params\">error</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">console</span>.log(error.response.data);</span><br><span class=\"line\">      xmlToJson(error.response.data, <span class=\"string\">'xml'</span>, (data) =&gt; &#123;</span><br><span class=\"line\">        resolve(&#123;</span><br><span class=\"line\">          code: <span class=\"number\">600</span>,</span><br><span class=\"line\">          result: &#123; <span class=\"attr\">headers</span>: error.config, <span class=\"attr\">data</span>: data.Error ? data.Error : error.response.data&#125;</span><br><span class=\"line\">        &#125;)</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>webak/sk s3 restful <br>webs3/requests3axios<a href=\"https://github.com/jamesmbourne/aws4-axios\" target=\"_blank\" rel=\"noopener\">aws4-axios</a></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> axios <span class=\"keyword\">from</span> <span class=\"string\">\"axios\"</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> &#123; aws4Interceptor &#125; <span class=\"keyword\">from</span> <span class=\"string\">\"aws4-axios\"</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> client = axios.create();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> interceptor = aws4Interceptor(&#123;</span><br><span class=\"line\">  region: <span class=\"string\">\"eu-west-2\"</span>,</span><br><span class=\"line\">  service: <span class=\"string\">\"execute-api\"</span></span><br><span class=\"line\">&#125;, &#123;</span><br><span class=\"line\">  accessKeyId: <span class=\"string\">''</span>,</span><br><span class=\"line\">  secretAccessKey: <span class=\"string\">''</span></span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">client.interceptors.request.use(interceptor);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// Requests made using Axios will now be signed</span></span><br><span class=\"line\">client.get(<span class=\"string\">\"https://example.com/foo\"</span>).then(<span class=\"function\"><span class=\"params\">res</span> =&gt;</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">// ...</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure></li></ol>"},{"title":"Javascript","catalog":true,"toc_nav_num":true,"date":"2018-11-04T17:10:00.000Z","subtitle":"animation javascript","header-img":"article_header.png","updateDate":"2018-11-04T17:10:00.000Z","_content":"\n#### \n\n1. \n\n2. \n\n3. \n\n#### \n----------------\n> Gif ~  \n\n[=> ](https://github.com/NoJsJa/javascript-learning/tree/master/js-animation)\n\n![animation.gif](animation.gif)\n\n#### \n-------------------\n\n##### \n> \n```js\n/**\n * [tween ]\n * @param {[Number]}  t []\n * @param {[String]}  b []\n * @param {[String]}  c []\n * @param {[Number]}  d []\n */\nvar tween = {\n  linear: function( time, start, distance, duration ) { return distance*time/duration + start; },\n  easeIn: function( time, start, distance, duration ) { return distance * ( time /= duration ) * time + start; },\n  strongEaseIn: function(time, start, distance, duration) { return distance * ( time /= duration ) * time * time * time * time + start; },\n  strongEaseOut: function(time, start, distance, duration) { return distance * ( ( time = time / duration - 1) * time * time * time * time + 1 ) + start; },\n  sinEaseIn: function( time, start, distance, duration ) { return distance * ( time /= duration) * time * time + start; },\n  sinEaseOut: function(time,start,distance,duration){ return distance * ( ( time = time / duration - 1) * time * time + 1 ) + start; },\n};\n```\n\n##### \n> requestAnimationFramesetTimeoutAPIDOMCanvasSVGWebGLAPI\n```js\n// \nwindow.requestAnimationFrame = (function(){\n  return  window.requestAnimationFrame       ||\n          window.webkitRequestAnimationFrame ||\n          window.mozRequestAnimationFrame    ||\n          window.oRequestAnimationFrame      ||\n          window.msRequestAnimationFrame     ||\n          function( callback ){\n            return window.setTimeout(callback, 1000 / 60);\n          };\n})();\n```\n\n##### Animation\n> ES5ES6  \n\n* dom\n\n```js\n/* -------------------  ------------------- */\nvar Animation = function () {\n  this.store = { // status store\n  };\n};\n\n/* -------------------  ------------------- */\nAnimation.prototype.setTarget = function (selector) {\n  var element = document.querySelector(selector);\n  if (element) {\n    this.store[selector] = {\n      selector: selector,\n      element: document.querySelector(selector),\n      status: 'pending',\n      queue: [\n      ],\n      timeStart: '',\n      positionStart: {\n        x: '',\n        y: '',\n      },\n      positionEnd: {\n        x: '',\n        y: '',\n      },\n    };\n  }\n};\n```\n* `update`\n\n> ``(`Animation.store`)  \n\n```js\n/**\n * [start ]\n * @param  {[String]} selector []\n * @param  {[type]} func     []\n */\nAnimation.prototype.start = function (selector, func) {\n  var that = this;\n  var target = this.store[selector];\n  target.status = 'running';\n\n  // \n  that.update({x: 0, y: 0}, selector);\n};\n\n/**\n * [update ]\n * @param  {[type]} selector [description]\n */\nAnimation.prototype.update =  function (position, selector) {\n  var target = this.store[selector],\n    that = this,\n    timeUsed,\n    positionX, positionY;\n  //\n  if (!target || !target.queue.length) {\n    target.status = 'pending';\n    return;\n  };\n\n  // reset position\n  target.element.style.left = position.x + 'px';\n  target.element.style.top = position.y + 'px';\n\n  // position\n  target.positionStart = {\n    x: position.x,\n    y: position.y,\n  };\n  target.positionEnd = {\n    x: position.x + target.queue[0].x,\n    y: position.y + target.queue[0].y,\n  };\n  // time\n  target.timeStart = new Date().getTime();\n\n  // \n  var callback = function () {\n    timeUsed = new Date().getTime() - target.timeStart;\n    // \n    if (timeUsed >= target.queue[0].duration) {\n      target.queue.shift();\n      // \n      that.step(target.element, target.positionEnd.x, target.positionEnd.y);\n      target.status = 'running';\n      // var position = target.element.getBoundingClientRect();\n      var position = {\n        x: parseInt(target.element.style.left),\n        y: parseInt(target.element.style.top),\n      };\n      // \n      that.update(position, selector);\n      return;\n    }\n    // \n    positionX = target.queue[0].func(\n      timeUsed,\n      target.positionStart.x,\n      target.positionEnd.x - target.positionStart.x,\n      target.queue[0].duration,\n    );\n    positionY = target.queue[0].func(\n      timeUsed,\n      target.positionStart.y,\n      target.positionEnd.y - target.positionStart.y,\n      target.queue[0].duration,\n    );\n    that.step(target.element, positionX, positionY);\n\n    // \n    requestAnimationFrame(callback);\n  };\n\n  requestAnimationFrame(callback);\n};\n```\n\n* ()\n\n```js\n/**\n * [step dom]\n * @param  {[DOM]} element [dom ]\n * @param  {[Number]} x        [x]\n * @param  {[Number]} y        [y]\n */\nAnimation.prototype.step = function (element, x, y) {\n  element.style.left = x + 'px';\n  element.style.top = y + 'px';\n};\n\n/* -------------------  ------------------- */\nAnimation.prototype.pause = function (selector) {\n  // \n};\n\n/* -------------------  ------------------- */\nAnimation.prototype.stop = function (selector) {\n    // \n};\n\n/**\n * [push ]\n * @param  {[String]} selector [dom]\n * @param  {[Object]} conf     []\n */\nAnimation.prototype.push = function (selector, conf) {\n  if (this.store[selector]) {\n    this.store[selector].queue.push({\n      x: conf.x,\n      y: conf.y,\n      duration: conf.duration || 1000,\n      func: tween[conf.func] || tween['linear'],\n    });\n  }\n};\n\n/* -------------------  ------------------- */\nAnimation.prototype.pop = function (selector) {\n  if (this.store[selector]) {\n    this.store[selector].queue.pop();\n  }\n};\n\n/* -------------------  ------------------- */\nAnimation.prototype.clear = function (selector) {\n  if (this.store[selector]) {\n    this.store[selector].queue.length = 1;\n  }\n};\n```\n##### Animation\n1. \n2. ()\n3. \n\n```js\nvar anime = new Animation();\nanime.setTarget('#animationTarget');\n// 50px\nanime.push('#animationTarget', { x: 50, y: 50, duration: 1000, func: 'easeIn' });\n// 50px\nanime.push('#animationTarget', { x: -50, y: -50, duration: 500, func: 'linear' });\n// 50px\nanime.push('#animationTarget', { x: 50, y: 0, duration: 1000, func: 'easeIn' });\n// 50px\nanime.push('#animationTarget', { x: 0, y: 50, duration: 500, func: 'linear' });\n// \nanime.start('#animationTarget');\n```\n\n#### \n-------------\nJavaScriptCSSCSS3CanvasJSERJs\n\n##### \n","source":"_posts/2018-11-05-Javascript.md","raw":"---\ntitle: \"Javascript\"\ncatalog: true\ntoc_nav_num: true\ndate: 2018-11-05 01:10:00\nsubtitle: \"animation javascript\"\nheader-img: \"article_header.png\"\ntags:\n- animation\ncategories:\n- Javascript\nupdateDate: 2018-11-05 01:10:00\n---\n\n#### \n\n1. \n\n2. \n\n3. \n\n#### \n----------------\n> Gif ~  \n\n[=> ](https://github.com/NoJsJa/javascript-learning/tree/master/js-animation)\n\n![animation.gif](animation.gif)\n\n#### \n-------------------\n\n##### \n> \n```js\n/**\n * [tween ]\n * @param {[Number]}  t []\n * @param {[String]}  b []\n * @param {[String]}  c []\n * @param {[Number]}  d []\n */\nvar tween = {\n  linear: function( time, start, distance, duration ) { return distance*time/duration + start; },\n  easeIn: function( time, start, distance, duration ) { return distance * ( time /= duration ) * time + start; },\n  strongEaseIn: function(time, start, distance, duration) { return distance * ( time /= duration ) * time * time * time * time + start; },\n  strongEaseOut: function(time, start, distance, duration) { return distance * ( ( time = time / duration - 1) * time * time * time * time + 1 ) + start; },\n  sinEaseIn: function( time, start, distance, duration ) { return distance * ( time /= duration) * time * time + start; },\n  sinEaseOut: function(time,start,distance,duration){ return distance * ( ( time = time / duration - 1) * time * time + 1 ) + start; },\n};\n```\n\n##### \n> requestAnimationFramesetTimeoutAPIDOMCanvasSVGWebGLAPI\n```js\n// \nwindow.requestAnimationFrame = (function(){\n  return  window.requestAnimationFrame       ||\n          window.webkitRequestAnimationFrame ||\n          window.mozRequestAnimationFrame    ||\n          window.oRequestAnimationFrame      ||\n          window.msRequestAnimationFrame     ||\n          function( callback ){\n            return window.setTimeout(callback, 1000 / 60);\n          };\n})();\n```\n\n##### Animation\n> ES5ES6  \n\n* dom\n\n```js\n/* -------------------  ------------------- */\nvar Animation = function () {\n  this.store = { // status store\n  };\n};\n\n/* -------------------  ------------------- */\nAnimation.prototype.setTarget = function (selector) {\n  var element = document.querySelector(selector);\n  if (element) {\n    this.store[selector] = {\n      selector: selector,\n      element: document.querySelector(selector),\n      status: 'pending',\n      queue: [\n      ],\n      timeStart: '',\n      positionStart: {\n        x: '',\n        y: '',\n      },\n      positionEnd: {\n        x: '',\n        y: '',\n      },\n    };\n  }\n};\n```\n* `update`\n\n> ``(`Animation.store`)  \n\n```js\n/**\n * [start ]\n * @param  {[String]} selector []\n * @param  {[type]} func     []\n */\nAnimation.prototype.start = function (selector, func) {\n  var that = this;\n  var target = this.store[selector];\n  target.status = 'running';\n\n  // \n  that.update({x: 0, y: 0}, selector);\n};\n\n/**\n * [update ]\n * @param  {[type]} selector [description]\n */\nAnimation.prototype.update =  function (position, selector) {\n  var target = this.store[selector],\n    that = this,\n    timeUsed,\n    positionX, positionY;\n  //\n  if (!target || !target.queue.length) {\n    target.status = 'pending';\n    return;\n  };\n\n  // reset position\n  target.element.style.left = position.x + 'px';\n  target.element.style.top = position.y + 'px';\n\n  // position\n  target.positionStart = {\n    x: position.x,\n    y: position.y,\n  };\n  target.positionEnd = {\n    x: position.x + target.queue[0].x,\n    y: position.y + target.queue[0].y,\n  };\n  // time\n  target.timeStart = new Date().getTime();\n\n  // \n  var callback = function () {\n    timeUsed = new Date().getTime() - target.timeStart;\n    // \n    if (timeUsed >= target.queue[0].duration) {\n      target.queue.shift();\n      // \n      that.step(target.element, target.positionEnd.x, target.positionEnd.y);\n      target.status = 'running';\n      // var position = target.element.getBoundingClientRect();\n      var position = {\n        x: parseInt(target.element.style.left),\n        y: parseInt(target.element.style.top),\n      };\n      // \n      that.update(position, selector);\n      return;\n    }\n    // \n    positionX = target.queue[0].func(\n      timeUsed,\n      target.positionStart.x,\n      target.positionEnd.x - target.positionStart.x,\n      target.queue[0].duration,\n    );\n    positionY = target.queue[0].func(\n      timeUsed,\n      target.positionStart.y,\n      target.positionEnd.y - target.positionStart.y,\n      target.queue[0].duration,\n    );\n    that.step(target.element, positionX, positionY);\n\n    // \n    requestAnimationFrame(callback);\n  };\n\n  requestAnimationFrame(callback);\n};\n```\n\n* ()\n\n```js\n/**\n * [step dom]\n * @param  {[DOM]} element [dom ]\n * @param  {[Number]} x        [x]\n * @param  {[Number]} y        [y]\n */\nAnimation.prototype.step = function (element, x, y) {\n  element.style.left = x + 'px';\n  element.style.top = y + 'px';\n};\n\n/* -------------------  ------------------- */\nAnimation.prototype.pause = function (selector) {\n  // \n};\n\n/* -------------------  ------------------- */\nAnimation.prototype.stop = function (selector) {\n    // \n};\n\n/**\n * [push ]\n * @param  {[String]} selector [dom]\n * @param  {[Object]} conf     []\n */\nAnimation.prototype.push = function (selector, conf) {\n  if (this.store[selector]) {\n    this.store[selector].queue.push({\n      x: conf.x,\n      y: conf.y,\n      duration: conf.duration || 1000,\n      func: tween[conf.func] || tween['linear'],\n    });\n  }\n};\n\n/* -------------------  ------------------- */\nAnimation.prototype.pop = function (selector) {\n  if (this.store[selector]) {\n    this.store[selector].queue.pop();\n  }\n};\n\n/* -------------------  ------------------- */\nAnimation.prototype.clear = function (selector) {\n  if (this.store[selector]) {\n    this.store[selector].queue.length = 1;\n  }\n};\n```\n##### Animation\n1. \n2. ()\n3. \n\n```js\nvar anime = new Animation();\nanime.setTarget('#animationTarget');\n// 50px\nanime.push('#animationTarget', { x: 50, y: 50, duration: 1000, func: 'easeIn' });\n// 50px\nanime.push('#animationTarget', { x: -50, y: -50, duration: 500, func: 'linear' });\n// 50px\nanime.push('#animationTarget', { x: 50, y: 0, duration: 1000, func: 'easeIn' });\n// 50px\nanime.push('#animationTarget', { x: 0, y: 50, duration: 500, func: 'linear' });\n// \nanime.start('#animationTarget');\n```\n\n#### \n-------------\nJavaScriptCSSCSS3CanvasJSERJs\n\n##### \n","slug":"Javascript","published":1,"updated":"2018-11-05T02:32:11.868Z","_id":"cjo3ovo01000iin952qhq2jev","comments":1,"layout":"post","photos":[],"link":"","content":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li><p></p></li><li><p></p></li><li><p></p></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><blockquote><p>Gif ~</p></blockquote><p><a href=\"https://github.com/NoJsJa/javascript-learning/tree/master/js-animation\" target=\"_blank\" rel=\"noopener\">=&gt; </a></p><p><img src=\"animation.gif\" alt=\"animation.gif\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><blockquote><p><br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [tween ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;[Number]&#125;</span>  </span>t []</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;[String]&#125;</span>  </span>b []</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;[String]&#125;</span>  </span>c []</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;[Number]&#125;</span>  </span>d []</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> tween = &#123;</span><br><span class=\"line\">  linear: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> time, start, distance, duration </span>) </span>&#123; <span class=\"keyword\">return</span> distance*time/duration + start; &#125;,</span><br><span class=\"line\">  easeIn: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> time, start, distance, duration </span>) </span>&#123; <span class=\"keyword\">return</span> distance * ( time /= duration ) * time + start; &#125;,</span><br><span class=\"line\">  strongEaseIn: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">time, start, distance, duration</span>) </span>&#123; <span class=\"keyword\">return</span> distance * ( time /= duration ) * time * time * time * time + start; &#125;,</span><br><span class=\"line\">  strongEaseOut: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">time, start, distance, duration</span>) </span>&#123; <span class=\"keyword\">return</span> distance * ( ( time = time / duration - <span class=\"number\">1</span>) * time * time * time * time + <span class=\"number\">1</span> ) + start; &#125;,</span><br><span class=\"line\">  sinEaseIn: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> time, start, distance, duration </span>) </span>&#123; <span class=\"keyword\">return</span> distance * ( time /= duration) * time * time + start; &#125;,</span><br><span class=\"line\">  sinEaseOut: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">time,start,distance,duration</span>)</span>&#123; <span class=\"keyword\">return</span> distance * ( ( time = time / duration - <span class=\"number\">1</span>) * time * time + <span class=\"number\">1</span> ) + start; &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><p></p></blockquote><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><blockquote><p>requestAnimationFramesetTimeoutAPIDOMCanvasSVGWebGLAPI<br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.requestAnimationFrame = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span>  <span class=\"built_in\">window</span>.requestAnimationFrame       ||</span><br><span class=\"line\">          <span class=\"built_in\">window</span>.webkitRequestAnimationFrame ||</span><br><span class=\"line\">          <span class=\"built_in\">window</span>.mozRequestAnimationFrame    ||</span><br><span class=\"line\">          <span class=\"built_in\">window</span>.oRequestAnimationFrame      ||</span><br><span class=\"line\">          <span class=\"built_in\">window</span>.msRequestAnimationFrame     ||</span><br><span class=\"line\">          <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> callback </span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"built_in\">window</span>.setTimeout(callback, <span class=\"number\">1000</span> / <span class=\"number\">60</span>);</span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure><p></p></blockquote><h5 id=\"Animation\"><a href=\"#Animation\" class=\"headerlink\" title=\"Animation\"></a>Animation</h5><blockquote><p>ES5ES6</p></blockquote><ul><li>dom</li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* -------------------  ------------------- */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> Animation = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.store = &#123; <span class=\"comment\">// status store</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* -------------------  ------------------- */</span></span><br><span class=\"line\">Animation.prototype.setTarget = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> element = <span class=\"built_in\">document</span>.querySelector(selector);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (element) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.store[selector] = &#123;</span><br><span class=\"line\">      selector: selector,</span><br><span class=\"line\">      element: <span class=\"built_in\">document</span>.querySelector(selector),</span><br><span class=\"line\">      status: <span class=\"string\">'pending'</span>,</span><br><span class=\"line\">      queue: [</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      timeStart: <span class=\"string\">''</span>,</span><br><span class=\"line\">      positionStart: &#123;</span><br><span class=\"line\">        x: <span class=\"string\">''</span>,</span><br><span class=\"line\">        y: <span class=\"string\">''</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      positionEnd: &#123;</span><br><span class=\"line\">        x: <span class=\"string\">''</span>,</span><br><span class=\"line\">        y: <span class=\"string\">''</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><ul><li><code>update</code></li></ul><blockquote><p><code></code>(<code>Animation.store</code>)</p></blockquote><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [start ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>selector []</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[type]&#125;</span> </span>func     []</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">Animation.prototype.start = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">selector, func</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> target = <span class=\"keyword\">this</span>.store[selector];</span><br><span class=\"line\">  target.status = <span class=\"string\">'running'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  that.update(&#123;<span class=\"attr\">x</span>: <span class=\"number\">0</span>, <span class=\"attr\">y</span>: <span class=\"number\">0</span>&#125;, selector);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [update ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[type]&#125;</span> </span>selector [description]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">Animation.prototype.update =  <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">position, selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> target = <span class=\"keyword\">this</span>.store[selector],</span><br><span class=\"line\">    that = <span class=\"keyword\">this</span>,</span><br><span class=\"line\">    timeUsed,</span><br><span class=\"line\">    positionX, positionY;</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!target || !target.queue.length) &#123;</span><br><span class=\"line\">    target.status = <span class=\"string\">'pending'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// reset position</span></span><br><span class=\"line\">  target.element.style.left = position.x + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">  target.element.style.top = position.y + <span class=\"string\">'px'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// position</span></span><br><span class=\"line\">  target.positionStart = &#123;</span><br><span class=\"line\">    x: position.x,</span><br><span class=\"line\">    y: position.y,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  target.positionEnd = &#123;</span><br><span class=\"line\">    x: position.x + target.queue[<span class=\"number\">0</span>].x,</span><br><span class=\"line\">    y: position.y + target.queue[<span class=\"number\">0</span>].y,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// time</span></span><br><span class=\"line\">  target.timeStart = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> callback = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    timeUsed = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime() - target.timeStart;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timeUsed &gt;= target.queue[<span class=\"number\">0</span>].duration) &#123;</span><br><span class=\"line\">      target.queue.shift();</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      that.step(target.element, target.positionEnd.x, target.positionEnd.y);</span><br><span class=\"line\">      target.status = <span class=\"string\">'running'</span>;</span><br><span class=\"line\">      <span class=\"comment\">// var position = target.element.getBoundingClientRect();</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> position = &#123;</span><br><span class=\"line\">        x: <span class=\"built_in\">parseInt</span>(target.element.style.left),</span><br><span class=\"line\">        y: <span class=\"built_in\">parseInt</span>(target.element.style.top),</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      that.update(position, selector);</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    positionX = target.queue[<span class=\"number\">0</span>].func(</span><br><span class=\"line\">      timeUsed,</span><br><span class=\"line\">      target.positionStart.x,</span><br><span class=\"line\">      target.positionEnd.x - target.positionStart.x,</span><br><span class=\"line\">      target.queue[<span class=\"number\">0</span>].duration,</span><br><span class=\"line\">    );</span><br><span class=\"line\">    positionY = target.queue[<span class=\"number\">0</span>].func(</span><br><span class=\"line\">      timeUsed,</span><br><span class=\"line\">      target.positionStart.y,</span><br><span class=\"line\">      target.positionEnd.y - target.positionStart.y,</span><br><span class=\"line\">      target.queue[<span class=\"number\">0</span>].duration,</span><br><span class=\"line\">    );</span><br><span class=\"line\">    that.step(target.element, positionX, positionY);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    requestAnimationFrame(callback);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  requestAnimationFrame(callback);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><ul><li>()</li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [step dom]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[DOM]&#125;</span> </span>element [dom ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Number]&#125;</span> </span>x        [x]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Number]&#125;</span> </span>y        [y]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">Animation.prototype.step = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">element, x, y</span>) </span>&#123;</span><br><span class=\"line\">  element.style.left = x + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">  element.style.top = y + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* -------------------  ------------------- */</span></span><br><span class=\"line\">Animation.prototype.pause = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* -------------------  ------------------- */</span></span><br><span class=\"line\">Animation.prototype.stop = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">selector</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [push ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>selector [dom]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>conf     []</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">Animation.prototype.push = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">selector, conf</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.store[selector]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.store[selector].queue.push(&#123;</span><br><span class=\"line\">      x: conf.x,</span><br><span class=\"line\">      y: conf.y,</span><br><span class=\"line\">      duration: conf.duration || <span class=\"number\">1000</span>,</span><br><span class=\"line\">      func: tween[conf.func] || tween[<span class=\"string\">'linear'</span>],</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* -------------------  ------------------- */</span></span><br><span class=\"line\">Animation.prototype.pop = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.store[selector]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.store[selector].queue.pop();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* -------------------  ------------------- */</span></span><br><span class=\"line\">Animation.prototype.clear = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.store[selector]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.store[selector].queue.length = <span class=\"number\">1</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><h5 id=\"Animation\"><a href=\"#Animation\" class=\"headerlink\" title=\"Animation\"></a>Animation</h5><ol><li></li><li>()</li><li></li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> anime = <span class=\"keyword\">new</span> Animation();</span><br><span class=\"line\">anime.setTarget(<span class=\"string\">'#animationTarget'</span>);</span><br><span class=\"line\"><span class=\"comment\">// 50px</span></span><br><span class=\"line\">anime.push(<span class=\"string\">'#animationTarget'</span>, &#123; <span class=\"attr\">x</span>: <span class=\"number\">50</span>, <span class=\"attr\">y</span>: <span class=\"number\">50</span>, <span class=\"attr\">duration</span>: <span class=\"number\">1000</span>, <span class=\"attr\">func</span>: <span class=\"string\">'easeIn'</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">// 50px</span></span><br><span class=\"line\">anime.push(<span class=\"string\">'#animationTarget'</span>, &#123; <span class=\"attr\">x</span>: <span class=\"number\">-50</span>, <span class=\"attr\">y</span>: <span class=\"number\">-50</span>, <span class=\"attr\">duration</span>: <span class=\"number\">500</span>, <span class=\"attr\">func</span>: <span class=\"string\">'linear'</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">// 50px</span></span><br><span class=\"line\">anime.push(<span class=\"string\">'#animationTarget'</span>, &#123; <span class=\"attr\">x</span>: <span class=\"number\">50</span>, <span class=\"attr\">y</span>: <span class=\"number\">0</span>, <span class=\"attr\">duration</span>: <span class=\"number\">1000</span>, <span class=\"attr\">func</span>: <span class=\"string\">'easeIn'</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">// 50px</span></span><br><span class=\"line\">anime.push(<span class=\"string\">'#animationTarget'</span>, &#123; <span class=\"attr\">x</span>: <span class=\"number\">0</span>, <span class=\"attr\">y</span>: <span class=\"number\">50</span>, <span class=\"attr\">duration</span>: <span class=\"number\">500</span>, <span class=\"attr\">func</span>: <span class=\"string\">'linear'</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">anime.start(<span class=\"string\">'#animationTarget'</span>);</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><p>JavaScriptCSSCSS3CanvasJSERJs</p><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5>","site":{"data":{}},"excerpt":"","more":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li><p></p></li><li><p></p></li><li><p></p></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><blockquote><p>Gif ~</p></blockquote><p><a href=\"https://github.com/NoJsJa/javascript-learning/tree/master/js-animation\" target=\"_blank\" rel=\"noopener\">=&gt; </a></p><p><img src=\"animation.gif\" alt=\"animation.gif\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><blockquote><p><br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [tween ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;[Number]&#125;</span>  </span>t []</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;[String]&#125;</span>  </span>b []</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;[String]&#125;</span>  </span>c []</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param <span class=\"type\">&#123;[Number]&#125;</span>  </span>d []</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> tween = &#123;</span><br><span class=\"line\">  linear: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> time, start, distance, duration </span>) </span>&#123; <span class=\"keyword\">return</span> distance*time/duration + start; &#125;,</span><br><span class=\"line\">  easeIn: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> time, start, distance, duration </span>) </span>&#123; <span class=\"keyword\">return</span> distance * ( time /= duration ) * time + start; &#125;,</span><br><span class=\"line\">  strongEaseIn: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">time, start, distance, duration</span>) </span>&#123; <span class=\"keyword\">return</span> distance * ( time /= duration ) * time * time * time * time + start; &#125;,</span><br><span class=\"line\">  strongEaseOut: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">time, start, distance, duration</span>) </span>&#123; <span class=\"keyword\">return</span> distance * ( ( time = time / duration - <span class=\"number\">1</span>) * time * time * time * time + <span class=\"number\">1</span> ) + start; &#125;,</span><br><span class=\"line\">  sinEaseIn: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> time, start, distance, duration </span>) </span>&#123; <span class=\"keyword\">return</span> distance * ( time /= duration) * time * time + start; &#125;,</span><br><span class=\"line\">  sinEaseOut: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">time,start,distance,duration</span>)</span>&#123; <span class=\"keyword\">return</span> distance * ( ( time = time / duration - <span class=\"number\">1</span>) * time * time + <span class=\"number\">1</span> ) + start; &#125;,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><p></p></blockquote><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><blockquote><p>requestAnimationFramesetTimeoutAPIDOMCanvasSVGWebGLAPI<br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"built_in\">window</span>.requestAnimationFrame = (<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>)</span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span>  <span class=\"built_in\">window</span>.requestAnimationFrame       ||</span><br><span class=\"line\">          <span class=\"built_in\">window</span>.webkitRequestAnimationFrame ||</span><br><span class=\"line\">          <span class=\"built_in\">window</span>.mozRequestAnimationFrame    ||</span><br><span class=\"line\">          <span class=\"built_in\">window</span>.oRequestAnimationFrame      ||</span><br><span class=\"line\">          <span class=\"built_in\">window</span>.msRequestAnimationFrame     ||</span><br><span class=\"line\">          <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"> callback </span>)</span>&#123;</span><br><span class=\"line\">            <span class=\"keyword\">return</span> <span class=\"built_in\">window</span>.setTimeout(callback, <span class=\"number\">1000</span> / <span class=\"number\">60</span>);</span><br><span class=\"line\">          &#125;;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure><p></p></blockquote><h5 id=\"Animation\"><a href=\"#Animation\" class=\"headerlink\" title=\"Animation\"></a>Animation</h5><blockquote><p>ES5ES6</p></blockquote><ul><li>dom</li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* -------------------  ------------------- */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> Animation = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.store = &#123; <span class=\"comment\">// status store</span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* -------------------  ------------------- */</span></span><br><span class=\"line\">Animation.prototype.setTarget = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> element = <span class=\"built_in\">document</span>.querySelector(selector);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (element) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.store[selector] = &#123;</span><br><span class=\"line\">      selector: selector,</span><br><span class=\"line\">      element: <span class=\"built_in\">document</span>.querySelector(selector),</span><br><span class=\"line\">      status: <span class=\"string\">'pending'</span>,</span><br><span class=\"line\">      queue: [</span><br><span class=\"line\">      ],</span><br><span class=\"line\">      timeStart: <span class=\"string\">''</span>,</span><br><span class=\"line\">      positionStart: &#123;</span><br><span class=\"line\">        x: <span class=\"string\">''</span>,</span><br><span class=\"line\">        y: <span class=\"string\">''</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      positionEnd: &#123;</span><br><span class=\"line\">        x: <span class=\"string\">''</span>,</span><br><span class=\"line\">        y: <span class=\"string\">''</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><ul><li><code>update</code></li></ul><blockquote><p><code></code>(<code>Animation.store</code>)</p></blockquote><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [start ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>selector []</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[type]&#125;</span> </span>func     []</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">Animation.prototype.start = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">selector, func</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> target = <span class=\"keyword\">this</span>.store[selector];</span><br><span class=\"line\">  target.status = <span class=\"string\">'running'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  that.update(&#123;<span class=\"attr\">x</span>: <span class=\"number\">0</span>, <span class=\"attr\">y</span>: <span class=\"number\">0</span>&#125;, selector);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [update ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[type]&#125;</span> </span>selector [description]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">Animation.prototype.update =  <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">position, selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> target = <span class=\"keyword\">this</span>.store[selector],</span><br><span class=\"line\">    that = <span class=\"keyword\">this</span>,</span><br><span class=\"line\">    timeUsed,</span><br><span class=\"line\">    positionX, positionY;</span><br><span class=\"line\">  <span class=\"comment\">//</span></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!target || !target.queue.length) &#123;</span><br><span class=\"line\">    target.status = <span class=\"string\">'pending'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span>;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// reset position</span></span><br><span class=\"line\">  target.element.style.left = position.x + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">  target.element.style.top = position.y + <span class=\"string\">'px'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// position</span></span><br><span class=\"line\">  target.positionStart = &#123;</span><br><span class=\"line\">    x: position.x,</span><br><span class=\"line\">    y: position.y,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  target.positionEnd = &#123;</span><br><span class=\"line\">    x: position.x + target.queue[<span class=\"number\">0</span>].x,</span><br><span class=\"line\">    y: position.y + target.queue[<span class=\"number\">0</span>].y,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// time</span></span><br><span class=\"line\">  target.timeStart = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime();</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> callback = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    timeUsed = <span class=\"keyword\">new</span> <span class=\"built_in\">Date</span>().getTime() - target.timeStart;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (timeUsed &gt;= target.queue[<span class=\"number\">0</span>].duration) &#123;</span><br><span class=\"line\">      target.queue.shift();</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      that.step(target.element, target.positionEnd.x, target.positionEnd.y);</span><br><span class=\"line\">      target.status = <span class=\"string\">'running'</span>;</span><br><span class=\"line\">      <span class=\"comment\">// var position = target.element.getBoundingClientRect();</span></span><br><span class=\"line\">      <span class=\"keyword\">var</span> position = &#123;</span><br><span class=\"line\">        x: <span class=\"built_in\">parseInt</span>(target.element.style.left),</span><br><span class=\"line\">        y: <span class=\"built_in\">parseInt</span>(target.element.style.top),</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      that.update(position, selector);</span><br><span class=\"line\">      <span class=\"keyword\">return</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    positionX = target.queue[<span class=\"number\">0</span>].func(</span><br><span class=\"line\">      timeUsed,</span><br><span class=\"line\">      target.positionStart.x,</span><br><span class=\"line\">      target.positionEnd.x - target.positionStart.x,</span><br><span class=\"line\">      target.queue[<span class=\"number\">0</span>].duration,</span><br><span class=\"line\">    );</span><br><span class=\"line\">    positionY = target.queue[<span class=\"number\">0</span>].func(</span><br><span class=\"line\">      timeUsed,</span><br><span class=\"line\">      target.positionStart.y,</span><br><span class=\"line\">      target.positionEnd.y - target.positionStart.y,</span><br><span class=\"line\">      target.queue[<span class=\"number\">0</span>].duration,</span><br><span class=\"line\">    );</span><br><span class=\"line\">    that.step(target.element, positionX, positionY);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    requestAnimationFrame(callback);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  requestAnimationFrame(callback);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><ul><li>()</li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [step dom]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[DOM]&#125;</span> </span>element [dom ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Number]&#125;</span> </span>x        [x]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Number]&#125;</span> </span>y        [y]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">Animation.prototype.step = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">element, x, y</span>) </span>&#123;</span><br><span class=\"line\">  element.style.left = x + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">  element.style.top = y + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* -------------------  ------------------- */</span></span><br><span class=\"line\">Animation.prototype.pause = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* -------------------  ------------------- */</span></span><br><span class=\"line\">Animation.prototype.stop = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">selector</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [push ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>selector [dom]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>conf     []</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\">Animation.prototype.push = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">selector, conf</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.store[selector]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.store[selector].queue.push(&#123;</span><br><span class=\"line\">      x: conf.x,</span><br><span class=\"line\">      y: conf.y,</span><br><span class=\"line\">      duration: conf.duration || <span class=\"number\">1000</span>,</span><br><span class=\"line\">      func: tween[conf.func] || tween[<span class=\"string\">'linear'</span>],</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* -------------------  ------------------- */</span></span><br><span class=\"line\">Animation.prototype.pop = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.store[selector]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.store[selector].queue.pop();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* -------------------  ------------------- */</span></span><br><span class=\"line\">Animation.prototype.clear = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">selector</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.store[selector]) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.store[selector].queue.length = <span class=\"number\">1</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><h5 id=\"Animation\"><a href=\"#Animation\" class=\"headerlink\" title=\"Animation\"></a>Animation</h5><ol><li></li><li>()</li><li></li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> anime = <span class=\"keyword\">new</span> Animation();</span><br><span class=\"line\">anime.setTarget(<span class=\"string\">'#animationTarget'</span>);</span><br><span class=\"line\"><span class=\"comment\">// 50px</span></span><br><span class=\"line\">anime.push(<span class=\"string\">'#animationTarget'</span>, &#123; <span class=\"attr\">x</span>: <span class=\"number\">50</span>, <span class=\"attr\">y</span>: <span class=\"number\">50</span>, <span class=\"attr\">duration</span>: <span class=\"number\">1000</span>, <span class=\"attr\">func</span>: <span class=\"string\">'easeIn'</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">// 50px</span></span><br><span class=\"line\">anime.push(<span class=\"string\">'#animationTarget'</span>, &#123; <span class=\"attr\">x</span>: <span class=\"number\">-50</span>, <span class=\"attr\">y</span>: <span class=\"number\">-50</span>, <span class=\"attr\">duration</span>: <span class=\"number\">500</span>, <span class=\"attr\">func</span>: <span class=\"string\">'linear'</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">// 50px</span></span><br><span class=\"line\">anime.push(<span class=\"string\">'#animationTarget'</span>, &#123; <span class=\"attr\">x</span>: <span class=\"number\">50</span>, <span class=\"attr\">y</span>: <span class=\"number\">0</span>, <span class=\"attr\">duration</span>: <span class=\"number\">1000</span>, <span class=\"attr\">func</span>: <span class=\"string\">'easeIn'</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">// 50px</span></span><br><span class=\"line\">anime.push(<span class=\"string\">'#animationTarget'</span>, &#123; <span class=\"attr\">x</span>: <span class=\"number\">0</span>, <span class=\"attr\">y</span>: <span class=\"number\">50</span>, <span class=\"attr\">duration</span>: <span class=\"number\">500</span>, <span class=\"attr\">func</span>: <span class=\"string\">'linear'</span> &#125;);</span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\">anime.start(<span class=\"string\">'#animationTarget'</span>);</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><p>JavaScriptCSSCSS3CanvasJSERJs</p><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5>"},{"title":"y7000ubuntu18.04","catalog":true,"toc_nav_num":true,"date":"2019-09-29T02:49:00.000Z","subtitle":"y7000 ubuntu18.04","header-img":"article_header.png","updateDate":"2019-09-29T02:49:00.000Z","_content":"\n\n![Desktop](Desktop3.png)\n![Desktop](Desktop2.png)\n![Desktop](Desktop.png)\n\n### \n\n1. \n\n2. Ubuntu18.04-3\n\n3. \n\n### \n\n* CPU : Intel Core i5-8300H CPU @ 2.30GHz  8\n\n* GPU: Nvidia GeForce GTX 1050 Ti/PCIe/SSE2  Intel \n\n* : Ubuntu 18.04.3 bionic\n\n* : Linux 5.0.0-27-generic\n\n* : 16G\n\n* :  GPT + UEFI `efi``/`\n\n### Ubuntu18.04-3\n\n* \n\n* \n\n* \n\n* HDMI\n\n### \n\n\nUbuntu\nNvidia\n\n#### 1.  \n\ngrube \n`quiet splash``quiet splash nomodeset`F10Ubuntu\n\n\n```sh\n$: sudo gedit /etc/default/grub\n```\n\n\n\n```sh\n$: sudo update-grub\n```\n\n#### 2. Nvidia\n\nubuntu()\n\n```sh\n$: sudo vi /etc/modprobe.d/blacklist.conf\n```\n\n\n\n```sh\nblacklist vga16fb\nblacklist nouveau\nblacklist rivafb\nblacklist rivatv\nblacklist nvidiafb\n```\n\nnvidia\n\n```sh\n$: sudo apt-get remove  --purge nvidia-*\n```\n\n\n\n```sh\n$: lsmod | grep nouveau\n```\n\n\n\n```sh\n$: sudo add-apt-repository ppa:graphics-drivers/ppa\n$: sudo apt-get update\n```\n\n\n\n```sh\nubuntu-drivers devices\n```\n\n`nvidia-driver-390``nvidia-driver-430`\n\n```sh\n$: sudo apt-get install nvidia-driver-430 nvidia-settings nvidia-prime\n```\n\n\n\n```sh\n$: sudo update-initramfs -u\n$: sudo reboot\n```\n\ngrube \n`quiet splash nomodeset``quiet splash acpi_osi=linux`F10Ubuntu\n\n\n\n```sh\n$: sudo nvidia-smi\n```\n\ngrab\n\n```sh\n$: sudo gedit /etc/default/grub\n$: sudo update-grub\n```\n\n#### 3. \n\n Ubuntu\n\n:\n\n```sh\n$: sudo gedit /etc/modprobe.d/blacklist.conf\n```\n\n\n\n```sh\nblacklist ideapad_laptop\n```\n\n\n\n```sh\n$: sudo modprobe -r ideapad_laptop\n```\n\n_Ubuntu[Ubuntu 18.04 ](https://www.jianshu.com/p/23b0d3015db8)_","source":"_posts/2019-09-29-y7000ubuntu18-04.md","raw":"---\ntitle: \"y7000ubuntu18.04\"\ncatalog: true\ntoc_nav_num: true\ndate: 2019-09-29 10:49:00\nsubtitle: \"y7000 ubuntu18.04\"\nheader-img: \"article_header.png\"\ntags:\n- ubuntu18.04\ncategories:\n- Linux\nupdateDate: 2019-09-29 10:49:00\n---\n\n\n![Desktop](Desktop3.png)\n![Desktop](Desktop2.png)\n![Desktop](Desktop.png)\n\n### \n\n1. \n\n2. Ubuntu18.04-3\n\n3. \n\n### \n\n* CPU : Intel Core i5-8300H CPU @ 2.30GHz  8\n\n* GPU: Nvidia GeForce GTX 1050 Ti/PCIe/SSE2  Intel \n\n* : Ubuntu 18.04.3 bionic\n\n* : Linux 5.0.0-27-generic\n\n* : 16G\n\n* :  GPT + UEFI `efi``/`\n\n### Ubuntu18.04-3\n\n* \n\n* \n\n* \n\n* HDMI\n\n### \n\n\nUbuntu\nNvidia\n\n#### 1.  \n\ngrube \n`quiet splash``quiet splash nomodeset`F10Ubuntu\n\n\n```sh\n$: sudo gedit /etc/default/grub\n```\n\n\n\n```sh\n$: sudo update-grub\n```\n\n#### 2. Nvidia\n\nubuntu()\n\n```sh\n$: sudo vi /etc/modprobe.d/blacklist.conf\n```\n\n\n\n```sh\nblacklist vga16fb\nblacklist nouveau\nblacklist rivafb\nblacklist rivatv\nblacklist nvidiafb\n```\n\nnvidia\n\n```sh\n$: sudo apt-get remove  --purge nvidia-*\n```\n\n\n\n```sh\n$: lsmod | grep nouveau\n```\n\n\n\n```sh\n$: sudo add-apt-repository ppa:graphics-drivers/ppa\n$: sudo apt-get update\n```\n\n\n\n```sh\nubuntu-drivers devices\n```\n\n`nvidia-driver-390``nvidia-driver-430`\n\n```sh\n$: sudo apt-get install nvidia-driver-430 nvidia-settings nvidia-prime\n```\n\n\n\n```sh\n$: sudo update-initramfs -u\n$: sudo reboot\n```\n\ngrube \n`quiet splash nomodeset``quiet splash acpi_osi=linux`F10Ubuntu\n\n\n\n```sh\n$: sudo nvidia-smi\n```\n\ngrab\n\n```sh\n$: sudo gedit /etc/default/grub\n$: sudo update-grub\n```\n\n#### 3. \n\n Ubuntu\n\n:\n\n```sh\n$: sudo gedit /etc/modprobe.d/blacklist.conf\n```\n\n\n\n```sh\nblacklist ideapad_laptop\n```\n\n\n\n```sh\n$: sudo modprobe -r ideapad_laptop\n```\n\n_Ubuntu[Ubuntu 18.04 ](https://www.jianshu.com/p/23b0d3015db8)_","slug":"y7000ubuntu18-04","published":1,"updated":"2019-09-29T02:36:31.455Z","_id":"ck14ddfo8000nin950ll9hpz8","comments":1,"layout":"post","photos":[],"link":"","content":"<p><img src=\"Desktop3.png\" alt=\"Desktop\"><br><img src=\"Desktop2.png\" alt=\"Desktop\"><br><img src=\"Desktop.png\" alt=\"Desktop\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol><li><p></p></li><li><p>Ubuntu18.04-3</p></li><li><p></p></li></ol><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul><li><p>CPU : Intel Core i5-8300H CPU @ 2.30GHz  8</p></li><li><p>GPU: Nvidia GeForce GTX 1050 Ti/PCIe/SSE2  Intel </p></li><li><p>: Ubuntu 18.04.3 bionic</p></li><li><p>: Linux 5.0.0-27-generic</p></li><li><p>: 16G</p></li><li><p>: GPT + UEFI <code>efi</code><code>/</code></p></li></ul><h3 id=\"Ubuntu18-04-3\"><a href=\"#Ubuntu18-04-3\" class=\"headerlink\" title=\"Ubuntu18.04-3\"></a>Ubuntu18.04-3</h3><ul><li><p></p></li><li><p></p></li><li><p></p></li><li><p>HDMI</p></li></ul><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br>Ubuntu<br>Nvidia</p><h4 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1.  \"></a>1. </h4><p>grube <br><code>quiet splash</code><code>quiet splash nomodeset</code>F10Ubuntu<br></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo gedit /etc/default/grub</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo update-grub</span><br></pre></td></tr></table></figure><h4 id=\"2-Nvidia\"><a href=\"#2-Nvidia\" class=\"headerlink\" title=\"2. Nvidia\"></a>2. Nvidia</h4><p>ubuntu()</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo vi /etc/modprobe.d/blacklist.conf</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">blacklist vga16fb</span><br><span class=\"line\">blacklist nouveau</span><br><span class=\"line\">blacklist rivafb</span><br><span class=\"line\">blacklist rivatv</span><br><span class=\"line\">blacklist nvidiafb</span><br></pre></td></tr></table></figure><p>nvidia</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo apt-get remove  --purge nvidia-*</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: lsmod | grep nouveau</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo add-apt-repository ppa:graphics-drivers/ppa</span><br><span class=\"line\">$: sudo apt-get update</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu-drivers devices</span><br></pre></td></tr></table></figure><p><code>nvidia-driver-390</code><code>nvidia-driver-430</code></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo apt-get install nvidia-driver-430 nvidia-settings nvidia-prime</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo update-initramfs -u</span><br><span class=\"line\">$: sudo reboot</span><br></pre></td></tr></table></figure><p>grube <br><code>quiet splash nomodeset</code><code>quiet splash acpi_osi=linux</code>F10Ubuntu</p><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo nvidia-smi</span><br></pre></td></tr></table></figure><p>grab</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo gedit /etc/default/grub</span><br><span class=\"line\">$: sudo update-grub</span><br></pre></td></tr></table></figure><h4 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h4><p> Ubuntu</p><p>:</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo gedit /etc/modprobe.d/blacklist.conf</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">blacklist ideapad_laptop</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo modprobe -r ideapad_laptop</span><br></pre></td></tr></table></figure><p><em>Ubuntu<a href=\"https://www.jianshu.com/p/23b0d3015db8\" target=\"_blank\" rel=\"noopener\">Ubuntu 18.04 </a></em></p>","site":{"data":{}},"excerpt":"","more":"<p><img src=\"Desktop3.png\" alt=\"Desktop\"><br><img src=\"Desktop2.png\" alt=\"Desktop\"><br><img src=\"Desktop.png\" alt=\"Desktop\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol><li><p></p></li><li><p>Ubuntu18.04-3</p></li><li><p></p></li></ol><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul><li><p>CPU : Intel Core i5-8300H CPU @ 2.30GHz  8</p></li><li><p>GPU: Nvidia GeForce GTX 1050 Ti/PCIe/SSE2  Intel </p></li><li><p>: Ubuntu 18.04.3 bionic</p></li><li><p>: Linux 5.0.0-27-generic</p></li><li><p>: 16G</p></li><li><p>: GPT + UEFI <code>efi</code><code>/</code></p></li></ul><h3 id=\"Ubuntu18-04-3\"><a href=\"#Ubuntu18-04-3\" class=\"headerlink\" title=\"Ubuntu18.04-3\"></a>Ubuntu18.04-3</h3><ul><li><p></p></li><li><p></p></li><li><p></p></li><li><p>HDMI</p></li></ul><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p><br>Ubuntu<br>Nvidia</p><h4 id=\"1-\"><a href=\"#1-\" class=\"headerlink\" title=\"1.  \"></a>1. </h4><p>grube <br><code>quiet splash</code><code>quiet splash nomodeset</code>F10Ubuntu<br></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo gedit /etc/default/grub</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo update-grub</span><br></pre></td></tr></table></figure><h4 id=\"2-Nvidia\"><a href=\"#2-Nvidia\" class=\"headerlink\" title=\"2. Nvidia\"></a>2. Nvidia</h4><p>ubuntu()</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo vi /etc/modprobe.d/blacklist.conf</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">blacklist vga16fb</span><br><span class=\"line\">blacklist nouveau</span><br><span class=\"line\">blacklist rivafb</span><br><span class=\"line\">blacklist rivatv</span><br><span class=\"line\">blacklist nvidiafb</span><br></pre></td></tr></table></figure><p>nvidia</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo apt-get remove  --purge nvidia-*</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: lsmod | grep nouveau</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo add-apt-repository ppa:graphics-drivers/ppa</span><br><span class=\"line\">$: sudo apt-get update</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ubuntu-drivers devices</span><br></pre></td></tr></table></figure><p><code>nvidia-driver-390</code><code>nvidia-driver-430</code></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo apt-get install nvidia-driver-430 nvidia-settings nvidia-prime</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo update-initramfs -u</span><br><span class=\"line\">$: sudo reboot</span><br></pre></td></tr></table></figure><p>grube <br><code>quiet splash nomodeset</code><code>quiet splash acpi_osi=linux</code>F10Ubuntu</p><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo nvidia-smi</span><br></pre></td></tr></table></figure><p>grab</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo gedit /etc/default/grub</span><br><span class=\"line\">$: sudo update-grub</span><br></pre></td></tr></table></figure><h4 id=\"3-\"><a href=\"#3-\" class=\"headerlink\" title=\"3. \"></a>3. </h4><p> Ubuntu</p><p>:</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo gedit /etc/modprobe.d/blacklist.conf</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">blacklist ideapad_laptop</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo modprobe -r ideapad_laptop</span><br></pre></td></tr></table></figure><p><em>Ubuntu<a href=\"https://www.jianshu.com/p/23b0d3015db8\" target=\"_blank\" rel=\"noopener\">Ubuntu 18.04 </a></em></p>"},{"title":"","catalog":true,"toc_nav_num":true,"date":"2020-04-16T03:45:00.000Z","subtitle":"browser tools","header-img":"article_header.png","updateDate":"2020-04-16T03:45:00.000Z","_content":"\n\n>author: NoJsJa\n\n![life is strange](dev-tools.png)\n\n### \n---------------------------------\n\n1. DevTools\n2. DevToolsDOM\n3. DevTools\n4. DevToolsDOM\n5. DevTools\n6. DevTools\n7. DevTools\n\n### DevTools\n---------------------------------\n\n####   \n\n* \n\n* Reactreact-dev-toolReact\n\n* DOM\n\n* \n\n#### \n\n* Cookie\n* SessionStorage\n* LocalStorage\n* Indexed DB\n\n#### \n\n* \n* /\n\n#### \n\n* \n* console\n\n#### \n\n* \n* \n* -\n\n#### \n\n* \n* \n* \n\n#### \n\n* \n\n* \n\n### DevToolsDOM\n---------------------------------\n\n1. ``\n2. ``(Ctrl+Shift+C)\n3. `HTML`querySelector\n\n### DevTools\n---------------------------------\n![life is strange](dev-tools-storage.png)\n\n#### Cookie\n>HTTP CookieWeb CookieCookieCookieHTTP4K  \n\nCookie\n* \n* \n* \n\nCookie\n1.  Cookie \n2. Cookie \n3.  Cookie  Cookie Cookie \n\n\n#### SessionStorage\n> sessionStorage ()\n\n![life is strange](dev-tools-storage2.png)\n\n#### LocalStorage\n> localStorage 5M\n\n#### Indexed DB\n>IndexedDB IndexedDB  LocalStorage IndexedDB  SQL  NoSQL \n\n\n\n1.  IndexedDB object store JavaScript \"\"\n\n2.  IndexedDB  LocalStorage \n\n3.  IndexedDB transaction\n\n4.  IndexedDB \n\n5.  IndexedDB  LocalStorage  250MB\n\n5.  IndexedDB ArrayBuffer  Blob \n\n### DevToolsDOM\n---------------------------------\n\n1. \n2. \n\n### DevTools\n---------------------------------\n\n1. \n2. \n3. -\n\n### DevTools\n---------------------------------\n\n#### \n\n1. console.log \n\n2. console.info \n\n3. console.error\n\n4. console.warn\n\n5. console.debug\n\n6. console.dirxmldom\n\n#### printf\n\n1.   \nconsole.log(\"%s\", \"nojsja\");\n\n2.   \nconsole.log(\"%d%d%d\",2011,3,26);\n\n3.   \nconsole.log(\"%f\",3.1415926);\n\n#### \n>bilibilidemo\n\n1. console.group\n\n2. console.groupEnd\n\n#### \n>false\n\n1. console.assert(boolValue, info);\n\n#### \n>console.logconsole.count\n\n1. console.count(symbol)\n\n#### \n>\n\n1. console.time(symbol)\n\n2. console.timeEnd(symbol)\n\n### \n\nconsole.trace \n\n### DevTools\n---------------------------------\n![life is strange](dev-tools-debug.png)\n\n1. \n2. /","source":"_posts/2020-04-16-.md","raw":"---\ntitle: \"\"\ncatalog: true\ntoc_nav_num: true\ndate:   2020-04-16 11:45:00\nsubtitle: \"browser tools\"\nheader-img: \"article_header.png\"\ntags:\n- browser\n- tools\ncategories:\n- Tools\nupdateDate: 2020-04-16 11:45:00\n---\n\n\n>author: NoJsJa\n\n![life is strange](dev-tools.png)\n\n### \n---------------------------------\n\n1. DevTools\n2. DevToolsDOM\n3. DevTools\n4. DevToolsDOM\n5. DevTools\n6. DevTools\n7. DevTools\n\n### DevTools\n---------------------------------\n\n####   \n\n* \n\n* Reactreact-dev-toolReact\n\n* DOM\n\n* \n\n#### \n\n* Cookie\n* SessionStorage\n* LocalStorage\n* Indexed DB\n\n#### \n\n* \n* /\n\n#### \n\n* \n* console\n\n#### \n\n* \n* \n* -\n\n#### \n\n* \n* \n* \n\n#### \n\n* \n\n* \n\n### DevToolsDOM\n---------------------------------\n\n1. ``\n2. ``(Ctrl+Shift+C)\n3. `HTML`querySelector\n\n### DevTools\n---------------------------------\n![life is strange](dev-tools-storage.png)\n\n#### Cookie\n>HTTP CookieWeb CookieCookieCookieHTTP4K  \n\nCookie\n* \n* \n* \n\nCookie\n1.  Cookie \n2. Cookie \n3.  Cookie  Cookie Cookie \n\n\n#### SessionStorage\n> sessionStorage ()\n\n![life is strange](dev-tools-storage2.png)\n\n#### LocalStorage\n> localStorage 5M\n\n#### Indexed DB\n>IndexedDB IndexedDB  LocalStorage IndexedDB  SQL  NoSQL \n\n\n\n1.  IndexedDB object store JavaScript \"\"\n\n2.  IndexedDB  LocalStorage \n\n3.  IndexedDB transaction\n\n4.  IndexedDB \n\n5.  IndexedDB  LocalStorage  250MB\n\n5.  IndexedDB ArrayBuffer  Blob \n\n### DevToolsDOM\n---------------------------------\n\n1. \n2. \n\n### DevTools\n---------------------------------\n\n1. \n2. \n3. -\n\n### DevTools\n---------------------------------\n\n#### \n\n1. console.log \n\n2. console.info \n\n3. console.error\n\n4. console.warn\n\n5. console.debug\n\n6. console.dirxmldom\n\n#### printf\n\n1.   \nconsole.log(\"%s\", \"nojsja\");\n\n2.   \nconsole.log(\"%d%d%d\",2011,3,26);\n\n3.   \nconsole.log(\"%f\",3.1415926);\n\n#### \n>bilibilidemo\n\n1. console.group\n\n2. console.groupEnd\n\n#### \n>false\n\n1. console.assert(boolValue, info);\n\n#### \n>console.logconsole.count\n\n1. console.count(symbol)\n\n#### \n>\n\n1. console.time(symbol)\n\n2. console.timeEnd(symbol)\n\n### \n\nconsole.trace \n\n### DevTools\n---------------------------------\n![life is strange](dev-tools-debug.png)\n\n1. \n2. /","slug":"","published":1,"updated":"2020-04-16T02:38:48.035Z","_id":"ck925kubj000qin955sii4stm","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote><p>author: NoJsJa</p></blockquote><p><img src=\"dev-tools.png\" alt=\"life is strange\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><ol><li>DevTools</li><li>DevToolsDOM</li><li>DevTools</li><li>DevToolsDOM</li><li>DevTools</li><li>DevTools</li><li>DevTools</li></ol><h3 id=\"DevTools\"><a href=\"#DevTools\" class=\"headerlink\" title=\"DevTools\"></a>DevTools</h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li><p></p></li><li><p>Reactreact-dev-toolReact</p></li><li><p>DOM</p></li><li><p></p></li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li>Cookie</li><li>SessionStorage</li><li>LocalStorage</li><li>Indexed DB</li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li></li><li>/</li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li></li><li>console</li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li></li><li></li><li>-</li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li></li><li></li><li></li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li><p></p></li><li><p></p></li></ul><h3 id=\"DevToolsDOM\"><a href=\"#DevToolsDOM\" class=\"headerlink\" title=\"DevToolsDOM\"></a>DevToolsDOM</h3><hr><ol><li><code></code></li><li><code></code>(Ctrl+Shift+C)</li><li><code>HTML</code>querySelector</li></ol><h3 id=\"DevTools\"><a href=\"#DevTools\" class=\"headerlink\" title=\"DevTools\"></a>DevTools</h3><hr><p><img src=\"dev-tools-storage.png\" alt=\"life is strange\"></p><h4 id=\"Cookie\"><a href=\"#Cookie\" class=\"headerlink\" title=\"Cookie\"></a>Cookie</h4><blockquote><p>HTTP CookieWeb CookieCookieCookieHTTP4K</p></blockquote><p>Cookie</p><ul><li></li><li></li><li></li></ul><p>Cookie</p><ol><li> Cookie </li><li>Cookie </li><li> Cookie  Cookie Cookie </li></ol><h4 id=\"SessionStorage\"><a href=\"#SessionStorage\" class=\"headerlink\" title=\"SessionStorage\"></a>SessionStorage</h4><blockquote><p>sessionStorage ()</p></blockquote><p><img src=\"dev-tools-storage2.png\" alt=\"life is strange\"></p><h4 id=\"LocalStorage\"><a href=\"#LocalStorage\" class=\"headerlink\" title=\"LocalStorage\"></a>LocalStorage</h4><blockquote><p>localStorage 5M</p></blockquote><h4 id=\"Indexed-DB\"><a href=\"#Indexed-DB\" class=\"headerlink\" title=\"Indexed DB\"></a>Indexed DB</h4><blockquote><p>IndexedDB IndexedDB  LocalStorage IndexedDB  SQL  NoSQL </p></blockquote><p></p><ol><li><p> IndexedDB object store JavaScript </p></li><li><p> IndexedDB  LocalStorage </p></li><li><p> IndexedDB transaction</p></li><li><p> IndexedDB </p></li><li><p> IndexedDB  LocalStorage  250MB</p></li><li><p> IndexedDB ArrayBuffer  Blob </p></li></ol><h3 id=\"DevToolsDOM\"><a href=\"#DevToolsDOM\" class=\"headerlink\" title=\"DevToolsDOM\"></a>DevToolsDOM</h3><hr><ol><li></li><li></li></ol><h3 id=\"DevTools\"><a href=\"#DevTools\" class=\"headerlink\" title=\"DevTools\"></a>DevTools</h3><hr><ol><li></li><li></li><li>-</li></ol><h3 id=\"DevTools\"><a href=\"#DevTools\" class=\"headerlink\" title=\"DevTools\"></a>DevTools</h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li><p>console.log </p></li><li><p>console.info </p></li><li><p>console.error</p></li><li><p>console.warn</p></li><li><p>console.debug</p></li><li><p>console.dirxmldom</p></li></ol><h4 id=\"printf\"><a href=\"#printf\" class=\"headerlink\" title=\"printf\"></a>printf</h4><ol><li><p><br>console.log(%s, nojsja);</p></li><li><p><br>console.log(%d%d%d,2011,3,26);</p></li><li><p><br>console.log(%f,3.1415926);</p></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p>bilibilidemo</p></blockquote><ol><li><p>console.group</p></li><li><p>console.groupEnd</p></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p>false</p></blockquote><ol><li>console.assert(boolValue, info);</li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p>console.logconsole.count</p></blockquote><ol><li>console.count(symbol)</li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p></p></blockquote><ol><li><p>console.time(symbol)</p></li><li><p>console.timeEnd(symbol)</p></li></ol><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>console.trace </p><h3 id=\"DevTools\"><a href=\"#DevTools\" class=\"headerlink\" title=\"DevTools\"></a>DevTools</h3><hr><p><img src=\"dev-tools-debug.png\" alt=\"life is strange\"></p><ol><li></li><li>/</li></ol>","site":{"data":{}},"excerpt":"","more":"<blockquote><p>author: NoJsJa</p></blockquote><p><img src=\"dev-tools.png\" alt=\"life is strange\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><ol><li>DevTools</li><li>DevToolsDOM</li><li>DevTools</li><li>DevToolsDOM</li><li>DevTools</li><li>DevTools</li><li>DevTools</li></ol><h3 id=\"DevTools\"><a href=\"#DevTools\" class=\"headerlink\" title=\"DevTools\"></a>DevTools</h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li><p></p></li><li><p>Reactreact-dev-toolReact</p></li><li><p>DOM</p></li><li><p></p></li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li>Cookie</li><li>SessionStorage</li><li>LocalStorage</li><li>Indexed DB</li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li></li><li>/</li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li></li><li>console</li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li></li><li></li><li>-</li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li></li><li></li><li></li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li><p></p></li><li><p></p></li></ul><h3 id=\"DevToolsDOM\"><a href=\"#DevToolsDOM\" class=\"headerlink\" title=\"DevToolsDOM\"></a>DevToolsDOM</h3><hr><ol><li><code></code></li><li><code></code>(Ctrl+Shift+C)</li><li><code>HTML</code>querySelector</li></ol><h3 id=\"DevTools\"><a href=\"#DevTools\" class=\"headerlink\" title=\"DevTools\"></a>DevTools</h3><hr><p><img src=\"dev-tools-storage.png\" alt=\"life is strange\"></p><h4 id=\"Cookie\"><a href=\"#Cookie\" class=\"headerlink\" title=\"Cookie\"></a>Cookie</h4><blockquote><p>HTTP CookieWeb CookieCookieCookieHTTP4K</p></blockquote><p>Cookie</p><ul><li></li><li></li><li></li></ul><p>Cookie</p><ol><li> Cookie </li><li>Cookie </li><li> Cookie  Cookie Cookie </li></ol><h4 id=\"SessionStorage\"><a href=\"#SessionStorage\" class=\"headerlink\" title=\"SessionStorage\"></a>SessionStorage</h4><blockquote><p>sessionStorage ()</p></blockquote><p><img src=\"dev-tools-storage2.png\" alt=\"life is strange\"></p><h4 id=\"LocalStorage\"><a href=\"#LocalStorage\" class=\"headerlink\" title=\"LocalStorage\"></a>LocalStorage</h4><blockquote><p>localStorage 5M</p></blockquote><h4 id=\"Indexed-DB\"><a href=\"#Indexed-DB\" class=\"headerlink\" title=\"Indexed DB\"></a>Indexed DB</h4><blockquote><p>IndexedDB IndexedDB  LocalStorage IndexedDB  SQL  NoSQL </p></blockquote><p></p><ol><li><p> IndexedDB object store JavaScript </p></li><li><p> IndexedDB  LocalStorage </p></li><li><p> IndexedDB transaction</p></li><li><p> IndexedDB </p></li><li><p> IndexedDB  LocalStorage  250MB</p></li><li><p> IndexedDB ArrayBuffer  Blob </p></li></ol><h3 id=\"DevToolsDOM\"><a href=\"#DevToolsDOM\" class=\"headerlink\" title=\"DevToolsDOM\"></a>DevToolsDOM</h3><hr><ol><li></li><li></li></ol><h3 id=\"DevTools\"><a href=\"#DevTools\" class=\"headerlink\" title=\"DevTools\"></a>DevTools</h3><hr><ol><li></li><li></li><li>-</li></ol><h3 id=\"DevTools\"><a href=\"#DevTools\" class=\"headerlink\" title=\"DevTools\"></a>DevTools</h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li><p>console.log </p></li><li><p>console.info </p></li><li><p>console.error</p></li><li><p>console.warn</p></li><li><p>console.debug</p></li><li><p>console.dirxmldom</p></li></ol><h4 id=\"printf\"><a href=\"#printf\" class=\"headerlink\" title=\"printf\"></a>printf</h4><ol><li><p><br>console.log(%s, nojsja);</p></li><li><p><br>console.log(%d%d%d,2011,3,26);</p></li><li><p><br>console.log(%f,3.1415926);</p></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p>bilibilidemo</p></blockquote><ol><li><p>console.group</p></li><li><p>console.groupEnd</p></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p>false</p></blockquote><ol><li>console.assert(boolValue, info);</li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p>console.logconsole.count</p></blockquote><ol><li>console.count(symbol)</li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p></p></blockquote><ol><li><p>console.time(symbol)</p></li><li><p>console.timeEnd(symbol)</p></li></ol><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p>console.trace </p><h3 id=\"DevTools\"><a href=\"#DevTools\" class=\"headerlink\" title=\"DevTools\"></a>DevTools</h3><hr><p><img src=\"dev-tools-debug.png\" alt=\"life is strange\"></p><ol><li></li><li>/</li></ol>"},{"title":"ES5ES6Promise","catalog":true,"toc_nav_num":true,"date":"2018-10-30T17:15:00.000Z","subtitle":"es6 promise","header-img":"article_header.png","updateDate":"2018-10-30T17:15:00.000Z","_content":"\n![life is strange](lifeIsStrange.jpg)\n\n[ => github / nojsja / promise-self](https://github.com/NoJsJa/promise-nojsja)\n\n### \n\n1. Promise\n2. Promise\n3. \n\n### Promise\n---------------\n\n>Promise Promise\nhandlers \npromise  \n\n>pending  Promise fulfilled \nrejectedPromise \nthen handlers thenonfulfilled\n onrejected Function Promisefulfilled then \nonfulfilled Promiserejected then  onrejected \n  \n\n####  Promise\n * pending:   \n * fulfilled:   \n * rejected:   \n\n#### Javascript\njs[](https://zhuanlan.zhihu.com/p/33058983)\n * Promise\n * Promise.thenonResolve, onReject  \n\npromiseba\n```js\nvar p1 = new Promise(function (resolve, reject) {\n  resolve('a');\n}).then(function (value) {\n  console.log(value);\n});\n\nconsole.log('b');\n\n// result => b a\n\n```\n\n#### Promise.all(iterable)\npromisepromiseiterablepromise\niterablepromisepromise\npromiseiterablepromise\niterablepromise\niterablepromisePromise.allpromise\n\n#### Promise.race(iterable)\niterablepromisepromisepromise\npromisepromise  \n\n#### Promise.reject(value) / Promise.resolve(value)\n()Promise()\nthenable(then)Promisethen\n(valuethen)Promisefulfilled\nvaluethenPromise\nPromise.resolve(value) Promise,valuePromise\n\n### Promise\n--------------------\n\n#### \nPromise.thenPromisethenPromisepromise.then(fn1, fn2).then(fn3, fn4).then(fn5, fn6)then success callback  fail callback PromisePromisePromisethen\n\n#### \nthenpromise.thenpromise.thenPromisePromisePromisethenthenPromisePromisethenPromisePromisePromisePromise.thenPromisePromisethenPromise`analysisPromise`Promise`reject``resolve`Promise\n\n* promise.then\n```js\n/**\n * [then PromisePromise]\n * @param  {[type]} successFn [description]\n * @param  {[type]} errorFn   [description]\n */\nPromise.prototype.then = function (successCallback, errorCallback) {\n\n  var promise, x;\n  var self = this;\n\n  if (self.status === 'fulfilled') {\n    promise = new Promise(function (resolve, reject) {\n      // delay to next event loop\n      setTimeout(function () {\n        try {\n          x = successCallback(self.value);\n          analysisPromise(x, resolve, reject);\n        } catch (e) {\n          reject(e);\n        }\n      });\n    });\n  }else if (self.status === 'rejected') {\n    promise = new Promise(function (resolve, reject) {\n      // delay to next event loop\n      setTimeout(function () {\n        try {\n          x = errorCallback(self.reason);\n          analysisPromise(x, resolve, reject);\n        } catch (e) {\n          reject(e);\n        }\n      });\n\n    });\n  }else if (self.status === 'pending') {\n    promise = new Promise(function (resolve, reject) {\n\n      // \n      setTimeout(function () {\n        self.onFulfilledCallbacks.push(function () {\n          try {\n            x = successCallback(self.value);\n            //   promise\n            analysisPromise(x, resolve, reject);\n          } catch (e) {\n            reject(e);\n          }\n        });\n\n        self.onRejectedCallbacks.push(function () {\n          try {\n            x = errorCallback ? errorCallback(self.reason) : undefined;\n            //   promise\n            analysisPromise(x, resolve, reject);\n          } catch (e) {\n            reject(e);\n          }\n        });\n      })\n    });\n\n  }\n\n  return promise;\n};\n```\n* analysisPromise\n```js\n/**\n * [analysisPromise ]\n * @param  {[Any]} x        [value]\n * @param  {[Func]} resolve [get into success state]\n * @param  {[Func]} reject  [get into fail state]\n */\nvar analysisPromise = function (x, resolve, reject) {\n\n  var then, y;\n  if (x !== undefined && (typeof x === 'object' || typeof x === 'function')) {\n    then = x.then;\n    // obj Promise\n    if (then && typeof then === 'function') {\n      then.call(x, function (value) {\n        // callback return a promise\n        analysisPromise(value, resolve, reject);\n      }, function (error) {\n        reject(error);\n      });\n    // normal\n    }else {\n      resolve(x);\n    }\n  // normal\n  }else {\n    resolve(x);\n  }\n};\n```\n\n#### \n* catch  \n\n```js\nPromise.prototype.catch = function (handleError) {\n  if (this.status === 'pending') {\n    this.onRejectedCallbacks.push(handleError);\n  }else {\n    this.reason && handleError(this.reason);\n  }\n};\n```\n\n* all  \nallpromise.all([promise]).thenallPromisepromisepromisepromisethenpromisepromisepromise\n```js\nPromise.all = function (pArray) {\n  var rArray = [];\n  var promise = new Promise(function (resolve, reject) {\n\n    pArray.forEach(function (pr, i) {\n\n        if (pr instanceof Promise) {\n          pr.then(function (value1) {\n            analysisPromise(value1, function (value2) {\n              rArray[i] = value2;\n              if (rArray.length === pArray.length) {\n                resolve(rArray);\n              }\n            }, reject);\n\n          }, function (error) {\n            reject(error);\n          });\n\n        }else {\n          rArray[i] = pr;\n          if (rArray.length === pArray.length) {\n            resolve(rArray);\n          }\n        }\n\n    });\n\n  });\n\n  return promise;\n};\n```\n\n* race  \nracepromisepromiseallrace\n```js\nPromise.race = function (pArray) {\n  var rArray = [];\n  var promise = new Promise(function (resolve, reject) {\n    pArray.forEach(function (pr, i) {\n        if (pr instanceof Promise) {\n          pr.then(function (value) {\n            analysisPromise(value, resolve, reject);\n          }, function (error) {\n            reject(error);\n          });\n        }else {\n          rArray[i] = pr;\n        }\n    });\n  });\n\n  return promise;\n};\n```\n\n*  Promise.resolve  Promise.reject\npromise\n```js\nPromise.resolve = function (value) {\n  return new Promise(function (resolve, reject) {\n      resolve(value);\n  });\n};\nPromise.reject = function (reason) {\n  return new Promise(function (resolve, reject) {\n      reject(reason);\n  });\n};\n```\n\n### \n--------\nPromise(`analysisPromise`)promise``promise`Promise.all``Promise.race`promise\n","source":"_posts/2018-10-31-ES5ES6Promise.md","raw":"---\ntitle: \"ES5ES6Promise\"\ncatalog: true\ntoc_nav_num: true\ndate: 2018-10-31 01:15:00\nsubtitle: \"es6 promise\"\nheader-img: \"article_header.png\"\ntags:\n- promise\n- es6\ncategories:\n- Javascript\nupdateDate: 2018-10-31 01:15:00\n---\n\n![life is strange](lifeIsStrange.jpg)\n\n[ => github / nojsja / promise-self](https://github.com/NoJsJa/promise-nojsja)\n\n### \n\n1. Promise\n2. Promise\n3. \n\n### Promise\n---------------\n\n>Promise Promise\nhandlers \npromise  \n\n>pending  Promise fulfilled \nrejectedPromise \nthen handlers thenonfulfilled\n onrejected Function Promisefulfilled then \nonfulfilled Promiserejected then  onrejected \n  \n\n####  Promise\n * pending:   \n * fulfilled:   \n * rejected:   \n\n#### Javascript\njs[](https://zhuanlan.zhihu.com/p/33058983)\n * Promise\n * Promise.thenonResolve, onReject  \n\npromiseba\n```js\nvar p1 = new Promise(function (resolve, reject) {\n  resolve('a');\n}).then(function (value) {\n  console.log(value);\n});\n\nconsole.log('b');\n\n// result => b a\n\n```\n\n#### Promise.all(iterable)\npromisepromiseiterablepromise\niterablepromisepromise\npromiseiterablepromise\niterablepromise\niterablepromisePromise.allpromise\n\n#### Promise.race(iterable)\niterablepromisepromisepromise\npromisepromise  \n\n#### Promise.reject(value) / Promise.resolve(value)\n()Promise()\nthenable(then)Promisethen\n(valuethen)Promisefulfilled\nvaluethenPromise\nPromise.resolve(value) Promise,valuePromise\n\n### Promise\n--------------------\n\n#### \nPromise.thenPromisethenPromisepromise.then(fn1, fn2).then(fn3, fn4).then(fn5, fn6)then success callback  fail callback PromisePromisePromisethen\n\n#### \nthenpromise.thenpromise.thenPromisePromisePromisethenthenPromisePromisethenPromisePromisePromisePromise.thenPromisePromisethenPromise`analysisPromise`Promise`reject``resolve`Promise\n\n* promise.then\n```js\n/**\n * [then PromisePromise]\n * @param  {[type]} successFn [description]\n * @param  {[type]} errorFn   [description]\n */\nPromise.prototype.then = function (successCallback, errorCallback) {\n\n  var promise, x;\n  var self = this;\n\n  if (self.status === 'fulfilled') {\n    promise = new Promise(function (resolve, reject) {\n      // delay to next event loop\n      setTimeout(function () {\n        try {\n          x = successCallback(self.value);\n          analysisPromise(x, resolve, reject);\n        } catch (e) {\n          reject(e);\n        }\n      });\n    });\n  }else if (self.status === 'rejected') {\n    promise = new Promise(function (resolve, reject) {\n      // delay to next event loop\n      setTimeout(function () {\n        try {\n          x = errorCallback(self.reason);\n          analysisPromise(x, resolve, reject);\n        } catch (e) {\n          reject(e);\n        }\n      });\n\n    });\n  }else if (self.status === 'pending') {\n    promise = new Promise(function (resolve, reject) {\n\n      // \n      setTimeout(function () {\n        self.onFulfilledCallbacks.push(function () {\n          try {\n            x = successCallback(self.value);\n            //   promise\n            analysisPromise(x, resolve, reject);\n          } catch (e) {\n            reject(e);\n          }\n        });\n\n        self.onRejectedCallbacks.push(function () {\n          try {\n            x = errorCallback ? errorCallback(self.reason) : undefined;\n            //   promise\n            analysisPromise(x, resolve, reject);\n          } catch (e) {\n            reject(e);\n          }\n        });\n      })\n    });\n\n  }\n\n  return promise;\n};\n```\n* analysisPromise\n```js\n/**\n * [analysisPromise ]\n * @param  {[Any]} x        [value]\n * @param  {[Func]} resolve [get into success state]\n * @param  {[Func]} reject  [get into fail state]\n */\nvar analysisPromise = function (x, resolve, reject) {\n\n  var then, y;\n  if (x !== undefined && (typeof x === 'object' || typeof x === 'function')) {\n    then = x.then;\n    // obj Promise\n    if (then && typeof then === 'function') {\n      then.call(x, function (value) {\n        // callback return a promise\n        analysisPromise(value, resolve, reject);\n      }, function (error) {\n        reject(error);\n      });\n    // normal\n    }else {\n      resolve(x);\n    }\n  // normal\n  }else {\n    resolve(x);\n  }\n};\n```\n\n#### \n* catch  \n\n```js\nPromise.prototype.catch = function (handleError) {\n  if (this.status === 'pending') {\n    this.onRejectedCallbacks.push(handleError);\n  }else {\n    this.reason && handleError(this.reason);\n  }\n};\n```\n\n* all  \nallpromise.all([promise]).thenallPromisepromisepromisepromisethenpromisepromisepromise\n```js\nPromise.all = function (pArray) {\n  var rArray = [];\n  var promise = new Promise(function (resolve, reject) {\n\n    pArray.forEach(function (pr, i) {\n\n        if (pr instanceof Promise) {\n          pr.then(function (value1) {\n            analysisPromise(value1, function (value2) {\n              rArray[i] = value2;\n              if (rArray.length === pArray.length) {\n                resolve(rArray);\n              }\n            }, reject);\n\n          }, function (error) {\n            reject(error);\n          });\n\n        }else {\n          rArray[i] = pr;\n          if (rArray.length === pArray.length) {\n            resolve(rArray);\n          }\n        }\n\n    });\n\n  });\n\n  return promise;\n};\n```\n\n* race  \nracepromisepromiseallrace\n```js\nPromise.race = function (pArray) {\n  var rArray = [];\n  var promise = new Promise(function (resolve, reject) {\n    pArray.forEach(function (pr, i) {\n        if (pr instanceof Promise) {\n          pr.then(function (value) {\n            analysisPromise(value, resolve, reject);\n          }, function (error) {\n            reject(error);\n          });\n        }else {\n          rArray[i] = pr;\n        }\n    });\n  });\n\n  return promise;\n};\n```\n\n*  Promise.resolve  Promise.reject\npromise\n```js\nPromise.resolve = function (value) {\n  return new Promise(function (resolve, reject) {\n      resolve(value);\n  });\n};\nPromise.reject = function (reason) {\n  return new Promise(function (resolve, reject) {\n      reject(reason);\n  });\n};\n```\n\n### \n--------\nPromise(`analysisPromise`)promise``promise`Promise.all``Promise.race`promise\n","slug":"ES5ES6Promise","published":1,"updated":"2018-10-31T02:41:12.256Z","_id":"cjnwjzli5000uin95f2uubsvh","comments":1,"layout":"post","photos":[],"link":"","content":"<p><img src=\"lifeIsStrange.jpg\" alt=\"life is strange\"></p><p><a href=\"https://github.com/NoJsJa/promise-nojsja\" target=\"_blank\" rel=\"noopener\"> =&gt; github / nojsja / promise-self</a></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol><li>Promise</li><li>Promise</li><li></li></ol><h3 id=\"Promise\"><a href=\"#Promise\" class=\"headerlink\" title=\"Promise\"></a>Promise</h3><hr><blockquote><p>Promise Promise<br>handlers <br>promise</p><p>pending  Promise fulfilled <br>rejectedPromise <br>then handlers thenonfulfilled<br> onrejected Function Promisefulfilled then <br>onfulfilled Promiserejected then  onrejected <br></p></blockquote><h4 id=\"-Promise\"><a href=\"#-Promise\" class=\"headerlink\" title=\" Promise\"></a> Promise</h4><ul><li>pending: </li><li>fulfilled: </li><li>rejected: </li></ul><h4 id=\"Javascript\"><a href=\"#Javascript\" class=\"headerlink\" title=\"Javascript\"></a>Javascript</h4><p>js<a href=\"https://zhuanlan.zhihu.com/p/33058983\" target=\"_blank\" rel=\"noopener\"></a></p><ul><li>Promise</li><li>Promise.thenonResolve, onReject</li></ul><p>promiseba<br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> p1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">  resolve(<span class=\"string\">'a'</span>);</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(value);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'b'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// result =&gt; b a</span></span><br></pre></td></tr></table></figure><p></p><h4 id=\"Promise-all-iterable\"><a href=\"#Promise-all-iterable\" class=\"headerlink\" title=\"Promise.all(iterable)\"></a>Promise.all(iterable)</h4><p>promisepromiseiterablepromise<br>iterablepromisepromise<br>promiseiterablepromise<br>iterablepromise<br>iterablepromisePromise.allpromise</p><h4 id=\"Promise-race-iterable\"><a href=\"#Promise-race-iterable\" class=\"headerlink\" title=\"Promise.race(iterable)\"></a>Promise.race(iterable)</h4><p>iterablepromisepromisepromise<br>promisepromise</p><h4 id=\"Promise-reject-value-Promise-resolve-value\"><a href=\"#Promise-reject-value-Promise-resolve-value\" class=\"headerlink\" title=\"Promise.reject(value) / Promise.resolve(value)\"></a>Promise.reject(value) / Promise.resolve(value)</h4><p>()Promise()<br>thenable(then)Promisethen<br>(valuethen)Promisefulfilled<br>valuethenPromise<br>Promise.resolve(value) Promise,valuePromise</p><h3 id=\"Promise\"><a href=\"#Promise\" class=\"headerlink\" title=\"Promise\"></a>Promise</h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Promise.thenPromisethenPromisepromise.then(fn1, fn2).then(fn3, fn4).then(fn5, fn6)then success callback  fail callback PromisePromisePromisethen</p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>thenpromise.thenpromise.thenPromisePromisePromisethenthenPromisePromisethenPromisePromisePromisePromise.thenPromisePromisethenPromise<code>analysisPromise</code>Promise<code>reject</code><code>resolve</code>Promise</p><ul><li>promise.then<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [then PromisePromise]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[type]&#125;</span> </span>successFn [description]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[type]&#125;</span> </span>errorFn   [description]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.prototype.then = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">successCallback, errorCallback</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> promise, x;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (self.status === <span class=\"string\">'fulfilled'</span>) &#123;</span><br><span class=\"line\">    promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">// delay to next event loop</span></span><br><span class=\"line\">      setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          x = successCallback(self.value);</span><br><span class=\"line\">          analysisPromise(x, resolve, reject);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">          reject(e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (self.status === <span class=\"string\">'rejected'</span>) &#123;</span><br><span class=\"line\">    promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">// delay to next event loop</span></span><br><span class=\"line\">      setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          x = errorCallback(self.reason);</span><br><span class=\"line\">          analysisPromise(x, resolve, reject);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">          reject(e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (self.status === <span class=\"string\">'pending'</span>) &#123;</span><br><span class=\"line\">    promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        self.onFulfilledCallbacks.push(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">          <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            x = successCallback(self.value);</span><br><span class=\"line\">            <span class=\"comment\">//   promise</span></span><br><span class=\"line\">            analysisPromise(x, resolve, reject);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">            reject(e);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        self.onRejectedCallbacks.push(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">          <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            x = errorCallback ? errorCallback(self.reason) : <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">            <span class=\"comment\">//   promise</span></span><br><span class=\"line\">            analysisPromise(x, resolve, reject);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">            reject(e);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> promise;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li><li>analysisPromise<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [analysisPromise ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Any]&#125;</span> </span>x        [value]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Func]&#125;</span> </span>resolve [get into success state]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Func]&#125;</span> </span>reject  [get into fail state]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> analysisPromise = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">x, resolve, reject</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> then, y;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (x !== <span class=\"literal\">undefined</span> &amp;&amp; (<span class=\"keyword\">typeof</span> x === <span class=\"string\">'object'</span> || <span class=\"keyword\">typeof</span> x === <span class=\"string\">'function'</span>)) &#123;</span><br><span class=\"line\">    then = x.then;</span><br><span class=\"line\">    <span class=\"comment\">// obj Promise</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (then &amp;&amp; <span class=\"keyword\">typeof</span> then === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      then.call(x, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// callback return a promise</span></span><br><span class=\"line\">        analysisPromise(value, resolve, reject);</span><br><span class=\"line\">      &#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">        reject(error);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    <span class=\"comment\">// normal</span></span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      resolve(x);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"comment\">// normal</span></span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    resolve(x);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li><p>catch<br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.prototype.catch = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">handleError</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.status === <span class=\"string\">'pending'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.onRejectedCallbacks.push(handleError);</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.reason &amp;&amp; handleError(<span class=\"keyword\">this</span>.reason);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>all<br>allpromise.all([promise]).thenallPromisepromisepromisepromisethenpromisepromisepromise</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.all = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">pArray</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rArray = [];</span><br><span class=\"line\">  <span class=\"keyword\">var</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    pArray.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">pr, i</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pr <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Promise</span>) &#123;</span><br><span class=\"line\">          pr.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value1</span>) </span>&#123;</span><br><span class=\"line\">            analysisPromise(value1, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value2</span>) </span>&#123;</span><br><span class=\"line\">              rArray[i] = value2;</span><br><span class=\"line\">              <span class=\"keyword\">if</span> (rArray.length === pArray.length) &#123;</span><br><span class=\"line\">                resolve(rArray);</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            &#125;, reject);</span><br><span class=\"line\"></span><br><span class=\"line\">          &#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">            reject(error);</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          rArray[i] = pr;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (rArray.length === pArray.length) &#123;</span><br><span class=\"line\">            resolve(rArray);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> promise;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>race<br>racepromisepromiseallrace</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.race = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">pArray</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rArray = [];</span><br><span class=\"line\">  <span class=\"keyword\">var</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">    pArray.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">pr, i</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pr <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Promise</span>) &#123;</span><br><span class=\"line\">          pr.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">            analysisPromise(value, resolve, reject);</span><br><span class=\"line\">          &#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">            reject(error);</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          rArray[i] = pr;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> promise;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li><li><p> Promise.resolve  Promise.reject<br>promise</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">      resolve(value);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.reject = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">reason</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">      reject(reason);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p>Promise(<code>analysisPromise</code>)promise<code></code>promise<code>Promise.all</code><code>Promise.race</code>promise</p>","site":{"data":{}},"excerpt":"","more":"<p><img src=\"lifeIsStrange.jpg\" alt=\"life is strange\"></p><p><a href=\"https://github.com/NoJsJa/promise-nojsja\" target=\"_blank\" rel=\"noopener\"> =&gt; github / nojsja / promise-self</a></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol><li>Promise</li><li>Promise</li><li></li></ol><h3 id=\"Promise\"><a href=\"#Promise\" class=\"headerlink\" title=\"Promise\"></a>Promise</h3><hr><blockquote><p>Promise Promise<br>handlers <br>promise</p><p>pending  Promise fulfilled <br>rejectedPromise <br>then handlers thenonfulfilled<br> onrejected Function Promisefulfilled then <br>onfulfilled Promiserejected then  onrejected <br></p></blockquote><h4 id=\"-Promise\"><a href=\"#-Promise\" class=\"headerlink\" title=\" Promise\"></a> Promise</h4><ul><li>pending: </li><li>fulfilled: </li><li>rejected: </li></ul><h4 id=\"Javascript\"><a href=\"#Javascript\" class=\"headerlink\" title=\"Javascript\"></a>Javascript</h4><p>js<a href=\"https://zhuanlan.zhihu.com/p/33058983\" target=\"_blank\" rel=\"noopener\"></a></p><ul><li>Promise</li><li>Promise.thenonResolve, onReject</li></ul><p>promiseba<br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> p1 = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">  resolve(<span class=\"string\">'a'</span>);</span><br><span class=\"line\">&#125;).then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(value);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">console</span>.log(<span class=\"string\">'b'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// result =&gt; b a</span></span><br></pre></td></tr></table></figure><p></p><h4 id=\"Promise-all-iterable\"><a href=\"#Promise-all-iterable\" class=\"headerlink\" title=\"Promise.all(iterable)\"></a>Promise.all(iterable)</h4><p>promisepromiseiterablepromise<br>iterablepromisepromise<br>promiseiterablepromise<br>iterablepromise<br>iterablepromisePromise.allpromise</p><h4 id=\"Promise-race-iterable\"><a href=\"#Promise-race-iterable\" class=\"headerlink\" title=\"Promise.race(iterable)\"></a>Promise.race(iterable)</h4><p>iterablepromisepromisepromise<br>promisepromise</p><h4 id=\"Promise-reject-value-Promise-resolve-value\"><a href=\"#Promise-reject-value-Promise-resolve-value\" class=\"headerlink\" title=\"Promise.reject(value) / Promise.resolve(value)\"></a>Promise.reject(value) / Promise.resolve(value)</h4><p>()Promise()<br>thenable(then)Promisethen<br>(valuethen)Promisefulfilled<br>valuethenPromise<br>Promise.resolve(value) Promise,valuePromise</p><h3 id=\"Promise\"><a href=\"#Promise\" class=\"headerlink\" title=\"Promise\"></a>Promise</h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Promise.thenPromisethenPromisepromise.then(fn1, fn2).then(fn3, fn4).then(fn5, fn6)then success callback  fail callback PromisePromisePromisethen</p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>thenpromise.thenpromise.thenPromisePromisePromisethenthenPromisePromisethenPromisePromisePromisePromise.thenPromisePromisethenPromise<code>analysisPromise</code>Promise<code>reject</code><code>resolve</code>Promise</p><ul><li>promise.then<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [then PromisePromise]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[type]&#125;</span> </span>successFn [description]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[type]&#125;</span> </span>errorFn   [description]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.prototype.then = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">successCallback, errorCallback</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> promise, x;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> self = <span class=\"keyword\">this</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">if</span> (self.status === <span class=\"string\">'fulfilled'</span>) &#123;</span><br><span class=\"line\">    promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">// delay to next event loop</span></span><br><span class=\"line\">      setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          x = successCallback(self.value);</span><br><span class=\"line\">          analysisPromise(x, resolve, reject);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">          reject(e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (self.status === <span class=\"string\">'rejected'</span>) &#123;</span><br><span class=\"line\">    promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">      <span class=\"comment\">// delay to next event loop</span></span><br><span class=\"line\">      setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">          x = errorCallback(self.reason);</span><br><span class=\"line\">          analysisPromise(x, resolve, reject);</span><br><span class=\"line\">        &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">          reject(e);</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span> <span class=\"keyword\">if</span> (self.status === <span class=\"string\">'pending'</span>) &#123;</span><br><span class=\"line\">    promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// </span></span><br><span class=\"line\">      setTimeout(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">        self.onFulfilledCallbacks.push(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">          <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            x = successCallback(self.value);</span><br><span class=\"line\">            <span class=\"comment\">//   promise</span></span><br><span class=\"line\">            analysisPromise(x, resolve, reject);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">            reject(e);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        self.onRejectedCallbacks.push(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">          <span class=\"keyword\">try</span> &#123;</span><br><span class=\"line\">            x = errorCallback ? errorCallback(self.reason) : <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">            <span class=\"comment\">//   promise</span></span><br><span class=\"line\">            analysisPromise(x, resolve, reject);</span><br><span class=\"line\">          &#125; <span class=\"keyword\">catch</span> (e) &#123;</span><br><span class=\"line\">            reject(e);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\">      &#125;)</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> promise;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li><li>analysisPromise<figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [analysisPromise ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Any]&#125;</span> </span>x        [value]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Func]&#125;</span> </span>resolve [get into success state]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Func]&#125;</span> </span>reject  [get into fail state]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> analysisPromise = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">x, resolve, reject</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> then, y;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (x !== <span class=\"literal\">undefined</span> &amp;&amp; (<span class=\"keyword\">typeof</span> x === <span class=\"string\">'object'</span> || <span class=\"keyword\">typeof</span> x === <span class=\"string\">'function'</span>)) &#123;</span><br><span class=\"line\">    then = x.then;</span><br><span class=\"line\">    <span class=\"comment\">// obj Promise</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (then &amp;&amp; <span class=\"keyword\">typeof</span> then === <span class=\"string\">'function'</span>) &#123;</span><br><span class=\"line\">      then.call(x, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">// callback return a promise</span></span><br><span class=\"line\">        analysisPromise(value, resolve, reject);</span><br><span class=\"line\">      &#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">        reject(error);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    <span class=\"comment\">// normal</span></span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      resolve(x);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  <span class=\"comment\">// normal</span></span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    resolve(x);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li><p>catch<br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.prototype.catch = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">handleError</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.status === <span class=\"string\">'pending'</span>) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.onRejectedCallbacks.push(handleError);</span><br><span class=\"line\">  &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.reason &amp;&amp; handleError(<span class=\"keyword\">this</span>.reason);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>all<br>allpromise.all([promise]).thenallPromisepromisepromisepromisethenpromisepromisepromise</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.all = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">pArray</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rArray = [];</span><br><span class=\"line\">  <span class=\"keyword\">var</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    pArray.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">pr, i</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pr <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Promise</span>) &#123;</span><br><span class=\"line\">          pr.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value1</span>) </span>&#123;</span><br><span class=\"line\">            analysisPromise(value1, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value2</span>) </span>&#123;</span><br><span class=\"line\">              rArray[i] = value2;</span><br><span class=\"line\">              <span class=\"keyword\">if</span> (rArray.length === pArray.length) &#123;</span><br><span class=\"line\">                resolve(rArray);</span><br><span class=\"line\">              &#125;</span><br><span class=\"line\">            &#125;, reject);</span><br><span class=\"line\"></span><br><span class=\"line\">          &#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">            reject(error);</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          rArray[i] = pr;</span><br><span class=\"line\">          <span class=\"keyword\">if</span> (rArray.length === pArray.length) &#123;</span><br><span class=\"line\">            resolve(rArray);</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> promise;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li><li><p>race<br>racepromisepromiseallrace</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.race = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">pArray</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> rArray = [];</span><br><span class=\"line\">  <span class=\"keyword\">var</span> promise = <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">    pArray.forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">pr, i</span>) </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (pr <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Promise</span>) &#123;</span><br><span class=\"line\">          pr.then(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">            analysisPromise(value, resolve, reject);</span><br><span class=\"line\">          &#125;, <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">error</span>) </span>&#123;</span><br><span class=\"line\">            reject(error);</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">          rArray[i] = pr;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> promise;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li><li><p> Promise.resolve  Promise.reject<br>promise</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">Promise</span>.resolve = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">value</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">      resolve(value);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"><span class=\"built_in\">Promise</span>.reject = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">reason</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Promise</span>(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">resolve, reject</span>) </span>&#123;</span><br><span class=\"line\">      reject(reason);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure></li></ul><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p>Promise(<code>analysisPromise</code>)promise<code></code>promise<code>Promise.all</code><code>Promise.race</code>promise</p>"},{"title":"Javascripttootips","catalog":true,"toc_nav_num":true,"date":"2018-11-06T11:16:00.000Z","subtitle":"animation javascript","header-img":"article_header.png","updateDate":"2018-11-06T11:16:00.000Z","_content":"\n#### \n\n> jQuerytootipshtmltootipstootipstootipstootipstootips\n\n![tootip.png](tootip.png)\n\n#### \n----------------\n\n[=> ](https://github.com/NoJsJa/javascript-learning/tree/master/normal/js-tooltips)\n\n![animation.gif](tootips.gif)\n\n#### \n------------\n\n##### \n```js\n var Tootips = (function () {\n  \n  /*  */\n  var utils = {\n    ...\n  }\n \n\n  /**\n   * [renderContainer html]\n   * @param  {[Object]} options   []\n   * @param  {[String]} type   [ -> text | html]\n   * @param  {[String]} target   []\n   */\n  function renderContainer($selector, tootipKey) {\n   ...\n };\n\n\n /**\n  * [showTootips ]\n  * @param  {[$Object]} $selector []\n  * @param  {[String]} tootipKey [tooptips]\n  */\n function showTootips($selector) {\n   ...\n };\n\n /**\n  * [hideTooTips ]\n  * @param  {[$Object]} $selector []\n  */\n function hideTooTips($selector) {\n   ...\n };\n\n\n /**\n  * [eventListen ]\n  * @param  {[$Object]} $selector []\n  * @param  {[String]} trigger []\n  */\n function eventListen($selector, _trigger, $context) {\n   ...\n }\n\n /**\n  * [renderHtml html]\n  * @param  {[$Object]} $selector []\n  * @param  {[String]} htmlstr   [html]\n  * @param  {[Object]} options   []\n  */\n function init(_$selector, _options) {\n   ...\n }\n\n return {\n   init: init,\n\n   /**\n   * [trigger ]\n   * @param  {[$Object]} $selector []\n   */\n   trigger: function($selector) {\n    if (!utils.element.getData($selector, 'isActivated')) {\n      showTootips($selector, utils.element.getAttr($selector, 'tootip-key'));\n    }else {\n      hideTooTips($selector);\n    }\n  },\n\n  /**\n  * [getStatus ]\n  * @param  {[$Object]} $selector []\n  */\n   status: function ($selector) {\n    return {\n      isActivated: utils.element.getData($selector, 'isActivated') ? true : false,\n      isInited: utils.element.getAttr($selector, 'tootip-key') ? true : false,\n      key: utils.element.getAttr($selector, 'tootip-key') || null,\n    };\n  },\n }\n})();\n\n```\n\n#### \n\n>domjQueryAPI\n\n```js\nvar utils = {\n    actions: {\n      // [symbol]: [Timer]\n    },\n    element: {\n     jsonWrapper: function(target) {\n       var jsonParseRule = /^\\{\"([\\w\\W])+\\}$/;\n       if (jsonParseRule.test(target)) return JSON.parse(target);\n       return (typeof target === 'object' && target !== null) ?\n         JSON.stringify(target) :\n         target;\n     },\n     elementWrapper: function($element) {\n       return (typeof $element === 'object') ? $element : document.querySelector($element);\n     },\n     setAttr: function($element, key, value) {\n       $element = this.elementWrapper($element);\n       (key) && $element.setAttribute(key, this.jsonWrapper(value));\n       return this;\n     },\n     setCss: function($element, styleKey, styleValue, important) {\n       $element = this.elementWrapper($element);\n       $element.style.setProperty(styleKey, styleValue, important === 'important' ? important : undefined);\n       return this;\n     },\n     getAttr: function($element, key) {\n       $element = this.elementWrapper($element);\n       return (key) ? this.jsonWrapper($element.getAttribute(key)) : undefined;\n     },\n     setData: function($element, key, value) {\n       $element = this.elementWrapper($element);\n       (key) && this.setAttr($element, 'data-' + key, value);\n       return this;\n     },\n     getData: function($element, key) {\n       $element = this.elementWrapper($element);\n       return key ? this.getAttr($element, 'data-' + key) : undefined;\n     },\n     addClass: function($element, className) {\n       $element = this.elementWrapper($element);\n       var classes = $element.className.split(' ');\n       if (!classes.includes(className)) {\n         classes.push(className);\n         $element.className = classes.join(' ');\n       }\n       return this;\n     },\n     removeClass: function($element, className) {\n       $element = this.elementWrapper($element);\n       var classes = $element.className.split(' ');\n       var index = classes.indexOf(className);\n       if (index !== -1) {\n         classes.splice(index, 1);\n         $element.className = classes.join(' ');\n       }\n       return this;\n     },\n     empty: function($element) {\n       $element = this.elementWrapper($element);\n       $element.innerHTML = '';\n     },\n     html: function($element, htmlStr) {\n       $element = this.elementWrapper($element);\n       $element.innerHTML = htmlStr;\n     }\n    },\n   /*  */\n   renderX1: function (r, d) {\n     if (d === 'top' || d === 'bottom')\n       return (r.x + r.width / 2 + 'px');\n     if (d === 'left')\n       return (r.x - 6 + 'px');\n     if (d === 'right')\n       return (r.x + r.width + 6 + 'px');\n     if (d === 'bottomleft' || d === 'topleft')\n       return (r.x + 'px');\n     if (d === 'bottomright' || d === 'topright')\n       return (r.x + r.width + 'px');\n   },\n   renderY1: function (r, d) {\n     if (d === 'top')\n       return (r.y - 6 + 'px');\n     if (d === 'left' || d === 'right')\n       return (r.y + r.height / 2 + 'px');\n     if (d === 'bottom')\n       return (r.y + r.height + 6 + 'px');\n     if (d === 'bottomleft' || d === 'bottomright')\n       return (r.y + r.height + 'px');\n     if (d === 'topleft' || d === 'topright')\n       return (r.y + 'px');\n   },\n   /* tootips */\n   renderX2: function (r, d) {\n     if (d === 'top' || d === 'bottom')\n       return (r.x - r.width / 2 + 'px');\n     if (d === 'left' || d === 'bottomleft' || d === 'topleft')\n       return (r.x - r.width + 'px');\n     if (d === 'right')\n       return (r.x + 'px');\n     if (d === 'bottomright' || d === 'topright')\n      return (r.x + r.widht + 'px');\n   },\n   renderY2: function (r, d) {\n     if (d === 'top' || d === 'topleft' || d === 'topright')\n       return (r.y - r.height + 'px');\n     if (d === 'left' || d === 'right')\n       return (r.y - r.height / 2 + 'px');\n     if (d === 'bottom' || d === 'bottomleft' || d === 'bottomright')\n       return (r.y + 'px');\n   },\n   /*  */\n   actionDebounce: function(symbol, action, params) {\n     var that = this;\n     var timer = setTimeout(function() {\n       action(params);\n       clearTimeout(timer);\n       delete that.actions[symbol];\n     }, 300);\n \n     if (!that.actions[symbol]) {\n       that.actions[symbol] = timer;\n     } else {\n       clearTimeout(that.actions[symbol]);\n       that.actions[symbol] = timer;\n     }\n   }\n }\n```\n\n##### \n> html\n\n```js\n/**\n * [renderHtml html]\n * @param  {[$Object]} $selector []\n * @param  {[String]} htmlstr   [html]\n * @param  {[Object]} options   []\n */\nfunction init(_$selector, _options) {\n\n  var $selector = utils.element.elementWrapper(_$selector),\n      trigger = _options['trigger'] ? _options['trigger'] : 'mouseover', // click | hover\n      $context = utils.element.elementWrapper(_options['context']),\n      key = utils.element.getAttr($selector, 'tootip-key');\n   \n   utils.element.setData($selector, 'tootip-target', _options.value)\n     .setData($selector, 'tootip-type', _options.type)\n     .setData($selector, 'tootip-options', _options)\n     .setData($selector, 'tootip-trigger', _options.trigger)\n     .setCss($selector, 'cursor', 'pointer');\n\n  (!key) && eventListen($selector, trigger, $context);\n}\n```\n\n##### tootips\n\n* `getBoundingClientRect()`\n* tootips(`position: fixed`)\n* tootips\n* dom\n\n\n```js\n/**\n   * [renderContainer html]\n   * @param  {[Object]} options   []\n   * @param  {[String]} type   [ -> text | html]\n   * @param  {[String]} target   []\n   */\n  function renderContainer($selector, tootipKey) {\n   var type = utils.element.getData($selector, 'tootip-type'),\n      options = utils.element.getData($selector, 'tootip-options'),\n      trigger = utils.element.getData($selector, 'tootip-trigger'),\n      target = utils.element.getData($selector, 'tootip-target');\n\n   // \n   var randomKey = '_' + Math.random().toString(36).substr(2);\n   var $wrapper = tootipKey ? utils.element.elementWrapper('div[tootip-key='+tootipKey+']') : document.createElement('div');\n   var cssStyle = options.style || {};\n   var styleSheet = options.css || '';\n   var direction = options.direction || 'top';\n   var triangleArray = ['top', 'left', 'right','bottom'];\n   var triangleClass = 'triangle-' +\n     triangleArray[triangleArray.length - 1 - triangleArray.indexOf(direction)];\n   var shadowClassMap = {\n     top: 'tootip-shadow-top-right',\n     bottom: 'tootip-shadow-bottom-right',\n     left: 'tootip-shadow-top-left',\n     right: 'tootip-shadow-top-right',\n   }\n   var rect = $selector.getBoundingClientRect();\n\n   utils.element.setCss($wrapper, 'border', 'solid 1px rgb(212, 212, 212)')\n    .setCss($wrapper, 'position', 'fixed')\n    .setCss($wrapper, 'left', utils.renderX1(rect, direction))\n    .setCss($wrapper, 'top', utils.renderY1(rect, direction))\n    .setAttr($wrapper, 'tootip-key', tootipKey || randomKey)\n    .addClass($wrapper, triangleClass + ' abnormal-tips-container ' + shadowClassMap[direction] + ' ' + styleSheet);\n    utils.element.setAttr($selector, 'tootip-key', tootipKey || randomKey);\n\n   // dom\n   if (!tootipKey && trigger === 'mouseover') {\n     $wrapper.onmouseout = function () {\n       utils.actionDebounce(randomKey, hideTooTips, $selector);\n     };\n     $wrapper.onmouseover = function () {\n       utils.actionDebounce(randomKey, showTootips, $selector);\n     };\n   }\n\n   Object.keys(cssStyle).forEach(function (attr) {\n     utils.element.setCss($wrapper, attr, cssStyle[attr]);\n   });\n\n   utils.element.html($wrapper, type === 'html' ? target : ('<span>' + target +'</span>'));\n\n   return $wrapper;\n };\n```\n\n##### \n\n> tooltips(`click``mouse`)tootips\n\n`utils.actionDebounce`Tootip/\n\n```js\n/**\n  * [eventListen ]\n  * @param  {[$Object]} $selector []\n  * @param  {[String]} trigger []\n  */\n function eventListen($selector, _trigger, $context) {\n\n   var trigger = (_trigger instanceof Array) ? _trigger : [_trigger];\n\n   // click\n   if(trigger.includes('click')) {\n     ($context || $selector)\n       .onclick = function () {\n         if (!utils.element.getData($selector, 'isActivated')) {\n           utils.actionDebounce(utils.element.getAttr($selector, 'tootip-key'), showTootips, $selector);\n         } else {\n           utils.actionDebounce(utils.element.getAttr($selector, 'tootip-key'), hideTooTips, $selector);\n         }\n       };\n   } \n\n   // \n   if(trigger.includes('mouseover')) {\n     ($context || $selector)\n       .onmouseout = function () {\n         utils.actionDebounce(utils.element.getAttr($selector, 'tootip-key'), hideTooTips, $selector);\n       };\n     ($context || $selector)\n       .onmouseover = function () {\n         utils.actionDebounce(utils.element.getAttr($selector, 'tootip-key'), showTootips, $selector);\n       };\n   }\n }\n\n```\n\n* showTootips  \ntootipshtmltexttootipstootipsshowtootips`getBoundingClientRect()`tootips\n\n```js\n/**\n  * [showTootips ]\n  * @param  {[$Object]} $selector []\n  * @param  {[String]} tootipKey [tooptips]\n  */\n function showTootips($selector) {\n   if (utils.element.getData($selector, 'isActivated')) return;\n   var tootipKey = utils.element.getAttr($selector, 'tootip-key');\n   var $dom = renderContainer($selector, tootipKey);\n   if (!tootipKey) {\n     document.body.appendChild($dom);\n   } else {\n    utils.element.removeClass($dom, 'hidden');\n   }\n   utils.element.setData($selector, 'isActivated', true);\n\n   var options = utils.element.getData($selector, 'tootip-options');\n   var rect = $dom.getBoundingClientRect();\n\n   utils.element\n     .setCss($dom, 'top', utils.renderY2(rect, options.direction))\n     .setCss($dom, 'left', utils.renderX2(rect, options.direction));\n };\n```\n\n* hideTootips  \nhidetootipstootips`key``key`tootips\n\n```js\n/**\n  * [hideTooTips ]\n  * @param  {[$Object]} $selector []\n  */\n function hideTooTips($selector) {\n   var key = utils.element.getAttr($selector, 'tootip-key');\n   var $element = utils.element.elementWrapper('div[tootip-key='+key+']');\n   utils.element.addClass($element, 'hidden');\n   utils.element.setData($selector, 'isActivated', '');\n };\n```\n\n\n\n##### \n\n> tootips(html)(click / mouseover)css\n\n```js\nTootips.init(('#t1'), {\n  trigger: 'mouseover', // \n  type: 'html', // \n  value: '<h3>header</h3><p>body</p>', // \n  direction: 'top', // \n  style: { // tootips\n    'font-size': '1rem',\n    'color': 'red',\n    'min-width': '5rem',\n    'padding': '5px 10px',\n    'border-radius': '5px',\n    'background-color': 'white',\n  },\n  css: '', // tootips\n});\n```\n\n#### \n--------\n\n* tootipsjavasript\n* tootips`position: fixed`\n* `getBoundingClientRect()`\n* tootips\n* tootipshtml\n* tootips(`click` / `mouseover`)\n\n##### \n","source":"_posts/2018-11-06-Javascripttootips.md","raw":"---\ntitle: \"Javascripttootips\"\ncatalog: true\ntoc_nav_num: true\ndate:  2018-11-06 19:16:00\nsubtitle: \"animation javascript\"\nheader-img: \"article_header.png\"\ntags:\n- javascript\ncategories:\n- Javascript\nupdateDate: 2018-11-06 19:16:00\n---\n\n#### \n\n> jQuerytootipshtmltootipstootipstootipstootipstootips\n\n![tootip.png](tootip.png)\n\n#### \n----------------\n\n[=> ](https://github.com/NoJsJa/javascript-learning/tree/master/normal/js-tooltips)\n\n![animation.gif](tootips.gif)\n\n#### \n------------\n\n##### \n```js\n var Tootips = (function () {\n  \n  /*  */\n  var utils = {\n    ...\n  }\n \n\n  /**\n   * [renderContainer html]\n   * @param  {[Object]} options   []\n   * @param  {[String]} type   [ -> text | html]\n   * @param  {[String]} target   []\n   */\n  function renderContainer($selector, tootipKey) {\n   ...\n };\n\n\n /**\n  * [showTootips ]\n  * @param  {[$Object]} $selector []\n  * @param  {[String]} tootipKey [tooptips]\n  */\n function showTootips($selector) {\n   ...\n };\n\n /**\n  * [hideTooTips ]\n  * @param  {[$Object]} $selector []\n  */\n function hideTooTips($selector) {\n   ...\n };\n\n\n /**\n  * [eventListen ]\n  * @param  {[$Object]} $selector []\n  * @param  {[String]} trigger []\n  */\n function eventListen($selector, _trigger, $context) {\n   ...\n }\n\n /**\n  * [renderHtml html]\n  * @param  {[$Object]} $selector []\n  * @param  {[String]} htmlstr   [html]\n  * @param  {[Object]} options   []\n  */\n function init(_$selector, _options) {\n   ...\n }\n\n return {\n   init: init,\n\n   /**\n   * [trigger ]\n   * @param  {[$Object]} $selector []\n   */\n   trigger: function($selector) {\n    if (!utils.element.getData($selector, 'isActivated')) {\n      showTootips($selector, utils.element.getAttr($selector, 'tootip-key'));\n    }else {\n      hideTooTips($selector);\n    }\n  },\n\n  /**\n  * [getStatus ]\n  * @param  {[$Object]} $selector []\n  */\n   status: function ($selector) {\n    return {\n      isActivated: utils.element.getData($selector, 'isActivated') ? true : false,\n      isInited: utils.element.getAttr($selector, 'tootip-key') ? true : false,\n      key: utils.element.getAttr($selector, 'tootip-key') || null,\n    };\n  },\n }\n})();\n\n```\n\n#### \n\n>domjQueryAPI\n\n```js\nvar utils = {\n    actions: {\n      // [symbol]: [Timer]\n    },\n    element: {\n     jsonWrapper: function(target) {\n       var jsonParseRule = /^\\{\"([\\w\\W])+\\}$/;\n       if (jsonParseRule.test(target)) return JSON.parse(target);\n       return (typeof target === 'object' && target !== null) ?\n         JSON.stringify(target) :\n         target;\n     },\n     elementWrapper: function($element) {\n       return (typeof $element === 'object') ? $element : document.querySelector($element);\n     },\n     setAttr: function($element, key, value) {\n       $element = this.elementWrapper($element);\n       (key) && $element.setAttribute(key, this.jsonWrapper(value));\n       return this;\n     },\n     setCss: function($element, styleKey, styleValue, important) {\n       $element = this.elementWrapper($element);\n       $element.style.setProperty(styleKey, styleValue, important === 'important' ? important : undefined);\n       return this;\n     },\n     getAttr: function($element, key) {\n       $element = this.elementWrapper($element);\n       return (key) ? this.jsonWrapper($element.getAttribute(key)) : undefined;\n     },\n     setData: function($element, key, value) {\n       $element = this.elementWrapper($element);\n       (key) && this.setAttr($element, 'data-' + key, value);\n       return this;\n     },\n     getData: function($element, key) {\n       $element = this.elementWrapper($element);\n       return key ? this.getAttr($element, 'data-' + key) : undefined;\n     },\n     addClass: function($element, className) {\n       $element = this.elementWrapper($element);\n       var classes = $element.className.split(' ');\n       if (!classes.includes(className)) {\n         classes.push(className);\n         $element.className = classes.join(' ');\n       }\n       return this;\n     },\n     removeClass: function($element, className) {\n       $element = this.elementWrapper($element);\n       var classes = $element.className.split(' ');\n       var index = classes.indexOf(className);\n       if (index !== -1) {\n         classes.splice(index, 1);\n         $element.className = classes.join(' ');\n       }\n       return this;\n     },\n     empty: function($element) {\n       $element = this.elementWrapper($element);\n       $element.innerHTML = '';\n     },\n     html: function($element, htmlStr) {\n       $element = this.elementWrapper($element);\n       $element.innerHTML = htmlStr;\n     }\n    },\n   /*  */\n   renderX1: function (r, d) {\n     if (d === 'top' || d === 'bottom')\n       return (r.x + r.width / 2 + 'px');\n     if (d === 'left')\n       return (r.x - 6 + 'px');\n     if (d === 'right')\n       return (r.x + r.width + 6 + 'px');\n     if (d === 'bottomleft' || d === 'topleft')\n       return (r.x + 'px');\n     if (d === 'bottomright' || d === 'topright')\n       return (r.x + r.width + 'px');\n   },\n   renderY1: function (r, d) {\n     if (d === 'top')\n       return (r.y - 6 + 'px');\n     if (d === 'left' || d === 'right')\n       return (r.y + r.height / 2 + 'px');\n     if (d === 'bottom')\n       return (r.y + r.height + 6 + 'px');\n     if (d === 'bottomleft' || d === 'bottomright')\n       return (r.y + r.height + 'px');\n     if (d === 'topleft' || d === 'topright')\n       return (r.y + 'px');\n   },\n   /* tootips */\n   renderX2: function (r, d) {\n     if (d === 'top' || d === 'bottom')\n       return (r.x - r.width / 2 + 'px');\n     if (d === 'left' || d === 'bottomleft' || d === 'topleft')\n       return (r.x - r.width + 'px');\n     if (d === 'right')\n       return (r.x + 'px');\n     if (d === 'bottomright' || d === 'topright')\n      return (r.x + r.widht + 'px');\n   },\n   renderY2: function (r, d) {\n     if (d === 'top' || d === 'topleft' || d === 'topright')\n       return (r.y - r.height + 'px');\n     if (d === 'left' || d === 'right')\n       return (r.y - r.height / 2 + 'px');\n     if (d === 'bottom' || d === 'bottomleft' || d === 'bottomright')\n       return (r.y + 'px');\n   },\n   /*  */\n   actionDebounce: function(symbol, action, params) {\n     var that = this;\n     var timer = setTimeout(function() {\n       action(params);\n       clearTimeout(timer);\n       delete that.actions[symbol];\n     }, 300);\n \n     if (!that.actions[symbol]) {\n       that.actions[symbol] = timer;\n     } else {\n       clearTimeout(that.actions[symbol]);\n       that.actions[symbol] = timer;\n     }\n   }\n }\n```\n\n##### \n> html\n\n```js\n/**\n * [renderHtml html]\n * @param  {[$Object]} $selector []\n * @param  {[String]} htmlstr   [html]\n * @param  {[Object]} options   []\n */\nfunction init(_$selector, _options) {\n\n  var $selector = utils.element.elementWrapper(_$selector),\n      trigger = _options['trigger'] ? _options['trigger'] : 'mouseover', // click | hover\n      $context = utils.element.elementWrapper(_options['context']),\n      key = utils.element.getAttr($selector, 'tootip-key');\n   \n   utils.element.setData($selector, 'tootip-target', _options.value)\n     .setData($selector, 'tootip-type', _options.type)\n     .setData($selector, 'tootip-options', _options)\n     .setData($selector, 'tootip-trigger', _options.trigger)\n     .setCss($selector, 'cursor', 'pointer');\n\n  (!key) && eventListen($selector, trigger, $context);\n}\n```\n\n##### tootips\n\n* `getBoundingClientRect()`\n* tootips(`position: fixed`)\n* tootips\n* dom\n\n\n```js\n/**\n   * [renderContainer html]\n   * @param  {[Object]} options   []\n   * @param  {[String]} type   [ -> text | html]\n   * @param  {[String]} target   []\n   */\n  function renderContainer($selector, tootipKey) {\n   var type = utils.element.getData($selector, 'tootip-type'),\n      options = utils.element.getData($selector, 'tootip-options'),\n      trigger = utils.element.getData($selector, 'tootip-trigger'),\n      target = utils.element.getData($selector, 'tootip-target');\n\n   // \n   var randomKey = '_' + Math.random().toString(36).substr(2);\n   var $wrapper = tootipKey ? utils.element.elementWrapper('div[tootip-key='+tootipKey+']') : document.createElement('div');\n   var cssStyle = options.style || {};\n   var styleSheet = options.css || '';\n   var direction = options.direction || 'top';\n   var triangleArray = ['top', 'left', 'right','bottom'];\n   var triangleClass = 'triangle-' +\n     triangleArray[triangleArray.length - 1 - triangleArray.indexOf(direction)];\n   var shadowClassMap = {\n     top: 'tootip-shadow-top-right',\n     bottom: 'tootip-shadow-bottom-right',\n     left: 'tootip-shadow-top-left',\n     right: 'tootip-shadow-top-right',\n   }\n   var rect = $selector.getBoundingClientRect();\n\n   utils.element.setCss($wrapper, 'border', 'solid 1px rgb(212, 212, 212)')\n    .setCss($wrapper, 'position', 'fixed')\n    .setCss($wrapper, 'left', utils.renderX1(rect, direction))\n    .setCss($wrapper, 'top', utils.renderY1(rect, direction))\n    .setAttr($wrapper, 'tootip-key', tootipKey || randomKey)\n    .addClass($wrapper, triangleClass + ' abnormal-tips-container ' + shadowClassMap[direction] + ' ' + styleSheet);\n    utils.element.setAttr($selector, 'tootip-key', tootipKey || randomKey);\n\n   // dom\n   if (!tootipKey && trigger === 'mouseover') {\n     $wrapper.onmouseout = function () {\n       utils.actionDebounce(randomKey, hideTooTips, $selector);\n     };\n     $wrapper.onmouseover = function () {\n       utils.actionDebounce(randomKey, showTootips, $selector);\n     };\n   }\n\n   Object.keys(cssStyle).forEach(function (attr) {\n     utils.element.setCss($wrapper, attr, cssStyle[attr]);\n   });\n\n   utils.element.html($wrapper, type === 'html' ? target : ('<span>' + target +'</span>'));\n\n   return $wrapper;\n };\n```\n\n##### \n\n> tooltips(`click``mouse`)tootips\n\n`utils.actionDebounce`Tootip/\n\n```js\n/**\n  * [eventListen ]\n  * @param  {[$Object]} $selector []\n  * @param  {[String]} trigger []\n  */\n function eventListen($selector, _trigger, $context) {\n\n   var trigger = (_trigger instanceof Array) ? _trigger : [_trigger];\n\n   // click\n   if(trigger.includes('click')) {\n     ($context || $selector)\n       .onclick = function () {\n         if (!utils.element.getData($selector, 'isActivated')) {\n           utils.actionDebounce(utils.element.getAttr($selector, 'tootip-key'), showTootips, $selector);\n         } else {\n           utils.actionDebounce(utils.element.getAttr($selector, 'tootip-key'), hideTooTips, $selector);\n         }\n       };\n   } \n\n   // \n   if(trigger.includes('mouseover')) {\n     ($context || $selector)\n       .onmouseout = function () {\n         utils.actionDebounce(utils.element.getAttr($selector, 'tootip-key'), hideTooTips, $selector);\n       };\n     ($context || $selector)\n       .onmouseover = function () {\n         utils.actionDebounce(utils.element.getAttr($selector, 'tootip-key'), showTootips, $selector);\n       };\n   }\n }\n\n```\n\n* showTootips  \ntootipshtmltexttootipstootipsshowtootips`getBoundingClientRect()`tootips\n\n```js\n/**\n  * [showTootips ]\n  * @param  {[$Object]} $selector []\n  * @param  {[String]} tootipKey [tooptips]\n  */\n function showTootips($selector) {\n   if (utils.element.getData($selector, 'isActivated')) return;\n   var tootipKey = utils.element.getAttr($selector, 'tootip-key');\n   var $dom = renderContainer($selector, tootipKey);\n   if (!tootipKey) {\n     document.body.appendChild($dom);\n   } else {\n    utils.element.removeClass($dom, 'hidden');\n   }\n   utils.element.setData($selector, 'isActivated', true);\n\n   var options = utils.element.getData($selector, 'tootip-options');\n   var rect = $dom.getBoundingClientRect();\n\n   utils.element\n     .setCss($dom, 'top', utils.renderY2(rect, options.direction))\n     .setCss($dom, 'left', utils.renderX2(rect, options.direction));\n };\n```\n\n* hideTootips  \nhidetootipstootips`key``key`tootips\n\n```js\n/**\n  * [hideTooTips ]\n  * @param  {[$Object]} $selector []\n  */\n function hideTooTips($selector) {\n   var key = utils.element.getAttr($selector, 'tootip-key');\n   var $element = utils.element.elementWrapper('div[tootip-key='+key+']');\n   utils.element.addClass($element, 'hidden');\n   utils.element.setData($selector, 'isActivated', '');\n };\n```\n\n\n\n##### \n\n> tootips(html)(click / mouseover)css\n\n```js\nTootips.init(('#t1'), {\n  trigger: 'mouseover', // \n  type: 'html', // \n  value: '<h3>header</h3><p>body</p>', // \n  direction: 'top', // \n  style: { // tootips\n    'font-size': '1rem',\n    'color': 'red',\n    'min-width': '5rem',\n    'padding': '5px 10px',\n    'border-radius': '5px',\n    'background-color': 'white',\n  },\n  css: '', // tootips\n});\n```\n\n#### \n--------\n\n* tootipsjavasript\n* tootips`position: fixed`\n* `getBoundingClientRect()`\n* tootips\n* tootipshtml\n* tootips(`click` / `mouseover`)\n\n##### \n","slug":"Javascripttootips","published":1,"updated":"2020-10-22T07:18:47.559Z","_id":"cjo54o8v5000yin951s3wcnsi","comments":1,"layout":"post","photos":[],"link":"","content":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p>jQuerytootipshtmltootipstootipstootipstootipstootips</p></blockquote><p><img src=\"tootip.png\" alt=\"tootip.png\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><p><a href=\"https://github.com/NoJsJa/javascript-learning/tree/master/normal/js-tooltips\" target=\"_blank\" rel=\"noopener\">=&gt; </a></p><p><img src=\"tootips.gif\" alt=\"animation.gif\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">var</span> Tootips = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> utils = &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [renderContainer html]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>options   []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>type   [ -&gt; text | html]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>target   []</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">renderContainer</span>(<span class=\"params\">$selector, tootipKey</span>) </span>&#123;</span><br><span class=\"line\">   ...</span><br><span class=\"line\"> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [showTootips ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>tootipKey [tooptips]</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showTootips</span>(<span class=\"params\">$selector</span>) </span>&#123;</span><br><span class=\"line\">   ...</span><br><span class=\"line\"> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [hideTooTips ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hideTooTips</span>(<span class=\"params\">$selector</span>) </span>&#123;</span><br><span class=\"line\">   ...</span><br><span class=\"line\"> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [eventListen ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>trigger []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">eventListen</span>(<span class=\"params\">$selector, _trigger, $context</span>) </span>&#123;</span><br><span class=\"line\">   ...</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [renderHtml html]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>htmlstr   [html]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>options   []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">init</span>(<span class=\"params\">_$selector, _options</span>) </span>&#123;</span><br><span class=\"line\">   ...</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">   init: init,</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [trigger ]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">   trigger: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$selector</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!utils.element.getData($selector, <span class=\"string\">'isActivated'</span>)) &#123;</span><br><span class=\"line\">      showTootips($selector, utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>));</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      hideTooTips($selector);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [getStatus ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">   status: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">$selector</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      isActivated: utils.element.getData($selector, <span class=\"string\">'isActivated'</span>) ? <span class=\"literal\">true</span> : <span class=\"literal\">false</span>,</span><br><span class=\"line\">      isInited: utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>) ? <span class=\"literal\">true</span> : <span class=\"literal\">false</span>,</span><br><span class=\"line\">      key: utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>) || <span class=\"literal\">null</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p>domjQueryAPI</p></blockquote><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> utils = &#123;</span><br><span class=\"line\">    actions: &#123;</span><br><span class=\"line\">      <span class=\"comment\">// [symbol]: [Timer]</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    element: &#123;</span><br><span class=\"line\">     jsonWrapper: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">target</span>) </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">var</span> jsonParseRule = <span class=\"regexp\">/^\\&#123;\"([\\w\\W])+\\&#125;$/</span>;</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (jsonParseRule.test(target)) <span class=\"keyword\">return</span> <span class=\"built_in\">JSON</span>.parse(target);</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (<span class=\"keyword\">typeof</span> target === <span class=\"string\">'object'</span> &amp;&amp; target !== <span class=\"literal\">null</span>) ?</span><br><span class=\"line\">         <span class=\"built_in\">JSON</span>.stringify(target) :</span><br><span class=\"line\">         target;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     elementWrapper: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element</span>) </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (<span class=\"keyword\">typeof</span> $element === <span class=\"string\">'object'</span>) ? $element : <span class=\"built_in\">document</span>.querySelector($element);</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     setAttr: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element, key, value</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       (key) &amp;&amp; $element.setAttribute(key, <span class=\"keyword\">this</span>.jsonWrapper(value));</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     setCss: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element, styleKey, styleValue, important</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       $element.style.setProperty(styleKey, styleValue, important === <span class=\"string\">'important'</span> ? important : <span class=\"literal\">undefined</span>);</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     getAttr: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element, key</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (key) ? <span class=\"keyword\">this</span>.jsonWrapper($element.getAttribute(key)) : <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     setData: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element, key, value</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       (key) &amp;&amp; <span class=\"keyword\">this</span>.setAttr($element, <span class=\"string\">'data-'</span> + key, value);</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     getData: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element, key</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       <span class=\"keyword\">return</span> key ? <span class=\"keyword\">this</span>.getAttr($element, <span class=\"string\">'data-'</span> + key) : <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     addClass: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element, className</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       <span class=\"keyword\">var</span> classes = $element.className.split(<span class=\"string\">' '</span>);</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (!classes.includes(className)) &#123;</span><br><span class=\"line\">         classes.push(className);</span><br><span class=\"line\">         $element.className = classes.join(<span class=\"string\">' '</span>);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     removeClass: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element, className</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       <span class=\"keyword\">var</span> classes = $element.className.split(<span class=\"string\">' '</span>);</span><br><span class=\"line\">       <span class=\"keyword\">var</span> index = classes.indexOf(className);</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (index !== <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">         classes.splice(index, <span class=\"number\">1</span>);</span><br><span class=\"line\">         $element.className = classes.join(<span class=\"string\">' '</span>);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     empty: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       $element.innerHTML = <span class=\"string\">''</span>;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     html: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element, htmlStr</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       $element.innerHTML = htmlStr;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">   <span class=\"comment\">/*  */</span></span><br><span class=\"line\">   renderX1: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">r, d</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'top'</span> || d === <span class=\"string\">'bottom'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.x + r.width / <span class=\"number\">2</span> + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'left'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.x - <span class=\"number\">6</span> + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'right'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.x + r.width + <span class=\"number\">6</span> + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'bottomleft'</span> || d === <span class=\"string\">'topleft'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.x + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'bottomright'</span> || d === <span class=\"string\">'topright'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.x + r.width + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">   renderY1: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">r, d</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'top'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.y - <span class=\"number\">6</span> + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'left'</span> || d === <span class=\"string\">'right'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.y + r.height / <span class=\"number\">2</span> + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'bottom'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.y + r.height + <span class=\"number\">6</span> + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'bottomleft'</span> || d === <span class=\"string\">'bottomright'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.y + r.height + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'topleft'</span> || d === <span class=\"string\">'topright'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.y + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">   <span class=\"comment\">/* tootips */</span></span><br><span class=\"line\">   renderX2: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">r, d</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'top'</span> || d === <span class=\"string\">'bottom'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.x - r.width / <span class=\"number\">2</span> + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'left'</span> || d === <span class=\"string\">'bottomleft'</span> || d === <span class=\"string\">'topleft'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.x - r.width + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'right'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.x + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'bottomright'</span> || d === <span class=\"string\">'topright'</span>)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> (r.x + r.widht + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">   renderY2: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">r, d</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'top'</span> || d === <span class=\"string\">'topleft'</span> || d === <span class=\"string\">'topright'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.y - r.height + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'left'</span> || d === <span class=\"string\">'right'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.y - r.height / <span class=\"number\">2</span> + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'bottom'</span> || d === <span class=\"string\">'bottomleft'</span> || d === <span class=\"string\">'bottomright'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.y + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">   <span class=\"comment\">/*  */</span></span><br><span class=\"line\">   actionDebounce: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">symbol, action, params</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">     <span class=\"keyword\">var</span> timer = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">       action(params);</span><br><span class=\"line\">       clearTimeout(timer);</span><br><span class=\"line\">       <span class=\"keyword\">delete</span> that.actions[symbol];</span><br><span class=\"line\">     &#125;, <span class=\"number\">300</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">     <span class=\"keyword\">if</span> (!that.actions[symbol]) &#123;</span><br><span class=\"line\">       that.actions[symbol] = timer;</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">       clearTimeout(that.actions[symbol]);</span><br><span class=\"line\">       that.actions[symbol] = timer;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><blockquote><p>html</p></blockquote><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [renderHtml html]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>htmlstr   [html]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>options   []</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">init</span>(<span class=\"params\">_$selector, _options</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> $selector = utils.element.elementWrapper(_$selector),</span><br><span class=\"line\">      trigger = _options[<span class=\"string\">'trigger'</span>] ? _options[<span class=\"string\">'trigger'</span>] : <span class=\"string\">'mouseover'</span>, <span class=\"comment\">// click | hover</span></span><br><span class=\"line\">      $context = utils.element.elementWrapper(_options[<span class=\"string\">'context'</span>]),</span><br><span class=\"line\">      key = utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>);</span><br><span class=\"line\">   </span><br><span class=\"line\">   utils.element.setData($selector, <span class=\"string\">'tootip-target'</span>, _options.value)</span><br><span class=\"line\">     .setData($selector, <span class=\"string\">'tootip-type'</span>, _options.type)</span><br><span class=\"line\">     .setData($selector, <span class=\"string\">'tootip-options'</span>, _options)</span><br><span class=\"line\">     .setData($selector, <span class=\"string\">'tootip-trigger'</span>, _options.trigger)</span><br><span class=\"line\">     .setCss($selector, <span class=\"string\">'cursor'</span>, <span class=\"string\">'pointer'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  (!key) &amp;&amp; eventListen($selector, trigger, $context);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h5 id=\"tootips\"><a href=\"#tootips\" class=\"headerlink\" title=\"tootips\"></a>tootips</h5><ul><li><code>getBoundingClientRect()</code></li><li>tootips(<code>position: fixed</code>)</li><li>tootips</li><li>dom</li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [renderContainer html]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>options   []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>type   [ -&gt; text | html]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>target   []</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">renderContainer</span>(<span class=\"params\">$selector, tootipKey</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> type = utils.element.getData($selector, <span class=\"string\">'tootip-type'</span>),</span><br><span class=\"line\">      options = utils.element.getData($selector, <span class=\"string\">'tootip-options'</span>),</span><br><span class=\"line\">      trigger = utils.element.getData($selector, <span class=\"string\">'tootip-trigger'</span>),</span><br><span class=\"line\">      target = utils.element.getData($selector, <span class=\"string\">'tootip-target'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">// </span></span><br><span class=\"line\">   <span class=\"keyword\">var</span> randomKey = <span class=\"string\">'_'</span> + <span class=\"built_in\">Math</span>.random().toString(<span class=\"number\">36</span>).substr(<span class=\"number\">2</span>);</span><br><span class=\"line\">   <span class=\"keyword\">var</span> $wrapper = tootipKey ? utils.element.elementWrapper(<span class=\"string\">'div[tootip-key='</span>+tootipKey+<span class=\"string\">']'</span>) : <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'div'</span>);</span><br><span class=\"line\">   <span class=\"keyword\">var</span> cssStyle = options.style || &#123;&#125;;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> styleSheet = options.css || <span class=\"string\">''</span>;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> direction = options.direction || <span class=\"string\">'top'</span>;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> triangleArray = [<span class=\"string\">'top'</span>, <span class=\"string\">'left'</span>, <span class=\"string\">'right'</span>,<span class=\"string\">'bottom'</span>];</span><br><span class=\"line\">   <span class=\"keyword\">var</span> triangleClass = <span class=\"string\">'triangle-'</span> +</span><br><span class=\"line\">     triangleArray[triangleArray.length - <span class=\"number\">1</span> - triangleArray.indexOf(direction)];</span><br><span class=\"line\">   <span class=\"keyword\">var</span> shadowClassMap = &#123;</span><br><span class=\"line\">     top: <span class=\"string\">'tootip-shadow-top-right'</span>,</span><br><span class=\"line\">     bottom: <span class=\"string\">'tootip-shadow-bottom-right'</span>,</span><br><span class=\"line\">     left: <span class=\"string\">'tootip-shadow-top-left'</span>,</span><br><span class=\"line\">     right: <span class=\"string\">'tootip-shadow-top-right'</span>,</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> rect = $selector.getBoundingClientRect();</span><br><span class=\"line\"></span><br><span class=\"line\">   utils.element.setCss($wrapper, <span class=\"string\">'border'</span>, <span class=\"string\">'solid 1px rgb(212, 212, 212)'</span>)</span><br><span class=\"line\">    .setCss($wrapper, <span class=\"string\">'position'</span>, <span class=\"string\">'fixed'</span>)</span><br><span class=\"line\">    .setCss($wrapper, <span class=\"string\">'left'</span>, utils.renderX1(rect, direction))</span><br><span class=\"line\">    .setCss($wrapper, <span class=\"string\">'top'</span>, utils.renderY1(rect, direction))</span><br><span class=\"line\">    .setAttr($wrapper, <span class=\"string\">'tootip-key'</span>, tootipKey || randomKey)</span><br><span class=\"line\">    .addClass($wrapper, triangleClass + <span class=\"string\">' abnormal-tips-container '</span> + shadowClassMap[direction] + <span class=\"string\">' '</span> + styleSheet);</span><br><span class=\"line\">    utils.element.setAttr($selector, <span class=\"string\">'tootip-key'</span>, tootipKey || randomKey);</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">// dom</span></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!tootipKey &amp;&amp; trigger === <span class=\"string\">'mouseover'</span>) &#123;</span><br><span class=\"line\">     $wrapper.onmouseout = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">       utils.actionDebounce(randomKey, hideTooTips, $selector);</span><br><span class=\"line\">     &#125;;</span><br><span class=\"line\">     $wrapper.onmouseover = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">       utils.actionDebounce(randomKey, showTootips, $selector);</span><br><span class=\"line\">     &#125;;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"built_in\">Object</span>.keys(cssStyle).forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">attr</span>) </span>&#123;</span><br><span class=\"line\">     utils.element.setCss($wrapper, attr, cssStyle[attr]);</span><br><span class=\"line\">   &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">   utils.element.html($wrapper, type === <span class=\"string\">'html'</span> ? target : (<span class=\"string\">'&lt;span&gt;'</span> + target +<span class=\"string\">'&lt;/span&gt;'</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">return</span> $wrapper;</span><br><span class=\"line\"> &#125;;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><blockquote><p>tooltips(<code>click</code><code>mouse</code>)tootips</p></blockquote><p><code>utils.actionDebounce</code>Tootip/</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [eventListen ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>trigger []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">eventListen</span>(<span class=\"params\">$selector, _trigger, $context</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">var</span> trigger = (_trigger <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Array</span>) ? _trigger : [_trigger];</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">// click</span></span><br><span class=\"line\">   <span class=\"keyword\">if</span>(trigger.includes(<span class=\"string\">'click'</span>)) &#123;</span><br><span class=\"line\">     ($context || $selector)</span><br><span class=\"line\">       .onclick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (!utils.element.getData($selector, <span class=\"string\">'isActivated'</span>)) &#123;</span><br><span class=\"line\">           utils.actionDebounce(utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>), showTootips, $selector);</span><br><span class=\"line\">         &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">           utils.actionDebounce(utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>), hideTooTips, $selector);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">   &#125; </span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">// </span></span><br><span class=\"line\">   <span class=\"keyword\">if</span>(trigger.includes(<span class=\"string\">'mouseover'</span>)) &#123;</span><br><span class=\"line\">     ($context || $selector)</span><br><span class=\"line\">       .onmouseout = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">         utils.actionDebounce(utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>), hideTooTips, $selector);</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">     ($context || $selector)</span><br><span class=\"line\">       .onmouseover = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">         utils.actionDebounce(utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>), showTootips, $selector);</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure><ul><li>showTootips<br>tootipshtmltexttootipstootipsshowtootips<code>getBoundingClientRect()</code>tootips</li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [showTootips ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>tootipKey [tooptips]</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showTootips</span>(<span class=\"params\">$selector</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (utils.element.getData($selector, <span class=\"string\">'isActivated'</span>)) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> tootipKey = utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>);</span><br><span class=\"line\">   <span class=\"keyword\">var</span> $dom = renderContainer($selector, tootipKey);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!tootipKey) &#123;</span><br><span class=\"line\">     <span class=\"built_in\">document</span>.body.appendChild($dom);</span><br><span class=\"line\">   &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    utils.element.removeClass($dom, <span class=\"string\">'hidden'</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   utils.element.setData($selector, <span class=\"string\">'isActivated'</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">var</span> options = utils.element.getData($selector, <span class=\"string\">'tootip-options'</span>);</span><br><span class=\"line\">   <span class=\"keyword\">var</span> rect = $dom.getBoundingClientRect();</span><br><span class=\"line\"></span><br><span class=\"line\">   utils.element</span><br><span class=\"line\">     .setCss($dom, <span class=\"string\">'top'</span>, utils.renderY2(rect, options.direction))</span><br><span class=\"line\">     .setCss($dom, <span class=\"string\">'left'</span>, utils.renderX2(rect, options.direction));</span><br><span class=\"line\"> &#125;;</span><br></pre></td></tr></table></figure><ul><li>hideTootips<br>hidetootipstootips<code>key</code><code>key</code>tootips</li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [hideTooTips ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hideTooTips</span>(<span class=\"params\">$selector</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> key = utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>);</span><br><span class=\"line\">   <span class=\"keyword\">var</span> $element = utils.element.elementWrapper(<span class=\"string\">'div[tootip-key='</span>+key+<span class=\"string\">']'</span>);</span><br><span class=\"line\">   utils.element.addClass($element, <span class=\"string\">'hidden'</span>);</span><br><span class=\"line\">   utils.element.setData($selector, <span class=\"string\">'isActivated'</span>, <span class=\"string\">''</span>);</span><br><span class=\"line\"> &#125;;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><blockquote><p>tootips(html)(click / mouseover)css</p></blockquote><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Tootips.init((<span class=\"string\">'#t1'</span>), &#123;</span><br><span class=\"line\">  trigger: <span class=\"string\">'mouseover'</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  type: <span class=\"string\">'html'</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  value: <span class=\"string\">'&lt;h3&gt;header&lt;/h3&gt;&lt;p&gt;body&lt;/p&gt;'</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  direction: <span class=\"string\">'top'</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  style: &#123; <span class=\"comment\">// tootips</span></span><br><span class=\"line\">    <span class=\"string\">'font-size'</span>: <span class=\"string\">'1rem'</span>,</span><br><span class=\"line\">    <span class=\"string\">'color'</span>: <span class=\"string\">'red'</span>,</span><br><span class=\"line\">    <span class=\"string\">'min-width'</span>: <span class=\"string\">'5rem'</span>,</span><br><span class=\"line\">    <span class=\"string\">'padding'</span>: <span class=\"string\">'5px 10px'</span>,</span><br><span class=\"line\">    <span class=\"string\">'border-radius'</span>: <span class=\"string\">'5px'</span>,</span><br><span class=\"line\">    <span class=\"string\">'background-color'</span>: <span class=\"string\">'white'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  css: <span class=\"string\">''</span>, <span class=\"comment\">// tootips</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><ul><li>tootipsjavasript</li><li>tootips<code>position: fixed</code></li><li><code>getBoundingClientRect()</code></li><li>tootips</li><li>tootipshtml</li><li>tootips(<code>click</code> / <code>mouseover</code>)</li></ul><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5>","site":{"data":{}},"excerpt":"","more":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p>jQuerytootipshtmltootipstootipstootipstootipstootips</p></blockquote><p><img src=\"tootip.png\" alt=\"tootip.png\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><p><a href=\"https://github.com/NoJsJa/javascript-learning/tree/master/normal/js-tooltips\" target=\"_blank\" rel=\"noopener\">=&gt; </a></p><p><img src=\"tootips.gif\" alt=\"animation.gif\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">var</span> Tootips = (<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  </span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> utils = &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"> </span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [renderContainer html]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>options   []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>type   [ -&gt; text | html]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>target   []</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">renderContainer</span>(<span class=\"params\">$selector, tootipKey</span>) </span>&#123;</span><br><span class=\"line\">   ...</span><br><span class=\"line\"> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [showTootips ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>tootipKey [tooptips]</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showTootips</span>(<span class=\"params\">$selector</span>) </span>&#123;</span><br><span class=\"line\">   ...</span><br><span class=\"line\"> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [hideTooTips ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hideTooTips</span>(<span class=\"params\">$selector</span>) </span>&#123;</span><br><span class=\"line\">   ...</span><br><span class=\"line\"> &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [eventListen ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>trigger []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">eventListen</span>(<span class=\"params\">$selector, _trigger, $context</span>) </span>&#123;</span><br><span class=\"line\">   ...</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [renderHtml html]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>htmlstr   [html]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>options   []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">init</span>(<span class=\"params\">_$selector, _options</span>) </span>&#123;</span><br><span class=\"line\">   ...</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"> <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">   init: init,</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [trigger ]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">   trigger: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$selector</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!utils.element.getData($selector, <span class=\"string\">'isActivated'</span>)) &#123;</span><br><span class=\"line\">      showTootips($selector, utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>));</span><br><span class=\"line\">    &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      hideTooTips($selector);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [getStatus ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\">   status: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">$selector</span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> &#123;</span><br><span class=\"line\">      isActivated: utils.element.getData($selector, <span class=\"string\">'isActivated'</span>) ? <span class=\"literal\">true</span> : <span class=\"literal\">false</span>,</span><br><span class=\"line\">      isInited: utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>) ? <span class=\"literal\">true</span> : <span class=\"literal\">false</span>,</span><br><span class=\"line\">      key: utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>) || <span class=\"literal\">null</span>,</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"> &#125;</span><br><span class=\"line\">&#125;)();</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><blockquote><p>domjQueryAPI</p></blockquote><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">var</span> utils = &#123;</span><br><span class=\"line\">    actions: &#123;</span><br><span class=\"line\">      <span class=\"comment\">// [symbol]: [Timer]</span></span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    element: &#123;</span><br><span class=\"line\">     jsonWrapper: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">target</span>) </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">var</span> jsonParseRule = <span class=\"regexp\">/^\\&#123;\"([\\w\\W])+\\&#125;$/</span>;</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (jsonParseRule.test(target)) <span class=\"keyword\">return</span> <span class=\"built_in\">JSON</span>.parse(target);</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (<span class=\"keyword\">typeof</span> target === <span class=\"string\">'object'</span> &amp;&amp; target !== <span class=\"literal\">null</span>) ?</span><br><span class=\"line\">         <span class=\"built_in\">JSON</span>.stringify(target) :</span><br><span class=\"line\">         target;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     elementWrapper: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element</span>) </span>&#123;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (<span class=\"keyword\">typeof</span> $element === <span class=\"string\">'object'</span>) ? $element : <span class=\"built_in\">document</span>.querySelector($element);</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     setAttr: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element, key, value</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       (key) &amp;&amp; $element.setAttribute(key, <span class=\"keyword\">this</span>.jsonWrapper(value));</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     setCss: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element, styleKey, styleValue, important</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       $element.style.setProperty(styleKey, styleValue, important === <span class=\"string\">'important'</span> ? important : <span class=\"literal\">undefined</span>);</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     getAttr: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element, key</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (key) ? <span class=\"keyword\">this</span>.jsonWrapper($element.getAttribute(key)) : <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     setData: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element, key, value</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       (key) &amp;&amp; <span class=\"keyword\">this</span>.setAttr($element, <span class=\"string\">'data-'</span> + key, value);</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     getData: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element, key</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       <span class=\"keyword\">return</span> key ? <span class=\"keyword\">this</span>.getAttr($element, <span class=\"string\">'data-'</span> + key) : <span class=\"literal\">undefined</span>;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     addClass: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element, className</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       <span class=\"keyword\">var</span> classes = $element.className.split(<span class=\"string\">' '</span>);</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (!classes.includes(className)) &#123;</span><br><span class=\"line\">         classes.push(className);</span><br><span class=\"line\">         $element.className = classes.join(<span class=\"string\">' '</span>);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     removeClass: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element, className</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       <span class=\"keyword\">var</span> classes = $element.className.split(<span class=\"string\">' '</span>);</span><br><span class=\"line\">       <span class=\"keyword\">var</span> index = classes.indexOf(className);</span><br><span class=\"line\">       <span class=\"keyword\">if</span> (index !== <span class=\"number\">-1</span>) &#123;</span><br><span class=\"line\">         classes.splice(index, <span class=\"number\">1</span>);</span><br><span class=\"line\">         $element.className = classes.join(<span class=\"string\">' '</span>);</span><br><span class=\"line\">       &#125;</span><br><span class=\"line\">       <span class=\"keyword\">return</span> <span class=\"keyword\">this</span>;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     empty: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       $element.innerHTML = <span class=\"string\">''</span>;</span><br><span class=\"line\">     &#125;,</span><br><span class=\"line\">     html: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">$element, htmlStr</span>) </span>&#123;</span><br><span class=\"line\">       $element = <span class=\"keyword\">this</span>.elementWrapper($element);</span><br><span class=\"line\">       $element.innerHTML = htmlStr;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">   <span class=\"comment\">/*  */</span></span><br><span class=\"line\">   renderX1: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">r, d</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'top'</span> || d === <span class=\"string\">'bottom'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.x + r.width / <span class=\"number\">2</span> + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'left'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.x - <span class=\"number\">6</span> + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'right'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.x + r.width + <span class=\"number\">6</span> + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'bottomleft'</span> || d === <span class=\"string\">'topleft'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.x + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'bottomright'</span> || d === <span class=\"string\">'topright'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.x + r.width + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">   renderY1: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">r, d</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'top'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.y - <span class=\"number\">6</span> + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'left'</span> || d === <span class=\"string\">'right'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.y + r.height / <span class=\"number\">2</span> + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'bottom'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.y + r.height + <span class=\"number\">6</span> + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'bottomleft'</span> || d === <span class=\"string\">'bottomright'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.y + r.height + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'topleft'</span> || d === <span class=\"string\">'topright'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.y + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">   <span class=\"comment\">/* tootips */</span></span><br><span class=\"line\">   renderX2: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">r, d</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'top'</span> || d === <span class=\"string\">'bottom'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.x - r.width / <span class=\"number\">2</span> + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'left'</span> || d === <span class=\"string\">'bottomleft'</span> || d === <span class=\"string\">'topleft'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.x - r.width + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'right'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.x + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'bottomright'</span> || d === <span class=\"string\">'topright'</span>)</span><br><span class=\"line\">      <span class=\"keyword\">return</span> (r.x + r.widht + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">   renderY2: <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">r, d</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'top'</span> || d === <span class=\"string\">'topleft'</span> || d === <span class=\"string\">'topright'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.y - r.height + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'left'</span> || d === <span class=\"string\">'right'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.y - r.height / <span class=\"number\">2</span> + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">     <span class=\"keyword\">if</span> (d === <span class=\"string\">'bottom'</span> || d === <span class=\"string\">'bottomleft'</span> || d === <span class=\"string\">'bottomright'</span>)</span><br><span class=\"line\">       <span class=\"keyword\">return</span> (r.y + <span class=\"string\">'px'</span>);</span><br><span class=\"line\">   &#125;,</span><br><span class=\"line\">   <span class=\"comment\">/*  */</span></span><br><span class=\"line\">   actionDebounce: <span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\">symbol, action, params</span>) </span>&#123;</span><br><span class=\"line\">     <span class=\"keyword\">var</span> that = <span class=\"keyword\">this</span>;</span><br><span class=\"line\">     <span class=\"keyword\">var</span> timer = setTimeout(<span class=\"function\"><span class=\"keyword\">function</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">       action(params);</span><br><span class=\"line\">       clearTimeout(timer);</span><br><span class=\"line\">       <span class=\"keyword\">delete</span> that.actions[symbol];</span><br><span class=\"line\">     &#125;, <span class=\"number\">300</span>);</span><br><span class=\"line\"> </span><br><span class=\"line\">     <span class=\"keyword\">if</span> (!that.actions[symbol]) &#123;</span><br><span class=\"line\">       that.actions[symbol] = timer;</span><br><span class=\"line\">     &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">       clearTimeout(that.actions[symbol]);</span><br><span class=\"line\">       that.actions[symbol] = timer;</span><br><span class=\"line\">     &#125;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><blockquote><p>html</p></blockquote><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [renderHtml html]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>htmlstr   [html]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>options   []</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">init</span>(<span class=\"params\">_$selector, _options</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">var</span> $selector = utils.element.elementWrapper(_$selector),</span><br><span class=\"line\">      trigger = _options[<span class=\"string\">'trigger'</span>] ? _options[<span class=\"string\">'trigger'</span>] : <span class=\"string\">'mouseover'</span>, <span class=\"comment\">// click | hover</span></span><br><span class=\"line\">      $context = utils.element.elementWrapper(_options[<span class=\"string\">'context'</span>]),</span><br><span class=\"line\">      key = utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>);</span><br><span class=\"line\">   </span><br><span class=\"line\">   utils.element.setData($selector, <span class=\"string\">'tootip-target'</span>, _options.value)</span><br><span class=\"line\">     .setData($selector, <span class=\"string\">'tootip-type'</span>, _options.type)</span><br><span class=\"line\">     .setData($selector, <span class=\"string\">'tootip-options'</span>, _options)</span><br><span class=\"line\">     .setData($selector, <span class=\"string\">'tootip-trigger'</span>, _options.trigger)</span><br><span class=\"line\">     .setCss($selector, <span class=\"string\">'cursor'</span>, <span class=\"string\">'pointer'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  (!key) &amp;&amp; eventListen($selector, trigger, $context);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h5 id=\"tootips\"><a href=\"#tootips\" class=\"headerlink\" title=\"tootips\"></a>tootips</h5><ul><li><code>getBoundingClientRect()</code></li><li>tootips(<code>position: fixed</code>)</li><li>tootips</li><li>dom</li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * [renderContainer html]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Object]&#125;</span> </span>options   []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>type   [ -&gt; text | html]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>target   []</span></span><br><span class=\"line\"><span class=\"comment\">   */</span></span><br><span class=\"line\">  <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">renderContainer</span>(<span class=\"params\">$selector, tootipKey</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> type = utils.element.getData($selector, <span class=\"string\">'tootip-type'</span>),</span><br><span class=\"line\">      options = utils.element.getData($selector, <span class=\"string\">'tootip-options'</span>),</span><br><span class=\"line\">      trigger = utils.element.getData($selector, <span class=\"string\">'tootip-trigger'</span>),</span><br><span class=\"line\">      target = utils.element.getData($selector, <span class=\"string\">'tootip-target'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">// </span></span><br><span class=\"line\">   <span class=\"keyword\">var</span> randomKey = <span class=\"string\">'_'</span> + <span class=\"built_in\">Math</span>.random().toString(<span class=\"number\">36</span>).substr(<span class=\"number\">2</span>);</span><br><span class=\"line\">   <span class=\"keyword\">var</span> $wrapper = tootipKey ? utils.element.elementWrapper(<span class=\"string\">'div[tootip-key='</span>+tootipKey+<span class=\"string\">']'</span>) : <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'div'</span>);</span><br><span class=\"line\">   <span class=\"keyword\">var</span> cssStyle = options.style || &#123;&#125;;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> styleSheet = options.css || <span class=\"string\">''</span>;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> direction = options.direction || <span class=\"string\">'top'</span>;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> triangleArray = [<span class=\"string\">'top'</span>, <span class=\"string\">'left'</span>, <span class=\"string\">'right'</span>,<span class=\"string\">'bottom'</span>];</span><br><span class=\"line\">   <span class=\"keyword\">var</span> triangleClass = <span class=\"string\">'triangle-'</span> +</span><br><span class=\"line\">     triangleArray[triangleArray.length - <span class=\"number\">1</span> - triangleArray.indexOf(direction)];</span><br><span class=\"line\">   <span class=\"keyword\">var</span> shadowClassMap = &#123;</span><br><span class=\"line\">     top: <span class=\"string\">'tootip-shadow-top-right'</span>,</span><br><span class=\"line\">     bottom: <span class=\"string\">'tootip-shadow-bottom-right'</span>,</span><br><span class=\"line\">     left: <span class=\"string\">'tootip-shadow-top-left'</span>,</span><br><span class=\"line\">     right: <span class=\"string\">'tootip-shadow-top-right'</span>,</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> rect = $selector.getBoundingClientRect();</span><br><span class=\"line\"></span><br><span class=\"line\">   utils.element.setCss($wrapper, <span class=\"string\">'border'</span>, <span class=\"string\">'solid 1px rgb(212, 212, 212)'</span>)</span><br><span class=\"line\">    .setCss($wrapper, <span class=\"string\">'position'</span>, <span class=\"string\">'fixed'</span>)</span><br><span class=\"line\">    .setCss($wrapper, <span class=\"string\">'left'</span>, utils.renderX1(rect, direction))</span><br><span class=\"line\">    .setCss($wrapper, <span class=\"string\">'top'</span>, utils.renderY1(rect, direction))</span><br><span class=\"line\">    .setAttr($wrapper, <span class=\"string\">'tootip-key'</span>, tootipKey || randomKey)</span><br><span class=\"line\">    .addClass($wrapper, triangleClass + <span class=\"string\">' abnormal-tips-container '</span> + shadowClassMap[direction] + <span class=\"string\">' '</span> + styleSheet);</span><br><span class=\"line\">    utils.element.setAttr($selector, <span class=\"string\">'tootip-key'</span>, tootipKey || randomKey);</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">// dom</span></span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!tootipKey &amp;&amp; trigger === <span class=\"string\">'mouseover'</span>) &#123;</span><br><span class=\"line\">     $wrapper.onmouseout = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">       utils.actionDebounce(randomKey, hideTooTips, $selector);</span><br><span class=\"line\">     &#125;;</span><br><span class=\"line\">     $wrapper.onmouseover = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">       utils.actionDebounce(randomKey, showTootips, $selector);</span><br><span class=\"line\">     &#125;;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"built_in\">Object</span>.keys(cssStyle).forEach(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">attr</span>) </span>&#123;</span><br><span class=\"line\">     utils.element.setCss($wrapper, attr, cssStyle[attr]);</span><br><span class=\"line\">   &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">   utils.element.html($wrapper, type === <span class=\"string\">'html'</span> ? target : (<span class=\"string\">'&lt;span&gt;'</span> + target +<span class=\"string\">'&lt;/span&gt;'</span>));</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">return</span> $wrapper;</span><br><span class=\"line\"> &#125;;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><blockquote><p>tooltips(<code>click</code><code>mouse</code>)tootips</p></blockquote><p><code>utils.actionDebounce</code>Tootip/</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [eventListen ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>trigger []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">eventListen</span>(<span class=\"params\">$selector, _trigger, $context</span>) </span>&#123;</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">var</span> trigger = (_trigger <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Array</span>) ? _trigger : [_trigger];</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">// click</span></span><br><span class=\"line\">   <span class=\"keyword\">if</span>(trigger.includes(<span class=\"string\">'click'</span>)) &#123;</span><br><span class=\"line\">     ($context || $selector)</span><br><span class=\"line\">       .onclick = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">         <span class=\"keyword\">if</span> (!utils.element.getData($selector, <span class=\"string\">'isActivated'</span>)) &#123;</span><br><span class=\"line\">           utils.actionDebounce(utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>), showTootips, $selector);</span><br><span class=\"line\">         &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">           utils.actionDebounce(utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>), hideTooTips, $selector);</span><br><span class=\"line\">         &#125;</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">   &#125; </span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"comment\">// </span></span><br><span class=\"line\">   <span class=\"keyword\">if</span>(trigger.includes(<span class=\"string\">'mouseover'</span>)) &#123;</span><br><span class=\"line\">     ($context || $selector)</span><br><span class=\"line\">       .onmouseout = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">         utils.actionDebounce(utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>), hideTooTips, $selector);</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">     ($context || $selector)</span><br><span class=\"line\">       .onmouseover = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">         utils.actionDebounce(utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>), showTootips, $selector);</span><br><span class=\"line\">       &#125;;</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\"> &#125;</span><br></pre></td></tr></table></figure><ul><li>showTootips<br>tootipshtmltexttootipstootipsshowtootips<code>getBoundingClientRect()</code>tootips</li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [showTootips ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[String]&#125;</span> </span>tootipKey [tooptips]</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">showTootips</span>(<span class=\"params\">$selector</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (utils.element.getData($selector, <span class=\"string\">'isActivated'</span>)) <span class=\"keyword\">return</span>;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> tootipKey = utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>);</span><br><span class=\"line\">   <span class=\"keyword\">var</span> $dom = renderContainer($selector, tootipKey);</span><br><span class=\"line\">   <span class=\"keyword\">if</span> (!tootipKey) &#123;</span><br><span class=\"line\">     <span class=\"built_in\">document</span>.body.appendChild($dom);</span><br><span class=\"line\">   &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    utils.element.removeClass($dom, <span class=\"string\">'hidden'</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">   utils.element.setData($selector, <span class=\"string\">'isActivated'</span>, <span class=\"literal\">true</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">   <span class=\"keyword\">var</span> options = utils.element.getData($selector, <span class=\"string\">'tootip-options'</span>);</span><br><span class=\"line\">   <span class=\"keyword\">var</span> rect = $dom.getBoundingClientRect();</span><br><span class=\"line\"></span><br><span class=\"line\">   utils.element</span><br><span class=\"line\">     .setCss($dom, <span class=\"string\">'top'</span>, utils.renderY2(rect, options.direction))</span><br><span class=\"line\">     .setCss($dom, <span class=\"string\">'left'</span>, utils.renderX2(rect, options.direction));</span><br><span class=\"line\"> &#125;;</span><br></pre></td></tr></table></figure><ul><li>hideTootips<br>hidetootipstootips<code>key</code><code>key</code>tootips</li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">  * [hideTooTips ]</span></span><br><span class=\"line\"><span class=\"comment\">  * <span class=\"doctag\">@param  <span class=\"type\">&#123;[$Object]&#125;</span> </span>$selector []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">hideTooTips</span>(<span class=\"params\">$selector</span>) </span>&#123;</span><br><span class=\"line\">   <span class=\"keyword\">var</span> key = utils.element.getAttr($selector, <span class=\"string\">'tootip-key'</span>);</span><br><span class=\"line\">   <span class=\"keyword\">var</span> $element = utils.element.elementWrapper(<span class=\"string\">'div[tootip-key='</span>+key+<span class=\"string\">']'</span>);</span><br><span class=\"line\">   utils.element.addClass($element, <span class=\"string\">'hidden'</span>);</span><br><span class=\"line\">   utils.element.setData($selector, <span class=\"string\">'isActivated'</span>, <span class=\"string\">''</span>);</span><br><span class=\"line\"> &#125;;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><blockquote><p>tootips(html)(click / mouseover)css</p></blockquote><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Tootips.init((<span class=\"string\">'#t1'</span>), &#123;</span><br><span class=\"line\">  trigger: <span class=\"string\">'mouseover'</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  type: <span class=\"string\">'html'</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  value: <span class=\"string\">'&lt;h3&gt;header&lt;/h3&gt;&lt;p&gt;body&lt;/p&gt;'</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  direction: <span class=\"string\">'top'</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  style: &#123; <span class=\"comment\">// tootips</span></span><br><span class=\"line\">    <span class=\"string\">'font-size'</span>: <span class=\"string\">'1rem'</span>,</span><br><span class=\"line\">    <span class=\"string\">'color'</span>: <span class=\"string\">'red'</span>,</span><br><span class=\"line\">    <span class=\"string\">'min-width'</span>: <span class=\"string\">'5rem'</span>,</span><br><span class=\"line\">    <span class=\"string\">'padding'</span>: <span class=\"string\">'5px 10px'</span>,</span><br><span class=\"line\">    <span class=\"string\">'border-radius'</span>: <span class=\"string\">'5px'</span>,</span><br><span class=\"line\">    <span class=\"string\">'background-color'</span>: <span class=\"string\">'white'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  css: <span class=\"string\">''</span>, <span class=\"comment\">// tootips</span></span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><ul><li>tootipsjavasript</li><li>tootips<code>position: fixed</code></li><li><code>getBoundingClientRect()</code></li><li>tootips</li><li>tootipshtml</li><li>tootips(<code>click</code> / <code>mouseover</code>)</li></ul><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5>"},{"title":"DockerTimWechat","catalog":true,"toc_nav_num":true,"date":"2019-11-14T11:16:00.000Z","subtitle":"docker linux-qq/wechat","header-img":"article_header.png","updateDate":"2019-11-14T11:16:00.000Z","top":null,"_content":"\n### Contents\n* docker\n* \n* \n\n### docker\n\n> \n> Docker Engine-Community  Ubuntu \n> \n> -   Xenial 16.04 (LTS)\n> -   Bionic 18.04 (LTS)\n> -   Cosmic 18.10\n> -   Disco 19.04\n> -   \n> \n> Docker Engine - Community  x86_64 amd64armhfarm64s390x IBM Z ppc64leIBMPower\n> \n> * * *\n> \n> #### \n> \n> Docker  dockerdocker.io  docker-engine \n> \n`$ sudo apt-get remove docker docker-engine docker.io containerd runc`\n> \n>  Docker Engine-Community  docker-ce \n> \n>  Docker Engine-Community\n> \n> * * *\n> \n> ####  Docker \n> \n>  Docker Engine-Community  Docker  Docker \n> \n> #### \n> \n>  apt \n> \n`$ sudo apt-get update`\n> \n>  apt HTTPS:\n> \n`$ sudo apt-get install apt-transport-https ca-certificates curl gnupg-agent software-properties-common`\n> \n>  Docker  GPG \n> \n`$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -`\n> \n> 9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88 8\n> \n`$ sudo apt-key fingerprint 0EBFCD88`\n>    \n> pub  rsa4096 2017-02-22 \\[SCEA\\]  \n>    9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88  \n> uid      \\[ unknown\\] Docker Release (CE deb) <docker@docker.com>  \n> sub  rsa4096 2017-02-22 \\[S\\]  \n> \n> \n> \n`$ sudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ ubuntu $(lsb_release -cs) stable\"`\n> \n> ####  Docker Engine-Community\n> \n>  apt \n> \n`$ sudo apt-get update`\n> \n>  Docker Engine-Community  containerd \n> \n`$ sudo apt-get install docker-ce docker-ce-cli containerd.io`\n> \n>  Docker Engine-Community\n> \n`$ apt-cache madison docker-ce `\n>   \n>  docker-ce | 5:18.09.1~3-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages  \n>  docker-ce | 5:18.09.0~3-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages  \n>  docker-ce | 18.06.1~ce~3-0~ubuntu    | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages  \n>  docker-ce | 18.06.0~ce~3-0~ubuntu    | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages  \n>  ...  \n> \n>  5:18.09.1~3-0~ubuntu-xenial\n> \n`$ sudo apt-get install docker-ce=<VERSION_STRING> docker-ce-cli=<VERSION_STRING> containerd.io`\n> \n>  Docker :\n> \n`$ sudo docker run hello-world`\n> ####  docker-compose\n`$ sudo apt install docker-compose`\n> #### docker\n`$ sudo gedit /etc/docker/daemon.json`\n>\n> \n> ```\n>  {\n>    \"registry-mirrors\": [\"https://docker.mirrors.ustc.edu.cn\"]\n>  }\n> ```\n>\n\n### \n* Tim => `sudo docker pull bestwu/qq`\n* wechat => `sudo docker pull bestwu/wechat`\n\n### \n1. audioID  \n`getent group audio | cut -d: -f3`\n2.   \nyml docker-tim.yml\n```yml\nversion: '2'\nservices:\n qq:\n   image: bestwu/qq:office    #  office  latest  QQTim\n   container_name: qq\n   devices:\n     - /dev/snd #\n   volumes:\n     - /tmp/.X11-unix:/tmp/.X11-unix\n     - $HOME/TencentFiles:/TencentFiles\n   environment:\n     - DISPLAY=unix$DISPLAY\n     - XMODIFIERS=@im=ibus #\n     - QT_IM_MODULE=ibus\n     - GTK_IM_MODULE=ibus\n     - AUDIO_GID=29 #  (29 parrotsec) audio gid \n     - GID=1000 #  1000  gid \n     - UID=1000 #  1000  uid \n```\n\n3.   \nstart-tim.sh\n```yml\n#!/bin/sh\n# \n# -d \necho \"yw020154\" | sudo docker-compose -f docker-tim.yml up -d\n```\n\n4. \n```sh\n# //\nsudo docker start/stop/restart qq\n# \nsudo docker kill qq\n# \nsudo docker ps\n```","source":"_posts/2019-11-14-DockerTimWechat.md","raw":"---\ntitle: \"DockerTimWechat\"\ncatalog: true\ntoc_nav_num: true\ndate:  2019-11-14 19:16:00\nsubtitle: \"docker linux-qq/wechat\"\nheader-img: \"article_header.png\"\ntags:\n- linux\n- docker\n- desktop\ncategories:\n- Linux\nupdateDate: 2019-11-14 19:16:00\ntop: \n---\n\n### Contents\n* docker\n* \n* \n\n### docker\n\n> \n> Docker Engine-Community  Ubuntu \n> \n> -   Xenial 16.04 (LTS)\n> -   Bionic 18.04 (LTS)\n> -   Cosmic 18.10\n> -   Disco 19.04\n> -   \n> \n> Docker Engine - Community  x86_64 amd64armhfarm64s390x IBM Z ppc64leIBMPower\n> \n> * * *\n> \n> #### \n> \n> Docker  dockerdocker.io  docker-engine \n> \n`$ sudo apt-get remove docker docker-engine docker.io containerd runc`\n> \n>  Docker Engine-Community  docker-ce \n> \n>  Docker Engine-Community\n> \n> * * *\n> \n> ####  Docker \n> \n>  Docker Engine-Community  Docker  Docker \n> \n> #### \n> \n>  apt \n> \n`$ sudo apt-get update`\n> \n>  apt HTTPS:\n> \n`$ sudo apt-get install apt-transport-https ca-certificates curl gnupg-agent software-properties-common`\n> \n>  Docker  GPG \n> \n`$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -`\n> \n> 9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88 8\n> \n`$ sudo apt-key fingerprint 0EBFCD88`\n>    \n> pub  rsa4096 2017-02-22 \\[SCEA\\]  \n>    9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88  \n> uid      \\[ unknown\\] Docker Release (CE deb) <docker@docker.com>  \n> sub  rsa4096 2017-02-22 \\[S\\]  \n> \n> \n> \n`$ sudo add-apt-repository \"deb [arch=amd64] https://download.docker.com/linux/ ubuntu $(lsb_release -cs) stable\"`\n> \n> ####  Docker Engine-Community\n> \n>  apt \n> \n`$ sudo apt-get update`\n> \n>  Docker Engine-Community  containerd \n> \n`$ sudo apt-get install docker-ce docker-ce-cli containerd.io`\n> \n>  Docker Engine-Community\n> \n`$ apt-cache madison docker-ce `\n>   \n>  docker-ce | 5:18.09.1~3-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages  \n>  docker-ce | 5:18.09.0~3-0~ubuntu-xenial | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages  \n>  docker-ce | 18.06.1~ce~3-0~ubuntu    | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages  \n>  docker-ce | 18.06.0~ce~3-0~ubuntu    | https://download.docker.com/linux/ubuntu xenial/stable amd64 Packages  \n>  ...  \n> \n>  5:18.09.1~3-0~ubuntu-xenial\n> \n`$ sudo apt-get install docker-ce=<VERSION_STRING> docker-ce-cli=<VERSION_STRING> containerd.io`\n> \n>  Docker :\n> \n`$ sudo docker run hello-world`\n> ####  docker-compose\n`$ sudo apt install docker-compose`\n> #### docker\n`$ sudo gedit /etc/docker/daemon.json`\n>\n> \n> ```\n>  {\n>    \"registry-mirrors\": [\"https://docker.mirrors.ustc.edu.cn\"]\n>  }\n> ```\n>\n\n### \n* Tim => `sudo docker pull bestwu/qq`\n* wechat => `sudo docker pull bestwu/wechat`\n\n### \n1. audioID  \n`getent group audio | cut -d: -f3`\n2.   \nyml docker-tim.yml\n```yml\nversion: '2'\nservices:\n qq:\n   image: bestwu/qq:office    #  office  latest  QQTim\n   container_name: qq\n   devices:\n     - /dev/snd #\n   volumes:\n     - /tmp/.X11-unix:/tmp/.X11-unix\n     - $HOME/TencentFiles:/TencentFiles\n   environment:\n     - DISPLAY=unix$DISPLAY\n     - XMODIFIERS=@im=ibus #\n     - QT_IM_MODULE=ibus\n     - GTK_IM_MODULE=ibus\n     - AUDIO_GID=29 #  (29 parrotsec) audio gid \n     - GID=1000 #  1000  gid \n     - UID=1000 #  1000  uid \n```\n\n3.   \nstart-tim.sh\n```yml\n#!/bin/sh\n# \n# -d \necho \"yw020154\" | sudo docker-compose -f docker-tim.yml up -d\n```\n\n4. \n```sh\n# //\nsudo docker start/stop/restart qq\n# \nsudo docker kill qq\n# \nsudo docker ps\n```","slug":"DockerTimWechat","published":1,"updated":"2019-06-12T03:16:24.270Z","_id":"ck2y43adm0014in9532pi4wb9","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"Contents\"><a href=\"#Contents\" class=\"headerlink\" title=\"Contents\"></a>Contents</h3><ul><li>docker</li><li></li><li></li></ul><h3 id=\"docker\"><a href=\"#docker\" class=\"headerlink\" title=\"docker\"></a>docker</h3><blockquote><p>Docker Engine-Community  Ubuntu </p><ul><li>Xenial 16.04 (LTS)</li><li>Bionic 18.04 (LTS)</li><li>Cosmic 18.10</li><li>Disco 19.04</li><li></li></ul><p>Docker Engine - Community  x86_64 amd64armhfarm64s390x IBM Z ppc64leIBMPower</p><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Docker  dockerdocker.io  docker-engine </p><p><code>$ sudo apt-get remove docker docker-engine docker.io containerd runc</code></p><p> Docker Engine-Community  docker-ce </p><p> Docker Engine-Community</p><hr><h4 id=\"-Docker-\"><a href=\"#-Docker-\" class=\"headerlink\" title=\" Docker \"></a> Docker </h4><p> Docker Engine-Community  Docker  Docker </p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> apt </p><p><code>$ sudo apt-get update</code></p><p> apt HTTPS:</p><p><code>$ sudo apt-get install apt-transport-https ca-certificates curl gnupg-agent software-properties-common</code></p><p> Docker  GPG </p><p><code>$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</code></p><p>9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88 8</p><p><code>$ sudo apt-key fingerprint 0EBFCD88</code></p><p>pub rsa4096 2017-02-22 [SCEA]<br>9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88<br>uid [ unknown] Docker Release (CE deb) <a href=\"&#109;&#x61;&#105;&#x6c;&#116;&#x6f;&#x3a;&#x64;&#111;&#x63;&#x6b;&#x65;&#114;&#x40;&#100;&#x6f;&#99;&#x6b;&#101;&#x72;&#x2e;&#99;&#x6f;&#109;\">&#x64;&#111;&#x63;&#x6b;&#x65;&#114;&#x40;&#100;&#x6f;&#99;&#x6b;&#101;&#x72;&#x2e;&#99;&#x6f;&#109;</a><br>sub rsa4096 2017-02-22 [S]</p><p></p><p><code>$ sudo add-apt-repository &quot;deb [arch=amd64] https://download.docker.com/linux/ ubuntu $(lsb_release -cs) stable&quot;</code></p><h4 id=\"-Docker-Engine-Community\"><a href=\"#-Docker-Engine-Community\" class=\"headerlink\" title=\" Docker Engine-Community\"></a> Docker Engine-Community</h4><p> apt </p><p><code>$ sudo apt-get update</code></p><p> Docker Engine-Community  containerd </p><p><code>$ sudo apt-get install docker-ce docker-ce-cli containerd.io</code></p><p> Docker Engine-Community</p><p><code>$ apt-cache madison docker-ce</code></p><p>docker-ce | 5:18.09.1~3-0~ubuntu-xenial | <a href=\"https://download.docker.com/linux/ubuntu\" target=\"_blank\" rel=\"noopener\">https://download.docker.com/linux/ubuntu</a> xenial/stable amd64 Packages<br>docker-ce | 5:18.09.0~3-0~ubuntu-xenial | <a href=\"https://download.docker.com/linux/ubuntu\" target=\"_blank\" rel=\"noopener\">https://download.docker.com/linux/ubuntu</a> xenial/stable amd64 Packages<br>docker-ce | 18.06.1~ce~3-0~ubuntu | <a href=\"https://download.docker.com/linux/ubuntu\" target=\"_blank\" rel=\"noopener\">https://download.docker.com/linux/ubuntu</a> xenial/stable amd64 Packages<br>docker-ce | 18.06.0~ce~3-0~ubuntu | <a href=\"https://download.docker.com/linux/ubuntu\" target=\"_blank\" rel=\"noopener\">https://download.docker.com/linux/ubuntu</a> xenial/stable amd64 Packages<br></p><p> 5:18.09.1~3-0~ubuntu-xenial</p><p><code>$ sudo apt-get install docker-ce=&lt;VERSION_STRING&gt; docker-ce-cli=&lt;VERSION_STRING&gt; containerd.io</code></p><p> Docker :</p><p><code>$ sudo docker run hello-world</code></p><h4 id=\"-docker-compose\"><a href=\"#-docker-compose\" class=\"headerlink\" title=\" docker-compose\"></a> docker-compose</h4><p><code>$ sudo apt install docker-compose</code></p><h4 id=\"docker\"><a href=\"#docker\" class=\"headerlink\" title=\"docker\"></a>docker</h4><p><code>$ sudo gedit /etc/docker/daemon.json</code></p><p><br></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;registry-mirrors&quot;: [&quot;https:&#x2F;&#x2F;docker.mirrors.ustc.edu.cn&quot;]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p></blockquote><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul><li>Tim =&gt; <code>sudo docker pull bestwu/qq</code></li><li>wechat =&gt; <code>sudo docker pull bestwu/wechat</code></li></ul><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol><li>audioID<br><code>getent group audio | cut -d: -f3</code></li><li><p><br>yml docker-tim.yml</p><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'2'</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"> <span class=\"attr\">qq:</span></span><br><span class=\"line\">   <span class=\"attr\">image:</span> <span class=\"string\">bestwu/qq:office</span>    <span class=\"comment\">#  office  latest  QQTim</span></span><br><span class=\"line\">   <span class=\"attr\">container_name:</span> <span class=\"string\">qq</span></span><br><span class=\"line\">   <span class=\"attr\">devices:</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">/dev/snd</span> <span class=\"comment\">#</span></span><br><span class=\"line\">   <span class=\"attr\">volumes:</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">/tmp/.X11-unix:/tmp/.X11-unix</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">$HOME/TencentFiles:/TencentFiles</span></span><br><span class=\"line\">   <span class=\"attr\">environment:</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">DISPLAY=unix$DISPLAY</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">XMODIFIERS=@im=ibus</span> <span class=\"comment\">#</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">QT_IM_MODULE=ibus</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">GTK_IM_MODULE=ibus</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">AUDIO_GID=29</span> <span class=\"comment\">#  (29 parrotsec) audio gid </span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">GID=1000</span> <span class=\"comment\">#  1000  gid </span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">UID=1000</span> <span class=\"comment\">#  1000  uid </span></span><br></pre></td></tr></table></figure></li><li><p><br>start-tim.sh</p><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/bin/sh</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># -d </span></span><br><span class=\"line\"><span class=\"string\">echo</span> <span class=\"string\">\"yw020154\"</span> <span class=\"string\">|</span> <span class=\"string\">sudo</span> <span class=\"string\">docker-compose</span> <span class=\"string\">-f</span> <span class=\"string\">docker-tim.yml</span> <span class=\"string\">up</span> <span class=\"string\">-d</span></span><br></pre></td></tr></table></figure></li><li><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># //</span></span><br><span class=\"line\">sudo docker start/stop/restart qq</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">sudo docker <span class=\"built_in\">kill</span> qq</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">sudo docker ps</span><br></pre></td></tr></table></figure></li></ol>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"Contents\"><a href=\"#Contents\" class=\"headerlink\" title=\"Contents\"></a>Contents</h3><ul><li>docker</li><li></li><li></li></ul><h3 id=\"docker\"><a href=\"#docker\" class=\"headerlink\" title=\"docker\"></a>docker</h3><blockquote><p>Docker Engine-Community  Ubuntu </p><ul><li>Xenial 16.04 (LTS)</li><li>Bionic 18.04 (LTS)</li><li>Cosmic 18.10</li><li>Disco 19.04</li><li></li></ul><p>Docker Engine - Community  x86_64 amd64armhfarm64s390x IBM Z ppc64leIBMPower</p><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>Docker  dockerdocker.io  docker-engine </p><p><code>$ sudo apt-get remove docker docker-engine docker.io containerd runc</code></p><p> Docker Engine-Community  docker-ce </p><p> Docker Engine-Community</p><hr><h4 id=\"-Docker-\"><a href=\"#-Docker-\" class=\"headerlink\" title=\" Docker \"></a> Docker </h4><p> Docker Engine-Community  Docker  Docker </p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p> apt </p><p><code>$ sudo apt-get update</code></p><p> apt HTTPS:</p><p><code>$ sudo apt-get install apt-transport-https ca-certificates curl gnupg-agent software-properties-common</code></p><p> Docker  GPG </p><p><code>$ curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -</code></p><p>9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88 8</p><p><code>$ sudo apt-key fingerprint 0EBFCD88</code></p><p>pub rsa4096 2017-02-22 [SCEA]<br>9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88<br>uid [ unknown] Docker Release (CE deb) <a href=\"&#109;&#x61;&#105;&#x6c;&#116;&#x6f;&#x3a;&#x64;&#111;&#x63;&#x6b;&#x65;&#114;&#x40;&#100;&#x6f;&#99;&#x6b;&#101;&#x72;&#x2e;&#99;&#x6f;&#109;\">&#x64;&#111;&#x63;&#x6b;&#x65;&#114;&#x40;&#100;&#x6f;&#99;&#x6b;&#101;&#x72;&#x2e;&#99;&#x6f;&#109;</a><br>sub rsa4096 2017-02-22 [S]</p><p></p><p><code>$ sudo add-apt-repository &quot;deb [arch=amd64] https://download.docker.com/linux/ ubuntu $(lsb_release -cs) stable&quot;</code></p><h4 id=\"-Docker-Engine-Community\"><a href=\"#-Docker-Engine-Community\" class=\"headerlink\" title=\" Docker Engine-Community\"></a> Docker Engine-Community</h4><p> apt </p><p><code>$ sudo apt-get update</code></p><p> Docker Engine-Community  containerd </p><p><code>$ sudo apt-get install docker-ce docker-ce-cli containerd.io</code></p><p> Docker Engine-Community</p><p><code>$ apt-cache madison docker-ce</code></p><p>docker-ce | 5:18.09.1~3-0~ubuntu-xenial | <a href=\"https://download.docker.com/linux/ubuntu\" target=\"_blank\" rel=\"noopener\">https://download.docker.com/linux/ubuntu</a> xenial/stable amd64 Packages<br>docker-ce | 5:18.09.0~3-0~ubuntu-xenial | <a href=\"https://download.docker.com/linux/ubuntu\" target=\"_blank\" rel=\"noopener\">https://download.docker.com/linux/ubuntu</a> xenial/stable amd64 Packages<br>docker-ce | 18.06.1~ce~3-0~ubuntu | <a href=\"https://download.docker.com/linux/ubuntu\" target=\"_blank\" rel=\"noopener\">https://download.docker.com/linux/ubuntu</a> xenial/stable amd64 Packages<br>docker-ce | 18.06.0~ce~3-0~ubuntu | <a href=\"https://download.docker.com/linux/ubuntu\" target=\"_blank\" rel=\"noopener\">https://download.docker.com/linux/ubuntu</a> xenial/stable amd64 Packages<br></p><p> 5:18.09.1~3-0~ubuntu-xenial</p><p><code>$ sudo apt-get install docker-ce=&lt;VERSION_STRING&gt; docker-ce-cli=&lt;VERSION_STRING&gt; containerd.io</code></p><p> Docker :</p><p><code>$ sudo docker run hello-world</code></p><h4 id=\"-docker-compose\"><a href=\"#-docker-compose\" class=\"headerlink\" title=\" docker-compose\"></a> docker-compose</h4><p><code>$ sudo apt install docker-compose</code></p><h4 id=\"docker\"><a href=\"#docker\" class=\"headerlink\" title=\"docker\"></a>docker</h4><p><code>$ sudo gedit /etc/docker/daemon.json</code></p><p><br></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  &quot;registry-mirrors&quot;: [&quot;https:&#x2F;&#x2F;docker.mirrors.ustc.edu.cn&quot;]</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p></blockquote><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ul><li>Tim =&gt; <code>sudo docker pull bestwu/qq</code></li><li>wechat =&gt; <code>sudo docker pull bestwu/wechat</code></li></ul><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol><li>audioID<br><code>getent group audio | cut -d: -f3</code></li><li><p><br>yml docker-tim.yml</p><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"attr\">version:</span> <span class=\"string\">'2'</span></span><br><span class=\"line\"><span class=\"attr\">services:</span></span><br><span class=\"line\"> <span class=\"attr\">qq:</span></span><br><span class=\"line\">   <span class=\"attr\">image:</span> <span class=\"string\">bestwu/qq:office</span>    <span class=\"comment\">#  office  latest  QQTim</span></span><br><span class=\"line\">   <span class=\"attr\">container_name:</span> <span class=\"string\">qq</span></span><br><span class=\"line\">   <span class=\"attr\">devices:</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">/dev/snd</span> <span class=\"comment\">#</span></span><br><span class=\"line\">   <span class=\"attr\">volumes:</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">/tmp/.X11-unix:/tmp/.X11-unix</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">$HOME/TencentFiles:/TencentFiles</span></span><br><span class=\"line\">   <span class=\"attr\">environment:</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">DISPLAY=unix$DISPLAY</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">XMODIFIERS=@im=ibus</span> <span class=\"comment\">#</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">QT_IM_MODULE=ibus</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">GTK_IM_MODULE=ibus</span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">AUDIO_GID=29</span> <span class=\"comment\">#  (29 parrotsec) audio gid </span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">GID=1000</span> <span class=\"comment\">#  1000  gid </span></span><br><span class=\"line\">     <span class=\"bullet\">-</span> <span class=\"string\">UID=1000</span> <span class=\"comment\">#  1000  uid </span></span><br></pre></td></tr></table></figure></li><li><p><br>start-tim.sh</p><figure class=\"highlight yml\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/bin/sh</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\"><span class=\"comment\"># -d </span></span><br><span class=\"line\"><span class=\"string\">echo</span> <span class=\"string\">\"yw020154\"</span> <span class=\"string\">|</span> <span class=\"string\">sudo</span> <span class=\"string\">docker-compose</span> <span class=\"string\">-f</span> <span class=\"string\">docker-tim.yml</span> <span class=\"string\">up</span> <span class=\"string\">-d</span></span><br></pre></td></tr></table></figure></li><li><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># //</span></span><br><span class=\"line\">sudo docker start/stop/restart qq</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">sudo docker <span class=\"built_in\">kill</span> qq</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">sudo docker ps</span><br></pre></td></tr></table></figure></li></ol>"},{"title":"echarts-","catalog":true,"toc_nav_num":true,"date":"2020-03-22T10:24:00.000Z","subtitle":"Echarts Tree","header-img":"article_header.png","updateDate":"2020-03-22T10:24:00.000Z","_content":"\n### \n\n1. \n\n2. \n\n3. IV4label\n\n4. IItree\n\n5. IIItree\n\n### \n\n-------------\nEchartsTreeRoot\n\n![snapshot](snapshot.png)\n\n### \n\n-------------------------------\n\n1. \nlabelechartsV4echarts tree\n\n![snapshot_select](snapshot_select.png)\n\n2. (Symbol)echartssymbolimg-srcbase64 img-str()\n\n![tree-1](tree-1.png)\n![tree-2](tree-2.png)\n![tree-3](tree-3.png)\n\n\n### IV4label\n\n-------------------------------\n\nseries-tree.label.formatter\n> \\n \n\n####   \n\n1.   \n* {a}\n* {b}\n* {c}\n* {d}\n* {@xxx}'xxx'{@product}'product'` \n* {@[n]}n{@[3]}`  3  0 \n\n2.   \nformatter: '{b}: {d}'\n\n3.   \n(params: Object|Array) => string\n params  formatter \n```js\n{\n    componentType: 'series',\n    // \n    seriesType: string,\n    //  option.series  index\n    seriesIndex: number,\n    // \n    seriesName: string,\n    // \n    name: string,\n    //  data  index\n    dataIndex: number,\n    // \n    data: Object,\n    //  data  data  mapradar \n    value: number|Array|Object,\n    //  encode \n    // key  'x' 'y' 'radius' 'angle' \n    // value  null/undefied dimension index \n    // \n    // {\n    //     x: [2] // dimension index  2  x \n    //     y: [0] // dimension index  0  y \n    // }\n    encode: Object,\n    // \n    dimensionNames: Array<String>,\n    //  index 0  1  2 ...\n    // \n    dimensionIndex: number,\n    // \n    color: string,\n}\n```\n\n#### 1\nformatter`series[0].label``series[0].label.normal`formatterdata`normal``emphasis`\n![tree-4](tree-4.png)\n\nseries-tree.label.richCSS\n```js\n{\n  color , fontStyle , fontWeight , fontFamily , fontSize , align , verticalAlign , lineHeight , backgroundColor , borderColor , borderWidth , borderRadius , padding , shadowColor , shadowBlur , shadowOffsetX , shadowOffsetY , width , height , textBorderColor , textBorderWidth , textShadowColor , textShadowBlur , textShadowOffsetX , textShadowOffsetY\n} \n```\n\nseries-tree.data.labellabel.formatter\n\n```js\nconst rawTreeData = {\n          name: 'snapshotA',\n          selected: false, // selected\n          collapsed: false, // collapsed\n          label: {\n            // * formatter\n            formatter: this.echartsInitData.series[0].label.normal.formatter,\n          },\n          children: [\n            ...\n          ],\n}\n```\n\n![tree-5](tree-5.png)\n\n### IItree\n\n-------------------------------\n\n#### 1()\n> ReactcomponentDidUpdateoptionsechartsrendertree \n\n1. JsdeepComparison\n\n```js\n/**\n * [deepComparison ]\n * @param  {[any]} data [any]\n * @return {[Boolean]}      []\n */\nexport function deepComparison(data1, data2) {\n  const { hasOwnProperty } = Object.prototype;\n  // \n  const getType = (d) => {\n    if (typeof d === 'object') {\n      if (!(d instanceof Object)) {\n        return 'null';\n      }\n      if (d instanceof Date) {\n        return 'date';\n      }\n      if (d instanceof RegExp) {\n        return 'regexp';\n      }\n      // object / array //\n      return 'object';\n    }\n    if (d !== d) return 'nan';\n    return (typeof d).toLowerCase();\n  };\n  // \n  const is = (d1, d2, type) => {\n    if (type === 'nan') return true;\n    if (type === 'date' || type === 'regexp') return d1.toString() === d2.toString();\n    return (d1 === d2);\n  };\n  // \n  const compare = (d1, d2) => {\n    const type1 = getType(d1);\n    const type2 = getType(d2);\n    if (type1 !== type2) {\n      return false;\n    }\n    if (type1 === 'object') {\n      const keys1 = Object.keys(d1).filter(k => hasOwnProperty.call(d1, k));\n      const keys2 = Object.keys(d2).filter(k => hasOwnProperty.call(d2, k));\n      if (keys1.length !== keys2.length) {\n        return false;\n      }\n      for (let i = 0; i < keys1.length; i += 1) {\n        if (\n          !keys2.includes(keys1[i]) ||\n          !compare(d1[keys1[i]], d2[keys1[i]])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    return is(d1, d2, type1);\n  };\n\n  return compare(data1, data2);\n}\n```\n\n2.\n\n```js\n  componentDidUpdate() {\n    console.log('update');\n    const { treeData } = this.props;\n    const rawTreeData = toJS(treeData);\n    if (!deepComparison(this.echartsTreeData, rawTreeData)) {\n      console.log('change');\n      this.echartsTreeData = rawTreeData;\n      const optionData = this.echartsElement.getOption();\n      optionData.series[0].data = [rawTreeData];\n      console.log(optionData);\n      // this.echartsElement.clear();\n      this.echartsElement.setOption(optionData, true);\n    }\n  }\n```\n\n#### 2()base64img url\n>1base64\n\n![tree-6](tree-6.png)\n\n#### 3()\n>2imgechartsbugsetOptionecharts\n\n```js\nconst chartOption = {\n  animation: true, // \n  tooltip: {\n    trigger: 'item',\n    triggerOn: 'mousemove',\n  },\n  series: [\n    ...\n  ],\n};\n```\n\n#### 4()\n>echartsfinishedechartsechartsoptionsfinishedfinished\n\n1.   \n\n```js\n/**\n   * @param  {Function} fn         []\n   * @param  {[Time]}   delayTime  [(ms)]\n   * @param  {Boolean}  isImediate []\n   * @param  {[type]}   args       []\n  */\nexport function fnDebounce() {\n  const fnObject = {};\n  let timer;\n\n  return (fn, delayTime, isImediate, args) => {\n    // \n    const setTimer = () => {\n      timer = setTimeout(() => {\n        fn(args);\n        // \n        clearTimeout(timer);\n        delete (fnObject[fn]);\n      }, delayTime);\n\n      fnObject[fn] = {\n        delayTime,\n        timer,\n      };\n    };\n    // \n    if (!delayTime || isImediate) return fn(args);\n    // \n    if (fnObject[fn]) {\n      clearTimeout(timer);\n      setTimer(fn, delayTime, args);\n    } else {\n      setTimer(fn, delayTime, args);\n    }\n  };\n}\n```\n\n2. finished  \nsymbol`finished`\n```js\nclass FsPageSnapShotBody extends Component {\n  echartsElement= null\n  echartsTreeData = null;\n\n  // \n  fnDebounce = fnDebounce();\n\n  pendingEventsTrigger = (nodeName) => {\n    const optionData = this.echartsElement.getOption();\n    this.echartsElement.setOption(optionData, true);\n  };\n\n  componentDidMount() {\n    const { snapshot } = this.props;\n    this.echartsElement = echarts.init(this.refs.fsSnapShot);\n    this.echartsElement.setOption(snapshot.echartsInitData);\n    // finished\n    this.echartsElement.on('finished', (params) => {\n      // 200ms\n      this.fnDebounce(this.pendingEventsTrigger, 200, false, null);\n    });\n    window.addEventListener('resize', this.resizeCharts);\n  }\n  componentDidUpdate() {\n    ...\n  }\n  resizeCharts = () => {\n    this.echartsElement.resize();\n  }\n  componentWillUnmount() {\n    echarts.dispose(this.echartsElement);\n    window.removeEventListener('resize', this.resizeCharts);\n  }\n  onClickChart = (e) => {\n    ...\n  }\n  onDoubleClickChart = (e) => {\n    ...\n  }\n  render() {\n    ...\n  }\n}\n```\n\n\n### IIItree\n\n-------------------------------\necharts`dblclick``options.series[0].data``selected`label.formatterechartstree/`options.series[0].data``collapsed:[Boolean]`tree/\n\n#### 1echarts\ndblclick`selected:true``selected``mouseover`\n1.   \n```js\n/* Tree */\nechartsInitData= {\n    tooltip: {\n      trigger: 'item',\n      triggerOn: 'mousemove',\n    },\n    series: [\n      {\n        {...},\n        leaves: {...},\n        expandAndCollapse: false,\n        animationDuration: 100,\n        animationDelayUpdate: 300, // \n        animationDurationUpdate: 400,\n      },\n    ],\n  }\n```\n\n2. \n\n![tree-bug1](tree-bug1.gif)\n\n#### 2\ntreetree(`300ms`)treetree()echartsecharts(tree`selected`label.formatter)\n\n1. `selected`  \n```js\n/* React- */\nonDoubleClickChart = (e) => {\n    const { name } = e.data;\n    this.selectedNodeName = name;\n    setTimeout(() => {\n      this.props.snapshot.chooseSnapShot(name);\n    }, 400);\n  }\n```\n\n2. \n![tree-bug2](tree-bug2.gif)\n\n#### \n`finished`echarts`selected``selected`\n\n1.   \n```js\nclass FsPageSnapShotBody extends Component {\n  echartsElement= null\n  echartsTreeData = null;\n  selectedNodeName = null;\n\n  // \n  dblclickFnDebounce = fnDebounce();\n\n  pendingEventsTrigger = (nodeName) => {\n    const optionData = this.echartsElement.getOption();\n    this.echartsElement.setOption(optionData, true);\n  };\n\n  componentDidMount() {\n    const { snapshot } = this.props;\n    this.echartsElement = echarts.init(this.refs.fsSnapShot);\n    this.echartsElement.setOption(snapshot.echartsInitData);\n    this.echartsElement.on('dblclick', this.onDoubleClickChart);\n    this.echartsElement.on('click', this.onClickChart);\n    // finished\n    this.echartsElement.on('finished', (params) => {\n      if (this.selectedNodeName) {\n        // 200ms\n        this.dblclickFnDebounce(this.pendingEventsTrigger, 200, false, this.selectedNodeName);\n      }\n    });\n\n    snapshot.getSnapShotRequest();\n    window.addEventListener('resize', this.resizeCharts);\n  }\n  componentDidUpdate() {\n    ...\n  }\n  resizeCharts = () => {\n    this.echartsElement.resize();\n  }\n  componentWillUnmount() {\n    echarts.dispose(this.echartsElement);\n    window.removeEventListener('resize', this.resizeCharts);\n  }\n  onClickChart = (e) => {\n    ...\n  }\n  onDoubleClickChart = (e) => {\n    ...\n  }\n  render() {\n    ...\n  }\n}\n```\n\n2. \n![tree-bug-fix](tree-bug-fix.gif)","source":"_posts/2020-03-22-echarts-.md","raw":"---\ntitle: \"echarts-\"\ncatalog: true\ntoc_nav_num: true\ndate:   2020-03-22 18:24:00\nsubtitle: \"Echarts Tree\"\nheader-img: \"article_header.png\"\ntags:\n- echarts\n- react\ncategories:\n- Echarts\nupdateDate: 2020-03-22 18:24:00\n---\n\n### \n\n1. \n\n2. \n\n3. IV4label\n\n4. IItree\n\n5. IIItree\n\n### \n\n-------------\nEchartsTreeRoot\n\n![snapshot](snapshot.png)\n\n### \n\n-------------------------------\n\n1. \nlabelechartsV4echarts tree\n\n![snapshot_select](snapshot_select.png)\n\n2. (Symbol)echartssymbolimg-srcbase64 img-str()\n\n![tree-1](tree-1.png)\n![tree-2](tree-2.png)\n![tree-3](tree-3.png)\n\n\n### IV4label\n\n-------------------------------\n\nseries-tree.label.formatter\n> \\n \n\n####   \n\n1.   \n* {a}\n* {b}\n* {c}\n* {d}\n* {@xxx}'xxx'{@product}'product'` \n* {@[n]}n{@[3]}`  3  0 \n\n2.   \nformatter: '{b}: {d}'\n\n3.   \n(params: Object|Array) => string\n params  formatter \n```js\n{\n    componentType: 'series',\n    // \n    seriesType: string,\n    //  option.series  index\n    seriesIndex: number,\n    // \n    seriesName: string,\n    // \n    name: string,\n    //  data  index\n    dataIndex: number,\n    // \n    data: Object,\n    //  data  data  mapradar \n    value: number|Array|Object,\n    //  encode \n    // key  'x' 'y' 'radius' 'angle' \n    // value  null/undefied dimension index \n    // \n    // {\n    //     x: [2] // dimension index  2  x \n    //     y: [0] // dimension index  0  y \n    // }\n    encode: Object,\n    // \n    dimensionNames: Array<String>,\n    //  index 0  1  2 ...\n    // \n    dimensionIndex: number,\n    // \n    color: string,\n}\n```\n\n#### 1\nformatter`series[0].label``series[0].label.normal`formatterdata`normal``emphasis`\n![tree-4](tree-4.png)\n\nseries-tree.label.richCSS\n```js\n{\n  color , fontStyle , fontWeight , fontFamily , fontSize , align , verticalAlign , lineHeight , backgroundColor , borderColor , borderWidth , borderRadius , padding , shadowColor , shadowBlur , shadowOffsetX , shadowOffsetY , width , height , textBorderColor , textBorderWidth , textShadowColor , textShadowBlur , textShadowOffsetX , textShadowOffsetY\n} \n```\n\nseries-tree.data.labellabel.formatter\n\n```js\nconst rawTreeData = {\n          name: 'snapshotA',\n          selected: false, // selected\n          collapsed: false, // collapsed\n          label: {\n            // * formatter\n            formatter: this.echartsInitData.series[0].label.normal.formatter,\n          },\n          children: [\n            ...\n          ],\n}\n```\n\n![tree-5](tree-5.png)\n\n### IItree\n\n-------------------------------\n\n#### 1()\n> ReactcomponentDidUpdateoptionsechartsrendertree \n\n1. JsdeepComparison\n\n```js\n/**\n * [deepComparison ]\n * @param  {[any]} data [any]\n * @return {[Boolean]}      []\n */\nexport function deepComparison(data1, data2) {\n  const { hasOwnProperty } = Object.prototype;\n  // \n  const getType = (d) => {\n    if (typeof d === 'object') {\n      if (!(d instanceof Object)) {\n        return 'null';\n      }\n      if (d instanceof Date) {\n        return 'date';\n      }\n      if (d instanceof RegExp) {\n        return 'regexp';\n      }\n      // object / array //\n      return 'object';\n    }\n    if (d !== d) return 'nan';\n    return (typeof d).toLowerCase();\n  };\n  // \n  const is = (d1, d2, type) => {\n    if (type === 'nan') return true;\n    if (type === 'date' || type === 'regexp') return d1.toString() === d2.toString();\n    return (d1 === d2);\n  };\n  // \n  const compare = (d1, d2) => {\n    const type1 = getType(d1);\n    const type2 = getType(d2);\n    if (type1 !== type2) {\n      return false;\n    }\n    if (type1 === 'object') {\n      const keys1 = Object.keys(d1).filter(k => hasOwnProperty.call(d1, k));\n      const keys2 = Object.keys(d2).filter(k => hasOwnProperty.call(d2, k));\n      if (keys1.length !== keys2.length) {\n        return false;\n      }\n      for (let i = 0; i < keys1.length; i += 1) {\n        if (\n          !keys2.includes(keys1[i]) ||\n          !compare(d1[keys1[i]], d2[keys1[i]])) {\n          return false;\n        }\n      }\n      return true;\n    }\n    return is(d1, d2, type1);\n  };\n\n  return compare(data1, data2);\n}\n```\n\n2.\n\n```js\n  componentDidUpdate() {\n    console.log('update');\n    const { treeData } = this.props;\n    const rawTreeData = toJS(treeData);\n    if (!deepComparison(this.echartsTreeData, rawTreeData)) {\n      console.log('change');\n      this.echartsTreeData = rawTreeData;\n      const optionData = this.echartsElement.getOption();\n      optionData.series[0].data = [rawTreeData];\n      console.log(optionData);\n      // this.echartsElement.clear();\n      this.echartsElement.setOption(optionData, true);\n    }\n  }\n```\n\n#### 2()base64img url\n>1base64\n\n![tree-6](tree-6.png)\n\n#### 3()\n>2imgechartsbugsetOptionecharts\n\n```js\nconst chartOption = {\n  animation: true, // \n  tooltip: {\n    trigger: 'item',\n    triggerOn: 'mousemove',\n  },\n  series: [\n    ...\n  ],\n};\n```\n\n#### 4()\n>echartsfinishedechartsechartsoptionsfinishedfinished\n\n1.   \n\n```js\n/**\n   * @param  {Function} fn         []\n   * @param  {[Time]}   delayTime  [(ms)]\n   * @param  {Boolean}  isImediate []\n   * @param  {[type]}   args       []\n  */\nexport function fnDebounce() {\n  const fnObject = {};\n  let timer;\n\n  return (fn, delayTime, isImediate, args) => {\n    // \n    const setTimer = () => {\n      timer = setTimeout(() => {\n        fn(args);\n        // \n        clearTimeout(timer);\n        delete (fnObject[fn]);\n      }, delayTime);\n\n      fnObject[fn] = {\n        delayTime,\n        timer,\n      };\n    };\n    // \n    if (!delayTime || isImediate) return fn(args);\n    // \n    if (fnObject[fn]) {\n      clearTimeout(timer);\n      setTimer(fn, delayTime, args);\n    } else {\n      setTimer(fn, delayTime, args);\n    }\n  };\n}\n```\n\n2. finished  \nsymbol`finished`\n```js\nclass FsPageSnapShotBody extends Component {\n  echartsElement= null\n  echartsTreeData = null;\n\n  // \n  fnDebounce = fnDebounce();\n\n  pendingEventsTrigger = (nodeName) => {\n    const optionData = this.echartsElement.getOption();\n    this.echartsElement.setOption(optionData, true);\n  };\n\n  componentDidMount() {\n    const { snapshot } = this.props;\n    this.echartsElement = echarts.init(this.refs.fsSnapShot);\n    this.echartsElement.setOption(snapshot.echartsInitData);\n    // finished\n    this.echartsElement.on('finished', (params) => {\n      // 200ms\n      this.fnDebounce(this.pendingEventsTrigger, 200, false, null);\n    });\n    window.addEventListener('resize', this.resizeCharts);\n  }\n  componentDidUpdate() {\n    ...\n  }\n  resizeCharts = () => {\n    this.echartsElement.resize();\n  }\n  componentWillUnmount() {\n    echarts.dispose(this.echartsElement);\n    window.removeEventListener('resize', this.resizeCharts);\n  }\n  onClickChart = (e) => {\n    ...\n  }\n  onDoubleClickChart = (e) => {\n    ...\n  }\n  render() {\n    ...\n  }\n}\n```\n\n\n### IIItree\n\n-------------------------------\necharts`dblclick``options.series[0].data``selected`label.formatterechartstree/`options.series[0].data``collapsed:[Boolean]`tree/\n\n#### 1echarts\ndblclick`selected:true``selected``mouseover`\n1.   \n```js\n/* Tree */\nechartsInitData= {\n    tooltip: {\n      trigger: 'item',\n      triggerOn: 'mousemove',\n    },\n    series: [\n      {\n        {...},\n        leaves: {...},\n        expandAndCollapse: false,\n        animationDuration: 100,\n        animationDelayUpdate: 300, // \n        animationDurationUpdate: 400,\n      },\n    ],\n  }\n```\n\n2. \n\n![tree-bug1](tree-bug1.gif)\n\n#### 2\ntreetree(`300ms`)treetree()echartsecharts(tree`selected`label.formatter)\n\n1. `selected`  \n```js\n/* React- */\nonDoubleClickChart = (e) => {\n    const { name } = e.data;\n    this.selectedNodeName = name;\n    setTimeout(() => {\n      this.props.snapshot.chooseSnapShot(name);\n    }, 400);\n  }\n```\n\n2. \n![tree-bug2](tree-bug2.gif)\n\n#### \n`finished`echarts`selected``selected`\n\n1.   \n```js\nclass FsPageSnapShotBody extends Component {\n  echartsElement= null\n  echartsTreeData = null;\n  selectedNodeName = null;\n\n  // \n  dblclickFnDebounce = fnDebounce();\n\n  pendingEventsTrigger = (nodeName) => {\n    const optionData = this.echartsElement.getOption();\n    this.echartsElement.setOption(optionData, true);\n  };\n\n  componentDidMount() {\n    const { snapshot } = this.props;\n    this.echartsElement = echarts.init(this.refs.fsSnapShot);\n    this.echartsElement.setOption(snapshot.echartsInitData);\n    this.echartsElement.on('dblclick', this.onDoubleClickChart);\n    this.echartsElement.on('click', this.onClickChart);\n    // finished\n    this.echartsElement.on('finished', (params) => {\n      if (this.selectedNodeName) {\n        // 200ms\n        this.dblclickFnDebounce(this.pendingEventsTrigger, 200, false, this.selectedNodeName);\n      }\n    });\n\n    snapshot.getSnapShotRequest();\n    window.addEventListener('resize', this.resizeCharts);\n  }\n  componentDidUpdate() {\n    ...\n  }\n  resizeCharts = () => {\n    this.echartsElement.resize();\n  }\n  componentWillUnmount() {\n    echarts.dispose(this.echartsElement);\n    window.removeEventListener('resize', this.resizeCharts);\n  }\n  onClickChart = (e) => {\n    ...\n  }\n  onDoubleClickChart = (e) => {\n    ...\n  }\n  render() {\n    ...\n  }\n}\n```\n\n2. \n![tree-bug-fix](tree-bug-fix.gif)","slug":"echarts-","published":1,"updated":"2020-03-22T02:51:41.020Z","_id":"ck82fwgbx0019in95feys3v11","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol><li><p></p></li><li><p></p></li><li><p>IV4label</p></li><li><p>IItree</p></li><li><p>IIItree</p></li></ol><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p>EchartsTreeRoot</p><p><img src=\"snapshot.png\" alt=\"snapshot\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><ol><li><br>labelechartsV4echarts tree</li></ol><p><img src=\"snapshot_select.png\" alt=\"snapshot_select\"></p><ol><li>(Symbol)echartssymbolimg-srcbase64 img-str()</li></ol><p><img src=\"tree-1.png\" alt=\"tree-1\"><br><img src=\"tree-2.png\" alt=\"tree-2\"><br><img src=\"tree-3.png\" alt=\"tree-3\"></p><h3 id=\"IV4label\"><a href=\"#IV4label\" class=\"headerlink\" title=\"IV4label\"></a>IV4label</h3><hr><p>series-tree.label.formatter</p><blockquote><p> \\n </p></blockquote><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li></li></ol><ul><li>{a}</li><li>{b}</li><li>{c}</li><li>{d}</li><li>{@xxx}xxx{@product}product` </li><li>{@[n]}n{@[3]}`  3  0 </li></ul><ol><li><p><br>formatter: {b}: {d}</p></li><li><p><br>(params: Object|Array) =&gt; string<br> params  formatter </p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    componentType: <span class=\"string\">'series'</span>,</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    seriesType: string,</span><br><span class=\"line\">    <span class=\"comment\">//  option.series  index</span></span><br><span class=\"line\">    seriesIndex: number,</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    seriesName: string,</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    name: string,</span><br><span class=\"line\">    <span class=\"comment\">//  data  index</span></span><br><span class=\"line\">    dataIndex: number,</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    data: <span class=\"built_in\">Object</span>,</span><br><span class=\"line\">    <span class=\"comment\">//  data  data  mapradar </span></span><br><span class=\"line\">    value: number|<span class=\"built_in\">Array</span>|<span class=\"built_in\">Object</span>,</span><br><span class=\"line\">    <span class=\"comment\">//  encode </span></span><br><span class=\"line\">    <span class=\"comment\">// key  'x' 'y' 'radius' 'angle' </span></span><br><span class=\"line\">    <span class=\"comment\">// value  null/undefied dimension index </span></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"comment\">// &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//     x: [2] // dimension index  2  x </span></span><br><span class=\"line\">    <span class=\"comment\">//     y: [0] // dimension index  0  y </span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    encode: <span class=\"built_in\">Object</span>,</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    dimensionNames: <span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">String</span>&gt;,</span><br><span class=\"line\">    <span class=\"comment\">//  index 0  1  2 ...</span></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    dimensionIndex: number,</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    color: string,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h4><p>formatter<code>series[0].label</code><code>series[0].label.normal</code>formatterdata<code>normal</code><code>emphasis</code><br><img src=\"tree-4.png\" alt=\"tree-4\"></p><p>series-tree.label.richCSS<br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  color , fontStyle , fontWeight , fontFamily , fontSize , align , verticalAlign , lineHeight , backgroundColor , borderColor , borderWidth , borderRadius , padding , shadowColor , shadowBlur , shadowOffsetX , shadowOffsetY , width , height , textBorderColor , textBorderWidth , textShadowColor , textShadowBlur , textShadowOffsetX , textShadowOffsetY</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><p>series-tree.data.labellabel.formatter</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> rawTreeData = &#123;</span><br><span class=\"line\">          name: <span class=\"string\">'snapshotA'</span>,</span><br><span class=\"line\">          selected: <span class=\"literal\">false</span>, <span class=\"comment\">// selected</span></span><br><span class=\"line\">          collapsed: <span class=\"literal\">false</span>, <span class=\"comment\">// collapsed</span></span><br><span class=\"line\">          label: &#123;</span><br><span class=\"line\">            <span class=\"comment\">// * formatter</span></span><br><span class=\"line\">            formatter: <span class=\"keyword\">this</span>.echartsInitData.series[<span class=\"number\">0</span>].label.normal.formatter,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          children: [</span><br><span class=\"line\">            ...</span><br><span class=\"line\">          ],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p><img src=\"tree-5.png\" alt=\"tree-5\"></p><h3 id=\"IItree\"><a href=\"#IItree\" class=\"headerlink\" title=\"IItree\"></a>IItree</h3><hr><h4 id=\"1--\"><a href=\"#1--\" class=\"headerlink\" title=\"1()\"></a>1()</h4><blockquote><p>ReactcomponentDidUpdateoptionsechartsrendertree </p></blockquote><ol><li>JsdeepComparison</li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [deepComparison ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[any]&#125;</span> </span>data [any]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return <span class=\"type\">&#123;[Boolean]&#125;</span>      </span>[]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">deepComparison</span>(<span class=\"params\">data1, data2</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; hasOwnProperty &#125; = <span class=\"built_in\">Object</span>.prototype;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> getType = <span class=\"function\">(<span class=\"params\">d</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> d === <span class=\"string\">'object'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!(d <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Object</span>)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'null'</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (d <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Date</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'date'</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (d <span class=\"keyword\">instanceof</span> <span class=\"built_in\">RegExp</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'regexp'</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">// object / array //</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'object'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (d !== d) <span class=\"keyword\">return</span> <span class=\"string\">'nan'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (<span class=\"keyword\">typeof</span> d).toLowerCase();</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> is = <span class=\"function\">(<span class=\"params\">d1, d2, type</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (type === <span class=\"string\">'nan'</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (type === <span class=\"string\">'date'</span> || type === <span class=\"string\">'regexp'</span>) <span class=\"keyword\">return</span> d1.toString() === d2.toString();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (d1 === d2);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> compare = <span class=\"function\">(<span class=\"params\">d1, d2</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> type1 = getType(d1);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> type2 = getType(d2);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (type1 !== type2) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (type1 === <span class=\"string\">'object'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> keys1 = <span class=\"built_in\">Object</span>.keys(d1).filter(<span class=\"function\"><span class=\"params\">k</span> =&gt;</span> hasOwnProperty.call(d1, k));</span><br><span class=\"line\">      <span class=\"keyword\">const</span> keys2 = <span class=\"built_in\">Object</span>.keys(d2).filter(<span class=\"function\"><span class=\"params\">k</span> =&gt;</span> hasOwnProperty.call(d2, k));</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (keys1.length !== keys2.length) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; keys1.length; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (</span><br><span class=\"line\">          !keys2.includes(keys1[i]) ||</span><br><span class=\"line\">          !compare(d1[keys1[i]], d2[keys1[i]])) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> is(d1, d2, type1);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> compare(data1, data2);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p>2.</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">componentDidUpdate() &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'update'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; treeData &#125; = <span class=\"keyword\">this</span>.props;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> rawTreeData = toJS(treeData);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!deepComparison(<span class=\"keyword\">this</span>.echartsTreeData, rawTreeData)) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'change'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsTreeData = rawTreeData;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> optionData = <span class=\"keyword\">this</span>.echartsElement.getOption();</span><br><span class=\"line\">    optionData.series[<span class=\"number\">0</span>].data = [rawTreeData];</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(optionData);</span><br><span class=\"line\">    <span class=\"comment\">// this.echartsElement.clear();</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.setOption(optionData, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h4 id=\"2--base64img-url\"><a href=\"#2--base64img-url\" class=\"headerlink\" title=\"2()base64img url\"></a>2()base64img url</h4><blockquote><p>1base64</p></blockquote><p><img src=\"tree-6.png\" alt=\"tree-6\"></p><h4 id=\"3--\"><a href=\"#3--\" class=\"headerlink\" title=\"3()\"></a>3()</h4><blockquote><p>2imgechartsbugsetOptionecharts</p></blockquote><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> chartOption = &#123;</span><br><span class=\"line\">  animation: <span class=\"literal\">true</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  tooltip: &#123;</span><br><span class=\"line\">    trigger: <span class=\"string\">'item'</span>,</span><br><span class=\"line\">    triggerOn: <span class=\"string\">'mousemove'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  series: [</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><h4 id=\"4--\"><a href=\"#4--\" class=\"headerlink\" title=\"4()\"></a>4()</h4><blockquote><p>echartsfinishedechartsechartsoptionsfinishedfinished</p></blockquote><ol><li><p><br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;Function&#125;</span> </span>fn         []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Time]&#125;</span>   </span>delayTime  [(ms)]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;Boolean&#125;</span>  </span>isImediate []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[type]&#125;</span>   </span>args       []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fnDebounce</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fnObject = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> timer;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">fn, delayTime, isImediate, args</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> setTimer = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      timer = setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        fn(args);</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        clearTimeout(timer);</span><br><span class=\"line\">        <span class=\"keyword\">delete</span> (fnObject[fn]);</span><br><span class=\"line\">      &#125;, delayTime);</span><br><span class=\"line\"></span><br><span class=\"line\">      fnObject[fn] = &#123;</span><br><span class=\"line\">        delayTime,</span><br><span class=\"line\">        timer,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!delayTime || isImediate) <span class=\"keyword\">return</span> fn(args);</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (fnObject[fn]) &#123;</span><br><span class=\"line\">      clearTimeout(timer);</span><br><span class=\"line\">      setTimer(fn, delayTime, args);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      setTimer(fn, delayTime, args);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li><li><p>finished<br>symbol<code>finished</code></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FsPageSnapShotBody</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  echartsElement= <span class=\"literal\">null</span></span><br><span class=\"line\">  echartsTreeData = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  fnDebounce = fnDebounce();</span><br><span class=\"line\"></span><br><span class=\"line\">  pendingEventsTrigger = <span class=\"function\">(<span class=\"params\">nodeName</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> optionData = <span class=\"keyword\">this</span>.echartsElement.getOption();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.setOption(optionData, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  componentDidMount() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; snapshot &#125; = <span class=\"keyword\">this</span>.props;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement = echarts.init(<span class=\"keyword\">this</span>.refs.fsSnapShot);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.setOption(snapshot.echartsInitData);</span><br><span class=\"line\">    <span class=\"comment\">// finished</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.on(<span class=\"string\">'finished'</span>, (params) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 200ms</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.fnDebounce(<span class=\"keyword\">this</span>.pendingEventsTrigger, <span class=\"number\">200</span>, <span class=\"literal\">false</span>, <span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'resize'</span>, <span class=\"keyword\">this</span>.resizeCharts);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  componentDidUpdate() &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  resizeCharts = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.resize();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  componentWillUnmount() &#123;</span><br><span class=\"line\">    echarts.dispose(<span class=\"keyword\">this</span>.echartsElement);</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.removeEventListener(<span class=\"string\">'resize'</span>, <span class=\"keyword\">this</span>.resizeCharts);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  onClickChart = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  onDoubleClickChart = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id=\"IIItree\"><a href=\"#IIItree\" class=\"headerlink\" title=\"IIItree\"></a>IIItree</h3><hr><p>echarts<code>dblclick</code><code>options.series[0].data</code><code>selected</code>label.formatterechartstree/<code>options.series[0].data</code><code>collapsed:[Boolean]</code>tree/</p><h4 id=\"1echarts\"><a href=\"#1echarts\" class=\"headerlink\" title=\"1echarts\"></a>1echarts</h4><p>dblclick<code>selected:true</code><code>selected</code><code>mouseover</code></p><ol><li><p></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Tree */</span></span><br><span class=\"line\">echartsInitData= &#123;</span><br><span class=\"line\">    tooltip: &#123;</span><br><span class=\"line\">      trigger: <span class=\"string\">'item'</span>,</span><br><span class=\"line\">      triggerOn: <span class=\"string\">'mousemove'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    series: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        &#123;...&#125;,</span><br><span class=\"line\">        leaves: &#123;...&#125;,</span><br><span class=\"line\">        expandAndCollapse: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        animationDuration: <span class=\"number\">100</span>,</span><br><span class=\"line\">        animationDelayUpdate: <span class=\"number\">300</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">        animationDurationUpdate: <span class=\"number\">400</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><p></p></li></ol><p><img src=\"tree-bug1.gif\" alt=\"tree-bug1\"></p><h4 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h4><p>treetree(<code>300ms</code>)treetree()echartsecharts(tree<code>selected</code>label.formatter)</p><ol><li><p><code>selected</code></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* React- */</span></span><br><span class=\"line\">onDoubleClickChart = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; name &#125; = e.data;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.selectedNodeName = name;</span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.props.snapshot.chooseSnapShot(name);</span><br><span class=\"line\">    &#125;, <span class=\"number\">400</span>);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><p><br><img src=\"tree-bug2.gif\" alt=\"tree-bug2\"></p></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><code>finished</code>echarts<code>selected</code><code>selected</code></p><ol><li><p></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FsPageSnapShotBody</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  echartsElement= <span class=\"literal\">null</span></span><br><span class=\"line\">  echartsTreeData = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  selectedNodeName = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  dblclickFnDebounce = fnDebounce();</span><br><span class=\"line\"></span><br><span class=\"line\">  pendingEventsTrigger = <span class=\"function\">(<span class=\"params\">nodeName</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> optionData = <span class=\"keyword\">this</span>.echartsElement.getOption();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.setOption(optionData, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  componentDidMount() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; snapshot &#125; = <span class=\"keyword\">this</span>.props;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement = echarts.init(<span class=\"keyword\">this</span>.refs.fsSnapShot);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.setOption(snapshot.echartsInitData);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.on(<span class=\"string\">'dblclick'</span>, <span class=\"keyword\">this</span>.onDoubleClickChart);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.on(<span class=\"string\">'click'</span>, <span class=\"keyword\">this</span>.onClickChart);</span><br><span class=\"line\">    <span class=\"comment\">// finished</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.on(<span class=\"string\">'finished'</span>, (params) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.selectedNodeName) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 200ms</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dblclickFnDebounce(<span class=\"keyword\">this</span>.pendingEventsTrigger, <span class=\"number\">200</span>, <span class=\"literal\">false</span>, <span class=\"keyword\">this</span>.selectedNodeName);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    snapshot.getSnapShotRequest();</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'resize'</span>, <span class=\"keyword\">this</span>.resizeCharts);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  componentDidUpdate() &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  resizeCharts = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.resize();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  componentWillUnmount() &#123;</span><br><span class=\"line\">    echarts.dispose(<span class=\"keyword\">this</span>.echartsElement);</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.removeEventListener(<span class=\"string\">'resize'</span>, <span class=\"keyword\">this</span>.resizeCharts);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  onClickChart = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  onDoubleClickChart = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li><li><p><br><img src=\"tree-bug-fix.gif\" alt=\"tree-bug-fix\"></p></li></ol>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol><li><p></p></li><li><p></p></li><li><p>IV4label</p></li><li><p>IItree</p></li><li><p>IIItree</p></li></ol><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p>EchartsTreeRoot</p><p><img src=\"snapshot.png\" alt=\"snapshot\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><ol><li><br>labelechartsV4echarts tree</li></ol><p><img src=\"snapshot_select.png\" alt=\"snapshot_select\"></p><ol><li>(Symbol)echartssymbolimg-srcbase64 img-str()</li></ol><p><img src=\"tree-1.png\" alt=\"tree-1\"><br><img src=\"tree-2.png\" alt=\"tree-2\"><br><img src=\"tree-3.png\" alt=\"tree-3\"></p><h3 id=\"IV4label\"><a href=\"#IV4label\" class=\"headerlink\" title=\"IV4label\"></a>IV4label</h3><hr><p>series-tree.label.formatter</p><blockquote><p> \\n </p></blockquote><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li></li></ol><ul><li>{a}</li><li>{b}</li><li>{c}</li><li>{d}</li><li>{@xxx}xxx{@product}product` </li><li>{@[n]}n{@[3]}`  3  0 </li></ul><ol><li><p><br>formatter: {b}: {d}</p></li><li><p><br>(params: Object|Array) =&gt; string<br> params  formatter </p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    componentType: <span class=\"string\">'series'</span>,</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    seriesType: string,</span><br><span class=\"line\">    <span class=\"comment\">//  option.series  index</span></span><br><span class=\"line\">    seriesIndex: number,</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    seriesName: string,</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    name: string,</span><br><span class=\"line\">    <span class=\"comment\">//  data  index</span></span><br><span class=\"line\">    dataIndex: number,</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    data: <span class=\"built_in\">Object</span>,</span><br><span class=\"line\">    <span class=\"comment\">//  data  data  mapradar </span></span><br><span class=\"line\">    value: number|<span class=\"built_in\">Array</span>|<span class=\"built_in\">Object</span>,</span><br><span class=\"line\">    <span class=\"comment\">//  encode </span></span><br><span class=\"line\">    <span class=\"comment\">// key  'x' 'y' 'radius' 'angle' </span></span><br><span class=\"line\">    <span class=\"comment\">// value  null/undefied dimension index </span></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"comment\">// &#123;</span></span><br><span class=\"line\">    <span class=\"comment\">//     x: [2] // dimension index  2  x </span></span><br><span class=\"line\">    <span class=\"comment\">//     y: [0] // dimension index  0  y </span></span><br><span class=\"line\">    <span class=\"comment\">// &#125;</span></span><br><span class=\"line\">    encode: <span class=\"built_in\">Object</span>,</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    dimensionNames: <span class=\"built_in\">Array</span>&lt;<span class=\"built_in\">String</span>&gt;,</span><br><span class=\"line\">    <span class=\"comment\">//  index 0  1  2 ...</span></span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    dimensionIndex: number,</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    color: string,</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"1\"><a href=\"#1\" class=\"headerlink\" title=\"1\"></a>1</h4><p>formatter<code>series[0].label</code><code>series[0].label.normal</code>formatterdata<code>normal</code><code>emphasis</code><br><img src=\"tree-4.png\" alt=\"tree-4\"></p><p>series-tree.label.richCSS<br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  color , fontStyle , fontWeight , fontFamily , fontSize , align , verticalAlign , lineHeight , backgroundColor , borderColor , borderWidth , borderRadius , padding , shadowColor , shadowBlur , shadowOffsetX , shadowOffsetY , width , height , textBorderColor , textBorderWidth , textShadowColor , textShadowBlur , textShadowOffsetX , textShadowOffsetY</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><p>series-tree.data.labellabel.formatter</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> rawTreeData = &#123;</span><br><span class=\"line\">          name: <span class=\"string\">'snapshotA'</span>,</span><br><span class=\"line\">          selected: <span class=\"literal\">false</span>, <span class=\"comment\">// selected</span></span><br><span class=\"line\">          collapsed: <span class=\"literal\">false</span>, <span class=\"comment\">// collapsed</span></span><br><span class=\"line\">          label: &#123;</span><br><span class=\"line\">            <span class=\"comment\">// * formatter</span></span><br><span class=\"line\">            formatter: <span class=\"keyword\">this</span>.echartsInitData.series[<span class=\"number\">0</span>].label.normal.formatter,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          children: [</span><br><span class=\"line\">            ...</span><br><span class=\"line\">          ],</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p><img src=\"tree-5.png\" alt=\"tree-5\"></p><h3 id=\"IItree\"><a href=\"#IItree\" class=\"headerlink\" title=\"IItree\"></a>IItree</h3><hr><h4 id=\"1--\"><a href=\"#1--\" class=\"headerlink\" title=\"1()\"></a>1()</h4><blockquote><p>ReactcomponentDidUpdateoptionsechartsrendertree </p></blockquote><ol><li>JsdeepComparison</li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [deepComparison ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;[any]&#125;</span> </span>data [any]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@return <span class=\"type\">&#123;[Boolean]&#125;</span>      </span>[]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">deepComparison</span>(<span class=\"params\">data1, data2</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; hasOwnProperty &#125; = <span class=\"built_in\">Object</span>.prototype;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> getType = <span class=\"function\">(<span class=\"params\">d</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (<span class=\"keyword\">typeof</span> d === <span class=\"string\">'object'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (!(d <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Object</span>)) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'null'</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (d <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Date</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'date'</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (d <span class=\"keyword\">instanceof</span> <span class=\"built_in\">RegExp</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"string\">'regexp'</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"comment\">// object / array //</span></span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"string\">'object'</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (d !== d) <span class=\"keyword\">return</span> <span class=\"string\">'nan'</span>;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (<span class=\"keyword\">typeof</span> d).toLowerCase();</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> is = <span class=\"function\">(<span class=\"params\">d1, d2, type</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (type === <span class=\"string\">'nan'</span>) <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (type === <span class=\"string\">'date'</span> || type === <span class=\"string\">'regexp'</span>) <span class=\"keyword\">return</span> d1.toString() === d2.toString();</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (d1 === d2);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">const</span> compare = <span class=\"function\">(<span class=\"params\">d1, d2</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> type1 = getType(d1);</span><br><span class=\"line\">    <span class=\"keyword\">const</span> type2 = getType(d2);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (type1 !== type2) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (type1 === <span class=\"string\">'object'</span>) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">const</span> keys1 = <span class=\"built_in\">Object</span>.keys(d1).filter(<span class=\"function\"><span class=\"params\">k</span> =&gt;</span> hasOwnProperty.call(d1, k));</span><br><span class=\"line\">      <span class=\"keyword\">const</span> keys2 = <span class=\"built_in\">Object</span>.keys(d2).filter(<span class=\"function\"><span class=\"params\">k</span> =&gt;</span> hasOwnProperty.call(d2, k));</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (keys1.length !== keys2.length) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">for</span> (<span class=\"keyword\">let</span> i = <span class=\"number\">0</span>; i &lt; keys1.length; i += <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (</span><br><span class=\"line\">          !keys2.includes(keys1[i]) ||</span><br><span class=\"line\">          !compare(d1[keys1[i]], d2[keys1[i]])) &#123;</span><br><span class=\"line\">          <span class=\"keyword\">return</span> <span class=\"literal\">false</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      <span class=\"keyword\">return</span> <span class=\"literal\">true</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> is(d1, d2, type1);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> compare(data1, data2);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p>2.</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">componentDidUpdate() &#123;</span><br><span class=\"line\">  <span class=\"built_in\">console</span>.log(<span class=\"string\">'update'</span>);</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; treeData &#125; = <span class=\"keyword\">this</span>.props;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> rawTreeData = toJS(treeData);</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (!deepComparison(<span class=\"keyword\">this</span>.echartsTreeData, rawTreeData)) &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(<span class=\"string\">'change'</span>);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsTreeData = rawTreeData;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> optionData = <span class=\"keyword\">this</span>.echartsElement.getOption();</span><br><span class=\"line\">    optionData.series[<span class=\"number\">0</span>].data = [rawTreeData];</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.log(optionData);</span><br><span class=\"line\">    <span class=\"comment\">// this.echartsElement.clear();</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.setOption(optionData, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h4 id=\"2--base64img-url\"><a href=\"#2--base64img-url\" class=\"headerlink\" title=\"2()base64img url\"></a>2()base64img url</h4><blockquote><p>1base64</p></blockquote><p><img src=\"tree-6.png\" alt=\"tree-6\"></p><h4 id=\"3--\"><a href=\"#3--\" class=\"headerlink\" title=\"3()\"></a>3()</h4><blockquote><p>2imgechartsbugsetOptionecharts</p></blockquote><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> chartOption = &#123;</span><br><span class=\"line\">  animation: <span class=\"literal\">true</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  tooltip: &#123;</span><br><span class=\"line\">    trigger: <span class=\"string\">'item'</span>,</span><br><span class=\"line\">    triggerOn: <span class=\"string\">'mousemove'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  series: [</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  ],</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><h4 id=\"4--\"><a href=\"#4--\" class=\"headerlink\" title=\"4()\"></a>4()</h4><blockquote><p>echartsfinishedechartsechartsoptionsfinishedfinished</p></blockquote><ol><li><p><br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;Function&#125;</span> </span>fn         []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[Time]&#125;</span>   </span>delayTime  [(ms)]</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;Boolean&#125;</span>  </span>isImediate []</span></span><br><span class=\"line\"><span class=\"comment\">   * <span class=\"doctag\">@param  <span class=\"type\">&#123;[type]&#125;</span>   </span>args       []</span></span><br><span class=\"line\"><span class=\"comment\">  */</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fnDebounce</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> fnObject = &#123;&#125;;</span><br><span class=\"line\">  <span class=\"keyword\">let</span> timer;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">return</span> <span class=\"function\">(<span class=\"params\">fn, delayTime, isImediate, args</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">const</span> setTimer = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      timer = setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">        fn(args);</span><br><span class=\"line\">        <span class=\"comment\">// </span></span><br><span class=\"line\">        clearTimeout(timer);</span><br><span class=\"line\">        <span class=\"keyword\">delete</span> (fnObject[fn]);</span><br><span class=\"line\">      &#125;, delayTime);</span><br><span class=\"line\"></span><br><span class=\"line\">      fnObject[fn] = &#123;</span><br><span class=\"line\">        delayTime,</span><br><span class=\"line\">        timer,</span><br><span class=\"line\">      &#125;;</span><br><span class=\"line\">    &#125;;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!delayTime || isImediate) <span class=\"keyword\">return</span> fn(args);</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> (fnObject[fn]) &#123;</span><br><span class=\"line\">      clearTimeout(timer);</span><br><span class=\"line\">      setTimer(fn, delayTime, args);</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      setTimer(fn, delayTime, args);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li><li><p>finished<br>symbol<code>finished</code></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FsPageSnapShotBody</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  echartsElement= <span class=\"literal\">null</span></span><br><span class=\"line\">  echartsTreeData = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  fnDebounce = fnDebounce();</span><br><span class=\"line\"></span><br><span class=\"line\">  pendingEventsTrigger = <span class=\"function\">(<span class=\"params\">nodeName</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> optionData = <span class=\"keyword\">this</span>.echartsElement.getOption();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.setOption(optionData, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  componentDidMount() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; snapshot &#125; = <span class=\"keyword\">this</span>.props;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement = echarts.init(<span class=\"keyword\">this</span>.refs.fsSnapShot);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.setOption(snapshot.echartsInitData);</span><br><span class=\"line\">    <span class=\"comment\">// finished</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.on(<span class=\"string\">'finished'</span>, (params) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"comment\">// 200ms</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.fnDebounce(<span class=\"keyword\">this</span>.pendingEventsTrigger, <span class=\"number\">200</span>, <span class=\"literal\">false</span>, <span class=\"literal\">null</span>);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'resize'</span>, <span class=\"keyword\">this</span>.resizeCharts);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  componentDidUpdate() &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  resizeCharts = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.resize();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  componentWillUnmount() &#123;</span><br><span class=\"line\">    echarts.dispose(<span class=\"keyword\">this</span>.echartsElement);</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.removeEventListener(<span class=\"string\">'resize'</span>, <span class=\"keyword\">this</span>.resizeCharts);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  onClickChart = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  onDoubleClickChart = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li></ol><h3 id=\"IIItree\"><a href=\"#IIItree\" class=\"headerlink\" title=\"IIItree\"></a>IIItree</h3><hr><p>echarts<code>dblclick</code><code>options.series[0].data</code><code>selected</code>label.formatterechartstree/<code>options.series[0].data</code><code>collapsed:[Boolean]</code>tree/</p><h4 id=\"1echarts\"><a href=\"#1echarts\" class=\"headerlink\" title=\"1echarts\"></a>1echarts</h4><p>dblclick<code>selected:true</code><code>selected</code><code>mouseover</code></p><ol><li><p></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* Tree */</span></span><br><span class=\"line\">echartsInitData= &#123;</span><br><span class=\"line\">    tooltip: &#123;</span><br><span class=\"line\">      trigger: <span class=\"string\">'item'</span>,</span><br><span class=\"line\">      triggerOn: <span class=\"string\">'mousemove'</span>,</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">    series: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        &#123;...&#125;,</span><br><span class=\"line\">        leaves: &#123;...&#125;,</span><br><span class=\"line\">        expandAndCollapse: <span class=\"literal\">false</span>,</span><br><span class=\"line\">        animationDuration: <span class=\"number\">100</span>,</span><br><span class=\"line\">        animationDelayUpdate: <span class=\"number\">300</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">        animationDurationUpdate: <span class=\"number\">400</span>,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><p></p></li></ol><p><img src=\"tree-bug1.gif\" alt=\"tree-bug1\"></p><h4 id=\"2\"><a href=\"#2\" class=\"headerlink\" title=\"2\"></a>2</h4><p>treetree(<code>300ms</code>)treetree()echartsecharts(tree<code>selected</code>label.formatter)</p><ol><li><p><code>selected</code></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* React- */</span></span><br><span class=\"line\">onDoubleClickChart = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; name &#125; = e.data;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.selectedNodeName = name;</span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.props.snapshot.chooseSnapShot(name);</span><br><span class=\"line\">    &#125;, <span class=\"number\">400</span>);</span><br><span class=\"line\">  &#125;</span><br></pre></td></tr></table></figure></li><li><p><br><img src=\"tree-bug2.gif\" alt=\"tree-bug2\"></p></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><code>finished</code>echarts<code>selected</code><code>selected</code></p><ol><li><p></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">FsPageSnapShotBody</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  echartsElement= <span class=\"literal\">null</span></span><br><span class=\"line\">  echartsTreeData = <span class=\"literal\">null</span>;</span><br><span class=\"line\">  selectedNodeName = <span class=\"literal\">null</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  dblclickFnDebounce = fnDebounce();</span><br><span class=\"line\"></span><br><span class=\"line\">  pendingEventsTrigger = <span class=\"function\">(<span class=\"params\">nodeName</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> optionData = <span class=\"keyword\">this</span>.echartsElement.getOption();</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.setOption(optionData, <span class=\"literal\">true</span>);</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  componentDidMount() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; snapshot &#125; = <span class=\"keyword\">this</span>.props;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement = echarts.init(<span class=\"keyword\">this</span>.refs.fsSnapShot);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.setOption(snapshot.echartsInitData);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.on(<span class=\"string\">'dblclick'</span>, <span class=\"keyword\">this</span>.onDoubleClickChart);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.on(<span class=\"string\">'click'</span>, <span class=\"keyword\">this</span>.onClickChart);</span><br><span class=\"line\">    <span class=\"comment\">// finished</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.on(<span class=\"string\">'finished'</span>, (params) =&gt; &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.selectedNodeName) &#123;</span><br><span class=\"line\">        <span class=\"comment\">// 200ms</span></span><br><span class=\"line\">        <span class=\"keyword\">this</span>.dblclickFnDebounce(<span class=\"keyword\">this</span>.pendingEventsTrigger, <span class=\"number\">200</span>, <span class=\"literal\">false</span>, <span class=\"keyword\">this</span>.selectedNodeName);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    snapshot.getSnapShotRequest();</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.addEventListener(<span class=\"string\">'resize'</span>, <span class=\"keyword\">this</span>.resizeCharts);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  componentDidUpdate() &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  resizeCharts = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.echartsElement.resize();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  componentWillUnmount() &#123;</span><br><span class=\"line\">    echarts.dispose(<span class=\"keyword\">this</span>.echartsElement);</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.removeEventListener(<span class=\"string\">'resize'</span>, <span class=\"keyword\">this</span>.resizeCharts);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  onClickChart = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  onDoubleClickChart = <span class=\"function\">(<span class=\"params\">e</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure></li><li><p><br><img src=\"tree-bug-fix.gif\" alt=\"tree-bug-fix\"></p></li></ol>"},{"title":"Electron+Mobx+React","catalog":true,"toc_nav_num":true,"date":"2019-10-26T12:43:00.000Z","subtitle":"Electron Mobx React","header-img":"article_header.png","updateDate":"2019-10-26T12:43:00.000Z","_content":"\n![Hello World](Fly.jpg)\n\n### \n\n1. \n2. webpack4\n3. webpack4\n4. electron-builder\n5. electron-builder\n\n### \n-------------\n[](www.jianshu.com/p/53d74df07e4c)coding work(webpackelectron)[](https://github.com/NoJsJa/electronux)\n\n### webpack4\n------------------------------------------\n\n#### jsximg:srcwebpack\njsx\n```html\n<div className=\"install-item-image\" onClick={() => {showTerminalInfo(item.label)}}>\n  <Dimmer active={loading} inverted>\n    <Loader size=\"tiny\">{ loadingLable }</Loader>\n  </Dimmer>\n  <img alt=\"error\" src={item.url} />\n</div>\n```\nimg:srcwebpackdistrequire\n```html\n...\nconst imgSrc = require('path/to/img');\n...\n<img src={imgSrc}>\n```\nimg:srcforwebpackfor\n```\n// 1\nconst requireContext = require.context('resources/install', true, /^\\.\\/.*\\.(jpg|png)$/);\n// 2\nconst requireContext = require.context('resources/install', true, /.*/);\nrequireContext.keys().map(requireContext);\n```\n\n#### publicPath\npublicPath[](https://www.jianshu.com/p/cbe81be10d78)\n> output.path    \n\n> output.publicPath urlurloutput.publicPathwebpackuri`www.yourhost.com/dist/index.html`publicPath`/dist/`\n\n* webpack-dev-serverpublicPath`/`webpack-dev-serverbundle.js`/``localhost:3000/bundle.js``localhost:3000/dist/bundle.js`webpack-dev-serverpublicPath`/dist/`\n\n* \n```\nwebpack.config.js\n...\ndevtool: 'source-map',\n  entry: [\n    'react-hot-loader/patch',\n    'webpack-dev-server/client?http://localhost:3000',\n    'webpack/hot/only-dev-server',\n    './app/index',\n  ],\n  mode: 'development',\n  output: {\n    filename: 'bundle.js',\n    path: path.resolve(__dirname, 'dist'),\n    publicPath: '/',\n  },\n...\n```\n* \n```\nwebpack.prod.config.js\n...\nentry: [\n    './app/index',\n  ],\n  mode: 'production',\n  output: {\n    filename: 'bundle.js',\n    path: path.resolve(__dirname, 'dist'),\n    publicPath: '/',\n  },\n...\n```\n\n#### \nwebpack.config`resolve.alias`import`../../../`\n*   \n```\nwebpack.config.js\n...\nresolve: {\n    alias: {\n      resources: path.resolve(__dirname, 'resources'),\n      app: path.resolve(__dirname, 'app'),\n    },\n  },\n...\n```\n* \n```html\n<img src=\"resources/install/albert.png\"}>\n```\n\n### webpack4\n------------------------------------------\n#### css`backgroup-image: url(...)`\nwebpack.config`resolve.alias`cssimg:url`~`webpack\n```css\n.router-left-background {\n  background-image: url(~resources/public/gohome.jpg); /* The image used */\n  background-color: #f6f6f6; /* Used if the image is unavailable */\n  background-position: center; /* Center the image */\n  background-repeat: no-repeat; /* Do not repeat the image */\n  background-size: cover; /* cover size */\n}\n```\n#### bundle.js\nbundle.js`extract-text-webpack-plugin`webpackindex.htmlbundle.jscss\n* index.html\n\n```html\n<!DOCTYPE HTML>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>electronux</title>\n  <link rel=\"stylesheet\" href=\"style.scss.css\">\n  <link rel=\"stylesheet\" href=\"style.css\">\n  <base href=\"./\">\n</head>\n<body>\n  <div id=\"root\"></div>\n  <script src=\"bundle.js\"></script>\n</body>\n</html>\n```\n* webpack`extract-text-webpack-plugin`\n`publicPath`webpack-dev-server`publicPath`(`/`)()`publicPath`\n\n```js\nwebpack.config.js\n...\nconst CleanWebpackPlugin = require('clean-webpack-plugin');\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\n\n// \nconst extractSass = new ExtractTextPlugin({\n  filename: 'style.scss.css',\n});\nconst extractCss = new ExtractTextPlugin({\n  filename: 'style.css',\n});\n...\nmodule.exports = {\n  ...\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        use: ['babel-loader'],\n      },\n      {\n        test: /\\.css$/,\n        use: extractCss.extract({\n          fallback: 'style-loader',\n          use: 'css-loader',\n          publicPath: '/',\n        }),\n      },\n      {\n        test: /\\.scss$/,\n        use: extractSass.extract({\n          use: [{\n            loader: 'css-loader',\n          }, {\n            loader: 'sass-loader',\n          }],\n          fallback: 'style-loader', //  style-loader\n          publicPath: '/',\n        }),\n      },\n      ...\n    ],\n    ...\n  },\n\n  plugins: [\n    extractSass,\n    extractCss,\n    ...\n  ],\n...\n```\n\n* webpack`extract-text-webpack-plugin`\n`publicPath`distcssdist\n\n```js\nwebpack.prod.config.js\n...\nmodule.exports = {\n  ...\n  module: {\n    rules: [\n      ...\n      {\n        test: /\\.css$/,\n        use: extractCss.extract({\n          fallback: 'style-loader',\n          use: 'css-loader',\n          publicPath: path.join(__dirname, 'dist/'),\n        }),\n      },\n      {\n        test: /\\.scss$/,\n        use: extractSass.extract({\n          use: [{\n            loader: 'css-loader',\n          }, {\n            loader: 'sass-loader',\n          }],\n          fallback: 'style-loader', //  style-loader\n          publicPath: path.join(__dirname, 'dist/'),\n        }),\n      },\n    ...\n```\n\n### electron-builder\n----------------------------------------------------\n```json\n{\n  \"appId\": \"com.nojsja.electronux\",\n  \"copyright\": \"nojsja\",\n  \"productName\": \"electronux\",\n  \"asar\": false,\n  \"directories\": {\n    \"buildResources\": \"build-assets/\",\n    \"output\": \"build/\"\n  },\n  \"files\": [\"package.json\", \"index.js\", \"dist/\", \"app/\", \"node_modules/\"],\n  \"linux\": {\n    \"icon\": \"resources\",\n    \"category\": \"System\",\n    \"description\": \"A System Management Tool Build For Manjaro Linux 17\",\n    \"synopsis\": \"electronux\",\n    \"target\": [\"zip\"]\n  }\n}\n```\nelectron-builder`dist`()index.js()`files`\n* package.json -- \n* index.js -- \n* dist -- \n* app -- \n* node_modules -- \n\n[](https://www.electron.build/configuration/configuration)\n\n### electron-builder\n-------------------------------------------------\n#### \nelectron-builder(github)polipohttp-proxygitclonevps()`~/.cache/electron-builder``~/.cache/electron`\n\n#### AppImagechmod\nLinuxAppImage  \n> AppImageLinuxAppImage``AppImage  \n\nshellnode.jsfs`fs.chmod`shell(chmod 755)AppImageApplmageAppImage\nzip`pacman``deb``rpm``tar.gz`\n\n#### arar\nelectron-builder`asar: true/false`truearararararar\n\n#### (img:src / css:url)\nhtml demo:\n```html\n<div className=\"install-item-image\" onClick={() => {showTerminalInfo(item.label)}}>\n  <Dimmer active={loading} inverted>\n    <Loader size=\"tiny\">{ loadingLable }</Loader>\n  </Dimmer>\n  <img alt=\"error\" src={item.url} />\n</div>\n```\ncss demo:\n```css\n.router-left-background {\n  background-image: url(~resources/public/gohome.jpg); /* The image used */\n  background-color: #f6f6f6; /* Used if the image is unavailable */\n  background-position: center; /* Center the image */\n  background-repeat: no-repeat; /* Do not repeat the image */\n  background-size: cover; /* cover size */\n}\n```\nwebpackdist`electron index.js`(filedist)electron`file``electron index.js`electronindex.html  \n```js\nwindow.loadURL(url.format({\n  pathname: path.resolve(__dirname, 'dist', 'index.html'),\n  protocol: 'file:',\n  slashes: true,\n}));\n```\nindex.htmlcssreactfile`dist``/`index.htmlbase\n```html\n<!DOCTYPE HTML>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>electronux</title>\n  <link rel=\"stylesheet\" href=\"style.scss.css\">\n  <link rel=\"stylesheet\" href=\"style.css\">\n  <base href=\"./\">\n</head>\n<body>\n  <div id=\"root\"></div>\n  <script src=\"bundle.js\"></script>\n</body>\n</html>\n```\n\n#### node.jsshell\nnode.jsfs`fs.chmod`rootnode  \n* fsChmod\n\n```js\nconst fs = require('fs');\nconst path = require('path');\n\nfunction chmod(target, opstr) {\n  if (fs.statSync(target).isDirectory()) {\n    const files = fs.readdirSync(target);\n    if (files.length) {\n      files.forEach((file) => {\n        chmod(path.join(target, file), opstr);\n      });\n    }\n  } else {\n    fs.chmodSync(target, opstr);\n  }\n}\nfunction fsChmod(dir, opstr) {\n  chmod(dir, opstr);\n}\n\nmodule.exports = fsChmod;\n\n```\n\n* fsChmodshell\n\n\n```js\nconst path = require('path');\nconst fsChmod = require('./fs-chmod');\nfunction fsChmodShell() {\n  fsChmod(path.join(__dirname, '../shell'), 0o711);\n}\nmodule.exports = fsChmodShell;\n```\n\n* index.js  \n____ `__dirname``procoss.pwd()``path.resolve(process.cwd(), 'path/to/file')``app.getAppPath()``path.resolve(app.getAppPath(), 'path/to/file')`(appelectron)`app.getAppPath()``package.json`electron-builderindex.js`/`shell(shell scripts)`/app/service/shell`electron-builderindex.js( )`/`shell`/resources/app/app/shell`index.jsshellelectron-builder`/resources/app`(`arar`)\n\n```js\nconst fsChmodShell = require('./app/services/middleware/fs-chmod-shell.js');\nfsChmodShell();\n```\n\n### - )\n","source":"_posts/2019-10-26-Electron-Mobx-React.md","raw":"---\ntitle: \"Electron+Mobx+React\"\ncatalog: true\ntoc_nav_num: true\ndate:   2019-10-26 20:43:00\nsubtitle: \"Electron Mobx React\"\nheader-img: \"article_header.png\"\ntags:\n- es6\n- react\n- mobx\n- electron\ncategories:\n- Electron\nupdateDate: 2019-10-26 20:43:00\n---\n\n![Hello World](Fly.jpg)\n\n### \n\n1. \n2. webpack4\n3. webpack4\n4. electron-builder\n5. electron-builder\n\n### \n-------------\n[](www.jianshu.com/p/53d74df07e4c)coding work(webpackelectron)[](https://github.com/NoJsJa/electronux)\n\n### webpack4\n------------------------------------------\n\n#### jsximg:srcwebpack\njsx\n```html\n<div className=\"install-item-image\" onClick={() => {showTerminalInfo(item.label)}}>\n  <Dimmer active={loading} inverted>\n    <Loader size=\"tiny\">{ loadingLable }</Loader>\n  </Dimmer>\n  <img alt=\"error\" src={item.url} />\n</div>\n```\nimg:srcwebpackdistrequire\n```html\n...\nconst imgSrc = require('path/to/img');\n...\n<img src={imgSrc}>\n```\nimg:srcforwebpackfor\n```\n// 1\nconst requireContext = require.context('resources/install', true, /^\\.\\/.*\\.(jpg|png)$/);\n// 2\nconst requireContext = require.context('resources/install', true, /.*/);\nrequireContext.keys().map(requireContext);\n```\n\n#### publicPath\npublicPath[](https://www.jianshu.com/p/cbe81be10d78)\n> output.path    \n\n> output.publicPath urlurloutput.publicPathwebpackuri`www.yourhost.com/dist/index.html`publicPath`/dist/`\n\n* webpack-dev-serverpublicPath`/`webpack-dev-serverbundle.js`/``localhost:3000/bundle.js``localhost:3000/dist/bundle.js`webpack-dev-serverpublicPath`/dist/`\n\n* \n```\nwebpack.config.js\n...\ndevtool: 'source-map',\n  entry: [\n    'react-hot-loader/patch',\n    'webpack-dev-server/client?http://localhost:3000',\n    'webpack/hot/only-dev-server',\n    './app/index',\n  ],\n  mode: 'development',\n  output: {\n    filename: 'bundle.js',\n    path: path.resolve(__dirname, 'dist'),\n    publicPath: '/',\n  },\n...\n```\n* \n```\nwebpack.prod.config.js\n...\nentry: [\n    './app/index',\n  ],\n  mode: 'production',\n  output: {\n    filename: 'bundle.js',\n    path: path.resolve(__dirname, 'dist'),\n    publicPath: '/',\n  },\n...\n```\n\n#### \nwebpack.config`resolve.alias`import`../../../`\n*   \n```\nwebpack.config.js\n...\nresolve: {\n    alias: {\n      resources: path.resolve(__dirname, 'resources'),\n      app: path.resolve(__dirname, 'app'),\n    },\n  },\n...\n```\n* \n```html\n<img src=\"resources/install/albert.png\"}>\n```\n\n### webpack4\n------------------------------------------\n#### css`backgroup-image: url(...)`\nwebpack.config`resolve.alias`cssimg:url`~`webpack\n```css\n.router-left-background {\n  background-image: url(~resources/public/gohome.jpg); /* The image used */\n  background-color: #f6f6f6; /* Used if the image is unavailable */\n  background-position: center; /* Center the image */\n  background-repeat: no-repeat; /* Do not repeat the image */\n  background-size: cover; /* cover size */\n}\n```\n#### bundle.js\nbundle.js`extract-text-webpack-plugin`webpackindex.htmlbundle.jscss\n* index.html\n\n```html\n<!DOCTYPE HTML>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>electronux</title>\n  <link rel=\"stylesheet\" href=\"style.scss.css\">\n  <link rel=\"stylesheet\" href=\"style.css\">\n  <base href=\"./\">\n</head>\n<body>\n  <div id=\"root\"></div>\n  <script src=\"bundle.js\"></script>\n</body>\n</html>\n```\n* webpack`extract-text-webpack-plugin`\n`publicPath`webpack-dev-server`publicPath`(`/`)()`publicPath`\n\n```js\nwebpack.config.js\n...\nconst CleanWebpackPlugin = require('clean-webpack-plugin');\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\n\n// \nconst extractSass = new ExtractTextPlugin({\n  filename: 'style.scss.css',\n});\nconst extractCss = new ExtractTextPlugin({\n  filename: 'style.css',\n});\n...\nmodule.exports = {\n  ...\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        use: ['babel-loader'],\n      },\n      {\n        test: /\\.css$/,\n        use: extractCss.extract({\n          fallback: 'style-loader',\n          use: 'css-loader',\n          publicPath: '/',\n        }),\n      },\n      {\n        test: /\\.scss$/,\n        use: extractSass.extract({\n          use: [{\n            loader: 'css-loader',\n          }, {\n            loader: 'sass-loader',\n          }],\n          fallback: 'style-loader', //  style-loader\n          publicPath: '/',\n        }),\n      },\n      ...\n    ],\n    ...\n  },\n\n  plugins: [\n    extractSass,\n    extractCss,\n    ...\n  ],\n...\n```\n\n* webpack`extract-text-webpack-plugin`\n`publicPath`distcssdist\n\n```js\nwebpack.prod.config.js\n...\nmodule.exports = {\n  ...\n  module: {\n    rules: [\n      ...\n      {\n        test: /\\.css$/,\n        use: extractCss.extract({\n          fallback: 'style-loader',\n          use: 'css-loader',\n          publicPath: path.join(__dirname, 'dist/'),\n        }),\n      },\n      {\n        test: /\\.scss$/,\n        use: extractSass.extract({\n          use: [{\n            loader: 'css-loader',\n          }, {\n            loader: 'sass-loader',\n          }],\n          fallback: 'style-loader', //  style-loader\n          publicPath: path.join(__dirname, 'dist/'),\n        }),\n      },\n    ...\n```\n\n### electron-builder\n----------------------------------------------------\n```json\n{\n  \"appId\": \"com.nojsja.electronux\",\n  \"copyright\": \"nojsja\",\n  \"productName\": \"electronux\",\n  \"asar\": false,\n  \"directories\": {\n    \"buildResources\": \"build-assets/\",\n    \"output\": \"build/\"\n  },\n  \"files\": [\"package.json\", \"index.js\", \"dist/\", \"app/\", \"node_modules/\"],\n  \"linux\": {\n    \"icon\": \"resources\",\n    \"category\": \"System\",\n    \"description\": \"A System Management Tool Build For Manjaro Linux 17\",\n    \"synopsis\": \"electronux\",\n    \"target\": [\"zip\"]\n  }\n}\n```\nelectron-builder`dist`()index.js()`files`\n* package.json -- \n* index.js -- \n* dist -- \n* app -- \n* node_modules -- \n\n[](https://www.electron.build/configuration/configuration)\n\n### electron-builder\n-------------------------------------------------\n#### \nelectron-builder(github)polipohttp-proxygitclonevps()`~/.cache/electron-builder``~/.cache/electron`\n\n#### AppImagechmod\nLinuxAppImage  \n> AppImageLinuxAppImage``AppImage  \n\nshellnode.jsfs`fs.chmod`shell(chmod 755)AppImageApplmageAppImage\nzip`pacman``deb``rpm``tar.gz`\n\n#### arar\nelectron-builder`asar: true/false`truearararararar\n\n#### (img:src / css:url)\nhtml demo:\n```html\n<div className=\"install-item-image\" onClick={() => {showTerminalInfo(item.label)}}>\n  <Dimmer active={loading} inverted>\n    <Loader size=\"tiny\">{ loadingLable }</Loader>\n  </Dimmer>\n  <img alt=\"error\" src={item.url} />\n</div>\n```\ncss demo:\n```css\n.router-left-background {\n  background-image: url(~resources/public/gohome.jpg); /* The image used */\n  background-color: #f6f6f6; /* Used if the image is unavailable */\n  background-position: center; /* Center the image */\n  background-repeat: no-repeat; /* Do not repeat the image */\n  background-size: cover; /* cover size */\n}\n```\nwebpackdist`electron index.js`(filedist)electron`file``electron index.js`electronindex.html  \n```js\nwindow.loadURL(url.format({\n  pathname: path.resolve(__dirname, 'dist', 'index.html'),\n  protocol: 'file:',\n  slashes: true,\n}));\n```\nindex.htmlcssreactfile`dist``/`index.htmlbase\n```html\n<!DOCTYPE HTML>\n<html lang=\"en\">\n<head>\n  <meta charset=\"UTF-8\">\n  <title>electronux</title>\n  <link rel=\"stylesheet\" href=\"style.scss.css\">\n  <link rel=\"stylesheet\" href=\"style.css\">\n  <base href=\"./\">\n</head>\n<body>\n  <div id=\"root\"></div>\n  <script src=\"bundle.js\"></script>\n</body>\n</html>\n```\n\n#### node.jsshell\nnode.jsfs`fs.chmod`rootnode  \n* fsChmod\n\n```js\nconst fs = require('fs');\nconst path = require('path');\n\nfunction chmod(target, opstr) {\n  if (fs.statSync(target).isDirectory()) {\n    const files = fs.readdirSync(target);\n    if (files.length) {\n      files.forEach((file) => {\n        chmod(path.join(target, file), opstr);\n      });\n    }\n  } else {\n    fs.chmodSync(target, opstr);\n  }\n}\nfunction fsChmod(dir, opstr) {\n  chmod(dir, opstr);\n}\n\nmodule.exports = fsChmod;\n\n```\n\n* fsChmodshell\n\n\n```js\nconst path = require('path');\nconst fsChmod = require('./fs-chmod');\nfunction fsChmodShell() {\n  fsChmod(path.join(__dirname, '../shell'), 0o711);\n}\nmodule.exports = fsChmodShell;\n```\n\n* index.js  \n____ `__dirname``procoss.pwd()``path.resolve(process.cwd(), 'path/to/file')``app.getAppPath()``path.resolve(app.getAppPath(), 'path/to/file')`(appelectron)`app.getAppPath()``package.json`electron-builderindex.js`/`shell(shell scripts)`/app/service/shell`electron-builderindex.js( )`/`shell`/resources/app/app/shell`index.jsshellelectron-builder`/resources/app`(`arar`)\n\n```js\nconst fsChmodShell = require('./app/services/middleware/fs-chmod-shell.js');\nfsChmodShell();\n```\n\n### - )\n","slug":"Electron-Mobx-React","published":1,"updated":"2019-10-26T02:54:06.264Z","_id":"ck26yz0dk001din95e2sx3kqi","comments":1,"layout":"post","photos":[],"link":"","content":"<p><img src=\"Fly.jpg\" alt=\"Hello World\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol><li></li><li>webpack4</li><li>webpack4</li><li>electron-builder</li><li>electron-builder</li></ol><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p><a href=\"www.jianshu.com/p/53d74df07e4c\"></a>coding work(webpackelectron)<a href=\"https://github.com/NoJsJa/electronux\" target=\"_blank\" rel=\"noopener\"></a></p><h3 id=\"webpack4\"><a href=\"#webpack4\" class=\"headerlink\" title=\"webpack4\"></a>webpack4</h3><hr><h4 id=\"jsximg-srcwebpack\"><a href=\"#jsximg-srcwebpack\" class=\"headerlink\" title=\"jsximg:srcwebpack\"></a>jsximg:srcwebpack</h4><p>jsx<br></p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">\"install-item-image\"</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> &#123;showTerminalInfo(item.label)&#125;&#125;&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">Dimmer</span> <span class=\"attr\">active</span>=<span class=\"string\">&#123;loading&#125;</span> <span class=\"attr\">inverted</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Loader</span> <span class=\"attr\">size</span>=<span class=\"string\">\"tiny\"</span>&gt;</span>&#123; loadingLable &#125;<span class=\"tag\">&lt;/<span class=\"name\">Loader</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">Dimmer</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"error\"</span> <span class=\"attr\">src</span>=<span class=\"string\">&#123;item.url&#125;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure><br>img:srcwebpackdistrequire<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">const imgSrc = require('path/to/img');</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&#123;imgSrc&#125;</span>&gt;</span></span><br></pre></td></tr></table></figure><br>img:srcforwebpackfor<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; 1</span><br><span class=\"line\">const requireContext &#x3D; require.context(&#39;resources&#x2F;install&#39;, true, &#x2F;^\\.\\&#x2F;.*\\.(jpg|png)$&#x2F;);</span><br><span class=\"line\">&#x2F;&#x2F; 2</span><br><span class=\"line\">const requireContext &#x3D; require.context(&#39;resources&#x2F;install&#39;, true, &#x2F;.*&#x2F;);</span><br><span class=\"line\">requireContext.keys().map(requireContext);</span><br></pre></td></tr></table></figure><p></p><h4 id=\"publicPath\"><a href=\"#publicPath\" class=\"headerlink\" title=\"publicPath\"></a>publicPath</h4><p>publicPath<a href=\"https://www.jianshu.com/p/cbe81be10d78\" target=\"_blank\" rel=\"noopener\"></a></p><blockquote><p>output.path  </p><p>output.publicPath urlurloutput.publicPathwebpackuri<code>www.yourhost.com/dist/index.html</code>publicPath<code>/dist/</code></p></blockquote><ul><li><p>webpack-dev-serverpublicPath<code>/</code>webpack-dev-serverbundle.js<code>/</code><code>localhost:3000/bundle.js</code><code>localhost:3000/dist/bundle.js</code>webpack-dev-serverpublicPath<code>/dist/</code></p></li><li><p></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">webpack.config.js</span><br><span class=\"line\">...</span><br><span class=\"line\">devtool: &#39;source-map&#39;,</span><br><span class=\"line\">  entry: [</span><br><span class=\"line\">    &#39;react-hot-loader&#x2F;patch&#39;,</span><br><span class=\"line\">    &#39;webpack-dev-server&#x2F;client?http:&#x2F;&#x2F;localhost:3000&#39;,</span><br><span class=\"line\">    &#39;webpack&#x2F;hot&#x2F;only-dev-server&#39;,</span><br><span class=\"line\">    &#39;.&#x2F;app&#x2F;index&#39;,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  mode: &#39;development&#39;,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: &#39;bundle.js&#39;,</span><br><span class=\"line\">    path: path.resolve(__dirname, &#39;dist&#39;),</span><br><span class=\"line\">    publicPath: &#39;&#x2F;&#39;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">webpack.prod.config.js</span><br><span class=\"line\">...</span><br><span class=\"line\">entry: [</span><br><span class=\"line\">    &#39;.&#x2F;app&#x2F;index&#39;,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  mode: &#39;production&#39;,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: &#39;bundle.js&#39;,</span><br><span class=\"line\">    path: path.resolve(__dirname, &#39;dist&#39;),</span><br><span class=\"line\">    publicPath: &#39;&#x2F;&#39;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>webpack.config<code>resolve.alias</code>import<code>../../../</code></p><ul><li><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">webpack.config.js</span><br><span class=\"line\">...</span><br><span class=\"line\">resolve: &#123;</span><br><span class=\"line\">    alias: &#123;</span><br><span class=\"line\">      resources: path.resolve(__dirname, &#39;resources&#39;),</span><br><span class=\"line\">      app: path.resolve(__dirname, &#39;app&#39;),</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"resources/install/albert.png\"</span>&#125;&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id=\"webpack4\"><a href=\"#webpack4\" class=\"headerlink\" title=\"webpack4\"></a>webpack4</h3><hr><h4 id=\"cssbackgroup-image-url-\"><a href=\"#cssbackgroup-image-url-\" class=\"headerlink\" title=\"cssbackgroup-image: url(...)\"></a>css<code>backgroup-image: url(...)</code></h4><p>webpack.config<code>resolve.alias</code>cssimg:url<code>~</code>webpack<br></p><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.router-left-background</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-image</span>: <span class=\"built_in\">url</span>(~resources/public/gohome.jpg); <span class=\"comment\">/* The image used */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#f6f6f6</span>; <span class=\"comment\">/* Used if the image is unavailable */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-position</span>: center; <span class=\"comment\">/* Center the image */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-repeat</span>: no-repeat; <span class=\"comment\">/* Do not repeat the image */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-size</span>: cover; <span class=\"comment\">/* cover size */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><h4 id=\"bundle-js\"><a href=\"#bundle-js\" class=\"headerlink\" title=\"bundle.js\"></a>bundle.js</h4><p>bundle.js<code>extract-text-webpack-plugin</code>webpackindex.htmlbundle.jscss</p><ul><li>index.html</li></ul><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">HTML</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>electronux<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"style.scss.css\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"style.css\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">base</span> <span class=\"attr\">href</span>=<span class=\"string\">\"./\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"root\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"bundle.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>webpack<code>extract-text-webpack-plugin</code><br><code>publicPath</code>webpack-dev-server<code>publicPath</code>(<code>/</code>)()<code>publicPath</code></li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">webpack.config.js</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">const</span> CleanWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'clean-webpack-plugin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> extractSass = <span class=\"keyword\">new</span> ExtractTextPlugin(&#123;</span><br><span class=\"line\">  filename: <span class=\"string\">'style.scss.css'</span>,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"keyword\">const</span> extractCss = <span class=\"keyword\">new</span> ExtractTextPlugin(&#123;</span><br><span class=\"line\">  filename: <span class=\"string\">'style.css'</span>,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        use: [<span class=\"string\">'babel-loader'</span>],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: extractCss.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">          publicPath: <span class=\"string\">'/'</span>,</span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.scss$/</span>,</span><br><span class=\"line\">        use: extractSass.extract(&#123;</span><br><span class=\"line\">          use: [&#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">          &#125;, &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'sass-loader'</span>,</span><br><span class=\"line\">          &#125;],</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>, <span class=\"comment\">//  style-loader</span></span><br><span class=\"line\">          publicPath: <span class=\"string\">'/'</span>,</span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      ...</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    extractSass,</span><br><span class=\"line\">    extractCss,</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  ],</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure><ul><li>webpack<code>extract-text-webpack-plugin</code><br><code>publicPath</code>distcssdist</li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">webpack.prod.config.js</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      ...</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: extractCss.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">          publicPath: path.join(__dirname, <span class=\"string\">'dist/'</span>),</span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.scss$/</span>,</span><br><span class=\"line\">        use: extractSass.extract(&#123;</span><br><span class=\"line\">          use: [&#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">          &#125;, &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'sass-loader'</span>,</span><br><span class=\"line\">          &#125;],</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>, <span class=\"comment\">//  style-loader</span></span><br><span class=\"line\">          publicPath: path.join(__dirname, <span class=\"string\">'dist/'</span>),</span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ...</span><br></pre></td></tr></table></figure><h3 id=\"electron-builder\"><a href=\"#electron-builder\" class=\"headerlink\" title=\"electron-builder\"></a>electron-builder</h3><hr><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"appId\"</span>: <span class=\"string\">\"com.nojsja.electronux\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"copyright\"</span>: <span class=\"string\">\"nojsja\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"productName\"</span>: <span class=\"string\">\"electronux\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"asar\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"directories\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"buildResources\"</span>: <span class=\"string\">\"build-assets/\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"output\"</span>: <span class=\"string\">\"build/\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"files\"</span>: [<span class=\"string\">\"package.json\"</span>, <span class=\"string\">\"index.js\"</span>, <span class=\"string\">\"dist/\"</span>, <span class=\"string\">\"app/\"</span>, <span class=\"string\">\"node_modules/\"</span>],</span><br><span class=\"line\">  <span class=\"attr\">\"linux\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"icon\"</span>: <span class=\"string\">\"resources\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"category\"</span>: <span class=\"string\">\"System\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"description\"</span>: <span class=\"string\">\"A System Management Tool Build For Manjaro Linux 17\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"synopsis\"</span>: <span class=\"string\">\"electronux\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"target\"</span>: [<span class=\"string\">\"zip\"</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p>electron-builder<code>dist</code>()index.js()<code>files</code></p><ul><li>package.json  </li><li>index.js  </li><li>dist  </li><li>app  </li><li>node_modules  </li></ul><p><a href=\"https://www.electron.build/configuration/configuration\" target=\"_blank\" rel=\"noopener\"></a></p><h3 id=\"electron-builder\"><a href=\"#electron-builder\" class=\"headerlink\" title=\"electron-builder\"></a>electron-builder</h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>electron-builder(github)polipohttp-proxygitclonevps()<code>~/.cache/electron-builder</code><code>~/.cache/electron</code></p><h4 id=\"AppImagechmod\"><a href=\"#AppImagechmod\" class=\"headerlink\" title=\"AppImagechmod\"></a>AppImagechmod</h4><p>LinuxAppImage</p><blockquote><p>AppImageLinuxAppImage<code></code>AppImage</p></blockquote><p>shellnode.jsfs<code>fs.chmod</code>shell(chmod 755)AppImageApplmageAppImage<br>zip<code>pacman</code><code>deb</code><code>rpm</code><code>tar.gz</code></p><h4 id=\"arar\"><a href=\"#arar\" class=\"headerlink\" title=\"arar\"></a>arar</h4><p>electron-builder<code>asar: true/false</code>truearararararar</p><h4 id=\"-img-src-css-url-\"><a href=\"#-img-src-css-url-\" class=\"headerlink\" title=\"(img:src / css:url)\"></a>(img:src / css:url)</h4><p>html demo:<br></p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">\"install-item-image\"</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> &#123;showTerminalInfo(item.label)&#125;&#125;&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">Dimmer</span> <span class=\"attr\">active</span>=<span class=\"string\">&#123;loading&#125;</span> <span class=\"attr\">inverted</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Loader</span> <span class=\"attr\">size</span>=<span class=\"string\">\"tiny\"</span>&gt;</span>&#123; loadingLable &#125;<span class=\"tag\">&lt;/<span class=\"name\">Loader</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">Dimmer</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"error\"</span> <span class=\"attr\">src</span>=<span class=\"string\">&#123;item.url&#125;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure><br>css demo:<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.router-left-background</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-image</span>: <span class=\"built_in\">url</span>(~resources/public/gohome.jpg); <span class=\"comment\">/* The image used */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#f6f6f6</span>; <span class=\"comment\">/* Used if the image is unavailable */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-position</span>: center; <span class=\"comment\">/* Center the image */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-repeat</span>: no-repeat; <span class=\"comment\">/* Do not repeat the image */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-size</span>: cover; <span class=\"comment\">/* cover size */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>webpackdist<code>electron index.js</code>(filedist)electron<code>file</code><code>electron index.js</code>electronindex.html<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.loadURL(url.format(&#123;</span><br><span class=\"line\">  pathname: path.resolve(__dirname, <span class=\"string\">'dist'</span>, <span class=\"string\">'index.html'</span>),</span><br><span class=\"line\">  protocol: <span class=\"string\">'file:'</span>,</span><br><span class=\"line\">  slashes: <span class=\"literal\">true</span>,</span><br><span class=\"line\">&#125;));</span><br></pre></td></tr></table></figure><br>index.htmlcssreactfile<code>dist</code><code>/</code>index.htmlbase<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">HTML</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>electronux<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"style.scss.css\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"style.css\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">base</span> <span class=\"attr\">href</span>=<span class=\"string\">\"./\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"root\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"bundle.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><h4 id=\"node-jsshell\"><a href=\"#node-jsshell\" class=\"headerlink\" title=\"node.jsshell\"></a>node.jsshell</h4><p>node.jsfs<code>fs.chmod</code>rootnode</p><ul><li>fsChmod</li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">chmod</span>(<span class=\"params\">target, opstr</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (fs.statSync(target).isDirectory()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> files = fs.readdirSync(target);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (files.length) &#123;</span><br><span class=\"line\">      files.forEach(<span class=\"function\">(<span class=\"params\">file</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        chmod(path.join(target, file), opstr);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    fs.chmodSync(target, opstr);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fsChmod</span>(<span class=\"params\">dir, opstr</span>) </span>&#123;</span><br><span class=\"line\">  chmod(dir, opstr);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = fsChmod;</span><br></pre></td></tr></table></figure><ul><li>fsChmodshell<br></li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> fsChmod = <span class=\"built_in\">require</span>(<span class=\"string\">'./fs-chmod'</span>);</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fsChmodShell</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  fsChmod(path.join(__dirname, <span class=\"string\">'../shell'</span>), <span class=\"number\">0o711</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = fsChmodShell;</span><br></pre></td></tr></table></figure><ul><li>index.js<br><strong></strong> <code>__dirname</code><code>procoss.pwd()</code><code>path.resolve(process.cwd(), &#39;path/to/file&#39;)</code><code>app.getAppPath()</code><code>path.resolve(app.getAppPath(), &#39;path/to/file&#39;)</code>(appelectron)<code>app.getAppPath()</code><code>package.json</code>electron-builderindex.js<code>/</code>shell(shell scripts)<code>/app/service/shell</code>electron-builderindex.js( )<code>/</code>shell<code>/resources/app/app/shell</code>index.jsshellelectron-builder<code>/resources/app</code>(<code>arar</code>)</li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fsChmodShell = <span class=\"built_in\">require</span>(<span class=\"string\">'./app/services/middleware/fs-chmod-shell.js'</span>);</span><br><span class=\"line\">fsChmodShell();</span><br></pre></td></tr></table></figure><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"- )\"></a>- )</h3>","site":{"data":{}},"excerpt":"","more":"<p><img src=\"Fly.jpg\" alt=\"Hello World\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol><li></li><li>webpack4</li><li>webpack4</li><li>electron-builder</li><li>electron-builder</li></ol><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p><a href=\"www.jianshu.com/p/53d74df07e4c\"></a>coding work(webpackelectron)<a href=\"https://github.com/NoJsJa/electronux\" target=\"_blank\" rel=\"noopener\"></a></p><h3 id=\"webpack4\"><a href=\"#webpack4\" class=\"headerlink\" title=\"webpack4\"></a>webpack4</h3><hr><h4 id=\"jsximg-srcwebpack\"><a href=\"#jsximg-srcwebpack\" class=\"headerlink\" title=\"jsximg:srcwebpack\"></a>jsximg:srcwebpack</h4><p>jsx<br></p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">\"install-item-image\"</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> &#123;showTerminalInfo(item.label)&#125;&#125;&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">Dimmer</span> <span class=\"attr\">active</span>=<span class=\"string\">&#123;loading&#125;</span> <span class=\"attr\">inverted</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Loader</span> <span class=\"attr\">size</span>=<span class=\"string\">\"tiny\"</span>&gt;</span>&#123; loadingLable &#125;<span class=\"tag\">&lt;/<span class=\"name\">Loader</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">Dimmer</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"error\"</span> <span class=\"attr\">src</span>=<span class=\"string\">&#123;item.url&#125;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure><br>img:srcwebpackdistrequire<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">const imgSrc = require('path/to/img');</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">&#123;imgSrc&#125;</span>&gt;</span></span><br></pre></td></tr></table></figure><br>img:srcforwebpackfor<br><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;&#x2F; 1</span><br><span class=\"line\">const requireContext &#x3D; require.context(&#39;resources&#x2F;install&#39;, true, &#x2F;^\\.\\&#x2F;.*\\.(jpg|png)$&#x2F;);</span><br><span class=\"line\">&#x2F;&#x2F; 2</span><br><span class=\"line\">const requireContext &#x3D; require.context(&#39;resources&#x2F;install&#39;, true, &#x2F;.*&#x2F;);</span><br><span class=\"line\">requireContext.keys().map(requireContext);</span><br></pre></td></tr></table></figure><p></p><h4 id=\"publicPath\"><a href=\"#publicPath\" class=\"headerlink\" title=\"publicPath\"></a>publicPath</h4><p>publicPath<a href=\"https://www.jianshu.com/p/cbe81be10d78\" target=\"_blank\" rel=\"noopener\"></a></p><blockquote><p>output.path  </p><p>output.publicPath urlurloutput.publicPathwebpackuri<code>www.yourhost.com/dist/index.html</code>publicPath<code>/dist/</code></p></blockquote><ul><li><p>webpack-dev-serverpublicPath<code>/</code>webpack-dev-serverbundle.js<code>/</code><code>localhost:3000/bundle.js</code><code>localhost:3000/dist/bundle.js</code>webpack-dev-serverpublicPath<code>/dist/</code></p></li><li><p></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">webpack.config.js</span><br><span class=\"line\">...</span><br><span class=\"line\">devtool: &#39;source-map&#39;,</span><br><span class=\"line\">  entry: [</span><br><span class=\"line\">    &#39;react-hot-loader&#x2F;patch&#39;,</span><br><span class=\"line\">    &#39;webpack-dev-server&#x2F;client?http:&#x2F;&#x2F;localhost:3000&#39;,</span><br><span class=\"line\">    &#39;webpack&#x2F;hot&#x2F;only-dev-server&#39;,</span><br><span class=\"line\">    &#39;.&#x2F;app&#x2F;index&#39;,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  mode: &#39;development&#39;,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: &#39;bundle.js&#39;,</span><br><span class=\"line\">    path: path.resolve(__dirname, &#39;dist&#39;),</span><br><span class=\"line\">    publicPath: &#39;&#x2F;&#39;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">webpack.prod.config.js</span><br><span class=\"line\">...</span><br><span class=\"line\">entry: [</span><br><span class=\"line\">    &#39;.&#x2F;app&#x2F;index&#39;,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  mode: &#39;production&#39;,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: &#39;bundle.js&#39;,</span><br><span class=\"line\">    path: path.resolve(__dirname, &#39;dist&#39;),</span><br><span class=\"line\">    publicPath: &#39;&#x2F;&#39;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>webpack.config<code>resolve.alias</code>import<code>../../../</code></p><ul><li><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">webpack.config.js</span><br><span class=\"line\">...</span><br><span class=\"line\">resolve: &#123;</span><br><span class=\"line\">    alias: &#123;</span><br><span class=\"line\">      resources: path.resolve(__dirname, &#39;resources&#39;),</span><br><span class=\"line\">      app: path.resolve(__dirname, &#39;app&#39;),</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"resources/install/albert.png\"</span>&#125;&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h3 id=\"webpack4\"><a href=\"#webpack4\" class=\"headerlink\" title=\"webpack4\"></a>webpack4</h3><hr><h4 id=\"cssbackgroup-image-url-\"><a href=\"#cssbackgroup-image-url-\" class=\"headerlink\" title=\"cssbackgroup-image: url(...)\"></a>css<code>backgroup-image: url(...)</code></h4><p>webpack.config<code>resolve.alias</code>cssimg:url<code>~</code>webpack<br></p><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.router-left-background</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-image</span>: <span class=\"built_in\">url</span>(~resources/public/gohome.jpg); <span class=\"comment\">/* The image used */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#f6f6f6</span>; <span class=\"comment\">/* Used if the image is unavailable */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-position</span>: center; <span class=\"comment\">/* Center the image */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-repeat</span>: no-repeat; <span class=\"comment\">/* Do not repeat the image */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-size</span>: cover; <span class=\"comment\">/* cover size */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><h4 id=\"bundle-js\"><a href=\"#bundle-js\" class=\"headerlink\" title=\"bundle.js\"></a>bundle.js</h4><p>bundle.js<code>extract-text-webpack-plugin</code>webpackindex.htmlbundle.jscss</p><ul><li>index.html</li></ul><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">HTML</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>electronux<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"style.scss.css\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"style.css\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">base</span> <span class=\"attr\">href</span>=<span class=\"string\">\"./\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"root\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"bundle.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>webpack<code>extract-text-webpack-plugin</code><br><code>publicPath</code>webpack-dev-server<code>publicPath</code>(<code>/</code>)()<code>publicPath</code></li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">webpack.config.js</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"keyword\">const</span> CleanWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'clean-webpack-plugin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> extractSass = <span class=\"keyword\">new</span> ExtractTextPlugin(&#123;</span><br><span class=\"line\">  filename: <span class=\"string\">'style.scss.css'</span>,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"><span class=\"keyword\">const</span> extractCss = <span class=\"keyword\">new</span> ExtractTextPlugin(&#123;</span><br><span class=\"line\">  filename: <span class=\"string\">'style.css'</span>,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        use: [<span class=\"string\">'babel-loader'</span>],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: extractCss.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">          publicPath: <span class=\"string\">'/'</span>,</span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.scss$/</span>,</span><br><span class=\"line\">        use: extractSass.extract(&#123;</span><br><span class=\"line\">          use: [&#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">          &#125;, &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'sass-loader'</span>,</span><br><span class=\"line\">          &#125;],</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>, <span class=\"comment\">//  style-loader</span></span><br><span class=\"line\">          publicPath: <span class=\"string\">'/'</span>,</span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      ...</span><br><span class=\"line\">    ],</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    extractSass,</span><br><span class=\"line\">    extractCss,</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  ],</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure><ul><li>webpack<code>extract-text-webpack-plugin</code><br><code>publicPath</code>distcssdist</li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">webpack.prod.config.js</span><br><span class=\"line\">...</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      ...</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: extractCss.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">          publicPath: path.join(__dirname, <span class=\"string\">'dist/'</span>),</span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.scss$/</span>,</span><br><span class=\"line\">        use: extractSass.extract(&#123;</span><br><span class=\"line\">          use: [&#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">          &#125;, &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'sass-loader'</span>,</span><br><span class=\"line\">          &#125;],</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>, <span class=\"comment\">//  style-loader</span></span><br><span class=\"line\">          publicPath: path.join(__dirname, <span class=\"string\">'dist/'</span>),</span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ...</span><br></pre></td></tr></table></figure><h3 id=\"electron-builder\"><a href=\"#electron-builder\" class=\"headerlink\" title=\"electron-builder\"></a>electron-builder</h3><hr><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"appId\"</span>: <span class=\"string\">\"com.nojsja.electronux\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"copyright\"</span>: <span class=\"string\">\"nojsja\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"productName\"</span>: <span class=\"string\">\"electronux\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"asar\"</span>: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"directories\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"buildResources\"</span>: <span class=\"string\">\"build-assets/\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"output\"</span>: <span class=\"string\">\"build/\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"files\"</span>: [<span class=\"string\">\"package.json\"</span>, <span class=\"string\">\"index.js\"</span>, <span class=\"string\">\"dist/\"</span>, <span class=\"string\">\"app/\"</span>, <span class=\"string\">\"node_modules/\"</span>],</span><br><span class=\"line\">  <span class=\"attr\">\"linux\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"icon\"</span>: <span class=\"string\">\"resources\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"category\"</span>: <span class=\"string\">\"System\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"description\"</span>: <span class=\"string\">\"A System Management Tool Build For Manjaro Linux 17\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"synopsis\"</span>: <span class=\"string\">\"electronux\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"target\"</span>: [<span class=\"string\">\"zip\"</span>]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p>electron-builder<code>dist</code>()index.js()<code>files</code></p><ul><li>package.json  </li><li>index.js  </li><li>dist  </li><li>app  </li><li>node_modules  </li></ul><p><a href=\"https://www.electron.build/configuration/configuration\" target=\"_blank\" rel=\"noopener\"></a></p><h3 id=\"electron-builder\"><a href=\"#electron-builder\" class=\"headerlink\" title=\"electron-builder\"></a>electron-builder</h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>electron-builder(github)polipohttp-proxygitclonevps()<code>~/.cache/electron-builder</code><code>~/.cache/electron</code></p><h4 id=\"AppImagechmod\"><a href=\"#AppImagechmod\" class=\"headerlink\" title=\"AppImagechmod\"></a>AppImagechmod</h4><p>LinuxAppImage</p><blockquote><p>AppImageLinuxAppImage<code></code>AppImage</p></blockquote><p>shellnode.jsfs<code>fs.chmod</code>shell(chmod 755)AppImageApplmageAppImage<br>zip<code>pacman</code><code>deb</code><code>rpm</code><code>tar.gz</code></p><h4 id=\"arar\"><a href=\"#arar\" class=\"headerlink\" title=\"arar\"></a>arar</h4><p>electron-builder<code>asar: true/false</code>truearararararar</p><h4 id=\"-img-src-css-url-\"><a href=\"#-img-src-css-url-\" class=\"headerlink\" title=\"(img:src / css:url)\"></a>(img:src / css:url)</h4><p>html demo:<br></p><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">className</span>=<span class=\"string\">\"install-item-image\"</span> <span class=\"attr\">onClick</span>=<span class=\"string\">&#123;()</span> =&gt;</span> &#123;showTerminalInfo(item.label)&#125;&#125;&gt;</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">Dimmer</span> <span class=\"attr\">active</span>=<span class=\"string\">&#123;loading&#125;</span> <span class=\"attr\">inverted</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">Loader</span> <span class=\"attr\">size</span>=<span class=\"string\">\"tiny\"</span>&gt;</span>&#123; loadingLable &#125;<span class=\"tag\">&lt;/<span class=\"name\">Loader</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">Dimmer</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">alt</span>=<span class=\"string\">\"error\"</span> <span class=\"attr\">src</span>=<span class=\"string\">&#123;item.url&#125;</span> /&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure><br>css demo:<br><figure class=\"highlight css\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.router-left-background</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">background-image</span>: <span class=\"built_in\">url</span>(~resources/public/gohome.jpg); <span class=\"comment\">/* The image used */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#f6f6f6</span>; <span class=\"comment\">/* Used if the image is unavailable */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-position</span>: center; <span class=\"comment\">/* Center the image */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-repeat</span>: no-repeat; <span class=\"comment\">/* Do not repeat the image */</span></span><br><span class=\"line\">  <span class=\"attribute\">background-size</span>: cover; <span class=\"comment\">/* cover size */</span></span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><br>webpackdist<code>electron index.js</code>(filedist)electron<code>file</code><code>electron index.js</code>electronindex.html<br><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">window</span>.loadURL(url.format(&#123;</span><br><span class=\"line\">  pathname: path.resolve(__dirname, <span class=\"string\">'dist'</span>, <span class=\"string\">'index.html'</span>),</span><br><span class=\"line\">  protocol: <span class=\"string\">'file:'</span>,</span><br><span class=\"line\">  slashes: <span class=\"literal\">true</span>,</span><br><span class=\"line\">&#125;));</span><br></pre></td></tr></table></figure><br>index.htmlcssreactfile<code>dist</code><code>/</code>index.htmlbase<br><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">&lt;!DOCTYPE <span class=\"meta-keyword\">HTML</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">html</span> <span class=\"attr\">lang</span>=<span class=\"string\">\"en\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">meta</span> <span class=\"attr\">charset</span>=<span class=\"string\">\"UTF-8\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">title</span>&gt;</span>electronux<span class=\"tag\">&lt;/<span class=\"name\">title</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"style.scss.css\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">link</span> <span class=\"attr\">rel</span>=<span class=\"string\">\"stylesheet\"</span> <span class=\"attr\">href</span>=<span class=\"string\">\"style.css\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">base</span> <span class=\"attr\">href</span>=<span class=\"string\">\"./\"</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">head</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">id</span>=<span class=\"string\">\"root\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">script</span> <span class=\"attr\">src</span>=<span class=\"string\">\"bundle.js\"</span>&gt;</span><span class=\"tag\">&lt;/<span class=\"name\">script</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">body</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p></p><h4 id=\"node-jsshell\"><a href=\"#node-jsshell\" class=\"headerlink\" title=\"node.jsshell\"></a>node.jsshell</h4><p>node.jsfs<code>fs.chmod</code>rootnode</p><ul><li>fsChmod</li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fs = <span class=\"built_in\">require</span>(<span class=\"string\">'fs'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">chmod</span>(<span class=\"params\">target, opstr</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (fs.statSync(target).isDirectory()) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> files = fs.readdirSync(target);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (files.length) &#123;</span><br><span class=\"line\">      files.forEach(<span class=\"function\">(<span class=\"params\">file</span>) =&gt;</span> &#123;</span><br><span class=\"line\">        chmod(path.join(target, file), opstr);</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    fs.chmodSync(target, opstr);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fsChmod</span>(<span class=\"params\">dir, opstr</span>) </span>&#123;</span><br><span class=\"line\">  chmod(dir, opstr);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = fsChmod;</span><br></pre></td></tr></table></figure><ul><li>fsChmodshell<br></li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> fsChmod = <span class=\"built_in\">require</span>(<span class=\"string\">'./fs-chmod'</span>);</span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">fsChmodShell</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  fsChmod(path.join(__dirname, <span class=\"string\">'../shell'</span>), <span class=\"number\">0o711</span>);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = fsChmodShell;</span><br></pre></td></tr></table></figure><ul><li>index.js<br><strong></strong> <code>__dirname</code><code>procoss.pwd()</code><code>path.resolve(process.cwd(), &#39;path/to/file&#39;)</code><code>app.getAppPath()</code><code>path.resolve(app.getAppPath(), &#39;path/to/file&#39;)</code>(appelectron)<code>app.getAppPath()</code><code>package.json</code>electron-builderindex.js<code>/</code>shell(shell scripts)<code>/app/service/shell</code>electron-builderindex.js( )<code>/</code>shell<code>/resources/app/app/shell</code>index.jsshellelectron-builder<code>/resources/app</code>(<code>arar</code>)</li></ul><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> fsChmodShell = <span class=\"built_in\">require</span>(<span class=\"string\">'./app/services/middleware/fs-chmod-shell.js'</span>);</span><br><span class=\"line\">fsChmodShell();</span><br></pre></td></tr></table></figure><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"- )\"></a>- )</h3>"},{"title":"Electron+Mobx+React","catalog":true,"toc_nav_num":true,"date":"2019-10-14T08:18:46.000Z","subtitle":"Electron Mobx React","header-img":"article_header.png","updateDate":"2019-10-14T08:18:46.000Z","_content":"\n![Hello World](Fly.jpg)\n\n### \n1. \n2. \n3. Webpack4.0\n4. Electron\n5. React + Mobx \n6. Linux\n\n### \n-----------\nUbuntu18.04Manjaro Linux 17Manjaro(QQ)LinuxGnomeKDECinnamonMateDeepinGnomeManjaroManjaroGUI - [electronux](https://github.com/NoJsJa/electronux.git)\nElectron + Node.js + React + Mobx + Webpack + Shell  ~ Electron+ReactLinux\n\n![clean_detail.png](mobx1.png)\n\n![clean_search.png](mobx2.png)\n\n![electron_pssword.png](mobx3.png)\n\n![info_total.png](mobx4.png)\n\n![install_detail.png](mobx5.png)\n\n![install_list.png](mobx6.png)\n\n![install_permission.png](mobx7.png)\n\n![startup_list.png](mobx8.png)\n\n### \n------------------------\n#### \n```sh\nelectronux  \n|---- [dir ] app (  )\n|----------- [dir ] app/configure (  )\n|----------- [dir ] app/runtime (  )\n|\n|----------- [dir ] app/services (  )\n|------------------------ [dir ] app/services/middleware (  )\n|------------------------ [dir ] app/services/shell ( shell )\n|------------------------ [dir ] app/services/main-serv (  )\n|------------------------ [dir ] app/services/render-serv (  )\n|\n|----------- [dir ] app/stores (  )\n|----------- [dir ] app/styles  (  )\n|----------- [dir ] app/utils  (  )\n|\n|----------- [dir ] app/views  ( UI )\n|------------------------ [dir ] app/views/module1  ( 1 )\n|------------------------ [dir ] app/views/module2  ( 2)\n|------------------------ [dir ] app/views/module3  ( 3 )\n|\n|----------- [file] app/App.js  (  )\n|----------- [file] app/index.js (  )\n|\n|---- [dir ] dist (  )\n|---- [dir ] resources (  )\n|\n|---- [file] .babelrc ( babel )\n|---- [file] .editorconfig ()\n|---- [file] .eslintrc (  )\n|---- [file] .gitignore ( git )\n|---- [file] electron-builder.json ( electron-builder )\n|---- [file] index.html  (  )\n|---- [file] index.js (  )\n|---- [file] package.json ()\n|---- [file] webpack.config.js (webpack)\n|---- [file] webpack.prod.config.js  ( webpack )\n\n```\n\n#### \n```json\n{\n  \"name\": \"electronux\",\n  \"description\": \"linux manager-software powered by electron & react & Mobx \",\n  \"version\": \"1.0.0\",\n  \"author\": {\n    \"name\": \"NoJsJa\",\n    \"email\": \"yangwei020154@gmail.com\"\n  },\n  \"scripts\": {\n    \"start\": \"concurrently \\\"npm run start-dev\\\" \\\"npm run start-electron\\\"\",\n    \"start-dev\": \"cross-env NODE_ENV=development webpack-dev-server\",\n    \"start-electron\": \"nodemon --exec 'cross-env NODE_ENV=development electron --inspect=5858 index'\",\n    \"start-production\": \"cross-env NODE_ENV=production electron --inspect=5858 index\",\n    \"build-all\": \"npm run dist && npm run build\",\n    \"dist\": \"cross-env NODE_ENV=production webpack --config webpack.prod.config.js\",\n    \"build\": \"electron-builder -l\"\n  },\n  \"keywords\": [\n    \"electron\",\n    \"react\",\n    \"mobx\",\n    \"react-router\",\n    \"webpack4\"\n  ],\n  \"license\": \"\",\n  \"nodemonConfig\": {\n    \"ignore\": [\n      \"resources/*\",\n      \"node_modules/*\",\n      \"dist/*\",\n      \"build/*\",\n      \"app/stores/*\",\n      \"app/styles/*\",\n      \"app/services/shell/*\",\n      \"app/configure/view.conf\",\n      \"app/views/*\",\n      \"app/App.js\",\n      \"app/main.js\",\n      \"app/index.js\",\n      \"electron-builder.yml\"\n    ],\n    \"delay\": \"1000\"\n  },\n  \"dependencies\": {\n    \"semantic-ui-css\": \"^2.4.0\",\n    \"semantic-ui-react\": \"^0.82.5\",\n    \"mobx\": \"^4.4.1\",\n    \"mobx-react\": \"^5.2.8\",\n    \"prop-types\": \"^15.6.2\",\n    \"react\": \"^16.5.1\",\n    \"react-dom\": \"^16.5.1\",\n    \"react-hot-loader\": \"^4.3.8\",\n    \"react-router\": \"^4.3.1\",\n    \"react-router-dom\": \"^4.3.1\",\n    \"history\": \"^4.7.2\"\n  },\n  \"devDependencies\": {\n    \"babel-core\": \"^6.26.3\",\n    \"babel-eslint\": \"^10.0.1\",\n    \"babel-loader\": \"^7.1.5\",\n    \"babel-plugin-transform-decorators-legacy\": \"^1.3.5\",\n    \"babel-preset-env\": \"^1.7.0\",\n    \"babel-preset-es2015\": \"^6.24.1\",\n    \"babel-preset-react\": \"^6.24.1\",\n    \"babel-preset-stage-0\": \"^6.24.1\",\n    \"clean-webpack-plugin\": \"^0.1.19\",\n    \"concurrently\": \"^3.6.1\",\n    \"cross-env\": \"^5.2.0\",\n    \"css-loader\": \"^0.28.11\",\n    \"electron\": \"^2.0.9\",\n    \"electron-builder\": \"^20.28.4\",\n    \"eslint\": \"^5.6.1\",\n    \"eslint-config-airbnb\": \"^17.1.0\",\n    \"eslint-plugin-import\": \"^2.14.0\",\n    \"eslint-plugin-jsx-a11y\": \"^6.1.2\",\n    \"eslint-plugin-react\": \"^7.11.1\",\n    \"extract-text-webpack-plugin\": \"^4.0.0-beta.0\",\n    \"file-loader\": \"^2.0.0\",\n    \"html-loader\": \"^0.5.5\",\n    \"html-webpack-plugin\": \"^3.2.0\",\n    \"node-sass\": \"^4.9.4\",\n    \"nodemon\": \"^1.18.4\",\n    \"sass-loader\": \"^7.1.0\",\n    \"source-map-support\": \"^0.5.9\",\n    \"style-loader\": \"^0.21.0\",\n    \"url-loader\": \"^1.1.2\",\n    \"webpack\": \"^4.19.0\",\n    \"webpack-cli\": \"^2.1.5\",\n    \"webpack-dev-server\": \"^3.1.8\"\n  }\n}\n\n```\n\n### Webpack4.0\n---------------------------------------------\n\n#### webpack\n```js\nconst path = require('path');\nconst webpack = require('webpack');\nconst CleanWebpackPlugin = require('clean-webpack-plugin');\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\n\n// \nconst extractSass = new ExtractTextPlugin({\n  filename: 'style.scss.css',\n});\n\nconst extractCss = new ExtractTextPlugin({\n  filename: 'style.css',\n});\n\nmodule.exports = {\n  devtool: 'source-map',\n  entry: [\n    'react-hot-loader/patch',\n    'webpack-dev-server/client?http://localhost:3000',\n    'webpack/hot/only-dev-server',\n    './app/index',\n  ],\n  mode: 'development',\n  output: {\n    filename: 'bundle.js',\n    path: path.resolve(__dirname, 'dist'),\n    publicPath: '/',\n  },\n  resolve: {\n    alias: {\n      resources: path.resolve(__dirname, 'resources'),\n      app: path.resolve(__dirname, 'app'),\n    },\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        use: ['babel-loader'],\n      },\n      {\n        test: /\\.css$/,\n        use: extractCss.extract({\n          fallback: 'style-loader',\n          use: 'css-loader',\n          publicPath: '/',\n        }),\n      },\n      {\n        test: /\\.scss$/,\n        use: extractSass.extract({\n          use: [{\n            loader: 'css-loader',\n          }, {\n            loader: 'sass-loader',\n          }],\n          fallback: 'style-loader', //  style-loader\n          publicPath: '/',\n        }),\n      },\n      {\n        test: /\\.html$/,\n        use: {\n          loader: 'html-loader',\n        },\n      },\n      {\n        test: /\\.(png|jpg|gif|svg|ico|woff|eot|ttf|woff2)$/,\n        use: [\n          {\n            loader: 'file-loader',\n            options: {\n              name: '[path][name].[ext]',\n            },\n          },\n        ],\n      },\n    ],\n  },\n\n  plugins: [\n    extractSass,\n    extractCss,\n    new webpack.HotModuleReplacementPlugin(),\n    new CleanWebpackPlugin(['dist']),\n    new webpack.NamedModulesPlugin(),\n    new webpack.NoEmitOnErrorsPlugin(),\n  ],\n\n  devServer: {\n    host: 'localhost',\n    port: 3000,\n    historyApiFallback: true,\n    hot: true,\n  },\n  target: 'electron-renderer',\n};\n\n```\n\n### Electron\n----------------------------------------------\n> Electron  package.json  main  web  Electron \n Electron  Chromium  web  Chromium   Electron  web \nweb  Electron  Node.js  API \n BrowserWindow   BrowserWindow   BrowserWindow \nweb  web \n GUI  API  web  GUI   web  GUI  GUI \n\n#### \nindex.jselectron`http`webpack-dev-serverhttp`file`webpackbundle.js`npm start`webpack-dev-serverlocalhost:3000httpelectronchromiumnode.jschrome v8node.js APIfs\n\n#### \nnodemonnodemon `npm start-electron``cross-env NODE_ENV=development electron index`electronnodemon`npm start-electron``nodemon --exec 'cross-env NODE_ENV=development electron index'`package.jsonnodemonConfignodemon\n\n=> package.json\n```json\n  \"scripts\": {\n    \"start\": \"concurrently \\\"npm run start-dev\\\" \\\"npm run start-electron\\\"\",\n    \"start-dev\": \"cross-env NODE_ENV=development webpack-dev-server\",\n    \"start-electron\": \"nodemon --exec 'cross-env NODE_ENV=development electron index'\",\n    \"build\": \"npm run dist && npm run build-all\",\n    \"dist\": \"cross-env NODE_ENV=production webpack  --config webpack.production.config.js\",\n    \"build-all\": \"build -lmw\"\n  },\n```\n\n=> package.jsonnodemonConfig\n```json\n\"nodemonConfig\": {\n    \"ignore\": [\n      \"resources/*\",\n      \"node_modules/*\",\n      \"dist/*\",\n      \"app/stores/*\",\n      \"app/styles/*\",\n      \"app/services/shell/*\",\n      \"app/configure/view.conf\",\n      \"app/views/*\",\n      \"app/App.js\",\n      \"app/main.js\",\n      \"app/index.js\"\n    ],\n    \"delay\": \"1000\"\n  },\n```\n\n=> index.js\n```js\n...\n//  //\nfunction loadWindow(window, env) {\n  if (env === 'development') {\n    // wait for webpack-dev-server start\n    setTimeout(() => {\n      window.loadURL(url.format({\n        pathname: 'localhost:3000',\n        protocol: 'http:',\n        slashes: true,\n      }));\n      // window.webContents.openDevTools();\n    }, 1e3);\n  } else {\n    window.loadURL(url.format({\n      pathname: path.join(path.resolve(__dirname, './dist'), 'index.html'),\n      protocol: 'file:',\n      slashes: true,\n    }));\n  }\n}\n\n/* ------------------- main window ------------------- */\n\nfunction createWindow() {\n  const { width, height } = getAppConf();\n  win = new BrowserWindow({\n    width,\n    height,\n    title: 'electronux',\n    autoHideMenuBar: true,\n  });\n\n  win.on('resize', () => {\n    const [_width, _height] = win.getContentSize();\n    viewConf.set({\n      width: _width,\n      height: _height,\n    });\n  });\n\n  loadWindow(win, nodeEnv);\n}\n\n/* ------------------- electron event ------------------- */\n\napp.on('ready', () => {\n  if (nodeEnv === 'development') {\n    sourceMapSupport.install();\n  }\n  createWindow();\n});\n\napp.on('window-all-closed', () => {\n  if (process.platform !== 'darwin') {\n    app.quit();\n  }\n});\n\napp.on('will-quit', () => {\n  viewConf.write().then(() => 0, (err) => {\n    console.error(err);\n    throw new Error('App quit: view-conf write error !');\n  });\n});\n\napp.on('activate', () => {\n  if (win === null) {\n    createWindow();\n  }\n});\n```\n\n### React + Mobx \n-------------------------------------------------------------\n\n#### \n1. App.js\n`mobx-react`Provider()mobx storepropsProvider`@inject`storeReact RouterReact Router V4[react-router4](https://reacttraining.com/react-router/web/guides/quick-start)\n\n```js\n/* ------------------- export global history ------------------- */\nexport const history = createHistory();\n\nconst stores = {\n  install: new InstallState(),\n  startup: new StartupState(),\n  info: new InfoState(),\n  clean: new CleanState(),\n  pub: new PublicState(),\n};\n\nfunction App() {\n  return (\n    <Provider {...stores}>\n      <Router history={history}>\n        <Route path=\"/\" component={HomePage} />\n      </Router>\n    </Provider>\n  );\n}\n\n/* ------------------- export provider ------------------- */\nexport default App;\n\n```\n\n2. mobx store \nmobx storestoremobxUIstorestore``\nmobxmobx`computed``autorun``action`store\n\n```js\nclass Clean {\n  constructor() { }\n  /* ------------------- observable ------------------- */\n\n  //  //\n  @observable items = {\n    appCache: false,\n    appLog: false,\n    trash: false,\n    packageCache: false,\n  };\n\n  //  //\n  @observable loadingMain = false;\n\n  //  //\n  cleanPaths = {\n    appCache: [`/home/${this.userinfo.username}/.cache`],\n    appLog: ['/var/log/'],\n    trash: [`/home/${this.userinfo.username}/.local/share/Trash/files`],\n    packageCache: ['/var/cache/pacman/pkg'],\n  }\n\n  //  //\n  @observable cleanPathMap = {\n    appCache: [], // '/var/log/pacman.log'\n    appLog: [],\n    trash: [],\n    packageCache: [],\n  }\n\n  //  //\n  @observable cleanContents = observable.map({})\n\n  //  //\n  cleanSizes = {\n    // '/var/log//pacman.log': '10kb',\n  }\n\n  // ---- - ---- //\n  // @observable cleanDetails = {\n  //   appCache: {\n  //     url: [`/home/${this.userinfo.username}/.cache`], // \n  //     contents: { // \n  //       // '/var/cache/pacman/pkg/zsh-5.6.2-1-x86_64.pkg.tar.xz': false,\n  //     },\n  //     size: {\n  //       // '/var/cache/pacman/pkg/zsh-5.6.2-1-x86_64.pkg.tar.xz': '10kb',\n  //     },\n  //   },\n  //   appLog: {\n  //     url: ['/var/log/'],\n  //     contents: {\n  //       // '/var/log//pacman.log': false,\n  //     },\n  //     size: {\n  //       // '/var/log//pacman.log': '10kb',\n  //     },\n  //   }\n  // }\n\n  /* ------------------- static ------------------- */\n\n\n  /* ------------------- computed ------------------- */\n\n  // detail item //\n  @computed get allCheckedDetail() {\n    const a = [];\n    this.cleanContents.forEach((v, k) => {\n      if (v) a.push(k);\n    });\n    return a;\n  }\n\n  //  //\n  @computed get cleanDetail() {\n    const result = [];\n    Object.keys(this.cleanPathMap).forEach((item) => {\n      if (this.items[item]) {\n        const oneResult = {\n          label: item,\n          contents: [],\n        };\n        this.cleanPathMap[item].forEach((it) => {\n          oneResult.contents.push({\n            content: it,\n            size: this.cleanSizes[it] || 0,\n          });\n        });\n\n        result.push(oneResult);\n      }\n    });\n\n    return result;\n  }\n}\n\nexport default Clean;\n\n```\n\n3. \nviewscsscss`@inject`mobx storepropsprops\nmobxmobx store````storestorestore/`visible`storestore\n\n4. ipc\n(ipcRender)node.jsapinode.js(ipcMain)serviceipcserviceipcservicemobx storemobx storeipcobserverservicemobx storeview\n\n\n#### \n1. webpack.config.jswebpack-dev-server\n\n```js\ndevServer: {\n    host: 'localhost',\n    port: 3000,\n    historyApiFallback: true,\n    hot: true,\n  },\n```\n2. `react-hot-loader`AppContainer\n\n```js\nimport { AppContainer } from 'react-hot-loader';\n\nimport 'semantic-ui-css/semantic.min.css';\nimport './styles/public.css';\n\nimport App from './App';\n\nrender(\n  <AppContainer>\n    <App />\n  </AppContainer>,\n  document.getElementById('root')\n);\n```\n### Linux\n-------------------------------------------------------\n#### node.jschild_processshellroot\nrootnode.jsshellchild_process(node.js)child_process`spawn``exec``execFile``fork`[Node API](http://nodejs.cn/api/child_process.html#child_process_asynchronous_process_creation)rootElectronAPIelectron\n1. \n2. child_process(input stream)child_process  \n\n![electron_pssword.png](mobx9.png)\n\n![install_permission.png](mobx10.png)\n\n\n____[github/nojsja/electronux/app/utils/sudo-prompt.js](/blogs/img/article/mobx10.png)  \n\n_~_  \n\n### \n","source":"_posts/2019-10-14-Electron-Mobx-React.md","raw":"---\ntitle: \"Electron+Mobx+React\"\ncatalog: true\ntoc_nav_num: true\ndate:   2019-10-14 16:18:46\nsubtitle: \"Electron Mobx React\"\nheader-img: \"article_header.png\"\ntags:\n- es6\n- react\n- mobx\n- electron\ncategories:\n- Mobx\n- Electron\nupdateDate: 2019-10-14 16:18:46\n---\n\n![Hello World](Fly.jpg)\n\n### \n1. \n2. \n3. Webpack4.0\n4. Electron\n5. React + Mobx \n6. Linux\n\n### \n-----------\nUbuntu18.04Manjaro Linux 17Manjaro(QQ)LinuxGnomeKDECinnamonMateDeepinGnomeManjaroManjaroGUI - [electronux](https://github.com/NoJsJa/electronux.git)\nElectron + Node.js + React + Mobx + Webpack + Shell  ~ Electron+ReactLinux\n\n![clean_detail.png](mobx1.png)\n\n![clean_search.png](mobx2.png)\n\n![electron_pssword.png](mobx3.png)\n\n![info_total.png](mobx4.png)\n\n![install_detail.png](mobx5.png)\n\n![install_list.png](mobx6.png)\n\n![install_permission.png](mobx7.png)\n\n![startup_list.png](mobx8.png)\n\n### \n------------------------\n#### \n```sh\nelectronux  \n|---- [dir ] app (  )\n|----------- [dir ] app/configure (  )\n|----------- [dir ] app/runtime (  )\n|\n|----------- [dir ] app/services (  )\n|------------------------ [dir ] app/services/middleware (  )\n|------------------------ [dir ] app/services/shell ( shell )\n|------------------------ [dir ] app/services/main-serv (  )\n|------------------------ [dir ] app/services/render-serv (  )\n|\n|----------- [dir ] app/stores (  )\n|----------- [dir ] app/styles  (  )\n|----------- [dir ] app/utils  (  )\n|\n|----------- [dir ] app/views  ( UI )\n|------------------------ [dir ] app/views/module1  ( 1 )\n|------------------------ [dir ] app/views/module2  ( 2)\n|------------------------ [dir ] app/views/module3  ( 3 )\n|\n|----------- [file] app/App.js  (  )\n|----------- [file] app/index.js (  )\n|\n|---- [dir ] dist (  )\n|---- [dir ] resources (  )\n|\n|---- [file] .babelrc ( babel )\n|---- [file] .editorconfig ()\n|---- [file] .eslintrc (  )\n|---- [file] .gitignore ( git )\n|---- [file] electron-builder.json ( electron-builder )\n|---- [file] index.html  (  )\n|---- [file] index.js (  )\n|---- [file] package.json ()\n|---- [file] webpack.config.js (webpack)\n|---- [file] webpack.prod.config.js  ( webpack )\n\n```\n\n#### \n```json\n{\n  \"name\": \"electronux\",\n  \"description\": \"linux manager-software powered by electron & react & Mobx \",\n  \"version\": \"1.0.0\",\n  \"author\": {\n    \"name\": \"NoJsJa\",\n    \"email\": \"yangwei020154@gmail.com\"\n  },\n  \"scripts\": {\n    \"start\": \"concurrently \\\"npm run start-dev\\\" \\\"npm run start-electron\\\"\",\n    \"start-dev\": \"cross-env NODE_ENV=development webpack-dev-server\",\n    \"start-electron\": \"nodemon --exec 'cross-env NODE_ENV=development electron --inspect=5858 index'\",\n    \"start-production\": \"cross-env NODE_ENV=production electron --inspect=5858 index\",\n    \"build-all\": \"npm run dist && npm run build\",\n    \"dist\": \"cross-env NODE_ENV=production webpack --config webpack.prod.config.js\",\n    \"build\": \"electron-builder -l\"\n  },\n  \"keywords\": [\n    \"electron\",\n    \"react\",\n    \"mobx\",\n    \"react-router\",\n    \"webpack4\"\n  ],\n  \"license\": \"\",\n  \"nodemonConfig\": {\n    \"ignore\": [\n      \"resources/*\",\n      \"node_modules/*\",\n      \"dist/*\",\n      \"build/*\",\n      \"app/stores/*\",\n      \"app/styles/*\",\n      \"app/services/shell/*\",\n      \"app/configure/view.conf\",\n      \"app/views/*\",\n      \"app/App.js\",\n      \"app/main.js\",\n      \"app/index.js\",\n      \"electron-builder.yml\"\n    ],\n    \"delay\": \"1000\"\n  },\n  \"dependencies\": {\n    \"semantic-ui-css\": \"^2.4.0\",\n    \"semantic-ui-react\": \"^0.82.5\",\n    \"mobx\": \"^4.4.1\",\n    \"mobx-react\": \"^5.2.8\",\n    \"prop-types\": \"^15.6.2\",\n    \"react\": \"^16.5.1\",\n    \"react-dom\": \"^16.5.1\",\n    \"react-hot-loader\": \"^4.3.8\",\n    \"react-router\": \"^4.3.1\",\n    \"react-router-dom\": \"^4.3.1\",\n    \"history\": \"^4.7.2\"\n  },\n  \"devDependencies\": {\n    \"babel-core\": \"^6.26.3\",\n    \"babel-eslint\": \"^10.0.1\",\n    \"babel-loader\": \"^7.1.5\",\n    \"babel-plugin-transform-decorators-legacy\": \"^1.3.5\",\n    \"babel-preset-env\": \"^1.7.0\",\n    \"babel-preset-es2015\": \"^6.24.1\",\n    \"babel-preset-react\": \"^6.24.1\",\n    \"babel-preset-stage-0\": \"^6.24.1\",\n    \"clean-webpack-plugin\": \"^0.1.19\",\n    \"concurrently\": \"^3.6.1\",\n    \"cross-env\": \"^5.2.0\",\n    \"css-loader\": \"^0.28.11\",\n    \"electron\": \"^2.0.9\",\n    \"electron-builder\": \"^20.28.4\",\n    \"eslint\": \"^5.6.1\",\n    \"eslint-config-airbnb\": \"^17.1.0\",\n    \"eslint-plugin-import\": \"^2.14.0\",\n    \"eslint-plugin-jsx-a11y\": \"^6.1.2\",\n    \"eslint-plugin-react\": \"^7.11.1\",\n    \"extract-text-webpack-plugin\": \"^4.0.0-beta.0\",\n    \"file-loader\": \"^2.0.0\",\n    \"html-loader\": \"^0.5.5\",\n    \"html-webpack-plugin\": \"^3.2.0\",\n    \"node-sass\": \"^4.9.4\",\n    \"nodemon\": \"^1.18.4\",\n    \"sass-loader\": \"^7.1.0\",\n    \"source-map-support\": \"^0.5.9\",\n    \"style-loader\": \"^0.21.0\",\n    \"url-loader\": \"^1.1.2\",\n    \"webpack\": \"^4.19.0\",\n    \"webpack-cli\": \"^2.1.5\",\n    \"webpack-dev-server\": \"^3.1.8\"\n  }\n}\n\n```\n\n### Webpack4.0\n---------------------------------------------\n\n#### webpack\n```js\nconst path = require('path');\nconst webpack = require('webpack');\nconst CleanWebpackPlugin = require('clean-webpack-plugin');\nconst ExtractTextPlugin = require('extract-text-webpack-plugin');\n\n// \nconst extractSass = new ExtractTextPlugin({\n  filename: 'style.scss.css',\n});\n\nconst extractCss = new ExtractTextPlugin({\n  filename: 'style.css',\n});\n\nmodule.exports = {\n  devtool: 'source-map',\n  entry: [\n    'react-hot-loader/patch',\n    'webpack-dev-server/client?http://localhost:3000',\n    'webpack/hot/only-dev-server',\n    './app/index',\n  ],\n  mode: 'development',\n  output: {\n    filename: 'bundle.js',\n    path: path.resolve(__dirname, 'dist'),\n    publicPath: '/',\n  },\n  resolve: {\n    alias: {\n      resources: path.resolve(__dirname, 'resources'),\n      app: path.resolve(__dirname, 'app'),\n    },\n  },\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        use: ['babel-loader'],\n      },\n      {\n        test: /\\.css$/,\n        use: extractCss.extract({\n          fallback: 'style-loader',\n          use: 'css-loader',\n          publicPath: '/',\n        }),\n      },\n      {\n        test: /\\.scss$/,\n        use: extractSass.extract({\n          use: [{\n            loader: 'css-loader',\n          }, {\n            loader: 'sass-loader',\n          }],\n          fallback: 'style-loader', //  style-loader\n          publicPath: '/',\n        }),\n      },\n      {\n        test: /\\.html$/,\n        use: {\n          loader: 'html-loader',\n        },\n      },\n      {\n        test: /\\.(png|jpg|gif|svg|ico|woff|eot|ttf|woff2)$/,\n        use: [\n          {\n            loader: 'file-loader',\n            options: {\n              name: '[path][name].[ext]',\n            },\n          },\n        ],\n      },\n    ],\n  },\n\n  plugins: [\n    extractSass,\n    extractCss,\n    new webpack.HotModuleReplacementPlugin(),\n    new CleanWebpackPlugin(['dist']),\n    new webpack.NamedModulesPlugin(),\n    new webpack.NoEmitOnErrorsPlugin(),\n  ],\n\n  devServer: {\n    host: 'localhost',\n    port: 3000,\n    historyApiFallback: true,\n    hot: true,\n  },\n  target: 'electron-renderer',\n};\n\n```\n\n### Electron\n----------------------------------------------\n> Electron  package.json  main  web  Electron \n Electron  Chromium  web  Chromium   Electron  web \nweb  Electron  Node.js  API \n BrowserWindow   BrowserWindow   BrowserWindow \nweb  web \n GUI  API  web  GUI   web  GUI  GUI \n\n#### \nindex.jselectron`http`webpack-dev-serverhttp`file`webpackbundle.js`npm start`webpack-dev-serverlocalhost:3000httpelectronchromiumnode.jschrome v8node.js APIfs\n\n#### \nnodemonnodemon `npm start-electron``cross-env NODE_ENV=development electron index`electronnodemon`npm start-electron``nodemon --exec 'cross-env NODE_ENV=development electron index'`package.jsonnodemonConfignodemon\n\n=> package.json\n```json\n  \"scripts\": {\n    \"start\": \"concurrently \\\"npm run start-dev\\\" \\\"npm run start-electron\\\"\",\n    \"start-dev\": \"cross-env NODE_ENV=development webpack-dev-server\",\n    \"start-electron\": \"nodemon --exec 'cross-env NODE_ENV=development electron index'\",\n    \"build\": \"npm run dist && npm run build-all\",\n    \"dist\": \"cross-env NODE_ENV=production webpack  --config webpack.production.config.js\",\n    \"build-all\": \"build -lmw\"\n  },\n```\n\n=> package.jsonnodemonConfig\n```json\n\"nodemonConfig\": {\n    \"ignore\": [\n      \"resources/*\",\n      \"node_modules/*\",\n      \"dist/*\",\n      \"app/stores/*\",\n      \"app/styles/*\",\n      \"app/services/shell/*\",\n      \"app/configure/view.conf\",\n      \"app/views/*\",\n      \"app/App.js\",\n      \"app/main.js\",\n      \"app/index.js\"\n    ],\n    \"delay\": \"1000\"\n  },\n```\n\n=> index.js\n```js\n...\n//  //\nfunction loadWindow(window, env) {\n  if (env === 'development') {\n    // wait for webpack-dev-server start\n    setTimeout(() => {\n      window.loadURL(url.format({\n        pathname: 'localhost:3000',\n        protocol: 'http:',\n        slashes: true,\n      }));\n      // window.webContents.openDevTools();\n    }, 1e3);\n  } else {\n    window.loadURL(url.format({\n      pathname: path.join(path.resolve(__dirname, './dist'), 'index.html'),\n      protocol: 'file:',\n      slashes: true,\n    }));\n  }\n}\n\n/* ------------------- main window ------------------- */\n\nfunction createWindow() {\n  const { width, height } = getAppConf();\n  win = new BrowserWindow({\n    width,\n    height,\n    title: 'electronux',\n    autoHideMenuBar: true,\n  });\n\n  win.on('resize', () => {\n    const [_width, _height] = win.getContentSize();\n    viewConf.set({\n      width: _width,\n      height: _height,\n    });\n  });\n\n  loadWindow(win, nodeEnv);\n}\n\n/* ------------------- electron event ------------------- */\n\napp.on('ready', () => {\n  if (nodeEnv === 'development') {\n    sourceMapSupport.install();\n  }\n  createWindow();\n});\n\napp.on('window-all-closed', () => {\n  if (process.platform !== 'darwin') {\n    app.quit();\n  }\n});\n\napp.on('will-quit', () => {\n  viewConf.write().then(() => 0, (err) => {\n    console.error(err);\n    throw new Error('App quit: view-conf write error !');\n  });\n});\n\napp.on('activate', () => {\n  if (win === null) {\n    createWindow();\n  }\n});\n```\n\n### React + Mobx \n-------------------------------------------------------------\n\n#### \n1. App.js\n`mobx-react`Provider()mobx storepropsProvider`@inject`storeReact RouterReact Router V4[react-router4](https://reacttraining.com/react-router/web/guides/quick-start)\n\n```js\n/* ------------------- export global history ------------------- */\nexport const history = createHistory();\n\nconst stores = {\n  install: new InstallState(),\n  startup: new StartupState(),\n  info: new InfoState(),\n  clean: new CleanState(),\n  pub: new PublicState(),\n};\n\nfunction App() {\n  return (\n    <Provider {...stores}>\n      <Router history={history}>\n        <Route path=\"/\" component={HomePage} />\n      </Router>\n    </Provider>\n  );\n}\n\n/* ------------------- export provider ------------------- */\nexport default App;\n\n```\n\n2. mobx store \nmobx storestoremobxUIstorestore``\nmobxmobx`computed``autorun``action`store\n\n```js\nclass Clean {\n  constructor() { }\n  /* ------------------- observable ------------------- */\n\n  //  //\n  @observable items = {\n    appCache: false,\n    appLog: false,\n    trash: false,\n    packageCache: false,\n  };\n\n  //  //\n  @observable loadingMain = false;\n\n  //  //\n  cleanPaths = {\n    appCache: [`/home/${this.userinfo.username}/.cache`],\n    appLog: ['/var/log/'],\n    trash: [`/home/${this.userinfo.username}/.local/share/Trash/files`],\n    packageCache: ['/var/cache/pacman/pkg'],\n  }\n\n  //  //\n  @observable cleanPathMap = {\n    appCache: [], // '/var/log/pacman.log'\n    appLog: [],\n    trash: [],\n    packageCache: [],\n  }\n\n  //  //\n  @observable cleanContents = observable.map({})\n\n  //  //\n  cleanSizes = {\n    // '/var/log//pacman.log': '10kb',\n  }\n\n  // ---- - ---- //\n  // @observable cleanDetails = {\n  //   appCache: {\n  //     url: [`/home/${this.userinfo.username}/.cache`], // \n  //     contents: { // \n  //       // '/var/cache/pacman/pkg/zsh-5.6.2-1-x86_64.pkg.tar.xz': false,\n  //     },\n  //     size: {\n  //       // '/var/cache/pacman/pkg/zsh-5.6.2-1-x86_64.pkg.tar.xz': '10kb',\n  //     },\n  //   },\n  //   appLog: {\n  //     url: ['/var/log/'],\n  //     contents: {\n  //       // '/var/log//pacman.log': false,\n  //     },\n  //     size: {\n  //       // '/var/log//pacman.log': '10kb',\n  //     },\n  //   }\n  // }\n\n  /* ------------------- static ------------------- */\n\n\n  /* ------------------- computed ------------------- */\n\n  // detail item //\n  @computed get allCheckedDetail() {\n    const a = [];\n    this.cleanContents.forEach((v, k) => {\n      if (v) a.push(k);\n    });\n    return a;\n  }\n\n  //  //\n  @computed get cleanDetail() {\n    const result = [];\n    Object.keys(this.cleanPathMap).forEach((item) => {\n      if (this.items[item]) {\n        const oneResult = {\n          label: item,\n          contents: [],\n        };\n        this.cleanPathMap[item].forEach((it) => {\n          oneResult.contents.push({\n            content: it,\n            size: this.cleanSizes[it] || 0,\n          });\n        });\n\n        result.push(oneResult);\n      }\n    });\n\n    return result;\n  }\n}\n\nexport default Clean;\n\n```\n\n3. \nviewscsscss`@inject`mobx storepropsprops\nmobxmobx store````storestorestore/`visible`storestore\n\n4. ipc\n(ipcRender)node.jsapinode.js(ipcMain)serviceipcserviceipcservicemobx storemobx storeipcobserverservicemobx storeview\n\n\n#### \n1. webpack.config.jswebpack-dev-server\n\n```js\ndevServer: {\n    host: 'localhost',\n    port: 3000,\n    historyApiFallback: true,\n    hot: true,\n  },\n```\n2. `react-hot-loader`AppContainer\n\n```js\nimport { AppContainer } from 'react-hot-loader';\n\nimport 'semantic-ui-css/semantic.min.css';\nimport './styles/public.css';\n\nimport App from './App';\n\nrender(\n  <AppContainer>\n    <App />\n  </AppContainer>,\n  document.getElementById('root')\n);\n```\n### Linux\n-------------------------------------------------------\n#### node.jschild_processshellroot\nrootnode.jsshellchild_process(node.js)child_process`spawn``exec``execFile``fork`[Node API](http://nodejs.cn/api/child_process.html#child_process_asynchronous_process_creation)rootElectronAPIelectron\n1. \n2. child_process(input stream)child_process  \n\n![electron_pssword.png](mobx9.png)\n\n![install_permission.png](mobx10.png)\n\n\n____[github/nojsja/electronux/app/utils/sudo-prompt.js](/blogs/img/article/mobx10.png)  \n\n_~_  \n\n### \n","slug":"Electron-Mobx-React","published":1,"updated":"2019-06-12T03:16:04.498Z","_id":"ck1ptq33g001jin9522fagdn7","comments":1,"layout":"post","photos":[],"link":"","content":"<p><img src=\"Fly.jpg\" alt=\"Hello World\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol><li></li><li></li><li>Webpack4.0</li><li>Electron</li><li>React + Mobx </li><li>Linux</li></ol><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p>Ubuntu18.04Manjaro Linux 17Manjaro(QQ)LinuxGnomeKDECinnamonMateDeepinGnomeManjaroManjaroGUI - <a href=\"https://github.com/NoJsJa/electronux.git\" target=\"_blank\" rel=\"noopener\">electronux</a><br>Electron + Node.js + React + Mobx + Webpack + Shell  ~ Electron+ReactLinux</p><p><img src=\"mobx1.png\" alt=\"clean_detail.png\"></p><p><img src=\"mobx2.png\" alt=\"clean_search.png\"></p><p><img src=\"mobx3.png\" alt=\"electron_pssword.png\"></p><p><img src=\"mobx4.png\" alt=\"info_total.png\"></p><p><img src=\"mobx5.png\" alt=\"install_detail.png\"></p><p><img src=\"mobx6.png\" alt=\"install_list.png\"></p><p><img src=\"mobx7.png\" alt=\"install_permission.png\"></p><p><img src=\"mobx8.png\" alt=\"startup_list.png\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">electronux  </span><br><span class=\"line\">|---- [dir ] app (  )</span><br><span class=\"line\">|----------- [dir ] app/configure (  )</span><br><span class=\"line\">|----------- [dir ] app/runtime (  )</span><br><span class=\"line\">|</span><br><span class=\"line\">|----------- [dir ] app/services (  )</span><br><span class=\"line\">|------------------------ [dir ] app/services/middleware (  )</span><br><span class=\"line\">|------------------------ [dir ] app/services/shell ( shell )</span><br><span class=\"line\">|------------------------ [dir ] app/services/main-serv (  )</span><br><span class=\"line\">|------------------------ [dir ] app/services/render-serv (  )</span><br><span class=\"line\">|</span><br><span class=\"line\">|----------- [dir ] app/stores (  )</span><br><span class=\"line\">|----------- [dir ] app/styles  (  )</span><br><span class=\"line\">|----------- [dir ] app/utils  (  )</span><br><span class=\"line\">|</span><br><span class=\"line\">|----------- [dir ] app/views  ( UI )</span><br><span class=\"line\">|------------------------ [dir ] app/views/module1  ( 1 )</span><br><span class=\"line\">|------------------------ [dir ] app/views/module2  ( 2)</span><br><span class=\"line\">|------------------------ [dir ] app/views/module3  ( 3 )</span><br><span class=\"line\">|</span><br><span class=\"line\">|----------- [file] app/App.js  (  )</span><br><span class=\"line\">|----------- [file] app/index.js (  )</span><br><span class=\"line\">|</span><br><span class=\"line\">|---- [dir ] dist (  )</span><br><span class=\"line\">|---- [dir ] resources (  )</span><br><span class=\"line\">|</span><br><span class=\"line\">|---- [file] .babelrc ( babel )</span><br><span class=\"line\">|---- [file] .editorconfig ()</span><br><span class=\"line\">|---- [file] .eslintrc (  )</span><br><span class=\"line\">|---- [file] .gitignore ( git )</span><br><span class=\"line\">|---- [file] electron-builder.json ( electron-builder )</span><br><span class=\"line\">|---- [file] index.html  (  )</span><br><span class=\"line\">|---- [file] index.js (  )</span><br><span class=\"line\">|---- [file] package.json ()</span><br><span class=\"line\">|---- [file] webpack.config.js (webpack)</span><br><span class=\"line\">|---- [file] webpack.prod.config.js  ( webpack )</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"electronux\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"description\"</span>: <span class=\"string\">\"linux manager-software powered by electron &amp; react &amp; Mobx \"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"version\"</span>: <span class=\"string\">\"1.0.0\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"author\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"NoJsJa\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"email\"</span>: <span class=\"string\">\"yangwei020154@gmail.com\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"start\"</span>: <span class=\"string\">\"concurrently \\\"npm run start-dev\\\" \\\"npm run start-electron\\\"\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"start-dev\"</span>: <span class=\"string\">\"cross-env NODE_ENV=development webpack-dev-server\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"start-electron\"</span>: <span class=\"string\">\"nodemon --exec 'cross-env NODE_ENV=development electron --inspect=5858 index'\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"start-production\"</span>: <span class=\"string\">\"cross-env NODE_ENV=production electron --inspect=5858 index\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"build-all\"</span>: <span class=\"string\">\"npm run dist &amp;&amp; npm run build\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"dist\"</span>: <span class=\"string\">\"cross-env NODE_ENV=production webpack --config webpack.prod.config.js\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"build\"</span>: <span class=\"string\">\"electron-builder -l\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"keywords\"</span>: [</span><br><span class=\"line\">    <span class=\"string\">\"electron\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"react\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"mobx\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"react-router\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"webpack4\"</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">\"license\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"nodemonConfig\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"ignore\"</span>: [</span><br><span class=\"line\">      <span class=\"string\">\"resources/*\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"node_modules/*\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"dist/*\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"build/*\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/stores/*\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/styles/*\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/services/shell/*\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/configure/view.conf\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/views/*\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/App.js\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/main.js\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/index.js\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"electron-builder.yml\"</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"attr\">\"delay\"</span>: <span class=\"string\">\"1000\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"dependencies\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"semantic-ui-css\"</span>: <span class=\"string\">\"^2.4.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"semantic-ui-react\"</span>: <span class=\"string\">\"^0.82.5\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"mobx\"</span>: <span class=\"string\">\"^4.4.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"mobx-react\"</span>: <span class=\"string\">\"^5.2.8\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"prop-types\"</span>: <span class=\"string\">\"^15.6.2\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"react\"</span>: <span class=\"string\">\"^16.5.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"react-dom\"</span>: <span class=\"string\">\"^16.5.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"react-hot-loader\"</span>: <span class=\"string\">\"^4.3.8\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"react-router\"</span>: <span class=\"string\">\"^4.3.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"react-router-dom\"</span>: <span class=\"string\">\"^4.3.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"history\"</span>: <span class=\"string\">\"^4.7.2\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"devDependencies\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"babel-core\"</span>: <span class=\"string\">\"^6.26.3\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"babel-eslint\"</span>: <span class=\"string\">\"^10.0.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"babel-loader\"</span>: <span class=\"string\">\"^7.1.5\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"babel-plugin-transform-decorators-legacy\"</span>: <span class=\"string\">\"^1.3.5\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"babel-preset-env\"</span>: <span class=\"string\">\"^1.7.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"babel-preset-es2015\"</span>: <span class=\"string\">\"^6.24.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"babel-preset-react\"</span>: <span class=\"string\">\"^6.24.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"babel-preset-stage-0\"</span>: <span class=\"string\">\"^6.24.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"clean-webpack-plugin\"</span>: <span class=\"string\">\"^0.1.19\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"concurrently\"</span>: <span class=\"string\">\"^3.6.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"cross-env\"</span>: <span class=\"string\">\"^5.2.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"css-loader\"</span>: <span class=\"string\">\"^0.28.11\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"electron\"</span>: <span class=\"string\">\"^2.0.9\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"electron-builder\"</span>: <span class=\"string\">\"^20.28.4\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"eslint\"</span>: <span class=\"string\">\"^5.6.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"eslint-config-airbnb\"</span>: <span class=\"string\">\"^17.1.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"eslint-plugin-import\"</span>: <span class=\"string\">\"^2.14.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"eslint-plugin-jsx-a11y\"</span>: <span class=\"string\">\"^6.1.2\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"eslint-plugin-react\"</span>: <span class=\"string\">\"^7.11.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"extract-text-webpack-plugin\"</span>: <span class=\"string\">\"^4.0.0-beta.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"file-loader\"</span>: <span class=\"string\">\"^2.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"html-loader\"</span>: <span class=\"string\">\"^0.5.5\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"html-webpack-plugin\"</span>: <span class=\"string\">\"^3.2.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"node-sass\"</span>: <span class=\"string\">\"^4.9.4\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"nodemon\"</span>: <span class=\"string\">\"^1.18.4\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"sass-loader\"</span>: <span class=\"string\">\"^7.1.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"source-map-support\"</span>: <span class=\"string\">\"^0.5.9\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"style-loader\"</span>: <span class=\"string\">\"^0.21.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"url-loader\"</span>: <span class=\"string\">\"^1.1.2\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"webpack\"</span>: <span class=\"string\">\"^4.19.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"webpack-cli\"</span>: <span class=\"string\">\"^2.1.5\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"webpack-dev-server\"</span>: <span class=\"string\">\"^3.1.8\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h3 id=\"Webpack4-0\"><a href=\"#Webpack4-0\" class=\"headerlink\" title=\"Webpack4.0\"></a>Webpack4.0</h3><hr><h4 id=\"webpack\"><a href=\"#webpack\" class=\"headerlink\" title=\"webpack\"></a>webpack</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> CleanWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'clean-webpack-plugin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> extractSass = <span class=\"keyword\">new</span> ExtractTextPlugin(&#123;</span><br><span class=\"line\">  filename: <span class=\"string\">'style.scss.css'</span>,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> extractCss = <span class=\"keyword\">new</span> ExtractTextPlugin(&#123;</span><br><span class=\"line\">  filename: <span class=\"string\">'style.css'</span>,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  devtool: <span class=\"string\">'source-map'</span>,</span><br><span class=\"line\">  entry: [</span><br><span class=\"line\">    <span class=\"string\">'react-hot-loader/patch'</span>,</span><br><span class=\"line\">    <span class=\"string\">'webpack-dev-server/client?http://localhost:3000'</span>,</span><br><span class=\"line\">    <span class=\"string\">'webpack/hot/only-dev-server'</span>,</span><br><span class=\"line\">    <span class=\"string\">'./app/index'</span>,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  mode: <span class=\"string\">'development'</span>,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: <span class=\"string\">'bundle.js'</span>,</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">    publicPath: <span class=\"string\">'/'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  resolve: &#123;</span><br><span class=\"line\">    alias: &#123;</span><br><span class=\"line\">      resources: path.resolve(__dirname, <span class=\"string\">'resources'</span>),</span><br><span class=\"line\">      app: path.resolve(__dirname, <span class=\"string\">'app'</span>),</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        use: [<span class=\"string\">'babel-loader'</span>],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: extractCss.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">          publicPath: <span class=\"string\">'/'</span>,</span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.scss$/</span>,</span><br><span class=\"line\">        use: extractSass.extract(&#123;</span><br><span class=\"line\">          use: [&#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">          &#125;, &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'sass-loader'</span>,</span><br><span class=\"line\">          &#125;],</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>, <span class=\"comment\">//  style-loader</span></span><br><span class=\"line\">          publicPath: <span class=\"string\">'/'</span>,</span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.html$/</span>,</span><br><span class=\"line\">        use: &#123;</span><br><span class=\"line\">          loader: <span class=\"string\">'html-loader'</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif|svg|ico|woff|eot|ttf|woff2)$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'file-loader'</span>,</span><br><span class=\"line\">            options: &#123;</span><br><span class=\"line\">              name: <span class=\"string\">'[path][name].[ext]'</span>,</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    extractSass,</span><br><span class=\"line\">    extractCss,</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.HotModuleReplacementPlugin(),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> CleanWebpackPlugin([<span class=\"string\">'dist'</span>]),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.NamedModulesPlugin(),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.NoEmitOnErrorsPlugin(),</span><br><span class=\"line\">  ],</span><br><span class=\"line\"></span><br><span class=\"line\">  devServer: &#123;</span><br><span class=\"line\">    host: <span class=\"string\">'localhost'</span>,</span><br><span class=\"line\">    port: <span class=\"number\">3000</span>,</span><br><span class=\"line\">    historyApiFallback: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    hot: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  target: <span class=\"string\">'electron-renderer'</span>,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><h3 id=\"Electron\"><a href=\"#Electron\" class=\"headerlink\" title=\"Electron\"></a>Electron</h3><hr><blockquote><p>Electron  package.json  main  web  Electron <br> Electron  Chromium  web  Chromium   Electron  web <br>web  Electron  Node.js  API <br> BrowserWindow   BrowserWindow   BrowserWindow <br>web  web <br> GUI  API  web  GUI   web  GUI  GUI </p></blockquote><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>index.jselectron<code>http</code>webpack-dev-serverhttp<code>file</code>webpackbundle.js<code>npm start</code>webpack-dev-serverlocalhost:3000httpelectronchromiumnode.jschrome v8node.js APIfs</p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>nodemonnodemon <code>npm start-electron</code><code>cross-env NODE_ENV=development electron index</code>electronnodemon<code>npm start-electron</code><code>nodemon --exec &#39;cross-env NODE_ENV=development electron index&#39;</code>package.jsonnodemonConfignodemon</p><p>=&gt; package.json<br></p><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"scripts\": &#123;</span><br><span class=\"line\">  \"start\": \"concurrently \\\"npm run start-dev\\\" \\\"npm run start-electron\\\"\",</span><br><span class=\"line\">  \"start-dev\": \"cross-env NODE_ENV=development webpack-dev-server\",</span><br><span class=\"line\">  \"start-electron\": \"nodemon --exec 'cross-env NODE_ENV=development electron index'\",</span><br><span class=\"line\">  \"build\": \"npm run dist &amp;&amp; npm run build-all\",</span><br><span class=\"line\">  \"dist\": \"cross-env NODE_ENV=production webpack  --config webpack.production.config.js\",</span><br><span class=\"line\">  \"build-all\": \"build -lmw\"</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure><p></p><p>=&gt; package.jsonnodemonConfig<br></p><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"nodemonConfig\": &#123;</span><br><span class=\"line\">    \"ignore\": [</span><br><span class=\"line\">      \"resources/*\",</span><br><span class=\"line\">      \"node_modules/*\",</span><br><span class=\"line\">      \"dist/*\",</span><br><span class=\"line\">      \"app/stores/*\",</span><br><span class=\"line\">      \"app/styles/*\",</span><br><span class=\"line\">      \"app/services/shell/*\",</span><br><span class=\"line\">      \"app/configure/view.conf\",</span><br><span class=\"line\">      \"app/views/*\",</span><br><span class=\"line\">      \"app/App.js\",</span><br><span class=\"line\">      \"app/main.js\",</span><br><span class=\"line\">      <span class=\"string\">\"app/index.js\"</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    \"delay\": \"1000\"</span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure><p></p><p>=&gt; index.js<br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"comment\">//  //</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loadWindow</span>(<span class=\"params\">window, env</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (env === <span class=\"string\">'development'</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// wait for webpack-dev-server start</span></span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">window</span>.loadURL(url.format(&#123;</span><br><span class=\"line\">        pathname: <span class=\"string\">'localhost:3000'</span>,</span><br><span class=\"line\">        protocol: <span class=\"string\">'http:'</span>,</span><br><span class=\"line\">        slashes: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      &#125;));</span><br><span class=\"line\">      <span class=\"comment\">// window.webContents.openDevTools();</span></span><br><span class=\"line\">    &#125;, <span class=\"number\">1e3</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.loadURL(url.format(&#123;</span><br><span class=\"line\">      pathname: path.join(path.resolve(__dirname, <span class=\"string\">'./dist'</span>), <span class=\"string\">'index.html'</span>),</span><br><span class=\"line\">      protocol: <span class=\"string\">'file:'</span>,</span><br><span class=\"line\">      slashes: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* ------------------- main window ------------------- */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createWindow</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; width, height &#125; = getAppConf();</span><br><span class=\"line\">  win = <span class=\"keyword\">new</span> BrowserWindow(&#123;</span><br><span class=\"line\">    width,</span><br><span class=\"line\">    height,</span><br><span class=\"line\">    title: <span class=\"string\">'electronux'</span>,</span><br><span class=\"line\">    autoHideMenuBar: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  win.on(<span class=\"string\">'resize'</span>, () =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> [_width, _height] = win.getContentSize();</span><br><span class=\"line\">    viewConf.set(&#123;</span><br><span class=\"line\">      width: _width,</span><br><span class=\"line\">      height: _height,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  loadWindow(win, nodeEnv);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* ------------------- electron event ------------------- */</span></span><br><span class=\"line\"></span><br><span class=\"line\">app.on(<span class=\"string\">'ready'</span>, () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (nodeEnv === <span class=\"string\">'development'</span>) &#123;</span><br><span class=\"line\">    sourceMapSupport.install();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  createWindow();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.on(<span class=\"string\">'window-all-closed'</span>, () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.platform !== <span class=\"string\">'darwin'</span>) &#123;</span><br><span class=\"line\">    app.quit();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.on(<span class=\"string\">'will-quit'</span>, () =&gt; &#123;</span><br><span class=\"line\">  viewConf.write().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"number\">0</span>, (err) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(err);</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'App quit: view-conf write error !'</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.on(<span class=\"string\">'activate'</span>, () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (win === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    createWindow();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure><p></p><h3 id=\"React-Mobx-\"><a href=\"#React-Mobx-\" class=\"headerlink\" title=\"React + Mobx \"></a>React + Mobx </h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li>App.js<br><code>mobx-react</code>Provider()mobx storepropsProvider<code>@inject</code>storeReact RouterReact Router V4<a href=\"https://reacttraining.com/react-router/web/guides/quick-start\" target=\"_blank\" rel=\"noopener\">react-router4</a></li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* ------------------- export global history ------------------- */</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> history = createHistory();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> stores = &#123;</span><br><span class=\"line\">  install: <span class=\"keyword\">new</span> InstallState(),</span><br><span class=\"line\">  startup: <span class=\"keyword\">new</span> StartupState(),</span><br><span class=\"line\">  info: <span class=\"keyword\">new</span> InfoState(),</span><br><span class=\"line\">  clean: <span class=\"keyword\">new</span> CleanState(),</span><br><span class=\"line\">  pub: <span class=\"keyword\">new</span> PublicState(),</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Provider &#123;...stores&#125;&gt;</span><br><span class=\"line\">      &lt;Router history=&#123;history&#125;&gt;</span><br><span class=\"line\">        &lt;Route path=<span class=\"string\">\"/\"</span> component=&#123;HomePage&#125; /&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/Router&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>Provider&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* ------------------- export provider ------------------- */</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure><ol><li>mobx store <br>mobx storestoremobxUIstorestore<code></code><br>mobxmobx<code>computed</code><code>autorun</code><code>action</code>store</li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Clean</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123; &#125;</span><br><span class=\"line\">  <span class=\"comment\">/* ------------------- observable ------------------- */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//  //</span></span><br><span class=\"line\">  @observable items = &#123;</span><br><span class=\"line\">    appCache: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    appLog: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    trash: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    packageCache: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//  //</span></span><br><span class=\"line\">  @observable loadingMain = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//  //</span></span><br><span class=\"line\">  cleanPaths = &#123;</span><br><span class=\"line\">    appCache: [<span class=\"string\">`/home/<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.userinfo.username&#125;</span>/.cache`</span>],</span><br><span class=\"line\">    appLog: [<span class=\"string\">'/var/log/'</span>],</span><br><span class=\"line\">    trash: [<span class=\"string\">`/home/<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.userinfo.username&#125;</span>/.local/share/Trash/files`</span>],</span><br><span class=\"line\">    packageCache: [<span class=\"string\">'/var/cache/pacman/pkg'</span>],</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//  //</span></span><br><span class=\"line\">  @observable cleanPathMap = &#123;</span><br><span class=\"line\">    appCache: [], <span class=\"comment\">// '/var/log/pacman.log'</span></span><br><span class=\"line\">    appLog: [],</span><br><span class=\"line\">    trash: [],</span><br><span class=\"line\">    packageCache: [],</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//  //</span></span><br><span class=\"line\">  @observable cleanContents = observable.map(&#123;&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//  //</span></span><br><span class=\"line\">  cleanSizes = &#123;</span><br><span class=\"line\">    <span class=\"comment\">// '/var/log//pacman.log': '10kb',</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ---- - ---- //</span></span><br><span class=\"line\">  <span class=\"comment\">// @observable cleanDetails = &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//   appCache: &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//     url: [`/home/$&#123;this.userinfo.username&#125;/.cache`], // </span></span><br><span class=\"line\">  <span class=\"comment\">//     contents: &#123; // </span></span><br><span class=\"line\">  <span class=\"comment\">//       // '/var/cache/pacman/pkg/zsh-5.6.2-1-x86_64.pkg.tar.xz': false,</span></span><br><span class=\"line\">  <span class=\"comment\">//     &#125;,</span></span><br><span class=\"line\">  <span class=\"comment\">//     size: &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//       // '/var/cache/pacman/pkg/zsh-5.6.2-1-x86_64.pkg.tar.xz': '10kb',</span></span><br><span class=\"line\">  <span class=\"comment\">//     &#125;,</span></span><br><span class=\"line\">  <span class=\"comment\">//   &#125;,</span></span><br><span class=\"line\">  <span class=\"comment\">//   appLog: &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//     url: ['/var/log/'],</span></span><br><span class=\"line\">  <span class=\"comment\">//     contents: &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//       // '/var/log//pacman.log': false,</span></span><br><span class=\"line\">  <span class=\"comment\">//     &#125;,</span></span><br><span class=\"line\">  <span class=\"comment\">//     size: &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//       // '/var/log//pacman.log': '10kb',</span></span><br><span class=\"line\">  <span class=\"comment\">//     &#125;,</span></span><br><span class=\"line\">  <span class=\"comment\">//   &#125;</span></span><br><span class=\"line\">  <span class=\"comment\">// &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* ------------------- static ------------------- */</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* ------------------- computed ------------------- */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// detail item //</span></span><br><span class=\"line\">  @computed <span class=\"keyword\">get</span> allCheckedDetail() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> a = [];</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.cleanContents.forEach(<span class=\"function\">(<span class=\"params\">v, k</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (v) a.push(k);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//  //</span></span><br><span class=\"line\">  @computed <span class=\"keyword\">get</span> cleanDetail() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> result = [];</span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.keys(<span class=\"keyword\">this</span>.cleanPathMap).forEach(<span class=\"function\">(<span class=\"params\">item</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.items[item]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> oneResult = &#123;</span><br><span class=\"line\">          label: item,</span><br><span class=\"line\">          contents: [],</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.cleanPathMap[item].forEach(<span class=\"function\">(<span class=\"params\">it</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          oneResult.contents.push(&#123;</span><br><span class=\"line\">            content: it,</span><br><span class=\"line\">            size: <span class=\"keyword\">this</span>.cleanSizes[it] || <span class=\"number\">0</span>,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        result.push(oneResult);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> Clean;</span><br></pre></td></tr></table></figure><ol><li><p><br>viewscsscss<code>@inject</code>mobx storepropsprops<br>mobxmobx store<code></code><code></code>storestorestore/<code>visible</code>storestore</p></li><li><p>ipc<br>(ipcRender)node.jsapinode.js(ipcMain)serviceipcserviceipcservicemobx storemobx storeipcobserverservicemobx storeview</p></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li>webpack.config.jswebpack-dev-server</li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">devServer: &#123;</span><br><span class=\"line\">    host: <span class=\"string\">'localhost'</span>,</span><br><span class=\"line\">    port: <span class=\"number\">3000</span>,</span><br><span class=\"line\">    historyApiFallback: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    hot: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure><ol><li><code>react-hot-loader</code>AppContainer</li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; AppContainer &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-hot-loader'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">'semantic-ui-css/semantic.min.css'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">'./styles/public.css'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'./App'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">render(</span><br><span class=\"line\">  &lt;AppContainer&gt;</span><br><span class=\"line\">    &lt;App /&gt;</span><br><span class=\"line\">  &lt;<span class=\"regexp\">/AppContainer&gt;,</span></span><br><span class=\"line\"><span class=\"regexp\">  document.getElementById('root')</span></span><br><span class=\"line\"><span class=\"regexp\">);</span></span><br></pre></td></tr></table></figure><h3 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h3><hr><h4 id=\"node-jschild-processshellroot\"><a href=\"#node-jschild-processshellroot\" class=\"headerlink\" title=\"node.jschild_processshellroot\"></a>node.jschild_processshellroot</h4><p>rootnode.jsshellchild_process(node.js)child_process<code>spawn</code><code>exec</code><code>execFile</code><code>fork</code><a href=\"http://nodejs.cn/api/child_process.html#child_process_asynchronous_process_creation\" target=\"_blank\" rel=\"noopener\">Node API</a>rootElectronAPIelectron</p><ol><li></li><li>child_process(input stream)child_process</li></ol><p><img src=\"mobx9.png\" alt=\"electron_pssword.png\"></p><p><img src=\"mobx10.png\" alt=\"install_permission.png\"></p><p><strong></strong><a href=\"/blogs/img/article/mobx10.png\">github/nojsja/electronux/app/utils/sudo-prompt.js</a></p><p><em>~</em></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3>","site":{"data":{}},"excerpt":"","more":"<p><img src=\"Fly.jpg\" alt=\"Hello World\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><ol><li></li><li></li><li>Webpack4.0</li><li>Electron</li><li>React + Mobx </li><li>Linux</li></ol><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><p>Ubuntu18.04Manjaro Linux 17Manjaro(QQ)LinuxGnomeKDECinnamonMateDeepinGnomeManjaroManjaroGUI - <a href=\"https://github.com/NoJsJa/electronux.git\" target=\"_blank\" rel=\"noopener\">electronux</a><br>Electron + Node.js + React + Mobx + Webpack + Shell  ~ Electron+ReactLinux</p><p><img src=\"mobx1.png\" alt=\"clean_detail.png\"></p><p><img src=\"mobx2.png\" alt=\"clean_search.png\"></p><p><img src=\"mobx3.png\" alt=\"electron_pssword.png\"></p><p><img src=\"mobx4.png\" alt=\"info_total.png\"></p><p><img src=\"mobx5.png\" alt=\"install_detail.png\"></p><p><img src=\"mobx6.png\" alt=\"install_list.png\"></p><p><img src=\"mobx7.png\" alt=\"install_permission.png\"></p><p><img src=\"mobx8.png\" alt=\"startup_list.png\"></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">electronux  </span><br><span class=\"line\">|---- [dir ] app (  )</span><br><span class=\"line\">|----------- [dir ] app/configure (  )</span><br><span class=\"line\">|----------- [dir ] app/runtime (  )</span><br><span class=\"line\">|</span><br><span class=\"line\">|----------- [dir ] app/services (  )</span><br><span class=\"line\">|------------------------ [dir ] app/services/middleware (  )</span><br><span class=\"line\">|------------------------ [dir ] app/services/shell ( shell )</span><br><span class=\"line\">|------------------------ [dir ] app/services/main-serv (  )</span><br><span class=\"line\">|------------------------ [dir ] app/services/render-serv (  )</span><br><span class=\"line\">|</span><br><span class=\"line\">|----------- [dir ] app/stores (  )</span><br><span class=\"line\">|----------- [dir ] app/styles  (  )</span><br><span class=\"line\">|----------- [dir ] app/utils  (  )</span><br><span class=\"line\">|</span><br><span class=\"line\">|----------- [dir ] app/views  ( UI )</span><br><span class=\"line\">|------------------------ [dir ] app/views/module1  ( 1 )</span><br><span class=\"line\">|------------------------ [dir ] app/views/module2  ( 2)</span><br><span class=\"line\">|------------------------ [dir ] app/views/module3  ( 3 )</span><br><span class=\"line\">|</span><br><span class=\"line\">|----------- [file] app/App.js  (  )</span><br><span class=\"line\">|----------- [file] app/index.js (  )</span><br><span class=\"line\">|</span><br><span class=\"line\">|---- [dir ] dist (  )</span><br><span class=\"line\">|---- [dir ] resources (  )</span><br><span class=\"line\">|</span><br><span class=\"line\">|---- [file] .babelrc ( babel )</span><br><span class=\"line\">|---- [file] .editorconfig ()</span><br><span class=\"line\">|---- [file] .eslintrc (  )</span><br><span class=\"line\">|---- [file] .gitignore ( git )</span><br><span class=\"line\">|---- [file] electron-builder.json ( electron-builder )</span><br><span class=\"line\">|---- [file] index.html  (  )</span><br><span class=\"line\">|---- [file] index.js (  )</span><br><span class=\"line\">|---- [file] package.json ()</span><br><span class=\"line\">|---- [file] webpack.config.js (webpack)</span><br><span class=\"line\">|---- [file] webpack.prod.config.js  ( webpack )</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><figure class=\"highlight json\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">  <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"electronux\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"description\"</span>: <span class=\"string\">\"linux manager-software powered by electron &amp; react &amp; Mobx \"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"version\"</span>: <span class=\"string\">\"1.0.0\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"author\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"name\"</span>: <span class=\"string\">\"NoJsJa\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"email\"</span>: <span class=\"string\">\"yangwei020154@gmail.com\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"scripts\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"start\"</span>: <span class=\"string\">\"concurrently \\\"npm run start-dev\\\" \\\"npm run start-electron\\\"\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"start-dev\"</span>: <span class=\"string\">\"cross-env NODE_ENV=development webpack-dev-server\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"start-electron\"</span>: <span class=\"string\">\"nodemon --exec 'cross-env NODE_ENV=development electron --inspect=5858 index'\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"start-production\"</span>: <span class=\"string\">\"cross-env NODE_ENV=production electron --inspect=5858 index\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"build-all\"</span>: <span class=\"string\">\"npm run dist &amp;&amp; npm run build\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"dist\"</span>: <span class=\"string\">\"cross-env NODE_ENV=production webpack --config webpack.prod.config.js\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"build\"</span>: <span class=\"string\">\"electron-builder -l\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"keywords\"</span>: [</span><br><span class=\"line\">    <span class=\"string\">\"electron\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"react\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"mobx\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"react-router\"</span>,</span><br><span class=\"line\">    <span class=\"string\">\"webpack4\"</span></span><br><span class=\"line\">  ],</span><br><span class=\"line\">  <span class=\"attr\">\"license\"</span>: <span class=\"string\">\"\"</span>,</span><br><span class=\"line\">  <span class=\"attr\">\"nodemonConfig\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"ignore\"</span>: [</span><br><span class=\"line\">      <span class=\"string\">\"resources/*\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"node_modules/*\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"dist/*\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"build/*\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/stores/*\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/styles/*\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/services/shell/*\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/configure/view.conf\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/views/*\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/App.js\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/main.js\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"app/index.js\"</span>,</span><br><span class=\"line\">      <span class=\"string\">\"electron-builder.yml\"</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    <span class=\"attr\">\"delay\"</span>: <span class=\"string\">\"1000\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"dependencies\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"semantic-ui-css\"</span>: <span class=\"string\">\"^2.4.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"semantic-ui-react\"</span>: <span class=\"string\">\"^0.82.5\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"mobx\"</span>: <span class=\"string\">\"^4.4.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"mobx-react\"</span>: <span class=\"string\">\"^5.2.8\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"prop-types\"</span>: <span class=\"string\">\"^15.6.2\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"react\"</span>: <span class=\"string\">\"^16.5.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"react-dom\"</span>: <span class=\"string\">\"^16.5.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"react-hot-loader\"</span>: <span class=\"string\">\"^4.3.8\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"react-router\"</span>: <span class=\"string\">\"^4.3.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"react-router-dom\"</span>: <span class=\"string\">\"^4.3.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"history\"</span>: <span class=\"string\">\"^4.7.2\"</span></span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"attr\">\"devDependencies\"</span>: &#123;</span><br><span class=\"line\">    <span class=\"attr\">\"babel-core\"</span>: <span class=\"string\">\"^6.26.3\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"babel-eslint\"</span>: <span class=\"string\">\"^10.0.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"babel-loader\"</span>: <span class=\"string\">\"^7.1.5\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"babel-plugin-transform-decorators-legacy\"</span>: <span class=\"string\">\"^1.3.5\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"babel-preset-env\"</span>: <span class=\"string\">\"^1.7.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"babel-preset-es2015\"</span>: <span class=\"string\">\"^6.24.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"babel-preset-react\"</span>: <span class=\"string\">\"^6.24.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"babel-preset-stage-0\"</span>: <span class=\"string\">\"^6.24.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"clean-webpack-plugin\"</span>: <span class=\"string\">\"^0.1.19\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"concurrently\"</span>: <span class=\"string\">\"^3.6.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"cross-env\"</span>: <span class=\"string\">\"^5.2.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"css-loader\"</span>: <span class=\"string\">\"^0.28.11\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"electron\"</span>: <span class=\"string\">\"^2.0.9\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"electron-builder\"</span>: <span class=\"string\">\"^20.28.4\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"eslint\"</span>: <span class=\"string\">\"^5.6.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"eslint-config-airbnb\"</span>: <span class=\"string\">\"^17.1.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"eslint-plugin-import\"</span>: <span class=\"string\">\"^2.14.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"eslint-plugin-jsx-a11y\"</span>: <span class=\"string\">\"^6.1.2\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"eslint-plugin-react\"</span>: <span class=\"string\">\"^7.11.1\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"extract-text-webpack-plugin\"</span>: <span class=\"string\">\"^4.0.0-beta.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"file-loader\"</span>: <span class=\"string\">\"^2.0.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"html-loader\"</span>: <span class=\"string\">\"^0.5.5\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"html-webpack-plugin\"</span>: <span class=\"string\">\"^3.2.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"node-sass\"</span>: <span class=\"string\">\"^4.9.4\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"nodemon\"</span>: <span class=\"string\">\"^1.18.4\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"sass-loader\"</span>: <span class=\"string\">\"^7.1.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"source-map-support\"</span>: <span class=\"string\">\"^0.5.9\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"style-loader\"</span>: <span class=\"string\">\"^0.21.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"url-loader\"</span>: <span class=\"string\">\"^1.1.2\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"webpack\"</span>: <span class=\"string\">\"^4.19.0\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"webpack-cli\"</span>: <span class=\"string\">\"^2.1.5\"</span>,</span><br><span class=\"line\">    <span class=\"attr\">\"webpack-dev-server\"</span>: <span class=\"string\">\"^3.1.8\"</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h3 id=\"Webpack4-0\"><a href=\"#Webpack4-0\" class=\"headerlink\" title=\"Webpack4.0\"></a>Webpack4.0</h3><hr><h4 id=\"webpack\"><a href=\"#webpack\" class=\"headerlink\" title=\"webpack\"></a>webpack</h4><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">const</span> path = <span class=\"built_in\">require</span>(<span class=\"string\">'path'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> webpack = <span class=\"built_in\">require</span>(<span class=\"string\">'webpack'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> CleanWebpackPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'clean-webpack-plugin'</span>);</span><br><span class=\"line\"><span class=\"keyword\">const</span> ExtractTextPlugin = <span class=\"built_in\">require</span>(<span class=\"string\">'extract-text-webpack-plugin'</span>);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">// </span></span><br><span class=\"line\"><span class=\"keyword\">const</span> extractSass = <span class=\"keyword\">new</span> ExtractTextPlugin(&#123;</span><br><span class=\"line\">  filename: <span class=\"string\">'style.scss.css'</span>,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> extractCss = <span class=\"keyword\">new</span> ExtractTextPlugin(&#123;</span><br><span class=\"line\">  filename: <span class=\"string\">'style.css'</span>,</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"built_in\">module</span>.exports = &#123;</span><br><span class=\"line\">  devtool: <span class=\"string\">'source-map'</span>,</span><br><span class=\"line\">  entry: [</span><br><span class=\"line\">    <span class=\"string\">'react-hot-loader/patch'</span>,</span><br><span class=\"line\">    <span class=\"string\">'webpack-dev-server/client?http://localhost:3000'</span>,</span><br><span class=\"line\">    <span class=\"string\">'webpack/hot/only-dev-server'</span>,</span><br><span class=\"line\">    <span class=\"string\">'./app/index'</span>,</span><br><span class=\"line\">  ],</span><br><span class=\"line\">  mode: <span class=\"string\">'development'</span>,</span><br><span class=\"line\">  output: &#123;</span><br><span class=\"line\">    filename: <span class=\"string\">'bundle.js'</span>,</span><br><span class=\"line\">    path: path.resolve(__dirname, <span class=\"string\">'dist'</span>),</span><br><span class=\"line\">    publicPath: <span class=\"string\">'/'</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  resolve: &#123;</span><br><span class=\"line\">    alias: &#123;</span><br><span class=\"line\">      resources: path.resolve(__dirname, <span class=\"string\">'resources'</span>),</span><br><span class=\"line\">      app: path.resolve(__dirname, <span class=\"string\">'app'</span>),</span><br><span class=\"line\">    &#125;,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  <span class=\"built_in\">module</span>: &#123;</span><br><span class=\"line\">    rules: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.js$/</span>,</span><br><span class=\"line\">        use: [<span class=\"string\">'babel-loader'</span>],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.css$/</span>,</span><br><span class=\"line\">        use: extractCss.extract(&#123;</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>,</span><br><span class=\"line\">          use: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">          publicPath: <span class=\"string\">'/'</span>,</span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.scss$/</span>,</span><br><span class=\"line\">        use: extractSass.extract(&#123;</span><br><span class=\"line\">          use: [&#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'css-loader'</span>,</span><br><span class=\"line\">          &#125;, &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'sass-loader'</span>,</span><br><span class=\"line\">          &#125;],</span><br><span class=\"line\">          fallback: <span class=\"string\">'style-loader'</span>, <span class=\"comment\">//  style-loader</span></span><br><span class=\"line\">          publicPath: <span class=\"string\">'/'</span>,</span><br><span class=\"line\">        &#125;),</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.html$/</span>,</span><br><span class=\"line\">        use: &#123;</span><br><span class=\"line\">          loader: <span class=\"string\">'html-loader'</span>,</span><br><span class=\"line\">        &#125;,</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        test: <span class=\"regexp\">/\\.(png|jpg|gif|svg|ico|woff|eot|ttf|woff2)$/</span>,</span><br><span class=\"line\">        use: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            loader: <span class=\"string\">'file-loader'</span>,</span><br><span class=\"line\">            options: &#123;</span><br><span class=\"line\">              name: <span class=\"string\">'[path][name].[ext]'</span>,</span><br><span class=\"line\">            &#125;,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\"></span><br><span class=\"line\">  plugins: [</span><br><span class=\"line\">    extractSass,</span><br><span class=\"line\">    extractCss,</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.HotModuleReplacementPlugin(),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> CleanWebpackPlugin([<span class=\"string\">'dist'</span>]),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.NamedModulesPlugin(),</span><br><span class=\"line\">    <span class=\"keyword\">new</span> webpack.NoEmitOnErrorsPlugin(),</span><br><span class=\"line\">  ],</span><br><span class=\"line\"></span><br><span class=\"line\">  devServer: &#123;</span><br><span class=\"line\">    host: <span class=\"string\">'localhost'</span>,</span><br><span class=\"line\">    port: <span class=\"number\">3000</span>,</span><br><span class=\"line\">    historyApiFallback: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    hot: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">  target: <span class=\"string\">'electron-renderer'</span>,</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><h3 id=\"Electron\"><a href=\"#Electron\" class=\"headerlink\" title=\"Electron\"></a>Electron</h3><hr><blockquote><p>Electron  package.json  main  web  Electron <br> Electron  Chromium  web  Chromium   Electron  web <br>web  Electron  Node.js  API <br> BrowserWindow   BrowserWindow   BrowserWindow <br>web  web <br> GUI  API  web  GUI   web  GUI  GUI </p></blockquote><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>index.jselectron<code>http</code>webpack-dev-serverhttp<code>file</code>webpackbundle.js<code>npm start</code>webpack-dev-serverlocalhost:3000httpelectronchromiumnode.jschrome v8node.js APIfs</p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>nodemonnodemon <code>npm start-electron</code><code>cross-env NODE_ENV=development electron index</code>electronnodemon<code>npm start-electron</code><code>nodemon --exec &#39;cross-env NODE_ENV=development electron index&#39;</code>package.jsonnodemonConfignodemon</p><p>=&gt; package.json<br></p><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"scripts\": &#123;</span><br><span class=\"line\">  \"start\": \"concurrently \\\"npm run start-dev\\\" \\\"npm run start-electron\\\"\",</span><br><span class=\"line\">  \"start-dev\": \"cross-env NODE_ENV=development webpack-dev-server\",</span><br><span class=\"line\">  \"start-electron\": \"nodemon --exec 'cross-env NODE_ENV=development electron index'\",</span><br><span class=\"line\">  \"build\": \"npm run dist &amp;&amp; npm run build-all\",</span><br><span class=\"line\">  \"dist\": \"cross-env NODE_ENV=production webpack  --config webpack.production.config.js\",</span><br><span class=\"line\">  \"build-all\": \"build -lmw\"</span><br><span class=\"line\">&#125;,</span><br></pre></td></tr></table></figure><p></p><p>=&gt; package.jsonnodemonConfig<br></p><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">\"nodemonConfig\": &#123;</span><br><span class=\"line\">    \"ignore\": [</span><br><span class=\"line\">      \"resources/*\",</span><br><span class=\"line\">      \"node_modules/*\",</span><br><span class=\"line\">      \"dist/*\",</span><br><span class=\"line\">      \"app/stores/*\",</span><br><span class=\"line\">      \"app/styles/*\",</span><br><span class=\"line\">      \"app/services/shell/*\",</span><br><span class=\"line\">      \"app/configure/view.conf\",</span><br><span class=\"line\">      \"app/views/*\",</span><br><span class=\"line\">      \"app/App.js\",</span><br><span class=\"line\">      \"app/main.js\",</span><br><span class=\"line\">      <span class=\"string\">\"app/index.js\"</span></span><br><span class=\"line\">    ],</span><br><span class=\"line\">    \"delay\": \"1000\"</span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure><p></p><p>=&gt; index.js<br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"><span class=\"comment\">//  //</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">loadWindow</span>(<span class=\"params\">window, env</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (env === <span class=\"string\">'development'</span>) &#123;</span><br><span class=\"line\">    <span class=\"comment\">// wait for webpack-dev-server start</span></span><br><span class=\"line\">    setTimeout(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"built_in\">window</span>.loadURL(url.format(&#123;</span><br><span class=\"line\">        pathname: <span class=\"string\">'localhost:3000'</span>,</span><br><span class=\"line\">        protocol: <span class=\"string\">'http:'</span>,</span><br><span class=\"line\">        slashes: <span class=\"literal\">true</span>,</span><br><span class=\"line\">      &#125;));</span><br><span class=\"line\">      <span class=\"comment\">// window.webContents.openDevTools();</span></span><br><span class=\"line\">    &#125;, <span class=\"number\">1e3</span>);</span><br><span class=\"line\">  &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">    <span class=\"built_in\">window</span>.loadURL(url.format(&#123;</span><br><span class=\"line\">      pathname: path.join(path.resolve(__dirname, <span class=\"string\">'./dist'</span>), <span class=\"string\">'index.html'</span>),</span><br><span class=\"line\">      protocol: <span class=\"string\">'file:'</span>,</span><br><span class=\"line\">      slashes: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    &#125;));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* ------------------- main window ------------------- */</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">createWindow</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">const</span> &#123; width, height &#125; = getAppConf();</span><br><span class=\"line\">  win = <span class=\"keyword\">new</span> BrowserWindow(&#123;</span><br><span class=\"line\">    width,</span><br><span class=\"line\">    height,</span><br><span class=\"line\">    title: <span class=\"string\">'electronux'</span>,</span><br><span class=\"line\">    autoHideMenuBar: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  win.on(<span class=\"string\">'resize'</span>, () =&gt; &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> [_width, _height] = win.getContentSize();</span><br><span class=\"line\">    viewConf.set(&#123;</span><br><span class=\"line\">      width: _width,</span><br><span class=\"line\">      height: _height,</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">  loadWindow(win, nodeEnv);</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* ------------------- electron event ------------------- */</span></span><br><span class=\"line\"></span><br><span class=\"line\">app.on(<span class=\"string\">'ready'</span>, () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (nodeEnv === <span class=\"string\">'development'</span>) &#123;</span><br><span class=\"line\">    sourceMapSupport.install();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">  createWindow();</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.on(<span class=\"string\">'window-all-closed'</span>, () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (process.platform !== <span class=\"string\">'darwin'</span>) &#123;</span><br><span class=\"line\">    app.quit();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.on(<span class=\"string\">'will-quit'</span>, () =&gt; &#123;</span><br><span class=\"line\">  viewConf.write().then(<span class=\"function\"><span class=\"params\">()</span> =&gt;</span> <span class=\"number\">0</span>, (err) =&gt; &#123;</span><br><span class=\"line\">    <span class=\"built_in\">console</span>.error(err);</span><br><span class=\"line\">    <span class=\"keyword\">throw</span> <span class=\"keyword\">new</span> <span class=\"built_in\">Error</span>(<span class=\"string\">'App quit: view-conf write error !'</span>);</span><br><span class=\"line\">  &#125;);</span><br><span class=\"line\">&#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">app.on(<span class=\"string\">'activate'</span>, () =&gt; &#123;</span><br><span class=\"line\">  <span class=\"keyword\">if</span> (win === <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">    createWindow();</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;);</span><br></pre></td></tr></table></figure><p></p><h3 id=\"React-Mobx-\"><a href=\"#React-Mobx-\" class=\"headerlink\" title=\"React + Mobx \"></a>React + Mobx </h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li>App.js<br><code>mobx-react</code>Provider()mobx storepropsProvider<code>@inject</code>storeReact RouterReact Router V4<a href=\"https://reacttraining.com/react-router/web/guides/quick-start\" target=\"_blank\" rel=\"noopener\">react-router4</a></li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* ------------------- export global history ------------------- */</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">const</span> history = createHistory();</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">const</span> stores = &#123;</span><br><span class=\"line\">  install: <span class=\"keyword\">new</span> InstallState(),</span><br><span class=\"line\">  startup: <span class=\"keyword\">new</span> StartupState(),</span><br><span class=\"line\">  info: <span class=\"keyword\">new</span> InfoState(),</span><br><span class=\"line\">  clean: <span class=\"keyword\">new</span> CleanState(),</span><br><span class=\"line\">  pub: <span class=\"keyword\">new</span> PublicState(),</span><br><span class=\"line\">&#125;;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">App</span>(<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">return</span> (</span><br><span class=\"line\">    &lt;Provider &#123;...stores&#125;&gt;</span><br><span class=\"line\">      &lt;Router history=&#123;history&#125;&gt;</span><br><span class=\"line\">        &lt;Route path=<span class=\"string\">\"/\"</span> component=&#123;HomePage&#125; /&gt;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/Router&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    &lt;/</span>Provider&gt;</span><br><span class=\"line\">  );</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* ------------------- export provider ------------------- */</span></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> App;</span><br></pre></td></tr></table></figure><ol><li>mobx store <br>mobx storestoremobxUIstorestore<code></code><br>mobxmobx<code>computed</code><code>autorun</code><code>action</code>store</li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Clean</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>() &#123; &#125;</span><br><span class=\"line\">  <span class=\"comment\">/* ------------------- observable ------------------- */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//  //</span></span><br><span class=\"line\">  @observable items = &#123;</span><br><span class=\"line\">    appCache: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    appLog: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    trash: <span class=\"literal\">false</span>,</span><br><span class=\"line\">    packageCache: <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//  //</span></span><br><span class=\"line\">  @observable loadingMain = <span class=\"literal\">false</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//  //</span></span><br><span class=\"line\">  cleanPaths = &#123;</span><br><span class=\"line\">    appCache: [<span class=\"string\">`/home/<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.userinfo.username&#125;</span>/.cache`</span>],</span><br><span class=\"line\">    appLog: [<span class=\"string\">'/var/log/'</span>],</span><br><span class=\"line\">    trash: [<span class=\"string\">`/home/<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.userinfo.username&#125;</span>/.local/share/Trash/files`</span>],</span><br><span class=\"line\">    packageCache: [<span class=\"string\">'/var/cache/pacman/pkg'</span>],</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//  //</span></span><br><span class=\"line\">  @observable cleanPathMap = &#123;</span><br><span class=\"line\">    appCache: [], <span class=\"comment\">// '/var/log/pacman.log'</span></span><br><span class=\"line\">    appLog: [],</span><br><span class=\"line\">    trash: [],</span><br><span class=\"line\">    packageCache: [],</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//  //</span></span><br><span class=\"line\">  @observable cleanContents = observable.map(&#123;&#125;)</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//  //</span></span><br><span class=\"line\">  cleanSizes = &#123;</span><br><span class=\"line\">    <span class=\"comment\">// '/var/log//pacman.log': '10kb',</span></span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// ---- - ---- //</span></span><br><span class=\"line\">  <span class=\"comment\">// @observable cleanDetails = &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//   appCache: &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//     url: [`/home/$&#123;this.userinfo.username&#125;/.cache`], // </span></span><br><span class=\"line\">  <span class=\"comment\">//     contents: &#123; // </span></span><br><span class=\"line\">  <span class=\"comment\">//       // '/var/cache/pacman/pkg/zsh-5.6.2-1-x86_64.pkg.tar.xz': false,</span></span><br><span class=\"line\">  <span class=\"comment\">//     &#125;,</span></span><br><span class=\"line\">  <span class=\"comment\">//     size: &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//       // '/var/cache/pacman/pkg/zsh-5.6.2-1-x86_64.pkg.tar.xz': '10kb',</span></span><br><span class=\"line\">  <span class=\"comment\">//     &#125;,</span></span><br><span class=\"line\">  <span class=\"comment\">//   &#125;,</span></span><br><span class=\"line\">  <span class=\"comment\">//   appLog: &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//     url: ['/var/log/'],</span></span><br><span class=\"line\">  <span class=\"comment\">//     contents: &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//       // '/var/log//pacman.log': false,</span></span><br><span class=\"line\">  <span class=\"comment\">//     &#125;,</span></span><br><span class=\"line\">  <span class=\"comment\">//     size: &#123;</span></span><br><span class=\"line\">  <span class=\"comment\">//       // '/var/log//pacman.log': '10kb',</span></span><br><span class=\"line\">  <span class=\"comment\">//     &#125;,</span></span><br><span class=\"line\">  <span class=\"comment\">//   &#125;</span></span><br><span class=\"line\">  <span class=\"comment\">// &#125;</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* ------------------- static ------------------- */</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* ------------------- computed ------------------- */</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// detail item //</span></span><br><span class=\"line\">  @computed <span class=\"keyword\">get</span> allCheckedDetail() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> a = [];</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.cleanContents.forEach(<span class=\"function\">(<span class=\"params\">v, k</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (v) a.push(k);</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\">    <span class=\"keyword\">return</span> a;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">//  //</span></span><br><span class=\"line\">  @computed <span class=\"keyword\">get</span> cleanDetail() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> result = [];</span><br><span class=\"line\">    <span class=\"built_in\">Object</span>.keys(<span class=\"keyword\">this</span>.cleanPathMap).forEach(<span class=\"function\">(<span class=\"params\">item</span>) =&gt;</span> &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (<span class=\"keyword\">this</span>.items[item]) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">const</span> oneResult = &#123;</span><br><span class=\"line\">          label: item,</span><br><span class=\"line\">          contents: [],</span><br><span class=\"line\">        &#125;;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.cleanPathMap[item].forEach(<span class=\"function\">(<span class=\"params\">it</span>) =&gt;</span> &#123;</span><br><span class=\"line\">          oneResult.contents.push(&#123;</span><br><span class=\"line\">            content: it,</span><br><span class=\"line\">            size: <span class=\"keyword\">this</span>.cleanSizes[it] || <span class=\"number\">0</span>,</span><br><span class=\"line\">          &#125;);</span><br><span class=\"line\">        &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">        result.push(oneResult);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;);</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">return</span> result;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> Clean;</span><br></pre></td></tr></table></figure><ol><li><p><br>viewscsscss<code>@inject</code>mobx storepropsprops<br>mobxmobx store<code></code><code></code>storestorestore/<code>visible</code>storestore</p></li><li><p>ipc<br>(ipcRender)node.jsapinode.js(ipcMain)serviceipcserviceipcservicemobx storemobx storeipcobserverservicemobx storeview</p></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li>webpack.config.jswebpack-dev-server</li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">devServer: &#123;</span><br><span class=\"line\">    host: <span class=\"string\">'localhost'</span>,</span><br><span class=\"line\">    port: <span class=\"number\">3000</span>,</span><br><span class=\"line\">    historyApiFallback: <span class=\"literal\">true</span>,</span><br><span class=\"line\">    hot: <span class=\"literal\">true</span>,</span><br><span class=\"line\">  &#125;,</span><br></pre></td></tr></table></figure><ol><li><code>react-hot-loader</code>AppContainer</li></ol><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> &#123; AppContainer &#125; <span class=\"keyword\">from</span> <span class=\"string\">'react-hot-loader'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">'semantic-ui-css/semantic.min.css'</span>;</span><br><span class=\"line\"><span class=\"keyword\">import</span> <span class=\"string\">'./styles/public.css'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">import</span> App <span class=\"keyword\">from</span> <span class=\"string\">'./App'</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">render(</span><br><span class=\"line\">  &lt;AppContainer&gt;</span><br><span class=\"line\">    &lt;App /&gt;</span><br><span class=\"line\">  &lt;<span class=\"regexp\">/AppContainer&gt;,</span></span><br><span class=\"line\"><span class=\"regexp\">  document.getElementById('root')</span></span><br><span class=\"line\"><span class=\"regexp\">);</span></span><br></pre></td></tr></table></figure><h3 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h3><hr><h4 id=\"node-jschild-processshellroot\"><a href=\"#node-jschild-processshellroot\" class=\"headerlink\" title=\"node.jschild_processshellroot\"></a>node.jschild_processshellroot</h4><p>rootnode.jsshellchild_process(node.js)child_process<code>spawn</code><code>exec</code><code>execFile</code><code>fork</code><a href=\"http://nodejs.cn/api/child_process.html#child_process_asynchronous_process_creation\" target=\"_blank\" rel=\"noopener\">Node API</a>rootElectronAPIelectron</p><ol><li></li><li>child_process(input stream)child_process</li></ol><p><img src=\"mobx9.png\" alt=\"electron_pssword.png\"></p><p><img src=\"mobx10.png\" alt=\"install_permission.png\"></p><p><strong></strong><a href=\"/blogs/img/article/mobx10.png\">github/nojsja/electronux/app/utils/sudo-prompt.js</a></p><p><em>~</em></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3>"},{"title":"LinuxMint18","catalog":true,"toc_nav_num":true,"date":"2019-04-04T08:30:35.000Z","subtitle":"linux mint","header-img":"article_header.png","updateDate":"2019-04-04T08:30:35.000Z","_content":"\n![city](city.jpg)\n>linux mint18.3ubuntu\n\n#### \n1. QQ 8.1  \n2. \n3. \n4.  Mac-os \n5. ()\n6. wps\n7. tmuxstaceroh-my-zshSmartGitDocky\n8. chrome\n\n#### QQ 8.1  \n---------------------\n\n#####  Wine + deepingCrossover + deepinQQ 8.1\n>bug  \n\n1. Wine  \nWine(Wine Is Not Emulator)Winex86x86-64UnixX Window SystemMicrosoft Windows  \n[-->](https://wiki.winehq.org/Ubuntu)  \n\n2. deepinCrossover  \n6432  \n~~~sh\nsudo dpkg --add-architecture i386\nsudo apt-get update\n~~~\n32\n~~~sh\nsudo apt-get install lib32z1 lib32ncurses5  \n~~~\n[crossover](https://pan.baidu.com/disk/home?#/all?vmode=list&path=%2F%E5%B7%A5%E5%85%B7%E5%92%8C%E8%BD%AF%E4%BB%B6%2Fcrossover-%E4%BB%A5%E5%8F%8Aqq%E5%AE%89%E8%A3%85)crossover-15_15.0.3-1_all.debcrossover-15_15.0.3-1_all-free.debdeepin-crossover-helper_1.0deepin0_all.debWinedeb\n\n3. deepinQQ 8.1  \ndeepinCrossoverdebdeb:apps.com.qq.im_8.1.17255deepin11_i386.debQQ\n\n#####  QQ\n>   \n\n* [QQ.AppImage](https://pan.baidu.com/disk/home?#/all?vmode=list&path=%2F%E5%B7%A5%E5%85%B7%E5%92%8C%E8%BD%AF%E4%BB%B6%2FQQ_Linux)\n\n#### \n----------------\n>  \n\n##### electron-wechat\n[](https://github.com/geeeeeeeeek/electronic-wechat/releases)githubtartar -xf  electronic-wechat   sudo chmod 755 ./electronic-wechat /usr/local/bin  /home//Desktop/  sudo ln -s path/to/electronic-wechat path/to/  \n\n##### weweChat\n[](https://github.com/trazyn/weweChat/releases)wewechatdebUI  \n\n#### \n--------------------\n>LinuxAPIElectronWhatever [Electron](https://electronjs.org/apps)appLinuxWhatever[](https://electronjs.org/apps/whatever)\n\n####  Mac-os \n-------------------\n* Linux Mint  \n~~~sh\nsudo add-apt-repository ppa:noobslab/macbuntu\nsudo apt update\nsudo apt install macbuntu-os-icons-lts-v7 macbuntu-os-ithemes-lts-v7\n~~~\n\n* Linux Mint  \n~~~sh\nsudo add-apt-repository -r ppa:noobslab/macbuntu\nsudo apt update\nsudo apt remove macbuntu-os-icons-lts-v7 macbuntu-os-ithemes-lts\n-v7\n~~~\n\n\n\n#### ()\n--------------------\n1. vultr$2.5[](https://my.vultr.com/)  \n2.   \n3. shadowsocks [](https://xyzardq.github.io/2017/03/07/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%80%E9%94%AE%E6%90%AD%E5%BB%BAshadowsocks%E5%8F%8A%E4%BC%98%E5%8C%96/)  \n4. Shadowsocks-Qt5  \n~~~sh\nsudo add-apt-repository ppa:hzwhuang/ss-qt5\nsudo apt-get update\nsudo apt-get install shadowsocks-qt5\n~~~\n5. chromeSwitchyOmegaFirefoxip Shadowsocks-Qt5ip[](http://www.cylong.com/blog/2017/04/09/chrome-SwitchyOmega/)\n\n#### wps\n------------------\n>Linuxlinux mintLibofficeoffice[wps](http://linux.wps.cn/)\n\n#### \n---------------\n1. tmux\n>Tmux \n[](http://wdxtub.com/2016/03/30/tmux-guide/)\n\n2. stacer\n>Linuxapt[](https://sourceforge.net/projects/stacer/)\n\n3. oh-my-zsh\n>bash[](http://yijiebuyi.com/blog/b9b5e1ebb719f22475c38c4819ab8151.html)\n\n4. SmartGit\n>git\n\n5. Docky  \n>dock  \n\n6. Peek\n>gif/webm/apng/webm  \n\n7. Inkscape\n>svg  \n\n#### chrome\n---------------------\n1. infinity  \n>\n2. Octotree  \n>github\n3. Postman  \n>apicookie\n4. SwitchyOmega  \n>\n5.   \n>\n6. SimpRead -   \n>\n7. Full Page Screen Capture  \n>\n8. \n>\n\n#### \n\n","source":"_posts/2019-04-04-LinuxMint18.md","raw":"---\ntitle: \"LinuxMint18\"\ncatalog: true\ntoc_nav_num: true\ndate:   2019-04-04 16:30:35\nsubtitle: \"linux mint\"\nheader-img: \"article_header.png\"\ntags:\n- linux\n- mint\ncategories:\n- Linux\nupdateDate: 2019-04-04 16:30:35\n---\n\n![city](city.jpg)\n>linux mint18.3ubuntu\n\n#### \n1. QQ 8.1  \n2. \n3. \n4.  Mac-os \n5. ()\n6. wps\n7. tmuxstaceroh-my-zshSmartGitDocky\n8. chrome\n\n#### QQ 8.1  \n---------------------\n\n#####  Wine + deepingCrossover + deepinQQ 8.1\n>bug  \n\n1. Wine  \nWine(Wine Is Not Emulator)Winex86x86-64UnixX Window SystemMicrosoft Windows  \n[-->](https://wiki.winehq.org/Ubuntu)  \n\n2. deepinCrossover  \n6432  \n~~~sh\nsudo dpkg --add-architecture i386\nsudo apt-get update\n~~~\n32\n~~~sh\nsudo apt-get install lib32z1 lib32ncurses5  \n~~~\n[crossover](https://pan.baidu.com/disk/home?#/all?vmode=list&path=%2F%E5%B7%A5%E5%85%B7%E5%92%8C%E8%BD%AF%E4%BB%B6%2Fcrossover-%E4%BB%A5%E5%8F%8Aqq%E5%AE%89%E8%A3%85)crossover-15_15.0.3-1_all.debcrossover-15_15.0.3-1_all-free.debdeepin-crossover-helper_1.0deepin0_all.debWinedeb\n\n3. deepinQQ 8.1  \ndeepinCrossoverdebdeb:apps.com.qq.im_8.1.17255deepin11_i386.debQQ\n\n#####  QQ\n>   \n\n* [QQ.AppImage](https://pan.baidu.com/disk/home?#/all?vmode=list&path=%2F%E5%B7%A5%E5%85%B7%E5%92%8C%E8%BD%AF%E4%BB%B6%2FQQ_Linux)\n\n#### \n----------------\n>  \n\n##### electron-wechat\n[](https://github.com/geeeeeeeeek/electronic-wechat/releases)githubtartar -xf  electronic-wechat   sudo chmod 755 ./electronic-wechat /usr/local/bin  /home//Desktop/  sudo ln -s path/to/electronic-wechat path/to/  \n\n##### weweChat\n[](https://github.com/trazyn/weweChat/releases)wewechatdebUI  \n\n#### \n--------------------\n>LinuxAPIElectronWhatever [Electron](https://electronjs.org/apps)appLinuxWhatever[](https://electronjs.org/apps/whatever)\n\n####  Mac-os \n-------------------\n* Linux Mint  \n~~~sh\nsudo add-apt-repository ppa:noobslab/macbuntu\nsudo apt update\nsudo apt install macbuntu-os-icons-lts-v7 macbuntu-os-ithemes-lts-v7\n~~~\n\n* Linux Mint  \n~~~sh\nsudo add-apt-repository -r ppa:noobslab/macbuntu\nsudo apt update\nsudo apt remove macbuntu-os-icons-lts-v7 macbuntu-os-ithemes-lts\n-v7\n~~~\n\n\n\n#### ()\n--------------------\n1. vultr$2.5[](https://my.vultr.com/)  \n2.   \n3. shadowsocks [](https://xyzardq.github.io/2017/03/07/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%80%E9%94%AE%E6%90%AD%E5%BB%BAshadowsocks%E5%8F%8A%E4%BC%98%E5%8C%96/)  \n4. Shadowsocks-Qt5  \n~~~sh\nsudo add-apt-repository ppa:hzwhuang/ss-qt5\nsudo apt-get update\nsudo apt-get install shadowsocks-qt5\n~~~\n5. chromeSwitchyOmegaFirefoxip Shadowsocks-Qt5ip[](http://www.cylong.com/blog/2017/04/09/chrome-SwitchyOmega/)\n\n#### wps\n------------------\n>Linuxlinux mintLibofficeoffice[wps](http://linux.wps.cn/)\n\n#### \n---------------\n1. tmux\n>Tmux \n[](http://wdxtub.com/2016/03/30/tmux-guide/)\n\n2. stacer\n>Linuxapt[](https://sourceforge.net/projects/stacer/)\n\n3. oh-my-zsh\n>bash[](http://yijiebuyi.com/blog/b9b5e1ebb719f22475c38c4819ab8151.html)\n\n4. SmartGit\n>git\n\n5. Docky  \n>dock  \n\n6. Peek\n>gif/webm/apng/webm  \n\n7. Inkscape\n>svg  \n\n#### chrome\n---------------------\n1. infinity  \n>\n2. Octotree  \n>github\n3. Postman  \n>apicookie\n4. SwitchyOmega  \n>\n5.   \n>\n6. SimpRead -   \n>\n7. Full Page Screen Capture  \n>\n8. \n>\n\n#### \n\n","slug":"LinuxMint18","published":1,"updated":"2020-08-26T03:06:04.627Z","_id":"cju222mq6001vin95dx6p94q2","comments":1,"layout":"post","photos":[],"link":"","content":"<p><img src=\"city.jpg\" alt=\"city\"></p><blockquote><p>linux mint18.3ubuntu</p></blockquote><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li>QQ 8.1  </li><li></li><li></li><li> Mac-os </li><li>()</li><li>wps</li><li>tmuxstaceroh-my-zshSmartGitDocky</li><li>chrome</li></ol><h4 id=\"QQ-8-1--\"><a href=\"#QQ-8-1--\" class=\"headerlink\" title=\"QQ 8.1  \"></a>QQ 8.1  </h4><hr><h5 id=\"-Wine-deepingCrossover-deepinQQ-8-1\"><a href=\"#-Wine-deepingCrossover-deepinQQ-8-1\" class=\"headerlink\" title=\" Wine + deepingCrossover + deepinQQ 8.1\"></a> Wine + deepingCrossover + deepinQQ 8.1</h5><blockquote><p>bug</p></blockquote><ol><li><p>Wine<br>Wine(Wine Is Not Emulator)Winex86x86-64UnixX Window SystemMicrosoft Windows<br><a href=\"https://wiki.winehq.org/Ubuntu\" target=\"_blank\" rel=\"noopener\">&gt;</a></p></li><li><p>deepinCrossover<br>6432</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo dpkg --add-architecture i386</span><br><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure><p>32</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install lib32z1 lib32ncurses5</span><br></pre></td></tr></table></figure><p><a href=\"https://pan.baidu.com/disk/home?#/all?vmode=list&amp;path=%2F%E5%B7%A5%E5%85%B7%E5%92%8C%E8%BD%AF%E4%BB%B6%2Fcrossover-%E4%BB%A5%E5%8F%8Aqq%E5%AE%89%E8%A3%85\" target=\"_blank\" rel=\"noopener\">crossover</a>crossover-15_15.0.3-1_all.debcrossover-15_15.0.3-1_all-free.debdeepin-crossover-helper_1.0deepin0_all.debWinedeb</p></li><li><p>deepinQQ 8.1<br>deepinCrossoverdebdeb:apps.com.qq.im_8.1.17255deepin11_i386.debQQ</p></li></ol><h5 id=\"-QQ\"><a href=\"#-QQ\" class=\"headerlink\" title=\" QQ\"></a> QQ</h5><blockquote><p></p></blockquote><ul><li><a href=\"https://pan.baidu.com/disk/home?#/all?vmode=list&amp;path=%2F%E5%B7%A5%E5%85%B7%E5%92%8C%E8%BD%AF%E4%BB%B6%2FQQ_Linux\" target=\"_blank\" rel=\"noopener\">QQ.AppImage</a></li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><blockquote><p></p></blockquote><h5 id=\"electron-wechat\"><a href=\"#electron-wechat\" class=\"headerlink\" title=\"electron-wechat\"></a>electron-wechat</h5><p><a href=\"https://github.com/geeeeeeeeek/electronic-wechat/releases\" target=\"_blank\" rel=\"noopener\"></a>githubtartar -xf  electronic-wechat   sudo chmod 755 ./electronic-wechat /usr/local/bin  /home//Desktop/  sudo ln -s path/to/electronic-wechat path/to/</p><h5 id=\"weweChat\"><a href=\"#weweChat\" class=\"headerlink\" title=\"weweChat\"></a>weweChat</h5><p><a href=\"https://github.com/trazyn/weweChat/releases\" target=\"_blank\" rel=\"noopener\"></a>wewechatdebUI</p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><blockquote><p>LinuxAPIElectronWhatever <a href=\"https://electronjs.org/apps\" target=\"_blank\" rel=\"noopener\">Electron</a>appLinuxWhatever<a href=\"https://electronjs.org/apps/whatever\" target=\"_blank\" rel=\"noopener\"></a></p></blockquote><h4 id=\"-Mac-os-\"><a href=\"#-Mac-os-\" class=\"headerlink\" title=\" Mac-os \"></a> Mac-os </h4><hr><ul><li><p>Linux Mint</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo add-apt-repository ppa:noobslab/macbuntu</span><br><span class=\"line\">sudo apt update</span><br><span class=\"line\">sudo apt install macbuntu-os-icons-lts-v7 macbuntu-os-ithemes-lts-v7</span><br></pre></td></tr></table></figure></li><li><p>Linux Mint</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo add-apt-repository -r ppa:noobslab/macbuntu</span><br><span class=\"line\">sudo apt update</span><br><span class=\"line\">sudo apt remove macbuntu-os-icons-lts-v7 macbuntu-os-ithemes-lts</span><br><span class=\"line\">-v7</span><br></pre></td></tr></table></figure></li></ul><p></p><h4 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h4><hr><ol><li>vultr$2.5<a href=\"https://my.vultr.com/\" target=\"_blank\" rel=\"noopener\"></a></li><li></li><li>shadowsocks <a href=\"https://xyzardq.github.io/2017/03/07/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%80%E9%94%AE%E6%90%AD%E5%BB%BAshadowsocks%E5%8F%8A%E4%BC%98%E5%8C%96/\" target=\"_blank\" rel=\"noopener\"></a></li><li>Shadowsocks-Qt5<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo add-apt-repository ppa:hzwhuang/ss-qt5</span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get install shadowsocks-qt5</span><br></pre></td></tr></table></figure></li><li>chromeSwitchyOmegaFirefoxip Shadowsocks-Qt5ip<a href=\"http://www.cylong.com/blog/2017/04/09/chrome-SwitchyOmega/\" target=\"_blank\" rel=\"noopener\"></a></li></ol><h4 id=\"wps\"><a href=\"#wps\" class=\"headerlink\" title=\"wps\"></a>wps</h4><hr><blockquote><p>Linuxlinux mintLibofficeoffice<a href=\"http://linux.wps.cn/\" target=\"_blank\" rel=\"noopener\">wps</a></p></blockquote><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><ol><li><p>tmux</p><blockquote><p>Tmux <br><a href=\"http://wdxtub.com/2016/03/30/tmux-guide/\" target=\"_blank\" rel=\"noopener\"></a></p></blockquote></li><li><p>stacer</p><blockquote><p>Linuxapt<a href=\"https://sourceforge.net/projects/stacer/\" target=\"_blank\" rel=\"noopener\"></a></p></blockquote></li><li><p>oh-my-zsh</p><blockquote><p>bash<a href=\"http://yijiebuyi.com/blog/b9b5e1ebb719f22475c38c4819ab8151.html\" target=\"_blank\" rel=\"noopener\"></a></p></blockquote></li><li><p>SmartGit</p><blockquote><p>git</p></blockquote></li><li><p>Docky</p><blockquote><p>dock</p></blockquote></li><li><p>Peek</p><blockquote><p>gif/webm/apng/webm</p></blockquote></li><li><p>Inkscape</p><blockquote><p>svg</p></blockquote></li></ol><h4 id=\"chrome\"><a href=\"#chrome\" class=\"headerlink\" title=\"chrome\"></a>chrome</h4><hr><ol><li>infinity<blockquote><p></p></blockquote></li><li>Octotree<blockquote><p>github</p></blockquote></li><li>Postman<blockquote><p>apicookie</p></blockquote></li><li>SwitchyOmega<blockquote><p></p></blockquote></li><li><blockquote><p></p></blockquote></li><li>SimpRead - <blockquote><p></p></blockquote></li><li>Full Page Screen Capture<blockquote><p></p></blockquote></li><li><blockquote><p></p></blockquote></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>","site":{"data":{}},"excerpt":"","more":"<p><img src=\"city.jpg\" alt=\"city\"></p><blockquote><p>linux mint18.3ubuntu</p></blockquote><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ol><li>QQ 8.1  </li><li></li><li></li><li> Mac-os </li><li>()</li><li>wps</li><li>tmuxstaceroh-my-zshSmartGitDocky</li><li>chrome</li></ol><h4 id=\"QQ-8-1--\"><a href=\"#QQ-8-1--\" class=\"headerlink\" title=\"QQ 8.1  \"></a>QQ 8.1  </h4><hr><h5 id=\"-Wine-deepingCrossover-deepinQQ-8-1\"><a href=\"#-Wine-deepingCrossover-deepinQQ-8-1\" class=\"headerlink\" title=\" Wine + deepingCrossover + deepinQQ 8.1\"></a> Wine + deepingCrossover + deepinQQ 8.1</h5><blockquote><p>bug</p></blockquote><ol><li><p>Wine<br>Wine(Wine Is Not Emulator)Winex86x86-64UnixX Window SystemMicrosoft Windows<br><a href=\"https://wiki.winehq.org/Ubuntu\" target=\"_blank\" rel=\"noopener\">&gt;</a></p></li><li><p>deepinCrossover<br>6432</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo dpkg --add-architecture i386</span><br><span class=\"line\">sudo apt-get update</span><br></pre></td></tr></table></figure><p>32</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install lib32z1 lib32ncurses5</span><br></pre></td></tr></table></figure><p><a href=\"https://pan.baidu.com/disk/home?#/all?vmode=list&amp;path=%2F%E5%B7%A5%E5%85%B7%E5%92%8C%E8%BD%AF%E4%BB%B6%2Fcrossover-%E4%BB%A5%E5%8F%8Aqq%E5%AE%89%E8%A3%85\" target=\"_blank\" rel=\"noopener\">crossover</a>crossover-15_15.0.3-1_all.debcrossover-15_15.0.3-1_all-free.debdeepin-crossover-helper_1.0deepin0_all.debWinedeb</p></li><li><p>deepinQQ 8.1<br>deepinCrossoverdebdeb:apps.com.qq.im_8.1.17255deepin11_i386.debQQ</p></li></ol><h5 id=\"-QQ\"><a href=\"#-QQ\" class=\"headerlink\" title=\" QQ\"></a> QQ</h5><blockquote><p></p></blockquote><ul><li><a href=\"https://pan.baidu.com/disk/home?#/all?vmode=list&amp;path=%2F%E5%B7%A5%E5%85%B7%E5%92%8C%E8%BD%AF%E4%BB%B6%2FQQ_Linux\" target=\"_blank\" rel=\"noopener\">QQ.AppImage</a></li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><blockquote><p></p></blockquote><h5 id=\"electron-wechat\"><a href=\"#electron-wechat\" class=\"headerlink\" title=\"electron-wechat\"></a>electron-wechat</h5><p><a href=\"https://github.com/geeeeeeeeek/electronic-wechat/releases\" target=\"_blank\" rel=\"noopener\"></a>githubtartar -xf  electronic-wechat   sudo chmod 755 ./electronic-wechat /usr/local/bin  /home//Desktop/  sudo ln -s path/to/electronic-wechat path/to/</p><h5 id=\"weweChat\"><a href=\"#weweChat\" class=\"headerlink\" title=\"weweChat\"></a>weweChat</h5><p><a href=\"https://github.com/trazyn/weweChat/releases\" target=\"_blank\" rel=\"noopener\"></a>wewechatdebUI</p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><blockquote><p>LinuxAPIElectronWhatever <a href=\"https://electronjs.org/apps\" target=\"_blank\" rel=\"noopener\">Electron</a>appLinuxWhatever<a href=\"https://electronjs.org/apps/whatever\" target=\"_blank\" rel=\"noopener\"></a></p></blockquote><h4 id=\"-Mac-os-\"><a href=\"#-Mac-os-\" class=\"headerlink\" title=\" Mac-os \"></a> Mac-os </h4><hr><ul><li><p>Linux Mint</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo add-apt-repository ppa:noobslab/macbuntu</span><br><span class=\"line\">sudo apt update</span><br><span class=\"line\">sudo apt install macbuntu-os-icons-lts-v7 macbuntu-os-ithemes-lts-v7</span><br></pre></td></tr></table></figure></li><li><p>Linux Mint</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo add-apt-repository -r ppa:noobslab/macbuntu</span><br><span class=\"line\">sudo apt update</span><br><span class=\"line\">sudo apt remove macbuntu-os-icons-lts-v7 macbuntu-os-ithemes-lts</span><br><span class=\"line\">-v7</span><br></pre></td></tr></table></figure></li></ul><p></p><h4 id=\"-\"><a href=\"#-\" class=\"headerlink\" title=\"()\"></a>()</h4><hr><ol><li>vultr$2.5<a href=\"https://my.vultr.com/\" target=\"_blank\" rel=\"noopener\"></a></li><li></li><li>shadowsocks <a href=\"https://xyzardq.github.io/2017/03/07/%E6%9C%8D%E5%8A%A1%E5%99%A8%E4%B8%80%E9%94%AE%E6%90%AD%E5%BB%BAshadowsocks%E5%8F%8A%E4%BC%98%E5%8C%96/\" target=\"_blank\" rel=\"noopener\"></a></li><li>Shadowsocks-Qt5<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo add-apt-repository ppa:hzwhuang/ss-qt5</span><br><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get install shadowsocks-qt5</span><br></pre></td></tr></table></figure></li><li>chromeSwitchyOmegaFirefoxip Shadowsocks-Qt5ip<a href=\"http://www.cylong.com/blog/2017/04/09/chrome-SwitchyOmega/\" target=\"_blank\" rel=\"noopener\"></a></li></ol><h4 id=\"wps\"><a href=\"#wps\" class=\"headerlink\" title=\"wps\"></a>wps</h4><hr><blockquote><p>Linuxlinux mintLibofficeoffice<a href=\"http://linux.wps.cn/\" target=\"_blank\" rel=\"noopener\">wps</a></p></blockquote><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><ol><li><p>tmux</p><blockquote><p>Tmux <br><a href=\"http://wdxtub.com/2016/03/30/tmux-guide/\" target=\"_blank\" rel=\"noopener\"></a></p></blockquote></li><li><p>stacer</p><blockquote><p>Linuxapt<a href=\"https://sourceforge.net/projects/stacer/\" target=\"_blank\" rel=\"noopener\"></a></p></blockquote></li><li><p>oh-my-zsh</p><blockquote><p>bash<a href=\"http://yijiebuyi.com/blog/b9b5e1ebb719f22475c38c4819ab8151.html\" target=\"_blank\" rel=\"noopener\"></a></p></blockquote></li><li><p>SmartGit</p><blockquote><p>git</p></blockquote></li><li><p>Docky</p><blockquote><p>dock</p></blockquote></li><li><p>Peek</p><blockquote><p>gif/webm/apng/webm</p></blockquote></li><li><p>Inkscape</p><blockquote><p>svg</p></blockquote></li></ol><h4 id=\"chrome\"><a href=\"#chrome\" class=\"headerlink\" title=\"chrome\"></a>chrome</h4><hr><ol><li>infinity<blockquote><p></p></blockquote></li><li>Octotree<blockquote><p>github</p></blockquote></li><li>Postman<blockquote><p>apicookie</p></blockquote></li><li>SwitchyOmega<blockquote><p></p></blockquote></li><li><blockquote><p></p></blockquote></li><li>SimpRead - <blockquote><p></p></blockquote></li><li>Full Page Screen Capture<blockquote><p></p></blockquote></li><li><blockquote><p></p></blockquote></li></ol><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p></p>"},{"title":"proxychains","catalog":true,"toc_nav_num":true,"date":"2019-04-04T08:30:35.000Z","subtitle":"proxy linux","header-img":"article_header.png","updateDate":"2019-04-04T08:30:35.000Z","_content":"\n### proxychains  \n\n`sudo apt install proxychains`\n\n### proxychains  \n\n`vim /etc/proxychains.conf`\n\n### socks4 127.0.0.1 9095  \n\n`socks5 127.0.0.1 1080`\n\nps: socks4 127.0.0.1 9095torsocks5 127.0.0.1 1080shadowsocksproxychains.conf,,  \n\n```bash\nProxyList format\n 94 #       type  ip  port  [user pass]\n 95 #       (values separated by 'tab' or 'blank')\n 96 #\n 97 #       only numeric ipv4 addresses are valid\n 98 #\n 99 #\n100 #        Examples:\n101 #\n102 #       socks5  192.168.67.78   1080    lamer   secret\n103 #       http    192.168.89.3    8080    justu   hidden\n104 #       socks4  192.168.1.49    1080\n105 #       http    192.168.39.93   8080\n```\n\n###   \n proxychains \n```bash\nproxychains wget http://xxx.com/xxx.zip\nproxychains git clone https://xxxxxxxxx.git\n```\nnpmhttp\n```bash\n# 8002\nnpm config set proxy http://127.0.0.1:1081\nnpm config set https-proxy http://127.0.0.1:1081\n\n# \nnpm config set proxy http://username:password@127.0.0.1:1081\nnpm confit set https-proxy http://username:password@127.0.0.1:1081\n```\nnpmsocks5\n```bash\n# socks51081\n# \nnpm install -g http-proxy-to-socks\n# 8002,http8002httpsocks1081\nhpts -s 127.0.0.1:1081 -p 8002\n# npm8080\nnpm config set proxy http://127.0.0.1:8002\nnpm config set https-proxy http://127.0.0.1:8002\n```\n\n\n```bash\nnpm config get\n  or\nnpm config list\n\nnpm config delete proxy\n  and\nnpm config delete https-proxy\n```","source":"_posts/2019-04-04-proxychains.md","raw":"---\ntitle: \"proxychains\"\ncatalog: true\ntoc_nav_num: true\ndate:   2019-04-04 16:30:35\nsubtitle: \"proxy linux\"\nheader-img: \"article_header.png\"\ntags:\n- proxy\n- shadowsocks\ncategories:\n- Linux\nupdateDate: 2019-04-04 16:30:35\n---\n\n### proxychains  \n\n`sudo apt install proxychains`\n\n### proxychains  \n\n`vim /etc/proxychains.conf`\n\n### socks4 127.0.0.1 9095  \n\n`socks5 127.0.0.1 1080`\n\nps: socks4 127.0.0.1 9095torsocks5 127.0.0.1 1080shadowsocksproxychains.conf,,  \n\n```bash\nProxyList format\n 94 #       type  ip  port  [user pass]\n 95 #       (values separated by 'tab' or 'blank')\n 96 #\n 97 #       only numeric ipv4 addresses are valid\n 98 #\n 99 #\n100 #        Examples:\n101 #\n102 #       socks5  192.168.67.78   1080    lamer   secret\n103 #       http    192.168.89.3    8080    justu   hidden\n104 #       socks4  192.168.1.49    1080\n105 #       http    192.168.39.93   8080\n```\n\n###   \n proxychains \n```bash\nproxychains wget http://xxx.com/xxx.zip\nproxychains git clone https://xxxxxxxxx.git\n```\nnpmhttp\n```bash\n# 8002\nnpm config set proxy http://127.0.0.1:1081\nnpm config set https-proxy http://127.0.0.1:1081\n\n# \nnpm config set proxy http://username:password@127.0.0.1:1081\nnpm confit set https-proxy http://username:password@127.0.0.1:1081\n```\nnpmsocks5\n```bash\n# socks51081\n# \nnpm install -g http-proxy-to-socks\n# 8002,http8002httpsocks1081\nhpts -s 127.0.0.1:1081 -p 8002\n# npm8080\nnpm config set proxy http://127.0.0.1:8002\nnpm config set https-proxy http://127.0.0.1:8002\n```\n\n\n```bash\nnpm config get\n  or\nnpm config list\n\nnpm config delete proxy\n  and\nnpm config delete https-proxy\n```","slug":"proxychains","published":1,"updated":"2019-04-04T03:08:34.861Z","_id":"cju228q6m0022in95b47b8p0r","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"proxychains\"><a href=\"#proxychains\" class=\"headerlink\" title=\"proxychains\"></a>proxychains</h3><p><code>sudo apt install proxychains</code></p><h3 id=\"proxychains\"><a href=\"#proxychains\" class=\"headerlink\" title=\"proxychains\"></a>proxychains</h3><p><code>vim /etc/proxychains.conf</code></p><h3 id=\"socks4-127-0-0-1-9095\"><a href=\"#socks4-127-0-0-1-9095\" class=\"headerlink\" title=\"socks4 127.0.0.1 9095\"></a>socks4 127.0.0.1 9095</h3><p><code>socks5 127.0.0.1 1080</code></p><p>ps: socks4 127.0.0.1 9095torsocks5 127.0.0.1 1080shadowsocksproxychains.conf,,</p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ProxyList format</span><br><span class=\"line\"> 94 <span class=\"comment\">#       type  ip  port  [user pass]</span></span><br><span class=\"line\"> 95 <span class=\"comment\">#       (values separated by 'tab' or 'blank')</span></span><br><span class=\"line\"> 96 <span class=\"comment\">#</span></span><br><span class=\"line\"> 97 <span class=\"comment\">#       only numeric ipv4 addresses are valid</span></span><br><span class=\"line\"> 98 <span class=\"comment\">#</span></span><br><span class=\"line\"> 99 <span class=\"comment\">#</span></span><br><span class=\"line\">100 <span class=\"comment\">#        Examples:</span></span><br><span class=\"line\">101 <span class=\"comment\">#</span></span><br><span class=\"line\">102 <span class=\"comment\">#       socks5  192.168.67.78   1080    lamer   secret</span></span><br><span class=\"line\">103 <span class=\"comment\">#       http    192.168.89.3    8080    justu   hidden</span></span><br><span class=\"line\">104 <span class=\"comment\">#       socks4  192.168.1.49    1080</span></span><br><span class=\"line\">105 <span class=\"comment\">#       http    192.168.39.93   8080</span></span><br></pre></td></tr></table></figure><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> proxychains <br></p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">proxychains wget http://xxx.com/xxx.zip</span><br><span class=\"line\">proxychains git <span class=\"built_in\">clone</span> https://xxxxxxxxx.git</span><br></pre></td></tr></table></figure><br>npmhttp<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 8002</span></span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> proxy http://127.0.0.1:1081</span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> https-proxy http://127.0.0.1:1081</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> proxy http://username:password@127.0.0.1:1081</span><br><span class=\"line\">npm confit <span class=\"built_in\">set</span> https-proxy http://username:password@127.0.0.1:1081</span><br></pre></td></tr></table></figure><br>npmsocks5<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># socks51081</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">npm install -g http-proxy-to-socks</span><br><span class=\"line\"><span class=\"comment\"># 8002,http8002httpsocks1081</span></span><br><span class=\"line\">hpts -s 127.0.0.1:1081 -p 8002</span><br><span class=\"line\"><span class=\"comment\"># npm8080</span></span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> proxy http://127.0.0.1:8002</span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> https-proxy http://127.0.0.1:8002</span><br></pre></td></tr></table></figure><p></p><p><br></p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config get</span><br><span class=\"line\">  or</span><br><span class=\"line\">npm config list</span><br><span class=\"line\"></span><br><span class=\"line\">npm config delete proxy</span><br><span class=\"line\">  and</span><br><span class=\"line\">npm config delete https-proxy</span><br></pre></td></tr></table></figure><p></p>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"proxychains\"><a href=\"#proxychains\" class=\"headerlink\" title=\"proxychains\"></a>proxychains</h3><p><code>sudo apt install proxychains</code></p><h3 id=\"proxychains\"><a href=\"#proxychains\" class=\"headerlink\" title=\"proxychains\"></a>proxychains</h3><p><code>vim /etc/proxychains.conf</code></p><h3 id=\"socks4-127-0-0-1-9095\"><a href=\"#socks4-127-0-0-1-9095\" class=\"headerlink\" title=\"socks4 127.0.0.1 9095\"></a>socks4 127.0.0.1 9095</h3><p><code>socks5 127.0.0.1 1080</code></p><p>ps: socks4 127.0.0.1 9095torsocks5 127.0.0.1 1080shadowsocksproxychains.conf,,</p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ProxyList format</span><br><span class=\"line\"> 94 <span class=\"comment\">#       type  ip  port  [user pass]</span></span><br><span class=\"line\"> 95 <span class=\"comment\">#       (values separated by 'tab' or 'blank')</span></span><br><span class=\"line\"> 96 <span class=\"comment\">#</span></span><br><span class=\"line\"> 97 <span class=\"comment\">#       only numeric ipv4 addresses are valid</span></span><br><span class=\"line\"> 98 <span class=\"comment\">#</span></span><br><span class=\"line\"> 99 <span class=\"comment\">#</span></span><br><span class=\"line\">100 <span class=\"comment\">#        Examples:</span></span><br><span class=\"line\">101 <span class=\"comment\">#</span></span><br><span class=\"line\">102 <span class=\"comment\">#       socks5  192.168.67.78   1080    lamer   secret</span></span><br><span class=\"line\">103 <span class=\"comment\">#       http    192.168.89.3    8080    justu   hidden</span></span><br><span class=\"line\">104 <span class=\"comment\">#       socks4  192.168.1.49    1080</span></span><br><span class=\"line\">105 <span class=\"comment\">#       http    192.168.39.93   8080</span></span><br></pre></td></tr></table></figure><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><p> proxychains <br></p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">proxychains wget http://xxx.com/xxx.zip</span><br><span class=\"line\">proxychains git <span class=\"built_in\">clone</span> https://xxxxxxxxx.git</span><br></pre></td></tr></table></figure><br>npmhttp<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 8002</span></span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> proxy http://127.0.0.1:1081</span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> https-proxy http://127.0.0.1:1081</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> proxy http://username:password@127.0.0.1:1081</span><br><span class=\"line\">npm confit <span class=\"built_in\">set</span> https-proxy http://username:password@127.0.0.1:1081</span><br></pre></td></tr></table></figure><br>npmsocks5<br><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># socks51081</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">npm install -g http-proxy-to-socks</span><br><span class=\"line\"><span class=\"comment\"># 8002,http8002httpsocks1081</span></span><br><span class=\"line\">hpts -s 127.0.0.1:1081 -p 8002</span><br><span class=\"line\"><span class=\"comment\"># npm8080</span></span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> proxy http://127.0.0.1:8002</span><br><span class=\"line\">npm config <span class=\"built_in\">set</span> https-proxy http://127.0.0.1:8002</span><br></pre></td></tr></table></figure><p></p><p><br></p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm config get</span><br><span class=\"line\">  or</span><br><span class=\"line\">npm config list</span><br><span class=\"line\"></span><br><span class=\"line\">npm config delete proxy</span><br><span class=\"line\">  and</span><br><span class=\"line\">npm config delete https-proxy</span><br></pre></td></tr></table></figure><p></p>"},{"title":"sass","catalog":true,"toc_nav_num":true,"date":"2017-10-21T08:30:35.000Z","subtitle":"sass css","header-img":"article_header.png","updateDate":"2017-10-21T08:30:35.000Z","_content":"\n>author: NoJsJa\n\n#### \n---------------------------------\n\n1. sass  \n2.   \n3.   \n4.   \n5.   \n\n#### sass\n---------------------------------\n\n>sasscsssasscss  \n\n1.   \n2.     \n3.   \n4. Mixin  \n5.   \n6.   \n\n#####   \n\nSass$  \n\n```scss\n$blue: #1875e7;\ndiv {\ncolor: $blue;\n}\n```\n\n ' #{} '   \n\n```scss\n$side: left;\n.rounded {\nborder-#{$side}-radius: 5px;\n}\n```\n\n#####   \n\nSass  \n\n```scss\nbody {\nmargin: (14px/2);\ntop: 50px + 100px;\nright: $var * 10%;\n}\n```\n\n#####   \n\nSass @extend   \n\n```scss\n.class1 {\nborder: 1px solid #ddd;\n}\n\n.class2 {\n @extend .class1;\n font-size:120%;\n}\n```\n\n##### Mixin  \n\nMixin @mixin   \n\n```scss\n@mixin left {\nfloat: left;\nmargin-left: 10px;\n}\n\n```\n\n @include mixin  \n\n```scss\ndiv {\n @include left;\n}\n```\n\nmixin  \n\n```scss\n@mixin left($value: 10px) {\n float: left;\n margin-right: $value;\n}\n```\n\n  \n\n```scss\ndiv {\n@include left(20px);\n}\n```\n\n#####   \n\nSass @function   \n\n```scss\n@function double($n) {\n @return $n * 2;\n}\n\n#sidebar {\nwidth: double(5px);\n}\n```\n\n#####   \n\n*   \n*   \n*   \n\n  \n\n```scss\n@import \"../foo.css\";\n```\n\n  \n```scss\np {\n@if 1 + 1 == 2 { border: 1px solid; }\n@if 5 < 3 { border: 2px dotted; }\n}\n\n@if $color == '#fff' {\nbackground-color: #000;\n} @else {\nbackground-color: #fff;\n}\n```\n\nforwhile\n\n```scss\n@for $i from 1 to 10 {\n.border-#{$i} {\nborder: #{$i}px solid blue;\n}\n}\n\n$i: 6;\n@while $i > 0 {\n.item-#{$i} { width: 2em * $i; }\n$i: $i - 2;\n}\n```\n\n#### \n---------------------------------\n\n1. ID  \n2. Class  \n3.   \n\n##### ID  \n\n(camelCase)  \n\n```scss\n/* bad */\n#rootlistitem {...}\n#RootListItem {...}\n\n/* good */\n#rootListItem {...}\n```\n\n3  \n\n```scss\n/* bad */\n#rootListItemWrapper {...}\n\n/* good */\n#rootListWrapper {...}\n```\n\n##### Class  \n\n '-'   \n\n```\n/* bad */\n.contentWrapper {...}\n\n/* good */\n.content-wrapper {...}\n```\n\n  \n\n```scss\n/* bad */\n.file-detail-list-item-wrapper {...}\n\n/* not-good */\n.file-detail-list-wrapper {...}\n\n/* good */\n.file-detail-wrapper {...}\n.file-wrapper {...}\n\n```\n\n#####   \n\n  \n\n```scss\n.file-list-wrapper {\n\n  .file-list-header {...}\n\n  .file-list-body {\n\n    .list-body-aside {\n\n      .body-aside-left {...}\n      .body-aside-right {...}\n    }\n\n    .list-body-main {...}\n  }\n\n  .file-list-footer {...}\n}\n```\n\n#### \n---------------------------------\n\n   \n\n```scss\n.class {\n  /*  */\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  /*  */\n  display: block;\n  overflow: hidden;\n  box-sizing: border-box;\n  width: 1rem;\n  height: 1rem;\n  margin: 1em;\n  padding: 1em;\n  border: 3px solid #ddd;\n  border-radius: 5px;\n\n  /*  */\n  font-family: 'Arial', sans-serif;\n  font-size: 1.5rem;\n  font-weight: bold;\n  line-height: 1rem;\n  word-break: break-all;\n  word-wrap: break-word;\n  background-color: #eee;\n  color: #000;\n\n  /*  */\n  z-index: 500;\n}\n\n```\n\n#### \n---------------------------------\n\n1.   \n2.   \n\n#####   \n\ntab(tab)   \n\n```scss\n/* bad */\n.class {\n    position: fixed;\n}\n\n/* good */\n.class {\n  position: fixed;\n}\n```\n\n    \n\n```scss\n/* bad */\n.class>div{\n  position:fixed;\n}\n\n/* good */\n.class > div {\n  position: fixed;\n}\n```\n\n#####   \n\nSass(' > 'css)  \n\n```scss\n/* bad */\n.content {\n  display: block;\n}\n\n.content > .news-article > .title {\n  font-size: 1.2em;\n\n/* bad */\n.content {\n  display: block;\n\n  > .news-article {\n    > .title {\n      font-size: 1.2em;\n    }\n  }\n\n/* good */\ncontent {\n  display: block;\n\n  > .news-article > .title {\n    font-size: 1.2em;\n  }\n}\n```\n\nSass  \n\n```scss\n/* bad */\n.content-page {\n  font-size: 1.2rem;\n\n  > .main {\n    background-color: whitesmoke;\n\n    > .latest-news {\n      padding: 1rem;\n\n      > .news-article {\n        padding: 1rem;\n\n        > .title {\n          font-size: 2rem;\n        }\n      }\n    }\n\n    > .content {\n      margin-top: 2rem;\n      padding: 1rem;\n    }\n  }\n\n  > .page-footer {\n    margin-top: 2rem;\n    font-size: 1rem;\n  }\n}\n\n@media screen and (min-width: 641px) {\n  .content-page {\n    font-size: 1rem;\n\n    > .main > .latest-news > .news-article > .title {\n      font-size: 3rem;\n    }\n\n    > .page-footer {\n      font-size: 0.8rem;\n    }\n  }\n}\n\n\n\n/* good */\n.content-page {\n  font-size: 1.2rem;\n\n  @media screen and (min-width: 641px) {\n    font-size: 1rem;\n  }\n\n  > .main {\n    background-color: whitesmoke;\n\n    > .latest-news {\n      padding: 1rem;\n\n      > .news-article {\n        padding: 1rem;\n\n        > .title {\n          font-size: 2rem;\n\n          @media screen and (min-width: 641px) {\n            font-size: 3rem;\n          }\n        }\n      }\n    }\n\n    > .content {\n      margin-top: 2rem;\n      padding: 1rem;\n    }\n  }\n\n  > .page-footer {\n    margin-top: 2rem;\n    font-size: 1rem;\n\n    @media screen and (min-width: 641px) {\n      font-size: 0.8rem;\n    }\n  }\n}\n```\n\nsass  \n\n1.   \n2.  (:first-letter, :hover, :active) (:before and :after)  \n3.  (.selected, .active, .enlarged)  \n4. Sass  \n5.   \n\n```scss\n.product-teaser {\n  /*  */\n  display: inline-block;\n  padding: 1rem;\n  background-color: whitesmoke;\n  color: grey;\n\n  /*  */\n  &:hover {\n    color: black;\n  }\n\n  &:before {\n    content: \"\";\n    display: block;\n    border-top: 1px solid grey;\n  }\n\n  &:after {\n    content: \"\";\n    display: block;\n    border-top: 1px solid grey;\n  }\n\n  /*  */\n  &.active {\n    background-color: pink;\n    color: red;\n  }\n\n  /*  */\n  @media screen and (max-width: 640px) {\n    display: block;\n    font-size: 2em;\n  }\n\n  /*  */\n  > .content > .title {\n    font-size: 1.2em;\n\n    /*  */\n    @media screen and (max-width: 640px) {\n      letter-spacing: 0.2em;\n      text-transform: uppercase;\n    }\n  }\n}\n```\n\n####   \n---------------------------------\n\n>(snippets)  \n\n1.   \n2.   \n3.   \n\n#####   \n\n  \n\n```scss\n  /* ==========================================================\n   file-list\n  ============================================================= */\n  .file-list {...}\n\n```\n\n#####   \n\n  \n\n```scss\n  /*  file-list-item\n  ============================================================= */\n  .file-list-item {...}\n\n```\n\n#####   \n\n  \n\n```scss\n/*  */\n.class1 {\n\n  // \n  .title {...}\n\n  .content {  // 2\n    color: #fff;\n  }\n}\n```\n","source":"_posts/2017-10-21-sass.md","raw":"---\ntitle: \"sass\"\ncatalog: true\ntoc_nav_num: true\ndate:   2017-10-21 16:30:35\nsubtitle: \"sass css\"\nheader-img: \"article_header.png\"\ntags:\n- sass\n- css\ncategories:\n- Sass\nupdateDate: 2017-10-21 16:30:35\n---\n\n>author: NoJsJa\n\n#### \n---------------------------------\n\n1. sass  \n2.   \n3.   \n4.   \n5.   \n\n#### sass\n---------------------------------\n\n>sasscsssasscss  \n\n1.   \n2.     \n3.   \n4. Mixin  \n5.   \n6.   \n\n#####   \n\nSass$  \n\n```scss\n$blue: #1875e7;\ndiv {\ncolor: $blue;\n}\n```\n\n ' #{} '   \n\n```scss\n$side: left;\n.rounded {\nborder-#{$side}-radius: 5px;\n}\n```\n\n#####   \n\nSass  \n\n```scss\nbody {\nmargin: (14px/2);\ntop: 50px + 100px;\nright: $var * 10%;\n}\n```\n\n#####   \n\nSass @extend   \n\n```scss\n.class1 {\nborder: 1px solid #ddd;\n}\n\n.class2 {\n @extend .class1;\n font-size:120%;\n}\n```\n\n##### Mixin  \n\nMixin @mixin   \n\n```scss\n@mixin left {\nfloat: left;\nmargin-left: 10px;\n}\n\n```\n\n @include mixin  \n\n```scss\ndiv {\n @include left;\n}\n```\n\nmixin  \n\n```scss\n@mixin left($value: 10px) {\n float: left;\n margin-right: $value;\n}\n```\n\n  \n\n```scss\ndiv {\n@include left(20px);\n}\n```\n\n#####   \n\nSass @function   \n\n```scss\n@function double($n) {\n @return $n * 2;\n}\n\n#sidebar {\nwidth: double(5px);\n}\n```\n\n#####   \n\n*   \n*   \n*   \n\n  \n\n```scss\n@import \"../foo.css\";\n```\n\n  \n```scss\np {\n@if 1 + 1 == 2 { border: 1px solid; }\n@if 5 < 3 { border: 2px dotted; }\n}\n\n@if $color == '#fff' {\nbackground-color: #000;\n} @else {\nbackground-color: #fff;\n}\n```\n\nforwhile\n\n```scss\n@for $i from 1 to 10 {\n.border-#{$i} {\nborder: #{$i}px solid blue;\n}\n}\n\n$i: 6;\n@while $i > 0 {\n.item-#{$i} { width: 2em * $i; }\n$i: $i - 2;\n}\n```\n\n#### \n---------------------------------\n\n1. ID  \n2. Class  \n3.   \n\n##### ID  \n\n(camelCase)  \n\n```scss\n/* bad */\n#rootlistitem {...}\n#RootListItem {...}\n\n/* good */\n#rootListItem {...}\n```\n\n3  \n\n```scss\n/* bad */\n#rootListItemWrapper {...}\n\n/* good */\n#rootListWrapper {...}\n```\n\n##### Class  \n\n '-'   \n\n```\n/* bad */\n.contentWrapper {...}\n\n/* good */\n.content-wrapper {...}\n```\n\n  \n\n```scss\n/* bad */\n.file-detail-list-item-wrapper {...}\n\n/* not-good */\n.file-detail-list-wrapper {...}\n\n/* good */\n.file-detail-wrapper {...}\n.file-wrapper {...}\n\n```\n\n#####   \n\n  \n\n```scss\n.file-list-wrapper {\n\n  .file-list-header {...}\n\n  .file-list-body {\n\n    .list-body-aside {\n\n      .body-aside-left {...}\n      .body-aside-right {...}\n    }\n\n    .list-body-main {...}\n  }\n\n  .file-list-footer {...}\n}\n```\n\n#### \n---------------------------------\n\n   \n\n```scss\n.class {\n  /*  */\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  /*  */\n  display: block;\n  overflow: hidden;\n  box-sizing: border-box;\n  width: 1rem;\n  height: 1rem;\n  margin: 1em;\n  padding: 1em;\n  border: 3px solid #ddd;\n  border-radius: 5px;\n\n  /*  */\n  font-family: 'Arial', sans-serif;\n  font-size: 1.5rem;\n  font-weight: bold;\n  line-height: 1rem;\n  word-break: break-all;\n  word-wrap: break-word;\n  background-color: #eee;\n  color: #000;\n\n  /*  */\n  z-index: 500;\n}\n\n```\n\n#### \n---------------------------------\n\n1.   \n2.   \n\n#####   \n\ntab(tab)   \n\n```scss\n/* bad */\n.class {\n    position: fixed;\n}\n\n/* good */\n.class {\n  position: fixed;\n}\n```\n\n    \n\n```scss\n/* bad */\n.class>div{\n  position:fixed;\n}\n\n/* good */\n.class > div {\n  position: fixed;\n}\n```\n\n#####   \n\nSass(' > 'css)  \n\n```scss\n/* bad */\n.content {\n  display: block;\n}\n\n.content > .news-article > .title {\n  font-size: 1.2em;\n\n/* bad */\n.content {\n  display: block;\n\n  > .news-article {\n    > .title {\n      font-size: 1.2em;\n    }\n  }\n\n/* good */\ncontent {\n  display: block;\n\n  > .news-article > .title {\n    font-size: 1.2em;\n  }\n}\n```\n\nSass  \n\n```scss\n/* bad */\n.content-page {\n  font-size: 1.2rem;\n\n  > .main {\n    background-color: whitesmoke;\n\n    > .latest-news {\n      padding: 1rem;\n\n      > .news-article {\n        padding: 1rem;\n\n        > .title {\n          font-size: 2rem;\n        }\n      }\n    }\n\n    > .content {\n      margin-top: 2rem;\n      padding: 1rem;\n    }\n  }\n\n  > .page-footer {\n    margin-top: 2rem;\n    font-size: 1rem;\n  }\n}\n\n@media screen and (min-width: 641px) {\n  .content-page {\n    font-size: 1rem;\n\n    > .main > .latest-news > .news-article > .title {\n      font-size: 3rem;\n    }\n\n    > .page-footer {\n      font-size: 0.8rem;\n    }\n  }\n}\n\n\n\n/* good */\n.content-page {\n  font-size: 1.2rem;\n\n  @media screen and (min-width: 641px) {\n    font-size: 1rem;\n  }\n\n  > .main {\n    background-color: whitesmoke;\n\n    > .latest-news {\n      padding: 1rem;\n\n      > .news-article {\n        padding: 1rem;\n\n        > .title {\n          font-size: 2rem;\n\n          @media screen and (min-width: 641px) {\n            font-size: 3rem;\n          }\n        }\n      }\n    }\n\n    > .content {\n      margin-top: 2rem;\n      padding: 1rem;\n    }\n  }\n\n  > .page-footer {\n    margin-top: 2rem;\n    font-size: 1rem;\n\n    @media screen and (min-width: 641px) {\n      font-size: 0.8rem;\n    }\n  }\n}\n```\n\nsass  \n\n1.   \n2.  (:first-letter, :hover, :active) (:before and :after)  \n3.  (.selected, .active, .enlarged)  \n4. Sass  \n5.   \n\n```scss\n.product-teaser {\n  /*  */\n  display: inline-block;\n  padding: 1rem;\n  background-color: whitesmoke;\n  color: grey;\n\n  /*  */\n  &:hover {\n    color: black;\n  }\n\n  &:before {\n    content: \"\";\n    display: block;\n    border-top: 1px solid grey;\n  }\n\n  &:after {\n    content: \"\";\n    display: block;\n    border-top: 1px solid grey;\n  }\n\n  /*  */\n  &.active {\n    background-color: pink;\n    color: red;\n  }\n\n  /*  */\n  @media screen and (max-width: 640px) {\n    display: block;\n    font-size: 2em;\n  }\n\n  /*  */\n  > .content > .title {\n    font-size: 1.2em;\n\n    /*  */\n    @media screen and (max-width: 640px) {\n      letter-spacing: 0.2em;\n      text-transform: uppercase;\n    }\n  }\n}\n```\n\n####   \n---------------------------------\n\n>(snippets)  \n\n1.   \n2.   \n3.   \n\n#####   \n\n  \n\n```scss\n  /* ==========================================================\n   file-list\n  ============================================================= */\n  .file-list {...}\n\n```\n\n#####   \n\n  \n\n```scss\n  /*  file-list-item\n  ============================================================= */\n  .file-list-item {...}\n\n```\n\n#####   \n\n  \n\n```scss\n/*  */\n.class1 {\n\n  // \n  .title {...}\n\n  .content {  // 2\n    color: #fff;\n  }\n}\n```\n","slug":"sass","published":1,"updated":"2017-10-21T03:08:46.752Z","_id":"cj90qviyo0026in955z8khjr5","comments":1,"layout":"post","photos":[],"link":"","content":"<blockquote><p>author: NoJsJa</p></blockquote><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><ol><li>sass</li><li></li><li></li><li></li><li></li></ol><h4 id=\"sass\"><a href=\"#sass\" class=\"headerlink\" title=\"sass\"></a>sass</h4><hr><blockquote><p>sasscsssasscss</p></blockquote><ol><li></li><li></li><li></li><li>Mixin</li><li></li><li></li></ol><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Sass$</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$blue</span>: <span class=\"number\">#1875e7</span>;</span><br><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">color</span>: <span class=\"variable\">$blue</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p>  #{}  </p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$side</span>: left;</span><br><span class=\"line\"><span class=\"selector-class\">.rounded</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">border</span>-#&#123;<span class=\"variable\">$side</span>&#125;-radius: <span class=\"number\">5px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Sass</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">margin</span>: (<span class=\"number\">14px</span>/<span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"attribute\">top</span>: <span class=\"number\">50px</span> + <span class=\"number\">100px</span>;</span><br><span class=\"line\"><span class=\"attribute\">right</span>: <span class=\"variable\">$var</span> * <span class=\"number\">10%</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Sass @extend </p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.class1</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#ddd</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.class2</span> &#123;</span><br><span class=\"line\"> <span class=\"keyword\">@extend</span> .class1;</span><br><span class=\"line\"> <span class=\"attribute\">font-size</span>:<span class=\"number\">120%</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h5 id=\"Mixin\"><a href=\"#Mixin\" class=\"headerlink\" title=\"Mixin\"></a>Mixin</h5><p>Mixin @mixin </p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@mixin</span> left &#123;</span><br><span class=\"line\"><span class=\"attribute\">float</span>: left;</span><br><span class=\"line\"><span class=\"attribute\">margin-left</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p> @include mixin</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\"> <span class=\"keyword\">@include</span> left;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p>mixin</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@mixin</span> left(<span class=\"variable\">$value</span>: <span class=\"number\">10px</span>) &#123;</span><br><span class=\"line\"> <span class=\"attribute\">float</span>: left;</span><br><span class=\"line\"> <span class=\"attribute\">margin-right</span>: <span class=\"variable\">$value</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">@include</span> left(<span class=\"number\">20px</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Sass @function </p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@function</span> double(<span class=\"variable\">$n</span>) &#123;</span><br><span class=\"line\"> <span class=\"keyword\">@return</span> <span class=\"variable\">$n</span> * <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-id\">#sidebar</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">width</span>: double(<span class=\"number\">5px</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul><li></li><li></li><li></li></ul><p></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">\"../foo.css\"</span>;</span><br></pre></td></tr></table></figure><p><br></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">p</span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">@if</span> <span class=\"number\">1</span> + <span class=\"number\">1</span> == <span class=\"number\">2</span> &#123; <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid; &#125;</span><br><span class=\"line\"><span class=\"keyword\">@if</span> <span class=\"number\">5</span> &lt; <span class=\"number\">3</span> &#123; <span class=\"attribute\">border</span>: <span class=\"number\">2px</span> dotted; &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@if</span> <span class=\"variable\">$color</span> == <span class=\"string\">'#fff'</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">background-color</span>: <span class=\"number\">#000</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">@else</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">background-color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><p>forwhile</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@for</span> <span class=\"variable\">$i</span> from <span class=\"number\">1</span> to <span class=\"number\">10</span> &#123;</span><br><span class=\"line\"><span class=\"selector-class\">.border-</span>#&#123;<span class=\"variable\">$i</span>&#125; &#123;</span><br><span class=\"line\"><span class=\"attribute\">border</span>: #&#123;<span class=\"variable\">$i</span>&#125;px solid blue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$i</span>: <span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"keyword\">@while</span> <span class=\"variable\">$i</span> &gt; <span class=\"number\">0</span> &#123;</span><br><span class=\"line\"><span class=\"selector-class\">.item-</span>#&#123;<span class=\"variable\">$i</span>&#125; &#123; <span class=\"attribute\">width</span>: <span class=\"number\">2em</span> * <span class=\"variable\">$i</span>; &#125;</span><br><span class=\"line\"><span class=\"variable\">$i</span>: <span class=\"variable\">$i</span> - <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><ol><li>ID</li><li>Class</li><li></li></ol><h5 id=\"ID\"><a href=\"#ID\" class=\"headerlink\" title=\"ID\"></a>ID</h5><p>(camelCase)</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* bad */</span></span><br><span class=\"line\"><span class=\"selector-id\">#rootlistitem</span> &#123;...&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#RootListItem</span> &#123;...&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* good */</span></span><br><span class=\"line\"><span class=\"selector-id\">#rootListItem</span> &#123;...&#125;</span><br></pre></td></tr></table></figure><p>3</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* bad */</span></span><br><span class=\"line\"><span class=\"selector-id\">#rootListItemWrapper</span> &#123;...&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* good */</span></span><br><span class=\"line\"><span class=\"selector-id\">#rootListWrapper</span> &#123;...&#125;</span><br></pre></td></tr></table></figure><h5 id=\"Class\"><a href=\"#Class\" class=\"headerlink\" title=\"Class\"></a>Class</h5><p> - </p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;* bad *&#x2F;</span><br><span class=\"line\">.contentWrapper &#123;...&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;* good *&#x2F;</span><br><span class=\"line\">.content-wrapper &#123;...&#125;</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* bad */</span></span><br><span class=\"line\"><span class=\"selector-class\">.file-detail-list-item-wrapper</span> &#123;...&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* not-good */</span></span><br><span class=\"line\"><span class=\"selector-class\">.file-detail-list-wrapper</span> &#123;...&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* good */</span></span><br><span class=\"line\"><span class=\"selector-class\">.file-detail-wrapper</span> &#123;...&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.file-wrapper</span> &#123;...&#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.file-list-wrapper</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.file-list-header</span> &#123;...&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.file-list-body</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"selector-class\">.list-body-aside</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"selector-class\">.body-aside-left</span> &#123;...&#125;</span><br><span class=\"line\">      <span class=\"selector-class\">.body-aside-right</span> &#123;...&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"selector-class\">.list-body-main</span> &#123;...&#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.file-list-footer</span> &#123;...&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><p> </p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.class</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">box-sizing</span>: border-box;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">1em</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">1em</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">3px</span> solid <span class=\"number\">#ddd</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: <span class=\"string\">'Arial'</span>, sans-serif;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">1.5rem</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-weight</span>: bold;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">  <span class=\"attribute\">word-break</span>: break-all;</span><br><span class=\"line\">  <span class=\"attribute\">word-wrap</span>: break-word;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#eee</span>;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#000</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  <span class=\"attribute\">z-index</span>: <span class=\"number\">500</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><ol><li></li><li></li></ol><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>tab(tab)</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* bad */</span></span><br><span class=\"line\"><span class=\"selector-class\">.class</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* good */</span></span><br><span class=\"line\"><span class=\"selector-class\">.class</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* bad */</span></span><br><span class=\"line\"><span class=\"selector-class\">.class</span>&gt;<span class=\"selector-tag\">div</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>:fixed;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* good */</span></span><br><span class=\"line\"><span class=\"selector-class\">.class</span> &gt; <span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Sass( &gt; css)</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* bad */</span></span><br><span class=\"line\"><span class=\"selector-class\">.content</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.content</span> &gt; <span class=\"selector-class\">.news-article</span> &gt; <span class=\"selector-class\">.title</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">1.2em</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* bad */</span></span><br><span class=\"line\"><span class=\"selector-class\">.content</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\"></span><br><span class=\"line\">  &gt; <span class=\"selector-class\">.news-article</span> &#123;</span><br><span class=\"line\">    &gt; <span class=\"selector-class\">.title</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">font-size</span>: <span class=\"number\">1.2em</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* good */</span></span><br><span class=\"line\"><span class=\"attribute\">content</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\"></span><br><span class=\"line\">  &gt; <span class=\"selector-class\">.news-article</span> &gt; <span class=\"selector-class\">.title</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1.2em</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p>Sass</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* bad */</span></span><br><span class=\"line\"><span class=\"selector-class\">.content-page</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">1.2rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  &gt; <span class=\"selector-class\">.main</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: whitesmoke;</span><br><span class=\"line\"></span><br><span class=\"line\">    &gt; <span class=\"selector-class\">.latest-news</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">      &gt; <span class=\"selector-class\">.news-article</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">padding</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        &gt; <span class=\"selector-class\">.title</span> &#123;</span><br><span class=\"line\">          <span class=\"attribute\">font-size</span>: <span class=\"number\">2rem</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &gt; <span class=\"selector-class\">.content</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">margin-top</span>: <span class=\"number\">2rem</span>;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &gt; <span class=\"selector-class\">.page-footer</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-top</span>: <span class=\"number\">2rem</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@media</span> screen <span class=\"keyword\">and</span> (min-width: <span class=\"number\">641px</span>) &#123;</span><br><span class=\"line\">  <span class=\"selector-class\">.content-page</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    &gt; <span class=\"selector-class\">.main</span> &gt; <span class=\"selector-class\">.latest-news</span> &gt; <span class=\"selector-class\">.news-article</span> &gt; <span class=\"selector-class\">.title</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">font-size</span>: <span class=\"number\">3rem</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &gt; <span class=\"selector-class\">.page-footer</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">font-size</span>: <span class=\"number\">0.8rem</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* good */</span></span><br><span class=\"line\"><span class=\"selector-class\">.content-page</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">1.2rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">@media</span> screen <span class=\"keyword\">and</span> (min-width: <span class=\"number\">641px</span>) &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &gt; <span class=\"selector-class\">.main</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: whitesmoke;</span><br><span class=\"line\"></span><br><span class=\"line\">    &gt; <span class=\"selector-class\">.latest-news</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">      &gt; <span class=\"selector-class\">.news-article</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">padding</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        &gt; <span class=\"selector-class\">.title</span> &#123;</span><br><span class=\"line\">          <span class=\"attribute\">font-size</span>: <span class=\"number\">2rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"keyword\">@media</span> screen <span class=\"keyword\">and</span> (min-width: <span class=\"number\">641px</span>) &#123;</span><br><span class=\"line\">            <span class=\"attribute\">font-size</span>: <span class=\"number\">3rem</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &gt; <span class=\"selector-class\">.content</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">margin-top</span>: <span class=\"number\">2rem</span>;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &gt; <span class=\"selector-class\">.page-footer</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-top</span>: <span class=\"number\">2rem</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">@media</span> screen <span class=\"keyword\">and</span> (min-width: <span class=\"number\">641px</span>) &#123;</span><br><span class=\"line\">      <span class=\"attribute\">font-size</span>: <span class=\"number\">0.8rem</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p>sass</p><ol><li></li><li> (:first-letter, :hover, :active) (:before and :after)</li><li> (.selected, .active, .enlarged)</li><li>Sass</li><li></li></ol><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.product-teaser</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: whitesmoke;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: grey;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  &amp;<span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: black;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &amp;<span class=\"selector-pseudo\">:before</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">content</span>: <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">    <span class=\"attribute\">border-top</span>: <span class=\"number\">1px</span> solid grey;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &amp;<span class=\"selector-pseudo\">:after</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">content</span>: <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">    <span class=\"attribute\">border-top</span>: <span class=\"number\">1px</span> solid grey;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  &amp;<span class=\"selector-class\">.active</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: pink;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: red;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  <span class=\"keyword\">@media</span> screen <span class=\"keyword\">and</span> (max-width: <span class=\"number\">640px</span>) &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">2em</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  &gt; <span class=\"selector-class\">.content</span> &gt; <span class=\"selector-class\">.title</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1.2em</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*  */</span></span><br><span class=\"line\">    <span class=\"keyword\">@media</span> screen <span class=\"keyword\">and</span> (max-width: <span class=\"number\">640px</span>) &#123;</span><br><span class=\"line\">      <span class=\"attribute\">letter-spacing</span>: <span class=\"number\">0.2em</span>;</span><br><span class=\"line\">      <span class=\"attribute\">text-transform</span>: uppercase;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><blockquote><p>(snippets)</p></blockquote><ol><li></li><li></li><li></li></ol><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* ==========================================================</span></span><br><span class=\"line\"><span class=\"comment\"> file-list</span></span><br><span class=\"line\"><span class=\"comment\">============================================================= */</span></span><br><span class=\"line\"><span class=\"selector-class\">.file-list</span> &#123;...&#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*  file-list-item</span></span><br><span class=\"line\"><span class=\"comment\">============================================================= */</span></span><br><span class=\"line\"><span class=\"selector-class\">.file-list-item</span> &#123;...&#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*  */</span></span><br><span class=\"line\"><span class=\"selector-class\">.class1</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"selector-class\">.title</span> &#123;...&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.content</span> &#123;  <span class=\"comment\">// 2</span></span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>","site":{"data":{}},"excerpt":"","more":"<blockquote><p>author: NoJsJa</p></blockquote><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><ol><li>sass</li><li></li><li></li><li></li><li></li></ol><h4 id=\"sass\"><a href=\"#sass\" class=\"headerlink\" title=\"sass\"></a>sass</h4><hr><blockquote><p>sasscsssasscss</p></blockquote><ol><li></li><li></li><li></li><li>Mixin</li><li></li><li></li></ol><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Sass$</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$blue</span>: <span class=\"number\">#1875e7</span>;</span><br><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">color</span>: <span class=\"variable\">$blue</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p>  #{}  </p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"variable\">$side</span>: left;</span><br><span class=\"line\"><span class=\"selector-class\">.rounded</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">border</span>-#&#123;<span class=\"variable\">$side</span>&#125;-radius: <span class=\"number\">5px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Sass</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">body</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">margin</span>: (<span class=\"number\">14px</span>/<span class=\"number\">2</span>);</span><br><span class=\"line\"><span class=\"attribute\">top</span>: <span class=\"number\">50px</span> + <span class=\"number\">100px</span>;</span><br><span class=\"line\"><span class=\"attribute\">right</span>: <span class=\"variable\">$var</span> * <span class=\"number\">10%</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Sass @extend </p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.class1</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid <span class=\"number\">#ddd</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.class2</span> &#123;</span><br><span class=\"line\"> <span class=\"keyword\">@extend</span> .class1;</span><br><span class=\"line\"> <span class=\"attribute\">font-size</span>:<span class=\"number\">120%</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h5 id=\"Mixin\"><a href=\"#Mixin\" class=\"headerlink\" title=\"Mixin\"></a>Mixin</h5><p>Mixin @mixin </p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@mixin</span> left &#123;</span><br><span class=\"line\"><span class=\"attribute\">float</span>: left;</span><br><span class=\"line\"><span class=\"attribute\">margin-left</span>: <span class=\"number\">10px</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p> @include mixin</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\"> <span class=\"keyword\">@include</span> left;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p>mixin</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@mixin</span> left(<span class=\"variable\">$value</span>: <span class=\"number\">10px</span>) &#123;</span><br><span class=\"line\"> <span class=\"attribute\">float</span>: left;</span><br><span class=\"line\"> <span class=\"attribute\">margin-right</span>: <span class=\"variable\">$value</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">@include</span> left(<span class=\"number\">20px</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Sass @function </p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@function</span> double(<span class=\"variable\">$n</span>) &#123;</span><br><span class=\"line\"> <span class=\"keyword\">@return</span> <span class=\"variable\">$n</span> * <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-id\">#sidebar</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">width</span>: double(<span class=\"number\">5px</span>);</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><ul><li></li><li></li><li></li></ul><p></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@import</span> <span class=\"string\">\"../foo.css\"</span>;</span><br></pre></td></tr></table></figure><p><br></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-tag\">p</span> &#123;</span><br><span class=\"line\"><span class=\"keyword\">@if</span> <span class=\"number\">1</span> + <span class=\"number\">1</span> == <span class=\"number\">2</span> &#123; <span class=\"attribute\">border</span>: <span class=\"number\">1px</span> solid; &#125;</span><br><span class=\"line\"><span class=\"keyword\">@if</span> <span class=\"number\">5</span> &lt; <span class=\"number\">3</span> &#123; <span class=\"attribute\">border</span>: <span class=\"number\">2px</span> dotted; &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@if</span> <span class=\"variable\">$color</span> == <span class=\"string\">'#fff'</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">background-color</span>: <span class=\"number\">#000</span>;</span><br><span class=\"line\">&#125; <span class=\"keyword\">@else</span> &#123;</span><br><span class=\"line\"><span class=\"attribute\">background-color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><p>forwhile</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">@for</span> <span class=\"variable\">$i</span> from <span class=\"number\">1</span> to <span class=\"number\">10</span> &#123;</span><br><span class=\"line\"><span class=\"selector-class\">.border-</span>#&#123;<span class=\"variable\">$i</span>&#125; &#123;</span><br><span class=\"line\"><span class=\"attribute\">border</span>: #&#123;<span class=\"variable\">$i</span>&#125;px solid blue;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"variable\">$i</span>: <span class=\"number\">6</span>;</span><br><span class=\"line\"><span class=\"keyword\">@while</span> <span class=\"variable\">$i</span> &gt; <span class=\"number\">0</span> &#123;</span><br><span class=\"line\"><span class=\"selector-class\">.item-</span>#&#123;<span class=\"variable\">$i</span>&#125; &#123; <span class=\"attribute\">width</span>: <span class=\"number\">2em</span> * <span class=\"variable\">$i</span>; &#125;</span><br><span class=\"line\"><span class=\"variable\">$i</span>: <span class=\"variable\">$i</span> - <span class=\"number\">2</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><ol><li>ID</li><li>Class</li><li></li></ol><h5 id=\"ID\"><a href=\"#ID\" class=\"headerlink\" title=\"ID\"></a>ID</h5><p>(camelCase)</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* bad */</span></span><br><span class=\"line\"><span class=\"selector-id\">#rootlistitem</span> &#123;...&#125;</span><br><span class=\"line\"><span class=\"selector-id\">#RootListItem</span> &#123;...&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* good */</span></span><br><span class=\"line\"><span class=\"selector-id\">#rootListItem</span> &#123;...&#125;</span><br></pre></td></tr></table></figure><p>3</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* bad */</span></span><br><span class=\"line\"><span class=\"selector-id\">#rootListItemWrapper</span> &#123;...&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* good */</span></span><br><span class=\"line\"><span class=\"selector-id\">#rootListWrapper</span> &#123;...&#125;</span><br></pre></td></tr></table></figure><h5 id=\"Class\"><a href=\"#Class\" class=\"headerlink\" title=\"Class\"></a>Class</h5><p> - </p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;* bad *&#x2F;</span><br><span class=\"line\">.contentWrapper &#123;...&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">&#x2F;* good *&#x2F;</span><br><span class=\"line\">.content-wrapper &#123;...&#125;</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* bad */</span></span><br><span class=\"line\"><span class=\"selector-class\">.file-detail-list-item-wrapper</span> &#123;...&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* not-good */</span></span><br><span class=\"line\"><span class=\"selector-class\">.file-detail-list-wrapper</span> &#123;...&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* good */</span></span><br><span class=\"line\"><span class=\"selector-class\">.file-detail-wrapper</span> &#123;...&#125;</span><br><span class=\"line\"><span class=\"selector-class\">.file-wrapper</span> &#123;...&#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.file-list-wrapper</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.file-list-header</span> &#123;...&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.file-list-body</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"selector-class\">.list-body-aside</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"selector-class\">.body-aside-left</span> &#123;...&#125;</span><br><span class=\"line\">      <span class=\"selector-class\">.body-aside-right</span> &#123;...&#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"selector-class\">.list-body-main</span> &#123;...&#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.file-list-footer</span> &#123;...&#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><p> </p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.class</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  <span class=\"attribute\">position</span>: absolute;</span><br><span class=\"line\">  <span class=\"attribute\">top</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"attribute\">left</span>: <span class=\"number\">0</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">  <span class=\"attribute\">overflow</span>: hidden;</span><br><span class=\"line\">  <span class=\"attribute\">box-sizing</span>: border-box;</span><br><span class=\"line\">  <span class=\"attribute\">width</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">  <span class=\"attribute\">height</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">  <span class=\"attribute\">margin</span>: <span class=\"number\">1em</span>;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">1em</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border</span>: <span class=\"number\">3px</span> solid <span class=\"number\">#ddd</span>;</span><br><span class=\"line\">  <span class=\"attribute\">border-radius</span>: <span class=\"number\">5px</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  <span class=\"attribute\">font-family</span>: <span class=\"string\">'Arial'</span>, sans-serif;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">1.5rem</span>;</span><br><span class=\"line\">  <span class=\"attribute\">font-weight</span>: bold;</span><br><span class=\"line\">  <span class=\"attribute\">line-height</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">  <span class=\"attribute\">word-break</span>: break-all;</span><br><span class=\"line\">  <span class=\"attribute\">word-wrap</span>: break-word;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: <span class=\"number\">#eee</span>;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: <span class=\"number\">#000</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  <span class=\"attribute\">z-index</span>: <span class=\"number\">500</span>;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><ol><li></li><li></li></ol><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>tab(tab)</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* bad */</span></span><br><span class=\"line\"><span class=\"selector-class\">.class</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* good */</span></span><br><span class=\"line\"><span class=\"selector-class\">.class</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* bad */</span></span><br><span class=\"line\"><span class=\"selector-class\">.class</span>&gt;<span class=\"selector-tag\">div</span>&#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>:fixed;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* good */</span></span><br><span class=\"line\"><span class=\"selector-class\">.class</span> &gt; <span class=\"selector-tag\">div</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">position</span>: fixed;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p>Sass( &gt; css)</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* bad */</span></span><br><span class=\"line\"><span class=\"selector-class\">.content</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"selector-class\">.content</span> &gt; <span class=\"selector-class\">.news-article</span> &gt; <span class=\"selector-class\">.title</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">1.2em</span>;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* bad */</span></span><br><span class=\"line\"><span class=\"selector-class\">.content</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\"></span><br><span class=\"line\">  &gt; <span class=\"selector-class\">.news-article</span> &#123;</span><br><span class=\"line\">    &gt; <span class=\"selector-class\">.title</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">font-size</span>: <span class=\"number\">1.2em</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* good */</span></span><br><span class=\"line\"><span class=\"attribute\">content</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\"></span><br><span class=\"line\">  &gt; <span class=\"selector-class\">.news-article</span> &gt; <span class=\"selector-class\">.title</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1.2em</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p>Sass</p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* bad */</span></span><br><span class=\"line\"><span class=\"selector-class\">.content-page</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">1.2rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  &gt; <span class=\"selector-class\">.main</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: whitesmoke;</span><br><span class=\"line\"></span><br><span class=\"line\">    &gt; <span class=\"selector-class\">.latest-news</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">      &gt; <span class=\"selector-class\">.news-article</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">padding</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        &gt; <span class=\"selector-class\">.title</span> &#123;</span><br><span class=\"line\">          <span class=\"attribute\">font-size</span>: <span class=\"number\">2rem</span>;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &gt; <span class=\"selector-class\">.content</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">margin-top</span>: <span class=\"number\">2rem</span>;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &gt; <span class=\"selector-class\">.page-footer</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-top</span>: <span class=\"number\">2rem</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">@media</span> screen <span class=\"keyword\">and</span> (min-width: <span class=\"number\">641px</span>) &#123;</span><br><span class=\"line\">  <span class=\"selector-class\">.content-page</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    &gt; <span class=\"selector-class\">.main</span> &gt; <span class=\"selector-class\">.latest-news</span> &gt; <span class=\"selector-class\">.news-article</span> &gt; <span class=\"selector-class\">.title</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">font-size</span>: <span class=\"number\">3rem</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &gt; <span class=\"selector-class\">.page-footer</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">font-size</span>: <span class=\"number\">0.8rem</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/* good */</span></span><br><span class=\"line\"><span class=\"selector-class\">.content-page</span> &#123;</span><br><span class=\"line\">  <span class=\"attribute\">font-size</span>: <span class=\"number\">1.2rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">@media</span> screen <span class=\"keyword\">and</span> (min-width: <span class=\"number\">641px</span>) &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &gt; <span class=\"selector-class\">.main</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: whitesmoke;</span><br><span class=\"line\"></span><br><span class=\"line\">    &gt; <span class=\"selector-class\">.latest-news</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">      &gt; <span class=\"selector-class\">.news-article</span> &#123;</span><br><span class=\"line\">        <span class=\"attribute\">padding</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">        &gt; <span class=\"selector-class\">.title</span> &#123;</span><br><span class=\"line\">          <span class=\"attribute\">font-size</span>: <span class=\"number\">2rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">          <span class=\"keyword\">@media</span> screen <span class=\"keyword\">and</span> (min-width: <span class=\"number\">641px</span>) &#123;</span><br><span class=\"line\">            <span class=\"attribute\">font-size</span>: <span class=\"number\">3rem</span>;</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    &gt; <span class=\"selector-class\">.content</span> &#123;</span><br><span class=\"line\">      <span class=\"attribute\">margin-top</span>: <span class=\"number\">2rem</span>;</span><br><span class=\"line\">      <span class=\"attribute\">padding</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &gt; <span class=\"selector-class\">.page-footer</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">margin-top</span>: <span class=\"number\">2rem</span>;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"keyword\">@media</span> screen <span class=\"keyword\">and</span> (min-width: <span class=\"number\">641px</span>) &#123;</span><br><span class=\"line\">      <span class=\"attribute\">font-size</span>: <span class=\"number\">0.8rem</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p>sass</p><ol><li></li><li> (:first-letter, :hover, :active) (:before and :after)</li><li> (.selected, .active, .enlarged)</li><li>Sass</li><li></li></ol><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"selector-class\">.product-teaser</span> &#123;</span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  <span class=\"attribute\">display</span>: inline-block;</span><br><span class=\"line\">  <span class=\"attribute\">padding</span>: <span class=\"number\">1rem</span>;</span><br><span class=\"line\">  <span class=\"attribute\">background-color</span>: whitesmoke;</span><br><span class=\"line\">  <span class=\"attribute\">color</span>: grey;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  &amp;<span class=\"selector-pseudo\">:hover</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: black;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &amp;<span class=\"selector-pseudo\">:before</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">content</span>: <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">    <span class=\"attribute\">border-top</span>: <span class=\"number\">1px</span> solid grey;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  &amp;<span class=\"selector-pseudo\">:after</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">content</span>: <span class=\"string\">\"\"</span>;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">    <span class=\"attribute\">border-top</span>: <span class=\"number\">1px</span> solid grey;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  &amp;<span class=\"selector-class\">.active</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">background-color</span>: pink;</span><br><span class=\"line\">    <span class=\"attribute\">color</span>: red;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  <span class=\"keyword\">@media</span> screen <span class=\"keyword\">and</span> (max-width: <span class=\"number\">640px</span>) &#123;</span><br><span class=\"line\">    <span class=\"attribute\">display</span>: block;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">2em</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  &gt; <span class=\"selector-class\">.content</span> &gt; <span class=\"selector-class\">.title</span> &#123;</span><br><span class=\"line\">    <span class=\"attribute\">font-size</span>: <span class=\"number\">1.2em</span>;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/*  */</span></span><br><span class=\"line\">    <span class=\"keyword\">@media</span> screen <span class=\"keyword\">and</span> (max-width: <span class=\"number\">640px</span>) &#123;</span><br><span class=\"line\">      <span class=\"attribute\">letter-spacing</span>: <span class=\"number\">0.2em</span>;</span><br><span class=\"line\">      <span class=\"attribute\">text-transform</span>: uppercase;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><blockquote><p>(snippets)</p></blockquote><ol><li></li><li></li><li></li></ol><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/* ==========================================================</span></span><br><span class=\"line\"><span class=\"comment\"> file-list</span></span><br><span class=\"line\"><span class=\"comment\">============================================================= */</span></span><br><span class=\"line\"><span class=\"selector-class\">.file-list</span> &#123;...&#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*  file-list-item</span></span><br><span class=\"line\"><span class=\"comment\">============================================================= */</span></span><br><span class=\"line\"><span class=\"selector-class\">.file-list-item</span> &#123;...&#125;</span><br></pre></td></tr></table></figure><h5 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h5><p></p><figure class=\"highlight scss\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/*  */</span></span><br><span class=\"line\"><span class=\"selector-class\">.class1</span> &#123;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"selector-class\">.title</span> &#123;...&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"selector-class\">.content</span> &#123;  <span class=\"comment\">// 2</span></span><br><span class=\"line\">    <span class=\"attribute\">color</span>: <span class=\"number\">#fff</span>;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>"},{"title":"poliposhadowsocks","catalog":true,"toc_nav_num":true,"date":"2019-10-01T08:30:35.000Z","subtitle":"shadowsocks polipo","header-img":"article_header.png","updateDate":"2018-10-01T08:30:35.000Z","_content":"\nlinuxshadowsocksss`socks5``http``https`sspolipoweb\n\n#### shadowsocks[](http://keliu.me/2018/12/08/ss/#%E5%AE%89%E8%A3%85shadowsocks)\n\npipss\n\n```\nsudo apt-get update\nsudo apt-get install python-pip\nsudo apt-get install python-setuptools m2crypto\n\npip install shadowsocks\n```\n\n#### shadowsocks[](http://keliu.me/2018/12/08/ss/#%E5%90%AF%E5%8A%A8shadowsocks)\n\n`sslocal`shadowsocks\n\n`/etc``shadowsocks.json`\n\n```\nvi /etc/shadowsocks.json\n```\n\nss\n\n```\n{\n    \"server\":\"11.22.33.44\",\n    \"server_port\":6666,\n    \"local_port\":1080,\n    \"password\":\"123456\",\n    \"timeout\":300,\n    \"method\":\"aes-256-cfb\"\n}\n```\n\nss\n\n```\nsslocal -c /etc/shadowsocks.json\n```\n\n\n\n#### polipo[](http://keliu.me/2018/12/08/ss/#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEpolipo)\n\n\n\n```\nsudo apt-get install polipo\n```\n\npolio`/etc/polipo/config`\n\n```\n# This file only needs to list configuration variables that deviate\n# from the default values.  See /usr/share/doc/polipo/examples/config.sample\n# and \"polipo -v\" for variables you can tweak and further information.\n\nlogSyslog = true\nlogFile = /var/log/polipo/polipo.log\n\nproxyAddress = \"0.0.0.0\"\n\nsocksParentProxy = \"127.0.0.1:1080\"\nsocksProxyType = socks5\nproxyPort = 8123\n\nchunkHighMark = 50331648\nobjectHighMark = 16384\n\nserverMaxSlots = 64\nserverSlots = 16\nserverSlots1 = 32\n```\n\npolipo\n\n```\n/etc/init.d/polipo restart\n```\n\n#### [](http://keliu.me/2018/12/08/ss/#%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86)\n\npolipo 8123********\n\n```\nexport http_proxy=http://127.0.0.1:8123\n```\n\n\n\n```\ncurl www.google.com\n```\n\n****\n\n```\nunset http_proxy\n```\n\n****` export http_proxy=http://127.0.0.1:8123`` ~/.bashrc``source ~/.bashrc`\n","source":"_posts/2019-10-01-poliposhadowsocks.md","raw":"---\ntitle: \"poliposhadowsocks\"\ncatalog: true\ntoc_nav_num: true\ndate:   2019-10-01 16:30:35\nsubtitle: \"shadowsocks polipo\"\nheader-img: \"article_header.png\"\ntags:\n- shadowsocks\n- proxy\ncategories:\n- Linux\nupdateDate: 2018-10-01 16:30:35\n---\n\nlinuxshadowsocksss`socks5``http``https`sspolipoweb\n\n#### shadowsocks[](http://keliu.me/2018/12/08/ss/#%E5%AE%89%E8%A3%85shadowsocks)\n\npipss\n\n```\nsudo apt-get update\nsudo apt-get install python-pip\nsudo apt-get install python-setuptools m2crypto\n\npip install shadowsocks\n```\n\n#### shadowsocks[](http://keliu.me/2018/12/08/ss/#%E5%90%AF%E5%8A%A8shadowsocks)\n\n`sslocal`shadowsocks\n\n`/etc``shadowsocks.json`\n\n```\nvi /etc/shadowsocks.json\n```\n\nss\n\n```\n{\n    \"server\":\"11.22.33.44\",\n    \"server_port\":6666,\n    \"local_port\":1080,\n    \"password\":\"123456\",\n    \"timeout\":300,\n    \"method\":\"aes-256-cfb\"\n}\n```\n\nss\n\n```\nsslocal -c /etc/shadowsocks.json\n```\n\n\n\n#### polipo[](http://keliu.me/2018/12/08/ss/#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEpolipo)\n\n\n\n```\nsudo apt-get install polipo\n```\n\npolio`/etc/polipo/config`\n\n```\n# This file only needs to list configuration variables that deviate\n# from the default values.  See /usr/share/doc/polipo/examples/config.sample\n# and \"polipo -v\" for variables you can tweak and further information.\n\nlogSyslog = true\nlogFile = /var/log/polipo/polipo.log\n\nproxyAddress = \"0.0.0.0\"\n\nsocksParentProxy = \"127.0.0.1:1080\"\nsocksProxyType = socks5\nproxyPort = 8123\n\nchunkHighMark = 50331648\nobjectHighMark = 16384\n\nserverMaxSlots = 64\nserverSlots = 16\nserverSlots1 = 32\n```\n\npolipo\n\n```\n/etc/init.d/polipo restart\n```\n\n#### [](http://keliu.me/2018/12/08/ss/#%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86)\n\npolipo 8123********\n\n```\nexport http_proxy=http://127.0.0.1:8123\n```\n\n\n\n```\ncurl www.google.com\n```\n\n****\n\n```\nunset http_proxy\n```\n\n****` export http_proxy=http://127.0.0.1:8123`` ~/.bashrc``source ~/.bashrc`\n","slug":"poliposhadowsocks","published":1,"updated":"2019-10-01T03:08:44.052Z","_id":"ck179i6rs002ain95cva79y0b","comments":1,"layout":"post","photos":[],"link":"","content":"<p>linuxshadowsocksss<code>socks5</code><code>http</code><code>https</code>sspolipoweb</p><h4 id=\"shadowsocks\"><a href=\"#shadowsocks\" class=\"headerlink\" title=\"shadowsocks\"></a>shadowsocks<a href=\"http://keliu.me/2018/12/08/ss/#%E5%AE%89%E8%A3%85shadowsocks\" target=\"_blank\" rel=\"noopener\"></a></h4><p>pipss</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get install python-pip</span><br><span class=\"line\">sudo apt-get install python-setuptools m2crypto</span><br><span class=\"line\"></span><br><span class=\"line\">pip install shadowsocks</span><br></pre></td></tr></table></figure><h4 id=\"shadowsocks\"><a href=\"#shadowsocks\" class=\"headerlink\" title=\"shadowsocks\"></a>shadowsocks<a href=\"http://keliu.me/2018/12/08/ss/#%E5%90%AF%E5%8A%A8shadowsocks\" target=\"_blank\" rel=\"noopener\"></a></h4><p><code>sslocal</code>shadowsocks</p><p><code>/etc</code><code>shadowsocks.json</code></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi &#x2F;etc&#x2F;shadowsocks.json</span><br></pre></td></tr></table></figure><p>ss</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;server&quot;:&quot;11.22.33.44&quot;,</span><br><span class=\"line\">    &quot;server_port&quot;:6666,</span><br><span class=\"line\">    &quot;local_port&quot;:1080,</span><br><span class=\"line\">    &quot;password&quot;:&quot;123456&quot;,</span><br><span class=\"line\">    &quot;timeout&quot;:300,</span><br><span class=\"line\">    &quot;method&quot;:&quot;aes-256-cfb&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p>ss</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sslocal -c &#x2F;etc&#x2F;shadowsocks.json</span><br></pre></td></tr></table></figure><p></p><h4 id=\"polipo\"><a href=\"#polipo\" class=\"headerlink\" title=\"polipo\"></a>polipo<a href=\"http://keliu.me/2018/12/08/ss/#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEpolipo\" target=\"_blank\" rel=\"noopener\"></a></h4><p></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install polipo</span><br></pre></td></tr></table></figure><p>polio<code>/etc/polipo/config</code></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># This file only needs to list configuration variables that deviate</span><br><span class=\"line\"># from the default values.  See &#x2F;usr&#x2F;share&#x2F;doc&#x2F;polipo&#x2F;examples&#x2F;config.sample</span><br><span class=\"line\"># and &quot;polipo -v&quot; for variables you can tweak and further information.</span><br><span class=\"line\"></span><br><span class=\"line\">logSyslog &#x3D; true</span><br><span class=\"line\">logFile &#x3D; &#x2F;var&#x2F;log&#x2F;polipo&#x2F;polipo.log</span><br><span class=\"line\"></span><br><span class=\"line\">proxyAddress &#x3D; &quot;0.0.0.0&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">socksParentProxy &#x3D; &quot;127.0.0.1:1080&quot;</span><br><span class=\"line\">socksProxyType &#x3D; socks5</span><br><span class=\"line\">proxyPort &#x3D; 8123</span><br><span class=\"line\"></span><br><span class=\"line\">chunkHighMark &#x3D; 50331648</span><br><span class=\"line\">objectHighMark &#x3D; 16384</span><br><span class=\"line\"></span><br><span class=\"line\">serverMaxSlots &#x3D; 64</span><br><span class=\"line\">serverSlots &#x3D; 16</span><br><span class=\"line\">serverSlots1 &#x3D; 32</span><br></pre></td></tr></table></figure><p>polipo</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;etc&#x2F;init.d&#x2F;polipo restart</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><a href=\"http://keliu.me/2018/12/08/ss/#%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86\" target=\"_blank\" rel=\"noopener\"></a></h4><p>polipo 8123<strong></strong><strong></strong></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export http_proxy&#x3D;http:&#x2F;&#x2F;127.0.0.1:8123</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl www.google.com</span><br></pre></td></tr></table></figure><p><strong></strong></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">unset http_proxy</span><br></pre></td></tr></table></figure><p><strong></strong><code>export http_proxy=http://127.0.0.1:8123</code><code>~/.bashrc</code><code>source ~/.bashrc</code></p>","site":{"data":{}},"excerpt":"","more":"<p>linuxshadowsocksss<code>socks5</code><code>http</code><code>https</code>sspolipoweb</p><h4 id=\"shadowsocks\"><a href=\"#shadowsocks\" class=\"headerlink\" title=\"shadowsocks\"></a>shadowsocks<a href=\"http://keliu.me/2018/12/08/ss/#%E5%AE%89%E8%A3%85shadowsocks\" target=\"_blank\" rel=\"noopener\"></a></h4><p>pipss</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get update</span><br><span class=\"line\">sudo apt-get install python-pip</span><br><span class=\"line\">sudo apt-get install python-setuptools m2crypto</span><br><span class=\"line\"></span><br><span class=\"line\">pip install shadowsocks</span><br></pre></td></tr></table></figure><h4 id=\"shadowsocks\"><a href=\"#shadowsocks\" class=\"headerlink\" title=\"shadowsocks\"></a>shadowsocks<a href=\"http://keliu.me/2018/12/08/ss/#%E5%90%AF%E5%8A%A8shadowsocks\" target=\"_blank\" rel=\"noopener\"></a></h4><p><code>sslocal</code>shadowsocks</p><p><code>/etc</code><code>shadowsocks.json</code></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">vi &#x2F;etc&#x2F;shadowsocks.json</span><br></pre></td></tr></table></figure><p>ss</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;server&quot;:&quot;11.22.33.44&quot;,</span><br><span class=\"line\">    &quot;server_port&quot;:6666,</span><br><span class=\"line\">    &quot;local_port&quot;:1080,</span><br><span class=\"line\">    &quot;password&quot;:&quot;123456&quot;,</span><br><span class=\"line\">    &quot;timeout&quot;:300,</span><br><span class=\"line\">    &quot;method&quot;:&quot;aes-256-cfb&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p>ss</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sslocal -c &#x2F;etc&#x2F;shadowsocks.json</span><br></pre></td></tr></table></figure><p></p><h4 id=\"polipo\"><a href=\"#polipo\" class=\"headerlink\" title=\"polipo\"></a>polipo<a href=\"http://keliu.me/2018/12/08/ss/#%E5%AE%89%E8%A3%85%E9%85%8D%E7%BD%AEpolipo\" target=\"_blank\" rel=\"noopener\"></a></h4><p></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install polipo</span><br></pre></td></tr></table></figure><p>polio<code>/etc/polipo/config</code></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># This file only needs to list configuration variables that deviate</span><br><span class=\"line\"># from the default values.  See &#x2F;usr&#x2F;share&#x2F;doc&#x2F;polipo&#x2F;examples&#x2F;config.sample</span><br><span class=\"line\"># and &quot;polipo -v&quot; for variables you can tweak and further information.</span><br><span class=\"line\"></span><br><span class=\"line\">logSyslog &#x3D; true</span><br><span class=\"line\">logFile &#x3D; &#x2F;var&#x2F;log&#x2F;polipo&#x2F;polipo.log</span><br><span class=\"line\"></span><br><span class=\"line\">proxyAddress &#x3D; &quot;0.0.0.0&quot;</span><br><span class=\"line\"></span><br><span class=\"line\">socksParentProxy &#x3D; &quot;127.0.0.1:1080&quot;</span><br><span class=\"line\">socksProxyType &#x3D; socks5</span><br><span class=\"line\">proxyPort &#x3D; 8123</span><br><span class=\"line\"></span><br><span class=\"line\">chunkHighMark &#x3D; 50331648</span><br><span class=\"line\">objectHighMark &#x3D; 16384</span><br><span class=\"line\"></span><br><span class=\"line\">serverMaxSlots &#x3D; 64</span><br><span class=\"line\">serverSlots &#x3D; 16</span><br><span class=\"line\">serverSlots1 &#x3D; 32</span><br></pre></td></tr></table></figure><p>polipo</p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#x2F;etc&#x2F;init.d&#x2F;polipo restart</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a><a href=\"http://keliu.me/2018/12/08/ss/#%E4%BD%BF%E7%94%A8%E4%BB%A3%E7%90%86\" target=\"_blank\" rel=\"noopener\"></a></h4><p>polipo 8123<strong></strong><strong></strong></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">export http_proxy&#x3D;http:&#x2F;&#x2F;127.0.0.1:8123</span><br></pre></td></tr></table></figure><p></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl www.google.com</span><br></pre></td></tr></table></figure><p><strong></strong></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">unset http_proxy</span><br></pre></td></tr></table></figure><p><strong></strong><code>export http_proxy=http://127.0.0.1:8123</code><code>~/.bashrc</code><code>source ~/.bashrc</code></p>"},{"title":"Js","catalog":true,"toc_nav_num":true,"date":"2018-07-09T08:01:26.000Z","subtitle":"javascript waterFall","header-img":"article_header.png","updateDate":"2018-07-09T08:01:26.000Z","_content":"\n#### \n![preview](waterfall-1.gif)\n\n#### \nautofloat\n\n![float](waterfall-2.jpg)  \n\nfloat...  \n\n![baidu](waterfall-3.jpg)  \n\n#### \n\n* htmlcontaineritemitemtopleft100%(imgbox-sizing: border-box)\n\n```html\n<!--  -->\n<div class=\"water-fall-container\">\n  <div class=\"water-fall-item\">\n    <img src=\"url\">\n  </div>\n  ...\n  <div class=\"water-fall-item\">\n    <img src=\"url\">\n  </div>\n</div>\n\n```\n\n* (.water-fall-item)\n(px)(padding-right  padding-bottom px)\n( / ) === stepstepitemtopleftpadding\ntoplefttop top+(clientHeight)left\n\n```javascript\n\n/**\n * [WaterFall ]\n * @param  {DomElement} father   []\n * @param  {String} childClass   [ : .water-fall-item]\n * @param  {Number} columnWidth  [: px]\n * @param  {Number} paddingWidth [ : px]\n */\nfunction WaterFall(father, childClass, columnWidth, paddingWidth) {\n  this.$container = father;  // \n  this.childSelector = childClass;  // img\n  this.children = [];  // img\n  this.columnWidth = columnWidth;  // \n  this.paddingWidth = paddingWidth + 'px';  // \n\n  this.totalWidth = this.$container.clientWidth;  // \n  this.columnNum = ~~(this.totalWidth / this.columnWidth);  // \n\n  // \n  this.step = function () {\n    this.totalWidth = this.$container.clientWidth;\n    this.columnNum = ~~(this.totalWidth / this.columnWidth);\n    this.children = this.$container.querySelectorAll(this.childSelector);\n    for (var i = 0; i < this.children.length; i++) {\n      this.children[i].style.width = this.columnWidth + 'px';\n      this.children[i].style.height = 'auto';\n      this.children[i].style.paddingRight = this.paddingWidth;\n      this.children[i].style.paddingBottom = this.paddingWidth;\n\n      // padding\n      if (i % this.columnNum === 0) {\n        this.children[i].style.paddingLeft = this.paddingWidth;\n      }\n\n      //   \n      if (i < this.columnNum) {\n        this.children[i].style.left = (i) * this.columnWidth + 'px';\n        this.children[i].style.top = (i) * 0 + 'px';\n      }else {\n        this.children[i].style.left = this.children[i - this.columnNum].style.left;\n        this.children[i].style.top = +this.children[i - this.columnNum].style.top.replace('px', '') +\n                                      this.children[i - this.columnNum].clientHeight + 'px';\n      }\n    }\n  };\n};\n\n```\n\n* url\nwaterfall.step()item   resizeso easy !\n\n```javascript\n\n/**\n * [waterFallInit ]\n * @param  {String} wData [url]\n */\nvar waterFallInit = function (wData) {\n  var fragment = document.createDocumentFragment();\n  var div, img, timer, $imgs, length, index = 0;\n  // \n  for (var i = 0; i < wData.length; i++) {\n    div = document.createElement('div');\n    img = document.createElement('img');\n    div.setAttribute('class', 'water-fall-item');\n    img.setAttribute('src', wData[i]);\n    div.appendChild(img);\n    fragment.appendChild(div);\n    if (i === wData.length - 1) {\n      domMap.$waterFall.appendChild(fragment);\n    }\n  }\n\n  // \n  var waterfall = new WaterFall(domMap.$waterFall, '.water-fall-item', 200, 5);\n\n  // \n  timer = setInterval(function () {\n    index=0;\n    $imgs = domMap.$waterFall.querySelectorAll('.water-fall-item > img');\n    length = $imgs.length;\n    // \n    for (var i = 0; i < $imgs.length; i++) {\n      if ($imgs[i].complete) {\n        if (++index === length) clearInterval(timer);\n      }\n    }\n    waterfall.step();\n  }, 250);\n\n  // \n   window.onresize =  function () {\n     Utils.FnDelay(function () {\n       waterfall.step();\n     }, 800);\n   }\n};\n\n```\n\n#### \n_github[nojsja](https://github.com/NoJsJa/javascript-learning/tree/master/normal/water-fall-layout)_\n","source":"_posts/2018-07-09-Js.md","raw":"---\ntitle: \"Js\"\ncatalog: true\ntoc_nav_num: true\ndate:   2018-07-09 16:01:26\nsubtitle: \"javascript waterFall\"\nheader-img: \"article_header.png\"\ntags:\n- javascript\ncategories:\n- Javascript\nupdateDate: 2018-07-09 16:01:26\n---\n\n#### \n![preview](waterfall-1.gif)\n\n#### \nautofloat\n\n![float](waterfall-2.jpg)  \n\nfloat...  \n\n![baidu](waterfall-3.jpg)  \n\n#### \n\n* htmlcontaineritemitemtopleft100%(imgbox-sizing: border-box)\n\n```html\n<!--  -->\n<div class=\"water-fall-container\">\n  <div class=\"water-fall-item\">\n    <img src=\"url\">\n  </div>\n  ...\n  <div class=\"water-fall-item\">\n    <img src=\"url\">\n  </div>\n</div>\n\n```\n\n* (.water-fall-item)\n(px)(padding-right  padding-bottom px)\n( / ) === stepstepitemtopleftpadding\ntoplefttop top+(clientHeight)left\n\n```javascript\n\n/**\n * [WaterFall ]\n * @param  {DomElement} father   []\n * @param  {String} childClass   [ : .water-fall-item]\n * @param  {Number} columnWidth  [: px]\n * @param  {Number} paddingWidth [ : px]\n */\nfunction WaterFall(father, childClass, columnWidth, paddingWidth) {\n  this.$container = father;  // \n  this.childSelector = childClass;  // img\n  this.children = [];  // img\n  this.columnWidth = columnWidth;  // \n  this.paddingWidth = paddingWidth + 'px';  // \n\n  this.totalWidth = this.$container.clientWidth;  // \n  this.columnNum = ~~(this.totalWidth / this.columnWidth);  // \n\n  // \n  this.step = function () {\n    this.totalWidth = this.$container.clientWidth;\n    this.columnNum = ~~(this.totalWidth / this.columnWidth);\n    this.children = this.$container.querySelectorAll(this.childSelector);\n    for (var i = 0; i < this.children.length; i++) {\n      this.children[i].style.width = this.columnWidth + 'px';\n      this.children[i].style.height = 'auto';\n      this.children[i].style.paddingRight = this.paddingWidth;\n      this.children[i].style.paddingBottom = this.paddingWidth;\n\n      // padding\n      if (i % this.columnNum === 0) {\n        this.children[i].style.paddingLeft = this.paddingWidth;\n      }\n\n      //   \n      if (i < this.columnNum) {\n        this.children[i].style.left = (i) * this.columnWidth + 'px';\n        this.children[i].style.top = (i) * 0 + 'px';\n      }else {\n        this.children[i].style.left = this.children[i - this.columnNum].style.left;\n        this.children[i].style.top = +this.children[i - this.columnNum].style.top.replace('px', '') +\n                                      this.children[i - this.columnNum].clientHeight + 'px';\n      }\n    }\n  };\n};\n\n```\n\n* url\nwaterfall.step()item   resizeso easy !\n\n```javascript\n\n/**\n * [waterFallInit ]\n * @param  {String} wData [url]\n */\nvar waterFallInit = function (wData) {\n  var fragment = document.createDocumentFragment();\n  var div, img, timer, $imgs, length, index = 0;\n  // \n  for (var i = 0; i < wData.length; i++) {\n    div = document.createElement('div');\n    img = document.createElement('img');\n    div.setAttribute('class', 'water-fall-item');\n    img.setAttribute('src', wData[i]);\n    div.appendChild(img);\n    fragment.appendChild(div);\n    if (i === wData.length - 1) {\n      domMap.$waterFall.appendChild(fragment);\n    }\n  }\n\n  // \n  var waterfall = new WaterFall(domMap.$waterFall, '.water-fall-item', 200, 5);\n\n  // \n  timer = setInterval(function () {\n    index=0;\n    $imgs = domMap.$waterFall.querySelectorAll('.water-fall-item > img');\n    length = $imgs.length;\n    // \n    for (var i = 0; i < $imgs.length; i++) {\n      if ($imgs[i].complete) {\n        if (++index === length) clearInterval(timer);\n      }\n    }\n    waterfall.step();\n  }, 250);\n\n  // \n   window.onresize =  function () {\n     Utils.FnDelay(function () {\n       waterfall.step();\n     }, 800);\n   }\n};\n\n```\n\n#### \n_github[nojsja](https://github.com/NoJsJa/javascript-learning/tree/master/normal/water-fall-layout)_\n","slug":"Js","published":1,"updated":"2019-06-12T03:14:56.427Z","_id":"cjjdotx2h002ein95fi3b8zsx","comments":1,"layout":"post","photos":[],"link":"","content":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"waterfall-1.gif\" alt=\"preview\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>autofloat</p><p><img src=\"waterfall-2.jpg\" alt=\"float\"></p><p>float  </p><p><img src=\"waterfall-3.jpg\" alt=\"baidu\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li>htmlcontaineritemitemtopleft100%(imgbox-sizing: border-box)</li></ul><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--  --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"water-fall-container\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"water-fall-item\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"url\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"water-fall-item\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"url\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>(.water-fall-item)<br>(px)(padding-right  padding-bottom px)<br>( / ) === stepstepitemtopleftpadding<br>toplefttop top+(clientHeight)left</li></ul><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [WaterFall ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;DomElement&#125;</span> </span>father   []</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;String&#125;</span> </span>childClass   [ : .water-fall-item]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;Number&#125;</span> </span>columnWidth  [: px]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;Number&#125;</span> </span>paddingWidth [ : px]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">WaterFall</span>(<span class=\"params\">father, childClass, columnWidth, paddingWidth</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.$container = father;  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.childSelector = childClass;  <span class=\"comment\">// img</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.children = [];  <span class=\"comment\">// img</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.columnWidth = columnWidth;  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.paddingWidth = paddingWidth + <span class=\"string\">'px'</span>;  <span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.totalWidth = <span class=\"keyword\">this</span>.$container.clientWidth;  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.columnNum = ~~(<span class=\"keyword\">this</span>.totalWidth / <span class=\"keyword\">this</span>.columnWidth);  <span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.step = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.totalWidth = <span class=\"keyword\">this</span>.$container.clientWidth;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.columnNum = ~~(<span class=\"keyword\">this</span>.totalWidth / <span class=\"keyword\">this</span>.columnWidth);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.children = <span class=\"keyword\">this</span>.$container.querySelectorAll(<span class=\"keyword\">this</span>.childSelector);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.children.length; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.children[i].style.width = <span class=\"keyword\">this</span>.columnWidth + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.children[i].style.height = <span class=\"string\">'auto'</span>;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.children[i].style.paddingRight = <span class=\"keyword\">this</span>.paddingWidth;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.children[i].style.paddingBottom = <span class=\"keyword\">this</span>.paddingWidth;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// padding</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (i % <span class=\"keyword\">this</span>.columnNum === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.children[i].style.paddingLeft = <span class=\"keyword\">this</span>.paddingWidth;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//   </span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (i &lt; <span class=\"keyword\">this</span>.columnNum) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.children[i].style.left = (i) * <span class=\"keyword\">this</span>.columnWidth + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.children[i].style.top = (i) * <span class=\"number\">0</span> + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">      &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.children[i].style.left = <span class=\"keyword\">this</span>.children[i - <span class=\"keyword\">this</span>.columnNum].style.left;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.children[i].style.top = +<span class=\"keyword\">this</span>.children[i - <span class=\"keyword\">this</span>.columnNum].style.top.replace(<span class=\"string\">'px'</span>, <span class=\"string\">''</span>) +</span><br><span class=\"line\">                                      <span class=\"keyword\">this</span>.children[i - <span class=\"keyword\">this</span>.columnNum].clientHeight + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><ul><li>url<br>waterfall.step()item   resizeso easy !</li></ul><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [waterFallInit ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;String&#125;</span> </span>wData [url]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> waterFallInit = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">wData</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> fragment = <span class=\"built_in\">document</span>.createDocumentFragment();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> div, img, timer, $imgs, length, index = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; wData.length; i++) &#123;</span><br><span class=\"line\">    div = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'div'</span>);</span><br><span class=\"line\">    img = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'img'</span>);</span><br><span class=\"line\">    div.setAttribute(<span class=\"string\">'class'</span>, <span class=\"string\">'water-fall-item'</span>);</span><br><span class=\"line\">    img.setAttribute(<span class=\"string\">'src'</span>, wData[i]);</span><br><span class=\"line\">    div.appendChild(img);</span><br><span class=\"line\">    fragment.appendChild(div);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i === wData.length - <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      domMap.$waterFall.appendChild(fragment);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> waterfall = <span class=\"keyword\">new</span> WaterFall(domMap.$waterFall, <span class=\"string\">'.water-fall-item'</span>, <span class=\"number\">200</span>, <span class=\"number\">5</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  timer = setInterval(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    index=<span class=\"number\">0</span>;</span><br><span class=\"line\">    $imgs = domMap.$waterFall.querySelectorAll(<span class=\"string\">'.water-fall-item &gt; img'</span>);</span><br><span class=\"line\">    length = $imgs.length;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; $imgs.length; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> ($imgs[i].complete) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (++index === length) clearInterval(timer);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    waterfall.step();</span><br><span class=\"line\">  &#125;, <span class=\"number\">250</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">   <span class=\"built_in\">window</span>.onresize =  <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">     Utils.FnDelay(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">       waterfall.step();</span><br><span class=\"line\">     &#125;, <span class=\"number\">800</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><em>github<a href=\"https://github.com/NoJsJa/javascript-learning/tree/master/normal/water-fall-layout\" target=\"_blank\" rel=\"noopener\">nojsja</a></em></p>","site":{"data":{}},"excerpt":"","more":"<h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><img src=\"waterfall-1.gif\" alt=\"preview\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p>autofloat</p><p><img src=\"waterfall-2.jpg\" alt=\"float\"></p><p>float  </p><p><img src=\"waterfall-3.jpg\" alt=\"baidu\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li>htmlcontaineritemitemtopleft100%(imgbox-sizing: border-box)</li></ul><figure class=\"highlight html\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">&lt;!--  --&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"water-fall-container\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"water-fall-item\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"url\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\">  ...</span><br><span class=\"line\">  <span class=\"tag\">&lt;<span class=\"name\">div</span> <span class=\"attr\">class</span>=<span class=\"string\">\"water-fall-item\"</span>&gt;</span></span><br><span class=\"line\">    <span class=\"tag\">&lt;<span class=\"name\">img</span> <span class=\"attr\">src</span>=<span class=\"string\">\"url\"</span>&gt;</span></span><br><span class=\"line\">  <span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br><span class=\"line\"><span class=\"tag\">&lt;/<span class=\"name\">div</span>&gt;</span></span><br></pre></td></tr></table></figure><ul><li>(.water-fall-item)<br>(px)(padding-right  padding-bottom px)<br>( / ) === stepstepitemtopleftpadding<br>toplefttop top+(clientHeight)left</li></ul><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [WaterFall ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;DomElement&#125;</span> </span>father   []</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;String&#125;</span> </span>childClass   [ : .water-fall-item]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;Number&#125;</span> </span>columnWidth  [: px]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;Number&#125;</span> </span>paddingWidth [ : px]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"function\"><span class=\"keyword\">function</span> <span class=\"title\">WaterFall</span>(<span class=\"params\">father, childClass, columnWidth, paddingWidth</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">this</span>.$container = father;  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.childSelector = childClass;  <span class=\"comment\">// img</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.children = [];  <span class=\"comment\">// img</span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.columnWidth = columnWidth;  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.paddingWidth = paddingWidth + <span class=\"string\">'px'</span>;  <span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.totalWidth = <span class=\"keyword\">this</span>.$container.clientWidth;  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.columnNum = ~~(<span class=\"keyword\">this</span>.totalWidth / <span class=\"keyword\">this</span>.columnWidth);  <span class=\"comment\">// </span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">this</span>.step = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.totalWidth = <span class=\"keyword\">this</span>.$container.clientWidth;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.columnNum = ~~(<span class=\"keyword\">this</span>.totalWidth / <span class=\"keyword\">this</span>.columnWidth);</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.children = <span class=\"keyword\">this</span>.$container.querySelectorAll(<span class=\"keyword\">this</span>.childSelector);</span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; <span class=\"keyword\">this</span>.children.length; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.children[i].style.width = <span class=\"keyword\">this</span>.columnWidth + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.children[i].style.height = <span class=\"string\">'auto'</span>;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.children[i].style.paddingRight = <span class=\"keyword\">this</span>.paddingWidth;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.children[i].style.paddingBottom = <span class=\"keyword\">this</span>.paddingWidth;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">// padding</span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (i % <span class=\"keyword\">this</span>.columnNum === <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.children[i].style.paddingLeft = <span class=\"keyword\">this</span>.paddingWidth;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">      <span class=\"comment\">//   </span></span><br><span class=\"line\">      <span class=\"keyword\">if</span> (i &lt; <span class=\"keyword\">this</span>.columnNum) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.children[i].style.left = (i) * <span class=\"keyword\">this</span>.columnWidth + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.children[i].style.top = (i) * <span class=\"number\">0</span> + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">      &#125;<span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.children[i].style.left = <span class=\"keyword\">this</span>.children[i - <span class=\"keyword\">this</span>.columnNum].style.left;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.children[i].style.top = +<span class=\"keyword\">this</span>.children[i - <span class=\"keyword\">this</span>.columnNum].style.top.replace(<span class=\"string\">'px'</span>, <span class=\"string\">''</span>) +</span><br><span class=\"line\">                                      <span class=\"keyword\">this</span>.children[i - <span class=\"keyword\">this</span>.columnNum].clientHeight + <span class=\"string\">'px'</span>;</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><ul><li>url<br>waterfall.step()item   resizeso easy !</li></ul><figure class=\"highlight javascript\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * [waterFallInit ]</span></span><br><span class=\"line\"><span class=\"comment\"> * <span class=\"doctag\">@param  <span class=\"type\">&#123;String&#125;</span> </span>wData [url]</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"keyword\">var</span> waterFallInit = <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\">wData</span>) </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">var</span> fragment = <span class=\"built_in\">document</span>.createDocumentFragment();</span><br><span class=\"line\">  <span class=\"keyword\">var</span> div, img, timer, $imgs, length, index = <span class=\"number\">0</span>;</span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; wData.length; i++) &#123;</span><br><span class=\"line\">    div = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'div'</span>);</span><br><span class=\"line\">    img = <span class=\"built_in\">document</span>.createElement(<span class=\"string\">'img'</span>);</span><br><span class=\"line\">    div.setAttribute(<span class=\"string\">'class'</span>, <span class=\"string\">'water-fall-item'</span>);</span><br><span class=\"line\">    img.setAttribute(<span class=\"string\">'src'</span>, wData[i]);</span><br><span class=\"line\">    div.appendChild(img);</span><br><span class=\"line\">    fragment.appendChild(div);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (i === wData.length - <span class=\"number\">1</span>) &#123;</span><br><span class=\"line\">      domMap.$waterFall.appendChild(fragment);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  <span class=\"keyword\">var</span> waterfall = <span class=\"keyword\">new</span> WaterFall(domMap.$waterFall, <span class=\"string\">'.water-fall-item'</span>, <span class=\"number\">200</span>, <span class=\"number\">5</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">  timer = setInterval(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">    index=<span class=\"number\">0</span>;</span><br><span class=\"line\">    $imgs = domMap.$waterFall.querySelectorAll(<span class=\"string\">'.water-fall-item &gt; img'</span>);</span><br><span class=\"line\">    length = $imgs.length;</span><br><span class=\"line\">    <span class=\"comment\">// </span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> (<span class=\"keyword\">var</span> i = <span class=\"number\">0</span>; i &lt; $imgs.length; i++) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">if</span> ($imgs[i].complete) &#123;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (++index === length) clearInterval(timer);</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    waterfall.step();</span><br><span class=\"line\">  &#125;, <span class=\"number\">250</span>);</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">// </span></span><br><span class=\"line\">   <span class=\"built_in\">window</span>.onresize =  <span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">     Utils.FnDelay(<span class=\"function\"><span class=\"keyword\">function</span> (<span class=\"params\"></span>) </span>&#123;</span><br><span class=\"line\">       waterfall.step();</span><br><span class=\"line\">     &#125;, <span class=\"number\">800</span>);</span><br><span class=\"line\">   &#125;</span><br><span class=\"line\">&#125;;</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><p><em>github<a href=\"https://github.com/NoJsJa/javascript-learning/tree/master/normal/water-fall-layout\" target=\"_blank\" rel=\"noopener\">nojsja</a></em></p>"},{"title":"Ubuntu18","catalog":true,"toc_nav_num":true,"date":"2019-06-12T08:30:35.000Z","subtitle":"ubuntu18.04 linux","header-img":"article_header.png","updateDate":"2019-06-12T08:30:35.000Z","_content":"\n![welcome / home](Ubuntu18.04-1.jpg)\n\n#### \n__________\n\n* WineWineSystemTray \n* Home\n* Ubuntudeepin wine QQ\n* QQ/\n* Ubuntu 18.04\n* oh-my-zsh\n* Terminator\n* \n* \n* crossover18\n* vim\n* Ubuntu18.04 Mac\n* Ubuntu18.04  \n* Ubuntu18.04 plymouth\n* Ubuntu18.04 [Dash to dock]dock\n* Ubuntu18.04 Release\n* Ubuntu18.04 \n* Ubuntu18.04 cinnamon\n* Linux\n* Shadowsocks-Qt5\n* polipo(shadowsocks)\n* linux\n* shadowsocks\n* Ubuntu18.04shadowsockspac\n* Atom\n* Grub2 \n* Ubuntu18.04 ttf-mscorefonts-installer\n* Ubuntu18.04 WPS \n* Ubuntu20.04 deepin-screenshot\n* Ubuntu18.04 Gnome\n* Win10 + Ubuntu18.04 \n* Ubuntu18.04 ()\n* Ubuntu 18.04 lvm\n* Ubuntu18.04 1.1.0\n* Ubuntu18.04 Crossover17QQ\n* Ubuntu18.04 tweakgnomeBlyr\n* Ubuntu18.04  \n* Ubuntu18.04 Gnome-Shell \n* Ubuntu18.04  [ Dash to dock ] \n* Ubuntu18.04 \n* chrome\n* \n* \n\n#### WineWineSystemTray\n____________________________________________\n![wine_tray.png](Ubuntu18.04-2.png)\n\n![tray.png](Ubuntu18.04-3.png)\n1. Linux Mint18.3\n() -  - +Wine\n\n2. Ubuntu 18.04\ngnome-shell [TopIcons](https://extensions.gnome.org/extension/495/topicons/), TopIconsgnomechrome-gnome-shell (`sudo apt install chrome-gnome-shell` )deepin QQTopIconsQQ[Dash to Panel](https://extensions.gnome.org/extension/1160/dash-to-panel/)\n\n#### Home\n-------------------------------------------------------------------------\n1.  \n```sh\n$: export LANG=en_US(-> zh_CN)\n```\n2. \n```sh\n$: xdg-user-dirs-gtk-update\n```\n3.  []\n4.  []  [] \n\n#### Ubuntudeepin wine QQ\n__________________________________\n\n1. deepin-wine[https://gitee.com/wszqkzqk/deepin-wine-for-ubuntu](https://gitee.com/wszqkzqk/deepin-wine-for-ubuntu)zipgit[](https://pan.baidu.com/s/120C5aHuqtyxQyn_fGTxHKg)`sudo sh ./install.sh`deb(deb)\n\n2. deepin.com[http://mirrors.aliyun.com/deepin/pool/non-free/d/](http://mirrors.aliyun.com/deepin/pool/non-free/d/)deb:\n*   QQ[http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im/](http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im/)\n*   TIM[http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.office/](http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.office/)\n*   QQ[http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im.light/](http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im.light/)\n*   [http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.wechat/](http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.wechat/)\n*   Foxmail[http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.foxmail/](http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.foxmail/)\n*   [http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.baidu.pan/](http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.baidu.pan/)\n*  360http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.cn.360.yasuo/\n*  :  https://pan.baidu.com/s/1cij1FhFeEn2sXdPtkJ3lSg\n* UbuntuUbuntuLinuxMintZorinOS\n\n#### QQ/\n______________________\n\n1.linux: [electronic-wechat](https://github.com/geeeeeeeeek/electronic-wechat)[weweChat](https://github.com/trazyn/weweChat)crossoverwindows\n\n2.140CrossOver18QQ8.9TIMTIM crossoverQQbugcrossover18windowscrossoverwindowsXP 64`\"WeChatWin.dll \"`\n```sh\n$: apt-get install libldap-2.4-2:i386\n```\n\n3.docker[Tim](https://hub.docker.com/r/bestwu/qq)  [wechat](https://hub.docker.com/r/bestwu/wechat)[docker](https://www.runoob.com/docker/ubuntu-docker-install.html)\n\n4.wine(crossover/deepin)()[riched20.dll](https://pan.baidu.com/s/1-ScZvkmR9oZPdiFurdKQdA)(rofj)C`/windows/system32/riched20.dll``~/.cxoffice/[]/drive_c/`\n\n5.wine(crossover/deepin)(:,)\n\n6.wine(crossover/deepin) `sudo apt install libjpeg62:i386```\n\n7.wine(crossover/deepin)QQ()QQ(http/socks)localhost/127.0.0.1IP0.0.0.0\n\n#### Ubuntu 18.04\n_________________________________\n=> \n```sh\n# \nsystemd-analyze blame\n# plymouth\nsudo systemctl mask plymouth-start.service\nsudo systemctl mask plymouth-read-write.service\n```\n#### oh-my-zsh\n_________________________________\n1. \n* gnzh())\n* ys \n* avit\n* af-magic\n2. \n* git => git\n* svn => svn\n* colored-man-pages => man\n* zsh-syntax-highlighting => \n* z => \n* zsh-autosuggestions => \n\n#### Terminator\n---------------------------\n\n\n`->->->`\n`Ctrl+Alt+T``terminator --geometry=93x32+450+300`geometry\n\n`~/.config/terminator/config`\n\n```bash\n  [global_config]\n  enabled_plugins = CustomCommandsMenu, LaunchpadCodeURLHandler, APTURLHandler, LaunchpadBugURLHandler\n  suppress_multiple_term_dialog = True\n  title_hide_sizetext = True\n[keybindings]\n  prev_tab = <Alt>1\n  reset_clear = <Primary><Shift>g\n  clear = <Primary>l\n  switch_to_tab_1 = <Alt>1\n  switch_to_tab_2 = <Alt>2\n  switch_to_tab_3 = <Alt>3\n  switch_to_tab_4 = <Alt>4\n  switch_to_tab_5 = <Alt>5\n  toggle_scrollbar = None\n  toggle_zoom = <Primary><Shift>x\n[layouts]\n  [[default]]\n    [[[child1]]]\n      parent = window0\n      profile = default\n      type = Terminal\n    [[[window0]]]\n      parent = \"\"\n      size = 925, 570\n      type = Window\n[plugins]\n  [[CustomCommandsMenu]]\n    [[[]]]\n      command = clear\n      enabled = True\n      name = \n      position = 0\n[profiles]\n  [[default]]\n    allow_bold = False\n    background_color = \"#fbfbfb\"\n    background_darkness = 0.93\n    background_type = transparent\n    copy_on_selection = True\n    cursor_color = \"#aaaaaa\"\n    cursor_shape = ibeam\n    font = Ubuntu Light 12\n    foreground_color = \"#49494a\"\n    palette = \"#2e3436:#ee6a6a:#38690a:#b3adb0:#3465a4:#75507b:#06989a:#d3d7cf:#979b93:#fe5f5f:#7fd42c:#b7afb1:#729fcf:#ad7fa8:#34e2e2:#eeeeec\"\n    scroll_on_keystroke = False\n    scrollbar_position = hidden\n    show_titlebar = False\n```\n\n#### \n------------------------\n```sh\n# \n$: dpkg --get-selections |grep linux-image\n# \n$: uname -a\n# \n$: sudo apt-get remove\n$: linux-image-x.xx.x-xx-generic\n$: sudo apt-get remove  \n$: linux-image-extra-x.xx.x-xx-generic  \n# \n$: sudo dpkg --purge linux-image-x.x.x-xx-generic\n# \n$: sudo apt-mark hold linux-image-x.xx.x-xx-generic\n$: sudo apt-mark hold linux-image-extra-x.xx.x-xx-generic\n# \n$: sudo apt-mark unhold linux-image-x.xx.x-xx-generic\n$: sudo apt-mark unhold linux-image-extra-x.xx.x-xx-generic\n```\n\n#### \n-----------------------------\n* AR PL UKai CN 12\n* Bitstream Vera Sans Mono 10\n* Courier 10 Pitch 11\n* DejaVu Sans Mono 10\n* FreeMono 11\n* Nimbus Mono L 12\n* TlwgMono 11 \n\n#### crossover18\n----------------------------\n [CrossoverPatch](https://pan.baidu.com/s/1BnT-cAKf-SBp-6J4CQoo-g ) `: ffp0`\n```sh\n#  \n$: cp ~/cxoffice/lib/wine/winewrapper.exe.so ~/cxoffice/lib/wine/winewrapper.exe.so-bak\n# \n$: cp CrossoverPatch/winewrapper.exe.so ~/cxoffice/lib/wine\n```\n\n#### vim\n______________\n1. [Vundle](https://github.com/VundleVim/Vundle.vim) => .vimrc`vim +PluginInstall`  \n2. [vim-airline](https://github.com/vim-airline/vim-airline) =>   \n3. [](https://juejin.im/post/5a38c37f6fb9a0450909a151)\n\n#### Ubuntu18.04 Mac\n__________________________\n\n![overview.png](Ubuntu18.04-5.png)\n\n![desktop.png](Ubuntu18.04-6.png)\n\n\n1. gnome-tweak-tool  chrome-gnome-shell  (`sudo aptitude install [name]`)\n2. GTK3 => [X-Arc-Collection](https://www.gnome-look.org/p/1167049/)\n3. tweak => tweak --  --  -- X-Arc-Collection\n4. gnome-shell  => [macOS High Sierra](https://www.gnome-look.org/p/1167049/)\n5. gnome-shell  => [User Themes](https://extensions.gnome.org/extension/19/user-themes/) ( Gnome => [Alt + F2] & [ r] & [ Enter] )\n6. tweakshell => tweak --  -- shell -- Sierra shell\n7.  Mac [la-capitaine-icon-theme](https://github.com/keeferrourke/la-capitaine-icon-theme/releases)  [McMojave-circle](https://www.pling.com/p/1305429/)\n8.  ~/.icons()\n9. tweakicon => tweak --  --  -- \n10. gnome-shell => Dash to dock (dockdock)\n11. firefox => [Majave-gtk-theme](https://github.com/vinceliuice/Mojave-gtk-theme)\n\n#### Ubuntu18.04  \n--------------------------------------------------------------------------------------------\n![lockscreen.png](Ubuntu18.04-7.png)\n\n![loginscreen.png](Ubuntu18.04-8.png)\n\n1.  => [github / nojsja / login-manager-config-ubuntu](https://github.com/NoJsJa/maintenance/tree/master/code/shell/desktop/login-manager-config-ubuntu)  \n2. => /usr/share/gnome-shell/theme/ubuntu.cssImageMagick`convert -blur`SetAsWallpaper()`gnome-tweak-tool`  \n3. `/usr/share/gnome-shell/theme/gdm3.css`ubuntu18.04\n4. => CSS(UPE)\n\n#### Ubuntu18.04 plymouth\n-----------------------------------------------------------------------------\n>ubuntu[gnome-look](https://www.gnome-look.org/browse/cat/108/)[darwin](https://pan.baidu.com/s/1qv3GZ_BE-jj2HIpiI2X7yQ): `rc6u`\n1. plymouth `/usr/share/plymouth/themes`\n\n2. \n```sh\n$: sudo update-alternatives --install /usr/share/plymouth/themes/ default.plymouth default.plymouth /usr/share/plymouth/themes/[THEME]/[THEME].plymouth 100\n```\n\n3. plymouth\n```sh\n$: sudo update-alternatives --config default.plymouth\n$: sudo update-initramfs -u\n```\n\n4. \n```sh\n$: sudo gedit /usr/share/plymouth/themes/default.plymouth\n```\n`ImageDir``ScriptFile`plymouth\n```sh\nImageDir=/usr/share/plymouth/themes/[THEME]\nScriptFile=/usr/share/plymouth/themes/[THEME]/[THEME].script\n```\n\n\n#### Ubuntu18.04 [Dash to dock]dock\n---------------------------------------------------------------------------------------------\n>tweak[Dash to dock][Dash to dock]dock  \n\n![dock-noise.png](Ubuntu18.04-9.png)\n\n![dock-single.png](Ubuntu18.04-10.png)\n\n\n\n#### Ubuntu18.04 Release\n________________________________________________________\n![dock-tweak.png](Ubuntu18.04-11.png)\n\n1.  \n2. \n3.    (dists)\n\n#### Ubuntu18.04 \n____________________________________________\n=> Ubuntu18.0416.04\n```ssh\n# gdebi\n$: sudo gdebi netease-cloud-music_1.0.0_amd64_ubuntu16.04.deb\n$: Dependency is not satisfiable: libqt5libqgtk2\n# Ubuntu18.04libqt5libqgtk2qt5-style-plugins\n# libqt5libqgtk2\n```\n=> \n=> \n1. deb\n```ssh\n$: mkdir netease-cloud-music\n```\n2. \n```ssh\n$: dpkg -X netease-cloud-music_1.0.0_amd64_ubuntu16.04.deb netease-cloud-music\n```\n3. \n ```ssh\n$: dpkg -e netease-cloud-music_1.0.0_amd64_ubuntu16.04.deb neteas-cloud-music/DEBIAN/\n```\n4. (libqt5libqgtk2qt5-style-plugins)\n```ssh\n# vim\n$: vim neteas-cloud-music/DEBIAN/control\n# vimlibqt5libqgtk2\n:1,$s/libqt5libqgtk2/qt5-style-plugins/g\n# Dependslibqt5libqgtk2\n```\n5. \n```ssh\n$: dpkg-deb -b neteas-cloud-music\n$: mv neteas-cloud-music.deb netease-cloud-music_1.0.0_amd64_ubuntu18.04.deb\n```\n6. \n```ssh\n# gdebidpkg\n$: sudo gdebi netease-cloud-music_1.0.0_amd64_ubuntu18.04.deb\n$: sudo dpkg -i netease-cloud-music_1.0.0_amd64_ubuntu18.04.deb\n```\n\n#### Ubuntu18.04 Cinnamon\n-------------------------------------\n>cinnamongtkgonomegtkicondeepinCinnamonbug\n\n\n* CinnamonAPIwine/crossoverQQ/Wehcat\n* ibusfcitxfcitxsogou\n* `blueman`\n* \n* Cinnamon(gnome)``winebug\n* Cinnamon\n\n\n1. Key\n```bash\n$: sudo add-apt-repository ppa:embrosyn/cinnamon  \n$: sudo apt update && sudo apt install cinnamon\n```\n2. \n3. cinnamon\n```bash\n$: sudo apt-get install ppa-purge\n$: sudo ppa-purge ppa:embrosyn/cinnamon\n```\n\n\n#### Linux\n------------------------------------\n=> ubuntu 18.04/var  1.5G\n\n* 1\n```sh\n$: sudo apt-get clean\n$: sudo apt-get autoremove\n```\n2\n* 2\n()\n```sh\n# /var \n$: mv /var/lib /opt\n# optlibvar\n$: sudo ln -s /opt/lib /var\n```\n* 3\n/var/home/var/home/var2G-4G/home\n\n#### Shadowsocks-Qt5\n________________________\n> shadowsocksGUIQtsslocal __Release__shadowdocks-Qt5`artful`  \n\n\\> sudo add-apt-repository ppa:hzwhuang/ss-qt5  \n\\> sudo apt update  \n\\> sudo apt-get install shadowsocks-qt5  \n\n#### polipo(shadowsocks)\n________________________________________________\n* (bashzsh) => [github / nojsja / polipo-install-config.sh\"](https://github.com/NoJsJa/maintenance/tree/master/code/shell/desktop/shadowsocks-terminal)\n*   \n\\> ' hp ' == ' http_proxy=http://localhost:8123 ' for any command  \n\\> ' gp ' == 'http.proxy=localhost:8123' for git proxy config  \n\\> 1`hp curl ip.gs`\n\\> 2`git clone https://android.googlesource.com/tools/repo --config $gp`\n* polipo(`systemctl status polipo`)polipopolipo(`/etc/polipo/config`)\n#### linux\n_______________________________________________________\n>\n\n=> (ubuntu18.04) => [github / nojsja / makeIconLink](https://github.com/NoJsJa/maintenance/tree/master/code/shell/desktop/application)\n=> \n* icon(1:164px % 64px)\n* \n```sh\n$: bash makeIconLink --help\n```\n* \n```sh\n$: bash makeIconLink --dir /path/to/[exec-file] --target [exec-file-name] --icon [icon-file-name]\n```\n* \n```sh\n$: bash makeIconLink --uninstall [exec-file-name]\n```\n\n#### shadowsocks\n-------------------------------------------------------------\n> systemdshadowsocksshadowsocks-qt5FQ ~\n\n=> [startup.sh](https://github.com/NoJsJa/maintenance/blob/master/code/shell/desktop/startup.sh)[shadowsocks](https://github.com/NoJsJa/maintenance/blob/master/code/shell/desktop/shadowsocks)  \n=> \n\n* shadowsocks serviceshadow.service\n\n```sh\n[Unit]\n# \nDescription=Shadowsocks Service\n\n[Service]\nType=oneshot\n#  start/stop ()\nExecStart=/bin/bash /home/nojsja/github/maintenance/code/shell/desktop/startup.sh start\nExecStop=/bin/bash /home/nojsja/github/maintenance/code/shell/desktop/startup.sh stop\nRemainAfterExit=yes\n\n[Install]\n# \nWantedBy=multi-user.target\n```\n\n* `/etc/systemd/system`  \n\\> sudo cp shadow.service /etc/systemd/system\n*   \n\\> systemctl enable shadow\n*   \n\\> systemctl start shadow  \n\\> systemctl stop shadow\n\n#### Ubuntu18.04shadowsockspac\n________________________\n=> shadowsockspac\n```sh\n# pip\n$: sudo apt-get install python-pip python-dev build-essential\n$: sudo pip install --upgrade pip\n$: sudo pip install --upgrade virtualenv\n# pac\n$: sudo pip install genpac\n# pac\n$: mkdir ~/shadowsocks\n$: cd shadowsocks\n# proxyshadowsocks\n$: genpac --proxy=\"SOCKS5 127.0.0.1:1080\" --gfwlist-proxy=\"SOCKS5 127.0.0.1:1080\" -o autoproxy.pac --gfwlist-url=\"https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt\"\n```\n~/shadowsocksautoproxy.pac ->  ->  ->  -> file:///path/to/autoproxy.pac(pac)pac\n=> [genpac-command](https://github.com/NoJsJa/maintenance/tree/master/code/shell/desktop/shadowsocks/genpac)(user-rules.txt) autoproxy.pac\n```sh\n# # \n# \n$: bash genpac-command --help\n# \n$: bash genpac-command --update-online\n# user-rules.txt\n$: bash genpac-command --update-local\n# \n$: bash genpac-command --add-rules opendesktop.org\n# \n$: bash genpac-command --add-rules opendesktop.org atom.io\n# \n$: bash genpac-command --del-rules opendesktop.org\n# \n$: bash genpac-command --del-rules opendesktop.org atom.io\n```\n=> __pacfirefoxgoogleFQpacSwitchOmega__\n\n#### Atom\n______________________________\n>AtomVscodeSublimeBracksAtomAtomAtom45GAtomAtomatomide-typescriptAtom200~400MbAtomAtom gitrelease\n\n#### Grub2 \n_________________\n![source.png](Ubuntu18.04-12.png)\n>Grub2\n\n1.  => [Vimix](https://pan.baidu.com/s/1ioMub2JmHlIzHJbS2_2gRQ)Vimix()\n2. /boot/grubGRUB2themes\n\\> sudo mkdir -p /boot/grub/themes\n3. Vimix/boot/grub/themes\n\\> sudo cp -r Vimix /boot/grub/themes\n4. /etc/default/grub\n\\> sudo gedit /etc/default/grub\nGRUB_THEME=\"/boot/grub/themes/Vimix/theme.txt\" \n5. GRUB\n\\> sudo update-grub\n6. ()\n\n#### Ubuntu18.04 ttf-mscorefonts-installer\n_________________________________________________________\n![firefox_proxy.png](Ubuntu18.04-13.png)\n\n1. [sourceforge](http://sourceforge.net/projects/corefonts/files/the%20fonts/final/)11exe /home/nojsja/Downloads/ttf-mscorefonts-installer\n2. \n\\> sudo dpkg-reconfigure ttf-mscorefonts-installer\n3. exe /home/nojsja/Downloads/ttf-mscorefonts-installer\n\n#### Ubuntu18.04 WPS \n---------------------------------------\n[fonts](https://pan.baidu.com/s/10MushHhTXwfRIFkKGmwD7Q) (: 4jpo)Linux/usr/share/fonts\n```sh\n# \n$: sudo mkfontscale\n$: sudo mkfontdir\n# \n$: sudo fc-cache\n```\n\n#### Ubuntu18.04 WPS \n---------------------------------------\n```sh\n# 32bit\n$: sudo apt-get install libnvidia-gl-440:i386\n```\n\n#### Ubuntu20.04 deepin-screenshot\n------------------------------------------------------\n`xfce4-clipman`\n```sh\n$: sudo apt install xfce4-clipman\n```\n\n#### Ubuntu18.04 Gnome\n---------------------------------------\n```sh\n# Upgrade\n#If you were using the gnome3-team/gnome3-staging PPA, run the following before upgrading:\n$: sudo ppa-purge ppa:gnome3-team/gnome3-staging\n$: sudo ppa-purge ppa:gnome3-team/gnome3\n$: sudo apt install ubuntu-gnome-desktop^\n# The included GUI update manager will offer you the latest release of Ubuntu GNOME. Access this via the terminal:\n$: update-manager -c\n# Alternatively, run the following command:\n$: sudo do-release-upgrade\n```\n\n\n#### Win10 + Ubuntu18.04 \n______________________________________\n>UbuntuWindowsUbuntuBIOSGMT+0(GMT+8)UbuntuBIOS+88Ubuntu8BIOS0WindowsWindowsBIOSWindows0Windows8BIOSWindows8Ubuntu8+8=16\n\n1. Ubuntu\n\\> sudo apt-get install ntpdate\n\\> sudo ntpdate time.windows.com\n2. \n\\> sudo hwclock --localtime --systohc\n3. linuxwindows\n\n#### Ubuntu18.04 ()\n______________________________________________\n>  [ _GPT+UEFI_ ]  [ _MBR + LEGANCY_ ]\n1. ( gpt+uefi / mbr+legancy)\nUEFIUbuntu18.04 bios (UEFI)\"/boot \"1GB\"bios\"(UEFI/boot/boot/efi)\"/\"8G8Gswap\"bios\" -- [](https://blog.csdn.net/jesse_mx/article/details/61425361\n)\n2. (gpt+uefi )\n\"efi\"\"/boot\"(bootgrubefiUEFI)\"/\"\"\"\"efit\"\n3. (mbr+legancy)\nlegancy + mbr\"/boot\"()  \"/\"\"\"\"/boot\"\n\n#### Ubuntu 18.04 lvm\n[=> ](https://askubuntu.com/questions/1030867/how-to-diagnose-fix-very-slow-boot-on-ubuntu-18-04)\n1.  `/etc/default/grub`  `GRUB_CMDLINE_LINUX_DEFAULT` __noresume__\n```sh\nGRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash noresume\"\n```\n2. grub\n```sh\n$: sudo update-grub\n```\n3. \n\n#### Ubuntu18.04 1.1.0\n_________________________________________________\n* root\n\\> sudo netease-cloud-music > /dev/null 2>&1  &\n* session-managerbug\n\\> alias netease='unset SESSION_MANAGER && netease-cloud-music'\n\\> netease > /dev/null &\n* bug[ieaseMusic](https://github.com/trazyn/ieaseMusic)\n* ubuntu18.04[](https://github.com/innoob/netease-cloud-music)bug\n\n\n#### Ubuntu18.04 Crossover17QQ\n______________________________________________\n>ume-ui-gothic.ttf  \n\n /opt/cxoffice/share/wine/fonts [ume-ui-gothic.ttf](https://pan.baidu.com/s/13CDBKrvTAJOhrbuyLw96jA) ()ume-ui-gothic.ttf\n\n#### Ubuntu18.04 tweakgnomeBlyr\n_______________________________________________________\n=> `Error: Requiring Clutter, version none: Typelib file for namespace 'Clutter' (any version) not found ...`  \n=> Clutter\n=> \n```sh\n# \n$: sudo apt-get install gir1.2-clutter-1.0 gir1.2-clutter-gst-3.0 gir1.2-gtkclutter-1.0\n```\n\n#### Ubuntu18.04  \n---------------------------------------\nubuntu18.04gksu\n1. alias\n```bash\n$: alias gksu='pkexec env DISPLAY=$DISPLAY XAUTHORITY=$XAUTHORITY'\n```\n2.   \n```bash\n$: gksu gedit /etc/default/apport\n# `enable = 1``enable = 0`\n```\n\n#### Ubuntu18.04 Gnome-Shell \n______________________________________________\n* [CoverFlow Alt-Tab](https://extensions.gnome.org/extension/97/coverflow-alt-tab/) => Tab()\n* [User Themes()](https://extensions.gnome.org/extension/19/user-themes/) => ()\n* [Dash To Dock](https://extensions.gnome.org/extension/307/dash-to-dock/) => dock()\n* [Dash To Panel](https://extensions.gnome.org/extension/1160/dash-to-panel/) => dock()\n* [NoAnnoyance](https://extensions.gnome.org/extension/1236/noannoyance/) => pop()\n* [Autohide Battery](https://extensions.gnome.org/extension/595/autohide-battery/) => ()\n* [Places Status Indicator](https://extensions.gnome.org/extension/8/places-status-indicator/) => ()\n* [Removable Drive Menu](https://extensions.gnome.org/extension/7/removable-drive-menu/) => ()\n* [Suspend Button](https://extensions.gnome.org/extension/826/suspend-button/) => ()\n* [TopIcons](https://extensions.gnome.org/extension/495/topicons/) => ()\n* [TopIconsPlus](https://extensions.gnome.org/extension/1031/topicons/) => ()\n* [Blyr](https://extensions.gnome.org/extension/1251/blyr/) => ()\n* [Activities Configurator](https://extensions.gnome.org/extension/358/activities-configurator/) => ()\n* [Workspace to Dock](https://extensions.gnome.org/extension/427/workspaces-to-dock/) => dock()\n* [Extensions](https://extensions.gnome.org/extension/1036/extensions/) => gnome-shell()\n* [Clipboard Indicator](https://extensions.gnome.org/extension/779/clipboard-indicator/) => ()\n* [Sound Input & Output Device Chooser](https://extensions.gnome.org/extension/906/sound-output-device-chooser/) => ()\n* [NoAnnoyance](https://extensions.gnome.org/extension/1236/noannoyance/) => ()\n* [Bluetooth quick connect](https://extensions.gnome.org/extension/1401/bluetooth-quick-connect/) => ()\n* [Remove Alt+Tab Delay](https://extensions.gnome.org/extension/1403/remove-alttab-delay/) => Alt + Tab()\n* [Emoji Selector](https://extensions.gnome.org/extension/1162/emoji-selector/) => Emoji()\n\n#### Ubuntu18.04  [ Dash to dock ] \n--------------------------------------------\n```sh\n#Use Custom Dock Indicator ( Optional )\n$: gsettings set org.gnome.shell.extensions.dash-to-dock custom-theme-running-dots false\n$: gsettings set org.gnome.shell.extensions.dash-to-dock custom-theme-customize-running-dots false\n_______________________________________________________________________________________________\n\n# Disable Custom Dock Shrink ( Required for Good looking) (  Required )\n$: gsettings set org.gnome.shell.extensions.dash-to-dock custom-theme-shrink false\n_______________________________________________________________________________________________\n\n# Dock Transparency mode ( Optional )\n$: gsettings set org.gnome.shell.extensions.dash-to-dock transparency-mode DEFAULT\n_______________________________________________________________________________________________\n\n# Restore to Default\n$: dconf reset -f /org/gnome/shell/extensions/dash-to-dock/\n_______________________________________________________________________________________________\n```\n\n#### Ubuntu18.04 \n______________________________________________\n* GTK3() => [X-Arc-Collection](https://www.gnome-look.org/p/1167049/)\n* GTK3() => [McOS-themes](https://www.gnome-look.org/p/1241688)\n* Gnome Shell() => [Flat-Remix](https://github.com/daniruiz/flat-remix)\n* Gnome Shell() => [Human](https://www.gnome-look.org/p/1171095/)\n* Gnome Shell() => [macOS High Sierra](https://www.opendesktop.org/c/1460761561)\n* Gnome Shell(?) => [macOS High Sierra](https://www.gnome-look.org/p/1213208/)\n* Icon () => [flat-remix](https://github.com/daniruiz/flat-remix/releases)\n* Icon () => [Mac OS X Icon](https://www.gnome-look.org/p/1012200/)\n* Icon () => [la-capitaine-icon-theme](https://github.com/keeferrourke/la-capitaine-icon-theme/releases)\n* Icon () [McMojave-circle](https://www.pling.com/p/1305429/)\n* Icon () => [MacOS sierra ct](https://github.com/zayronxio/Macos-sierra-CT)\n* Cursor() => [Capitaine Cursors](https://krourke.org/projects/art/capitaine-cursors)\n\n#### chrome\n-----------------------------------\n* [infinity pro ](https://chrome.google.com/webstore/detail/infinity-new-tabproductiv/dbfmnekepjoapopniengjbcpnbljalfg?utm_source=InfinityNewtab) => ()\n* [Octotree](https://chrome.google.com/webstore/detail/octotree/bkhaagjahfmjljalopjnoealnfndnagc?utm_source=InfinityNewtab) => github()\n* [Postman](https://chrome.google.com/webstore/detail/postman-interceptor/aicmkgpgakddgnaphhhpliifpcfhicfo?utm_source=InfinityNewtab) => API()\n* [SwitchyOmega](https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif?utm_source=InfinityNewtab) => ()\n* [](https://chrome.google.com/webstore/detail/evernote-web-clipper/pioclpoplcdbaefihamjohnefbikjilc?utm_source=InfinityNewtab) => ()\n* [SimpRead](https://chrome.google.com/webstore/detail/simpread-reader-view/ijllcpnolfcooahcekpamkbidhejabll?utm_source=InfinityNewtab) => ()\n* [Full Page Screen Capture](https://chrome.google.com/webstore/detail/full-page-screen-capture/fdpohaocaechififmbbbbbknoalclacl?utm_source=InfinityNewtab) => ()\n* [tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?utm_source=InfinityNewtab) => badu()\n* [Checker Plus for Gmail](https://chrome.google.com/webstore/detail/checker-plus-for-gmail/oeopbcgkkoapgobdbedcemjljbihmemj?utm_source=InfinityNewtab) => Google()\n* [Vimium](https://chrome.google.com/webstore/detail/vimium/dbepggeogbaibhgnhhndojpepiihcmeb?utm_source=InfinityNewtab) => googlevim(firefox)()\n* [Markdown](https://chrome.google.com/webstore/detail/copy-as-markdown/dgoenpnkphkichnohepecnmpmihnabdg) => markdown()\n\n#### \n_______________________________\n* [fonts-firacode](https://github.com/tonsky/FiraCode/wiki/Linux-instructions#installing-with-a-package-manager) => vscode`sudo apt install fonts-firacode`\n* [vivaldi](https://vivaldi.com) => ()\n* Terminator => gnome()\n* Timeshift => ()\n* ipython3() => python()\n* jupyter => ()\n* pdb/ipdb() => python()\n* trash-cli() => ()\n* bat() => catgit()\n* axel() => 100 : )()\n* [aria2()](https://github.com/aria2/aria2) => \n* [stacer](https://github.com/oguzhaninan/Stacer) => linux()\n* [ieaseMusic](https://github.com/trazyn/ieaseMusic) => bug\\[]()\n* parallel() => ()\n* cheat() => man()\n* topgrade() => ()\n* [dbKoda](https://www.dbkoda.com/) => mongodb GUI()\n* [mongodb compass](https://www.mongodb.com/products/compass) => mongodb GUI()\n* [peek](https://github.com/phw/peek) => gif/webm/apng/webm()\n* tmux => ()\n* (ubuntu) => ()\n* (ubuntu) => ()\n* shutter => `ppa:linuxuprising/shutter`()\n* flameshot => Ubuntu20.04()\n* [WebTorrent](https://webtorrent.io/desktop/)[FrostWire](https://www.frostwire.com/) => bt()\n* [SmartGit](https://www.syntevo.com/smartgit/) => linuxGIT GUI()\n* FileZilla => ftp()\n* [e-tools](https://github.com/Suremotoo/e-tools) => coder()\n* [WhatEver](https://electronjs.org/apps/whatever) => linux()\n* [wps](http://linux.wps.cn/) => linux office for free made by KingSoftware()\n* [vscode](https://code.visualstudio.com/) =>  ()\n* ndb => node.js/javascript ()\n* [nvm](https://raw.githubusercontent.com/creationix/nvm/v0.33.0/install.sh) => nodejs\n* albert ( `ppa:noobslab/macbuntu`  ) => MacSpotLight()\n* [lftp](https://linux.cn/article-5460-1.html) => FTPFTPSHTTPHTTPSHFTPFISHSFTP\n\n* [redshift-gtk](http://jonls.dk/redshift/) \n* apt-fast => apt`ppa:apt-fast/stable`()\n* nautilus action configure tool => `ppa:daniel-marynicz/filemanager-actions`()\n* tig => git()\n* shellcheck => shell()\n* [Motrix](https://motrix.app/zh-CN/) => ()\n* [Insync](https://www.insynchq.com/) => googleonedrive()\n* [Timeshift](https://github.com/teejee2008/timeshift) => ()\n* dconf-editor => gnomegui()\n\n#### \n_______________\n![Vimix.png](Ubuntu18.04-14.png)\n\n* [Wallpaper](https://wallpapershome.com/)  => ()\n* [flaticon](https://www.flaticon.com) => svgpng\n* [Electron Apps](https://electronjs.org/apps) => Electron (Linux/Mac/Windows)()\n* [Linux](https://www.centos.bz/) => Linux()\n* [IBM Developer](https://www.ibm.com/developerworks/cn/) => ()\n* [Linux](https://www.lulinux.com/archives/2513#awk)  =>  ()\n* [bilibili](https://www.kanbilibili.com/) =>  // ()\n* [Linux](https://linux.cn/) => ()\n* [TinyPNG](https://tinypng.com/) => ()\n* [iLoveIMG](https://www.iloveimg.com/zh-cn) => ()\n* [savefrom](https://en.savefrom.net/) => youtube()\n* [Linux](https://www.lulinux.com/) => ()\n* [](https://greasyfork.org/zh-CN/scripts) => ()\n\n_Linuxer._","source":"_posts/2019-06-12-Ubuntu18.md","raw":"---\ntitle: \"Ubuntu18\"\ncatalog: true\ntoc_nav_num: true\ndate:   2019-06-12 16:30:35\nsubtitle: \"ubuntu18.04 linux\"\nheader-img: \"article_header.png\"\ntags:\n- ubuntu18.04\ncategories:\n- Linux\nupdateDate: 2019-06-12 16:30:35\n---\n\n![welcome / home](Ubuntu18.04-1.jpg)\n\n#### \n__________\n\n* WineWineSystemTray \n* Home\n* Ubuntudeepin wine QQ\n* QQ/\n* Ubuntu 18.04\n* oh-my-zsh\n* Terminator\n* \n* \n* crossover18\n* vim\n* Ubuntu18.04 Mac\n* Ubuntu18.04  \n* Ubuntu18.04 plymouth\n* Ubuntu18.04 [Dash to dock]dock\n* Ubuntu18.04 Release\n* Ubuntu18.04 \n* Ubuntu18.04 cinnamon\n* Linux\n* Shadowsocks-Qt5\n* polipo(shadowsocks)\n* linux\n* shadowsocks\n* Ubuntu18.04shadowsockspac\n* Atom\n* Grub2 \n* Ubuntu18.04 ttf-mscorefonts-installer\n* Ubuntu18.04 WPS \n* Ubuntu20.04 deepin-screenshot\n* Ubuntu18.04 Gnome\n* Win10 + Ubuntu18.04 \n* Ubuntu18.04 ()\n* Ubuntu 18.04 lvm\n* Ubuntu18.04 1.1.0\n* Ubuntu18.04 Crossover17QQ\n* Ubuntu18.04 tweakgnomeBlyr\n* Ubuntu18.04  \n* Ubuntu18.04 Gnome-Shell \n* Ubuntu18.04  [ Dash to dock ] \n* Ubuntu18.04 \n* chrome\n* \n* \n\n#### WineWineSystemTray\n____________________________________________\n![wine_tray.png](Ubuntu18.04-2.png)\n\n![tray.png](Ubuntu18.04-3.png)\n1. Linux Mint18.3\n() -  - +Wine\n\n2. Ubuntu 18.04\ngnome-shell [TopIcons](https://extensions.gnome.org/extension/495/topicons/), TopIconsgnomechrome-gnome-shell (`sudo apt install chrome-gnome-shell` )deepin QQTopIconsQQ[Dash to Panel](https://extensions.gnome.org/extension/1160/dash-to-panel/)\n\n#### Home\n-------------------------------------------------------------------------\n1.  \n```sh\n$: export LANG=en_US(-> zh_CN)\n```\n2. \n```sh\n$: xdg-user-dirs-gtk-update\n```\n3.  []\n4.  []  [] \n\n#### Ubuntudeepin wine QQ\n__________________________________\n\n1. deepin-wine[https://gitee.com/wszqkzqk/deepin-wine-for-ubuntu](https://gitee.com/wszqkzqk/deepin-wine-for-ubuntu)zipgit[](https://pan.baidu.com/s/120C5aHuqtyxQyn_fGTxHKg)`sudo sh ./install.sh`deb(deb)\n\n2. deepin.com[http://mirrors.aliyun.com/deepin/pool/non-free/d/](http://mirrors.aliyun.com/deepin/pool/non-free/d/)deb:\n*   QQ[http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im/](http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im/)\n*   TIM[http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.office/](http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.office/)\n*   QQ[http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im.light/](http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im.light/)\n*   [http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.wechat/](http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.wechat/)\n*   Foxmail[http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.foxmail/](http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.foxmail/)\n*   [http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.baidu.pan/](http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.baidu.pan/)\n*  360http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.cn.360.yasuo/\n*  :  https://pan.baidu.com/s/1cij1FhFeEn2sXdPtkJ3lSg\n* UbuntuUbuntuLinuxMintZorinOS\n\n#### QQ/\n______________________\n\n1.linux: [electronic-wechat](https://github.com/geeeeeeeeek/electronic-wechat)[weweChat](https://github.com/trazyn/weweChat)crossoverwindows\n\n2.140CrossOver18QQ8.9TIMTIM crossoverQQbugcrossover18windowscrossoverwindowsXP 64`\"WeChatWin.dll \"`\n```sh\n$: apt-get install libldap-2.4-2:i386\n```\n\n3.docker[Tim](https://hub.docker.com/r/bestwu/qq)  [wechat](https://hub.docker.com/r/bestwu/wechat)[docker](https://www.runoob.com/docker/ubuntu-docker-install.html)\n\n4.wine(crossover/deepin)()[riched20.dll](https://pan.baidu.com/s/1-ScZvkmR9oZPdiFurdKQdA)(rofj)C`/windows/system32/riched20.dll``~/.cxoffice/[]/drive_c/`\n\n5.wine(crossover/deepin)(:,)\n\n6.wine(crossover/deepin) `sudo apt install libjpeg62:i386```\n\n7.wine(crossover/deepin)QQ()QQ(http/socks)localhost/127.0.0.1IP0.0.0.0\n\n#### Ubuntu 18.04\n_________________________________\n=> \n```sh\n# \nsystemd-analyze blame\n# plymouth\nsudo systemctl mask plymouth-start.service\nsudo systemctl mask plymouth-read-write.service\n```\n#### oh-my-zsh\n_________________________________\n1. \n* gnzh())\n* ys \n* avit\n* af-magic\n2. \n* git => git\n* svn => svn\n* colored-man-pages => man\n* zsh-syntax-highlighting => \n* z => \n* zsh-autosuggestions => \n\n#### Terminator\n---------------------------\n\n\n`->->->`\n`Ctrl+Alt+T``terminator --geometry=93x32+450+300`geometry\n\n`~/.config/terminator/config`\n\n```bash\n  [global_config]\n  enabled_plugins = CustomCommandsMenu, LaunchpadCodeURLHandler, APTURLHandler, LaunchpadBugURLHandler\n  suppress_multiple_term_dialog = True\n  title_hide_sizetext = True\n[keybindings]\n  prev_tab = <Alt>1\n  reset_clear = <Primary><Shift>g\n  clear = <Primary>l\n  switch_to_tab_1 = <Alt>1\n  switch_to_tab_2 = <Alt>2\n  switch_to_tab_3 = <Alt>3\n  switch_to_tab_4 = <Alt>4\n  switch_to_tab_5 = <Alt>5\n  toggle_scrollbar = None\n  toggle_zoom = <Primary><Shift>x\n[layouts]\n  [[default]]\n    [[[child1]]]\n      parent = window0\n      profile = default\n      type = Terminal\n    [[[window0]]]\n      parent = \"\"\n      size = 925, 570\n      type = Window\n[plugins]\n  [[CustomCommandsMenu]]\n    [[[]]]\n      command = clear\n      enabled = True\n      name = \n      position = 0\n[profiles]\n  [[default]]\n    allow_bold = False\n    background_color = \"#fbfbfb\"\n    background_darkness = 0.93\n    background_type = transparent\n    copy_on_selection = True\n    cursor_color = \"#aaaaaa\"\n    cursor_shape = ibeam\n    font = Ubuntu Light 12\n    foreground_color = \"#49494a\"\n    palette = \"#2e3436:#ee6a6a:#38690a:#b3adb0:#3465a4:#75507b:#06989a:#d3d7cf:#979b93:#fe5f5f:#7fd42c:#b7afb1:#729fcf:#ad7fa8:#34e2e2:#eeeeec\"\n    scroll_on_keystroke = False\n    scrollbar_position = hidden\n    show_titlebar = False\n```\n\n#### \n------------------------\n```sh\n# \n$: dpkg --get-selections |grep linux-image\n# \n$: uname -a\n# \n$: sudo apt-get remove\n$: linux-image-x.xx.x-xx-generic\n$: sudo apt-get remove  \n$: linux-image-extra-x.xx.x-xx-generic  \n# \n$: sudo dpkg --purge linux-image-x.x.x-xx-generic\n# \n$: sudo apt-mark hold linux-image-x.xx.x-xx-generic\n$: sudo apt-mark hold linux-image-extra-x.xx.x-xx-generic\n# \n$: sudo apt-mark unhold linux-image-x.xx.x-xx-generic\n$: sudo apt-mark unhold linux-image-extra-x.xx.x-xx-generic\n```\n\n#### \n-----------------------------\n* AR PL UKai CN 12\n* Bitstream Vera Sans Mono 10\n* Courier 10 Pitch 11\n* DejaVu Sans Mono 10\n* FreeMono 11\n* Nimbus Mono L 12\n* TlwgMono 11 \n\n#### crossover18\n----------------------------\n [CrossoverPatch](https://pan.baidu.com/s/1BnT-cAKf-SBp-6J4CQoo-g ) `: ffp0`\n```sh\n#  \n$: cp ~/cxoffice/lib/wine/winewrapper.exe.so ~/cxoffice/lib/wine/winewrapper.exe.so-bak\n# \n$: cp CrossoverPatch/winewrapper.exe.so ~/cxoffice/lib/wine\n```\n\n#### vim\n______________\n1. [Vundle](https://github.com/VundleVim/Vundle.vim) => .vimrc`vim +PluginInstall`  \n2. [vim-airline](https://github.com/vim-airline/vim-airline) =>   \n3. [](https://juejin.im/post/5a38c37f6fb9a0450909a151)\n\n#### Ubuntu18.04 Mac\n__________________________\n\n![overview.png](Ubuntu18.04-5.png)\n\n![desktop.png](Ubuntu18.04-6.png)\n\n\n1. gnome-tweak-tool  chrome-gnome-shell  (`sudo aptitude install [name]`)\n2. GTK3 => [X-Arc-Collection](https://www.gnome-look.org/p/1167049/)\n3. tweak => tweak --  --  -- X-Arc-Collection\n4. gnome-shell  => [macOS High Sierra](https://www.gnome-look.org/p/1167049/)\n5. gnome-shell  => [User Themes](https://extensions.gnome.org/extension/19/user-themes/) ( Gnome => [Alt + F2] & [ r] & [ Enter] )\n6. tweakshell => tweak --  -- shell -- Sierra shell\n7.  Mac [la-capitaine-icon-theme](https://github.com/keeferrourke/la-capitaine-icon-theme/releases)  [McMojave-circle](https://www.pling.com/p/1305429/)\n8.  ~/.icons()\n9. tweakicon => tweak --  --  -- \n10. gnome-shell => Dash to dock (dockdock)\n11. firefox => [Majave-gtk-theme](https://github.com/vinceliuice/Mojave-gtk-theme)\n\n#### Ubuntu18.04  \n--------------------------------------------------------------------------------------------\n![lockscreen.png](Ubuntu18.04-7.png)\n\n![loginscreen.png](Ubuntu18.04-8.png)\n\n1.  => [github / nojsja / login-manager-config-ubuntu](https://github.com/NoJsJa/maintenance/tree/master/code/shell/desktop/login-manager-config-ubuntu)  \n2. => /usr/share/gnome-shell/theme/ubuntu.cssImageMagick`convert -blur`SetAsWallpaper()`gnome-tweak-tool`  \n3. `/usr/share/gnome-shell/theme/gdm3.css`ubuntu18.04\n4. => CSS(UPE)\n\n#### Ubuntu18.04 plymouth\n-----------------------------------------------------------------------------\n>ubuntu[gnome-look](https://www.gnome-look.org/browse/cat/108/)[darwin](https://pan.baidu.com/s/1qv3GZ_BE-jj2HIpiI2X7yQ): `rc6u`\n1. plymouth `/usr/share/plymouth/themes`\n\n2. \n```sh\n$: sudo update-alternatives --install /usr/share/plymouth/themes/ default.plymouth default.plymouth /usr/share/plymouth/themes/[THEME]/[THEME].plymouth 100\n```\n\n3. plymouth\n```sh\n$: sudo update-alternatives --config default.plymouth\n$: sudo update-initramfs -u\n```\n\n4. \n```sh\n$: sudo gedit /usr/share/plymouth/themes/default.plymouth\n```\n`ImageDir``ScriptFile`plymouth\n```sh\nImageDir=/usr/share/plymouth/themes/[THEME]\nScriptFile=/usr/share/plymouth/themes/[THEME]/[THEME].script\n```\n\n\n#### Ubuntu18.04 [Dash to dock]dock\n---------------------------------------------------------------------------------------------\n>tweak[Dash to dock][Dash to dock]dock  \n\n![dock-noise.png](Ubuntu18.04-9.png)\n\n![dock-single.png](Ubuntu18.04-10.png)\n\n\n\n#### Ubuntu18.04 Release\n________________________________________________________\n![dock-tweak.png](Ubuntu18.04-11.png)\n\n1.  \n2. \n3.    (dists)\n\n#### Ubuntu18.04 \n____________________________________________\n=> Ubuntu18.0416.04\n```ssh\n# gdebi\n$: sudo gdebi netease-cloud-music_1.0.0_amd64_ubuntu16.04.deb\n$: Dependency is not satisfiable: libqt5libqgtk2\n# Ubuntu18.04libqt5libqgtk2qt5-style-plugins\n# libqt5libqgtk2\n```\n=> \n=> \n1. deb\n```ssh\n$: mkdir netease-cloud-music\n```\n2. \n```ssh\n$: dpkg -X netease-cloud-music_1.0.0_amd64_ubuntu16.04.deb netease-cloud-music\n```\n3. \n ```ssh\n$: dpkg -e netease-cloud-music_1.0.0_amd64_ubuntu16.04.deb neteas-cloud-music/DEBIAN/\n```\n4. (libqt5libqgtk2qt5-style-plugins)\n```ssh\n# vim\n$: vim neteas-cloud-music/DEBIAN/control\n# vimlibqt5libqgtk2\n:1,$s/libqt5libqgtk2/qt5-style-plugins/g\n# Dependslibqt5libqgtk2\n```\n5. \n```ssh\n$: dpkg-deb -b neteas-cloud-music\n$: mv neteas-cloud-music.deb netease-cloud-music_1.0.0_amd64_ubuntu18.04.deb\n```\n6. \n```ssh\n# gdebidpkg\n$: sudo gdebi netease-cloud-music_1.0.0_amd64_ubuntu18.04.deb\n$: sudo dpkg -i netease-cloud-music_1.0.0_amd64_ubuntu18.04.deb\n```\n\n#### Ubuntu18.04 Cinnamon\n-------------------------------------\n>cinnamongtkgonomegtkicondeepinCinnamonbug\n\n\n* CinnamonAPIwine/crossoverQQ/Wehcat\n* ibusfcitxfcitxsogou\n* `blueman`\n* \n* Cinnamon(gnome)``winebug\n* Cinnamon\n\n\n1. Key\n```bash\n$: sudo add-apt-repository ppa:embrosyn/cinnamon  \n$: sudo apt update && sudo apt install cinnamon\n```\n2. \n3. cinnamon\n```bash\n$: sudo apt-get install ppa-purge\n$: sudo ppa-purge ppa:embrosyn/cinnamon\n```\n\n\n#### Linux\n------------------------------------\n=> ubuntu 18.04/var  1.5G\n\n* 1\n```sh\n$: sudo apt-get clean\n$: sudo apt-get autoremove\n```\n2\n* 2\n()\n```sh\n# /var \n$: mv /var/lib /opt\n# optlibvar\n$: sudo ln -s /opt/lib /var\n```\n* 3\n/var/home/var/home/var2G-4G/home\n\n#### Shadowsocks-Qt5\n________________________\n> shadowsocksGUIQtsslocal __Release__shadowdocks-Qt5`artful`  \n\n\\> sudo add-apt-repository ppa:hzwhuang/ss-qt5  \n\\> sudo apt update  \n\\> sudo apt-get install shadowsocks-qt5  \n\n#### polipo(shadowsocks)\n________________________________________________\n* (bashzsh) => [github / nojsja / polipo-install-config.sh\"](https://github.com/NoJsJa/maintenance/tree/master/code/shell/desktop/shadowsocks-terminal)\n*   \n\\> ' hp ' == ' http_proxy=http://localhost:8123 ' for any command  \n\\> ' gp ' == 'http.proxy=localhost:8123' for git proxy config  \n\\> 1`hp curl ip.gs`\n\\> 2`git clone https://android.googlesource.com/tools/repo --config $gp`\n* polipo(`systemctl status polipo`)polipopolipo(`/etc/polipo/config`)\n#### linux\n_______________________________________________________\n>\n\n=> (ubuntu18.04) => [github / nojsja / makeIconLink](https://github.com/NoJsJa/maintenance/tree/master/code/shell/desktop/application)\n=> \n* icon(1:164px % 64px)\n* \n```sh\n$: bash makeIconLink --help\n```\n* \n```sh\n$: bash makeIconLink --dir /path/to/[exec-file] --target [exec-file-name] --icon [icon-file-name]\n```\n* \n```sh\n$: bash makeIconLink --uninstall [exec-file-name]\n```\n\n#### shadowsocks\n-------------------------------------------------------------\n> systemdshadowsocksshadowsocks-qt5FQ ~\n\n=> [startup.sh](https://github.com/NoJsJa/maintenance/blob/master/code/shell/desktop/startup.sh)[shadowsocks](https://github.com/NoJsJa/maintenance/blob/master/code/shell/desktop/shadowsocks)  \n=> \n\n* shadowsocks serviceshadow.service\n\n```sh\n[Unit]\n# \nDescription=Shadowsocks Service\n\n[Service]\nType=oneshot\n#  start/stop ()\nExecStart=/bin/bash /home/nojsja/github/maintenance/code/shell/desktop/startup.sh start\nExecStop=/bin/bash /home/nojsja/github/maintenance/code/shell/desktop/startup.sh stop\nRemainAfterExit=yes\n\n[Install]\n# \nWantedBy=multi-user.target\n```\n\n* `/etc/systemd/system`  \n\\> sudo cp shadow.service /etc/systemd/system\n*   \n\\> systemctl enable shadow\n*   \n\\> systemctl start shadow  \n\\> systemctl stop shadow\n\n#### Ubuntu18.04shadowsockspac\n________________________\n=> shadowsockspac\n```sh\n# pip\n$: sudo apt-get install python-pip python-dev build-essential\n$: sudo pip install --upgrade pip\n$: sudo pip install --upgrade virtualenv\n# pac\n$: sudo pip install genpac\n# pac\n$: mkdir ~/shadowsocks\n$: cd shadowsocks\n# proxyshadowsocks\n$: genpac --proxy=\"SOCKS5 127.0.0.1:1080\" --gfwlist-proxy=\"SOCKS5 127.0.0.1:1080\" -o autoproxy.pac --gfwlist-url=\"https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt\"\n```\n~/shadowsocksautoproxy.pac ->  ->  ->  -> file:///path/to/autoproxy.pac(pac)pac\n=> [genpac-command](https://github.com/NoJsJa/maintenance/tree/master/code/shell/desktop/shadowsocks/genpac)(user-rules.txt) autoproxy.pac\n```sh\n# # \n# \n$: bash genpac-command --help\n# \n$: bash genpac-command --update-online\n# user-rules.txt\n$: bash genpac-command --update-local\n# \n$: bash genpac-command --add-rules opendesktop.org\n# \n$: bash genpac-command --add-rules opendesktop.org atom.io\n# \n$: bash genpac-command --del-rules opendesktop.org\n# \n$: bash genpac-command --del-rules opendesktop.org atom.io\n```\n=> __pacfirefoxgoogleFQpacSwitchOmega__\n\n#### Atom\n______________________________\n>AtomVscodeSublimeBracksAtomAtomAtom45GAtomAtomatomide-typescriptAtom200~400MbAtomAtom gitrelease\n\n#### Grub2 \n_________________\n![source.png](Ubuntu18.04-12.png)\n>Grub2\n\n1.  => [Vimix](https://pan.baidu.com/s/1ioMub2JmHlIzHJbS2_2gRQ)Vimix()\n2. /boot/grubGRUB2themes\n\\> sudo mkdir -p /boot/grub/themes\n3. Vimix/boot/grub/themes\n\\> sudo cp -r Vimix /boot/grub/themes\n4. /etc/default/grub\n\\> sudo gedit /etc/default/grub\nGRUB_THEME=\"/boot/grub/themes/Vimix/theme.txt\" \n5. GRUB\n\\> sudo update-grub\n6. ()\n\n#### Ubuntu18.04 ttf-mscorefonts-installer\n_________________________________________________________\n![firefox_proxy.png](Ubuntu18.04-13.png)\n\n1. [sourceforge](http://sourceforge.net/projects/corefonts/files/the%20fonts/final/)11exe /home/nojsja/Downloads/ttf-mscorefonts-installer\n2. \n\\> sudo dpkg-reconfigure ttf-mscorefonts-installer\n3. exe /home/nojsja/Downloads/ttf-mscorefonts-installer\n\n#### Ubuntu18.04 WPS \n---------------------------------------\n[fonts](https://pan.baidu.com/s/10MushHhTXwfRIFkKGmwD7Q) (: 4jpo)Linux/usr/share/fonts\n```sh\n# \n$: sudo mkfontscale\n$: sudo mkfontdir\n# \n$: sudo fc-cache\n```\n\n#### Ubuntu18.04 WPS \n---------------------------------------\n```sh\n# 32bit\n$: sudo apt-get install libnvidia-gl-440:i386\n```\n\n#### Ubuntu20.04 deepin-screenshot\n------------------------------------------------------\n`xfce4-clipman`\n```sh\n$: sudo apt install xfce4-clipman\n```\n\n#### Ubuntu18.04 Gnome\n---------------------------------------\n```sh\n# Upgrade\n#If you were using the gnome3-team/gnome3-staging PPA, run the following before upgrading:\n$: sudo ppa-purge ppa:gnome3-team/gnome3-staging\n$: sudo ppa-purge ppa:gnome3-team/gnome3\n$: sudo apt install ubuntu-gnome-desktop^\n# The included GUI update manager will offer you the latest release of Ubuntu GNOME. Access this via the terminal:\n$: update-manager -c\n# Alternatively, run the following command:\n$: sudo do-release-upgrade\n```\n\n\n#### Win10 + Ubuntu18.04 \n______________________________________\n>UbuntuWindowsUbuntuBIOSGMT+0(GMT+8)UbuntuBIOS+88Ubuntu8BIOS0WindowsWindowsBIOSWindows0Windows8BIOSWindows8Ubuntu8+8=16\n\n1. Ubuntu\n\\> sudo apt-get install ntpdate\n\\> sudo ntpdate time.windows.com\n2. \n\\> sudo hwclock --localtime --systohc\n3. linuxwindows\n\n#### Ubuntu18.04 ()\n______________________________________________\n>  [ _GPT+UEFI_ ]  [ _MBR + LEGANCY_ ]\n1. ( gpt+uefi / mbr+legancy)\nUEFIUbuntu18.04 bios (UEFI)\"/boot \"1GB\"bios\"(UEFI/boot/boot/efi)\"/\"8G8Gswap\"bios\" -- [](https://blog.csdn.net/jesse_mx/article/details/61425361\n)\n2. (gpt+uefi )\n\"efi\"\"/boot\"(bootgrubefiUEFI)\"/\"\"\"\"efit\"\n3. (mbr+legancy)\nlegancy + mbr\"/boot\"()  \"/\"\"\"\"/boot\"\n\n#### Ubuntu 18.04 lvm\n[=> ](https://askubuntu.com/questions/1030867/how-to-diagnose-fix-very-slow-boot-on-ubuntu-18-04)\n1.  `/etc/default/grub`  `GRUB_CMDLINE_LINUX_DEFAULT` __noresume__\n```sh\nGRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash noresume\"\n```\n2. grub\n```sh\n$: sudo update-grub\n```\n3. \n\n#### Ubuntu18.04 1.1.0\n_________________________________________________\n* root\n\\> sudo netease-cloud-music > /dev/null 2>&1  &\n* session-managerbug\n\\> alias netease='unset SESSION_MANAGER && netease-cloud-music'\n\\> netease > /dev/null &\n* bug[ieaseMusic](https://github.com/trazyn/ieaseMusic)\n* ubuntu18.04[](https://github.com/innoob/netease-cloud-music)bug\n\n\n#### Ubuntu18.04 Crossover17QQ\n______________________________________________\n>ume-ui-gothic.ttf  \n\n /opt/cxoffice/share/wine/fonts [ume-ui-gothic.ttf](https://pan.baidu.com/s/13CDBKrvTAJOhrbuyLw96jA) ()ume-ui-gothic.ttf\n\n#### Ubuntu18.04 tweakgnomeBlyr\n_______________________________________________________\n=> `Error: Requiring Clutter, version none: Typelib file for namespace 'Clutter' (any version) not found ...`  \n=> Clutter\n=> \n```sh\n# \n$: sudo apt-get install gir1.2-clutter-1.0 gir1.2-clutter-gst-3.0 gir1.2-gtkclutter-1.0\n```\n\n#### Ubuntu18.04  \n---------------------------------------\nubuntu18.04gksu\n1. alias\n```bash\n$: alias gksu='pkexec env DISPLAY=$DISPLAY XAUTHORITY=$XAUTHORITY'\n```\n2.   \n```bash\n$: gksu gedit /etc/default/apport\n# `enable = 1``enable = 0`\n```\n\n#### Ubuntu18.04 Gnome-Shell \n______________________________________________\n* [CoverFlow Alt-Tab](https://extensions.gnome.org/extension/97/coverflow-alt-tab/) => Tab()\n* [User Themes()](https://extensions.gnome.org/extension/19/user-themes/) => ()\n* [Dash To Dock](https://extensions.gnome.org/extension/307/dash-to-dock/) => dock()\n* [Dash To Panel](https://extensions.gnome.org/extension/1160/dash-to-panel/) => dock()\n* [NoAnnoyance](https://extensions.gnome.org/extension/1236/noannoyance/) => pop()\n* [Autohide Battery](https://extensions.gnome.org/extension/595/autohide-battery/) => ()\n* [Places Status Indicator](https://extensions.gnome.org/extension/8/places-status-indicator/) => ()\n* [Removable Drive Menu](https://extensions.gnome.org/extension/7/removable-drive-menu/) => ()\n* [Suspend Button](https://extensions.gnome.org/extension/826/suspend-button/) => ()\n* [TopIcons](https://extensions.gnome.org/extension/495/topicons/) => ()\n* [TopIconsPlus](https://extensions.gnome.org/extension/1031/topicons/) => ()\n* [Blyr](https://extensions.gnome.org/extension/1251/blyr/) => ()\n* [Activities Configurator](https://extensions.gnome.org/extension/358/activities-configurator/) => ()\n* [Workspace to Dock](https://extensions.gnome.org/extension/427/workspaces-to-dock/) => dock()\n* [Extensions](https://extensions.gnome.org/extension/1036/extensions/) => gnome-shell()\n* [Clipboard Indicator](https://extensions.gnome.org/extension/779/clipboard-indicator/) => ()\n* [Sound Input & Output Device Chooser](https://extensions.gnome.org/extension/906/sound-output-device-chooser/) => ()\n* [NoAnnoyance](https://extensions.gnome.org/extension/1236/noannoyance/) => ()\n* [Bluetooth quick connect](https://extensions.gnome.org/extension/1401/bluetooth-quick-connect/) => ()\n* [Remove Alt+Tab Delay](https://extensions.gnome.org/extension/1403/remove-alttab-delay/) => Alt + Tab()\n* [Emoji Selector](https://extensions.gnome.org/extension/1162/emoji-selector/) => Emoji()\n\n#### Ubuntu18.04  [ Dash to dock ] \n--------------------------------------------\n```sh\n#Use Custom Dock Indicator ( Optional )\n$: gsettings set org.gnome.shell.extensions.dash-to-dock custom-theme-running-dots false\n$: gsettings set org.gnome.shell.extensions.dash-to-dock custom-theme-customize-running-dots false\n_______________________________________________________________________________________________\n\n# Disable Custom Dock Shrink ( Required for Good looking) (  Required )\n$: gsettings set org.gnome.shell.extensions.dash-to-dock custom-theme-shrink false\n_______________________________________________________________________________________________\n\n# Dock Transparency mode ( Optional )\n$: gsettings set org.gnome.shell.extensions.dash-to-dock transparency-mode DEFAULT\n_______________________________________________________________________________________________\n\n# Restore to Default\n$: dconf reset -f /org/gnome/shell/extensions/dash-to-dock/\n_______________________________________________________________________________________________\n```\n\n#### Ubuntu18.04 \n______________________________________________\n* GTK3() => [X-Arc-Collection](https://www.gnome-look.org/p/1167049/)\n* GTK3() => [McOS-themes](https://www.gnome-look.org/p/1241688)\n* Gnome Shell() => [Flat-Remix](https://github.com/daniruiz/flat-remix)\n* Gnome Shell() => [Human](https://www.gnome-look.org/p/1171095/)\n* Gnome Shell() => [macOS High Sierra](https://www.opendesktop.org/c/1460761561)\n* Gnome Shell(?) => [macOS High Sierra](https://www.gnome-look.org/p/1213208/)\n* Icon () => [flat-remix](https://github.com/daniruiz/flat-remix/releases)\n* Icon () => [Mac OS X Icon](https://www.gnome-look.org/p/1012200/)\n* Icon () => [la-capitaine-icon-theme](https://github.com/keeferrourke/la-capitaine-icon-theme/releases)\n* Icon () [McMojave-circle](https://www.pling.com/p/1305429/)\n* Icon () => [MacOS sierra ct](https://github.com/zayronxio/Macos-sierra-CT)\n* Cursor() => [Capitaine Cursors](https://krourke.org/projects/art/capitaine-cursors)\n\n#### chrome\n-----------------------------------\n* [infinity pro ](https://chrome.google.com/webstore/detail/infinity-new-tabproductiv/dbfmnekepjoapopniengjbcpnbljalfg?utm_source=InfinityNewtab) => ()\n* [Octotree](https://chrome.google.com/webstore/detail/octotree/bkhaagjahfmjljalopjnoealnfndnagc?utm_source=InfinityNewtab) => github()\n* [Postman](https://chrome.google.com/webstore/detail/postman-interceptor/aicmkgpgakddgnaphhhpliifpcfhicfo?utm_source=InfinityNewtab) => API()\n* [SwitchyOmega](https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif?utm_source=InfinityNewtab) => ()\n* [](https://chrome.google.com/webstore/detail/evernote-web-clipper/pioclpoplcdbaefihamjohnefbikjilc?utm_source=InfinityNewtab) => ()\n* [SimpRead](https://chrome.google.com/webstore/detail/simpread-reader-view/ijllcpnolfcooahcekpamkbidhejabll?utm_source=InfinityNewtab) => ()\n* [Full Page Screen Capture](https://chrome.google.com/webstore/detail/full-page-screen-capture/fdpohaocaechififmbbbbbknoalclacl?utm_source=InfinityNewtab) => ()\n* [tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?utm_source=InfinityNewtab) => badu()\n* [Checker Plus for Gmail](https://chrome.google.com/webstore/detail/checker-plus-for-gmail/oeopbcgkkoapgobdbedcemjljbihmemj?utm_source=InfinityNewtab) => Google()\n* [Vimium](https://chrome.google.com/webstore/detail/vimium/dbepggeogbaibhgnhhndojpepiihcmeb?utm_source=InfinityNewtab) => googlevim(firefox)()\n* [Markdown](https://chrome.google.com/webstore/detail/copy-as-markdown/dgoenpnkphkichnohepecnmpmihnabdg) => markdown()\n\n#### \n_______________________________\n* [fonts-firacode](https://github.com/tonsky/FiraCode/wiki/Linux-instructions#installing-with-a-package-manager) => vscode`sudo apt install fonts-firacode`\n* [vivaldi](https://vivaldi.com) => ()\n* Terminator => gnome()\n* Timeshift => ()\n* ipython3() => python()\n* jupyter => ()\n* pdb/ipdb() => python()\n* trash-cli() => ()\n* bat() => catgit()\n* axel() => 100 : )()\n* [aria2()](https://github.com/aria2/aria2) => \n* [stacer](https://github.com/oguzhaninan/Stacer) => linux()\n* [ieaseMusic](https://github.com/trazyn/ieaseMusic) => bug\\[]()\n* parallel() => ()\n* cheat() => man()\n* topgrade() => ()\n* [dbKoda](https://www.dbkoda.com/) => mongodb GUI()\n* [mongodb compass](https://www.mongodb.com/products/compass) => mongodb GUI()\n* [peek](https://github.com/phw/peek) => gif/webm/apng/webm()\n* tmux => ()\n* (ubuntu) => ()\n* (ubuntu) => ()\n* shutter => `ppa:linuxuprising/shutter`()\n* flameshot => Ubuntu20.04()\n* [WebTorrent](https://webtorrent.io/desktop/)[FrostWire](https://www.frostwire.com/) => bt()\n* [SmartGit](https://www.syntevo.com/smartgit/) => linuxGIT GUI()\n* FileZilla => ftp()\n* [e-tools](https://github.com/Suremotoo/e-tools) => coder()\n* [WhatEver](https://electronjs.org/apps/whatever) => linux()\n* [wps](http://linux.wps.cn/) => linux office for free made by KingSoftware()\n* [vscode](https://code.visualstudio.com/) =>  ()\n* ndb => node.js/javascript ()\n* [nvm](https://raw.githubusercontent.com/creationix/nvm/v0.33.0/install.sh) => nodejs\n* albert ( `ppa:noobslab/macbuntu`  ) => MacSpotLight()\n* [lftp](https://linux.cn/article-5460-1.html) => FTPFTPSHTTPHTTPSHFTPFISHSFTP\n\n* [redshift-gtk](http://jonls.dk/redshift/) \n* apt-fast => apt`ppa:apt-fast/stable`()\n* nautilus action configure tool => `ppa:daniel-marynicz/filemanager-actions`()\n* tig => git()\n* shellcheck => shell()\n* [Motrix](https://motrix.app/zh-CN/) => ()\n* [Insync](https://www.insynchq.com/) => googleonedrive()\n* [Timeshift](https://github.com/teejee2008/timeshift) => ()\n* dconf-editor => gnomegui()\n\n#### \n_______________\n![Vimix.png](Ubuntu18.04-14.png)\n\n* [Wallpaper](https://wallpapershome.com/)  => ()\n* [flaticon](https://www.flaticon.com) => svgpng\n* [Electron Apps](https://electronjs.org/apps) => Electron (Linux/Mac/Windows)()\n* [Linux](https://www.centos.bz/) => Linux()\n* [IBM Developer](https://www.ibm.com/developerworks/cn/) => ()\n* [Linux](https://www.lulinux.com/archives/2513#awk)  =>  ()\n* [bilibili](https://www.kanbilibili.com/) =>  // ()\n* [Linux](https://linux.cn/) => ()\n* [TinyPNG](https://tinypng.com/) => ()\n* [iLoveIMG](https://www.iloveimg.com/zh-cn) => ()\n* [savefrom](https://en.savefrom.net/) => youtube()\n* [Linux](https://www.lulinux.com/) => ()\n* [](https://greasyfork.org/zh-CN/scripts) => ()\n\n_Linuxer._","slug":"Ubuntu18","published":1,"updated":"2020-09-17T01:06:08.841Z","_id":"cjwsnsgtf002kin9505eb060b","comments":1,"layout":"post","photos":[],"link":"","content":"<p><img src=\"Ubuntu18.04-1.jpg\" alt=\"welcome / home\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><ul><li>WineWineSystemTray </li><li>Home</li><li>Ubuntudeepin wine QQ</li><li>QQ/</li><li>Ubuntu 18.04</li><li>oh-my-zsh</li><li>Terminator</li><li></li><li></li><li>crossover18</li><li>vim</li><li>Ubuntu18.04 Mac</li><li>Ubuntu18.04  </li><li>Ubuntu18.04 plymouth</li><li>Ubuntu18.04 [Dash to dock]dock</li><li>Ubuntu18.04 Release</li><li>Ubuntu18.04 </li><li>Ubuntu18.04 cinnamon</li><li>Linux</li><li>Shadowsocks-Qt5</li><li>polipo(shadowsocks)</li><li>linux</li><li>shadowsocks</li><li>Ubuntu18.04shadowsockspac</li><li>Atom</li><li>Grub2 </li><li>Ubuntu18.04 ttf-mscorefonts-installer</li><li>Ubuntu18.04 WPS </li><li>Ubuntu20.04 deepin-screenshot</li><li>Ubuntu18.04 Gnome</li><li>Win10 + Ubuntu18.04 </li><li>Ubuntu18.04 ()</li><li>Ubuntu 18.04 lvm</li><li>Ubuntu18.04 1.1.0</li><li>Ubuntu18.04 Crossover17QQ</li><li>Ubuntu18.04 tweakgnomeBlyr</li><li>Ubuntu18.04  </li><li>Ubuntu18.04 Gnome-Shell </li><li>Ubuntu18.04  [ Dash to dock ] </li><li>Ubuntu18.04 </li><li>chrome</li><li></li><li></li></ul><h4 id=\"WineWineSystemTray\"><a href=\"#WineWineSystemTray\" class=\"headerlink\" title=\"WineWineSystemTray\"></a>WineWineSystemTray</h4><hr><p><img src=\"Ubuntu18.04-2.png\" alt=\"wine_tray.png\"></p><p><img src=\"Ubuntu18.04-3.png\" alt=\"tray.png\"></p><ol><li><p>Linux Mint18.3<br>() -  - +Wine</p></li><li><p>Ubuntu 18.04<br>gnome-shell <a href=\"https://extensions.gnome.org/extension/495/topicons/\" target=\"_blank\" rel=\"noopener\">TopIcons</a>, TopIconsgnomechrome-gnome-shell (<code>sudo apt install chrome-gnome-shell</code> )deepin QQTopIconsQQ<a href=\"https://extensions.gnome.org/extension/1160/dash-to-panel/\" target=\"_blank\" rel=\"noopener\">Dash to Panel</a></p></li></ol><h4 id=\"Home\"><a href=\"#Home\" class=\"headerlink\" title=\"Home\"></a>Home</h4><hr><ol><li><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: <span class=\"built_in\">export</span> LANG=en_US(-&gt; zh_CN)</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: xdg-user-dirs-gtk-update</span><br></pre></td></tr></table></figure></li><li> []</li><li> []  [] </li></ol><h4 id=\"Ubuntudeepin-wine-QQ\"><a href=\"#Ubuntudeepin-wine-QQ\" class=\"headerlink\" title=\"Ubuntudeepin wine QQ\"></a>Ubuntudeepin wine QQ</h4><hr><ol><li><p>deepin-wine<a href=\"https://gitee.com/wszqkzqk/deepin-wine-for-ubuntu\" target=\"_blank\" rel=\"noopener\">https://gitee.com/wszqkzqk/deepin-wine-for-ubuntu</a>zipgit<a href=\"https://pan.baidu.com/s/120C5aHuqtyxQyn_fGTxHKg\" target=\"_blank\" rel=\"noopener\"></a><code>sudo sh ./install.sh</code>deb(deb)</p></li><li><p>deepin.com<a href=\"http://mirrors.aliyun.com/deepin/pool/non-free/d/\" target=\"_blank\" rel=\"noopener\">http://mirrors.aliyun.com/deepin/pool/non-free/d/</a>deb:</p></li></ol><ul><li>QQ<a href=\"http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im/\" target=\"_blank\" rel=\"noopener\">http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im/</a></li><li>TIM<a href=\"http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.office/\" target=\"_blank\" rel=\"noopener\">http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.office/</a></li><li>QQ<a href=\"http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im.light/\" target=\"_blank\" rel=\"noopener\">http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im.light/</a></li><li><a href=\"http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.wechat/\" target=\"_blank\" rel=\"noopener\">http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.wechat/</a></li><li>Foxmail<a href=\"http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.foxmail/\" target=\"_blank\" rel=\"noopener\">http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.foxmail/</a></li><li><a href=\"http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.baidu.pan/\" target=\"_blank\" rel=\"noopener\">http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.baidu.pan/</a></li><li>360<a href=\"http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.cn.360.yasuo/\" target=\"_blank\" rel=\"noopener\">http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.cn.360.yasuo/</a></li><li>: <a href=\"https://pan.baidu.com/s/1cij1FhFeEn2sXdPtkJ3lSg\" target=\"_blank\" rel=\"noopener\">https://pan.baidu.com/s/1cij1FhFeEn2sXdPtkJ3lSg</a></li><li>UbuntuUbuntuLinuxMintZorinOS</li></ul><h4 id=\"QQ-\"><a href=\"#QQ-\" class=\"headerlink\" title=\"QQ/\"></a>QQ/</h4><hr><p>1.linux: <a href=\"https://github.com/geeeeeeeeek/electronic-wechat\" target=\"_blank\" rel=\"noopener\">electronic-wechat</a><a href=\"https://github.com/trazyn/weweChat\" target=\"_blank\" rel=\"noopener\">weweChat</a>crossoverwindows</p><p>2.140CrossOver18QQ8.9TIMTIM crossoverQQbugcrossover18windowscrossoverwindowsXP 64<code>&quot;WeChatWin.dll &quot;</code><br></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: apt-get install libldap-2.4-2:i386</span><br></pre></td></tr></table></figure><p></p><p>3.docker<a href=\"https://hub.docker.com/r/bestwu/qq\" target=\"_blank\" rel=\"noopener\">Tim</a>  <a href=\"https://hub.docker.com/r/bestwu/wechat\" target=\"_blank\" rel=\"noopener\">wechat</a><a href=\"https://www.runoob.com/docker/ubuntu-docker-install.html\" target=\"_blank\" rel=\"noopener\">docker</a></p><p>4.wine(crossover/deepin)()<a href=\"https://pan.baidu.com/s/1-ScZvkmR9oZPdiFurdKQdA\" target=\"_blank\" rel=\"noopener\">riched20.dll</a>(rofj)C<code>/windows/system32/riched20.dll</code><code>~/.cxoffice/[]/drive_c/</code></p><p>5.wine(crossover/deepin)(:,)</p><p>6.wine(crossover/deepin) <code>sudo apt install libjpeg62:i386</code><code></code></p><p>7.wine(crossover/deepin)QQ()QQ(http/socks)localhost/127.0.0.1IP0.0.0.0</p><h4 id=\"Ubuntu-18-04\"><a href=\"#Ubuntu-18-04\" class=\"headerlink\" title=\"Ubuntu 18.04\"></a>Ubuntu 18.04</h4><hr><p>=&gt; <br></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">systemd-analyze blame</span><br><span class=\"line\"><span class=\"comment\"># plymouth</span></span><br><span class=\"line\">sudo systemctl mask plymouth-start.service</span><br><span class=\"line\">sudo systemctl mask plymouth-read-write.service</span><br></pre></td></tr></table></figure><p></p><h4 id=\"oh-my-zsh\"><a href=\"#oh-my-zsh\" class=\"headerlink\" title=\"oh-my-zsh\"></a>oh-my-zsh</h4><hr><ol><li></li></ol><ul><li>gnzh())</li><li>ys</li><li>avit</li><li>af-magic</li></ul><ol><li></li></ol><ul><li>git =&gt; git</li><li>svn =&gt; svn</li><li>colored-man-pages =&gt; man</li><li>zsh-syntax-highlighting =&gt; </li><li>z =&gt; </li><li>zsh-autosuggestions =&gt; </li></ul><h4 id=\"Terminator\"><a href=\"#Terminator\" class=\"headerlink\" title=\"Terminator\"></a>Terminator</h4><hr><p></p><p><code>-&gt;-&gt;-&gt;</code><br><code>Ctrl+Alt+T</code><code>terminator --geometry=93x32+450+300</code>geometry</p><p><code>~/.config/terminator/config</code></p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  [global_config]</span><br><span class=\"line\">  enabled_plugins = CustomCommandsMenu, LaunchpadCodeURLHandler, APTURLHandler, LaunchpadBugURLHandler</span><br><span class=\"line\">  suppress_multiple_term_dialog = True</span><br><span class=\"line\">  title_hide_sizetext = True</span><br><span class=\"line\">[keybindings]</span><br><span class=\"line\">  prev_tab = &lt;Alt&gt;1</span><br><span class=\"line\">  reset_clear = &lt;Primary&gt;&lt;Shift&gt;g</span><br><span class=\"line\">  clear = &lt;Primary&gt;l</span><br><span class=\"line\">  switch_to_tab_1 = &lt;Alt&gt;1</span><br><span class=\"line\">  switch_to_tab_2 = &lt;Alt&gt;2</span><br><span class=\"line\">  switch_to_tab_3 = &lt;Alt&gt;3</span><br><span class=\"line\">  switch_to_tab_4 = &lt;Alt&gt;4</span><br><span class=\"line\">  switch_to_tab_5 = &lt;Alt&gt;5</span><br><span class=\"line\">  toggle_scrollbar = None</span><br><span class=\"line\">  toggle_zoom = &lt;Primary&gt;&lt;Shift&gt;x</span><br><span class=\"line\">[layouts]</span><br><span class=\"line\">  [[default]]</span><br><span class=\"line\">    [[[child1]]]</span><br><span class=\"line\">      parent = window0</span><br><span class=\"line\">      profile = default</span><br><span class=\"line\">      <span class=\"built_in\">type</span> = Terminal</span><br><span class=\"line\">    [[[window0]]]</span><br><span class=\"line\">      parent = <span class=\"string\">\"\"</span></span><br><span class=\"line\">      size = 925, 570</span><br><span class=\"line\">      <span class=\"built_in\">type</span> = Window</span><br><span class=\"line\">[plugins]</span><br><span class=\"line\">  [[CustomCommandsMenu]]</span><br><span class=\"line\">    [[[]]]</span><br><span class=\"line\">      <span class=\"built_in\">command</span> = clear</span><br><span class=\"line\">      enabled = True</span><br><span class=\"line\">      name = </span><br><span class=\"line\">      position = 0</span><br><span class=\"line\">[profiles]</span><br><span class=\"line\">  [[default]]</span><br><span class=\"line\">    allow_bold = False</span><br><span class=\"line\">    background_color = <span class=\"string\">\"#fbfbfb\"</span></span><br><span class=\"line\">    background_darkness = 0.93</span><br><span class=\"line\">    background_type = transparent</span><br><span class=\"line\">    copy_on_selection = True</span><br><span class=\"line\">    cursor_color = <span class=\"string\">\"#aaaaaa\"</span></span><br><span class=\"line\">    cursor_shape = ibeam</span><br><span class=\"line\">    font = Ubuntu Light 12</span><br><span class=\"line\">    foreground_color = <span class=\"string\">\"#49494a\"</span></span><br><span class=\"line\">    palette = <span class=\"string\">\"#2e3436:#ee6a6a:#38690a:#b3adb0:#3465a4:#75507b:#06989a:#d3d7cf:#979b93:#fe5f5f:#7fd42c:#b7afb1:#729fcf:#ad7fa8:#34e2e2:#eeeeec\"</span></span><br><span class=\"line\">    scroll_on_keystroke = False</span><br><span class=\"line\">    scrollbar_position = hidden</span><br><span class=\"line\">    show_titlebar = False</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: dpkg --get-selections |grep linux-image</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: uname -a</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: sudo apt-get remove</span><br><span class=\"line\">$: linux-image-x.xx.x-xx-generic</span><br><span class=\"line\">$: sudo apt-get remove  </span><br><span class=\"line\">$: linux-image-extra-x.xx.x-xx-generic  </span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: sudo dpkg --purge linux-image-x.x.x-xx-generic</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: sudo apt-mark hold linux-image-x.xx.x-xx-generic</span><br><span class=\"line\">$: sudo apt-mark hold linux-image-extra-x.xx.x-xx-generic</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: sudo apt-mark unhold linux-image-x.xx.x-xx-generic</span><br><span class=\"line\">$: sudo apt-mark unhold linux-image-extra-x.xx.x-xx-generic</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><ul><li>AR PL UKai CN 12</li><li>Bitstream Vera Sans Mono 10</li><li>Courier 10 Pitch 11</li><li>DejaVu Sans Mono 10</li><li>FreeMono 11</li><li>Nimbus Mono L 12</li><li>TlwgMono 11</li></ul><h4 id=\"crossover18\"><a href=\"#crossover18\" class=\"headerlink\" title=\"crossover18\"></a>crossover18</h4><hr><p> <a href=\"https://pan.baidu.com/s/1BnT-cAKf-SBp-6J4CQoo-g\" target=\"_blank\" rel=\"noopener\">CrossoverPatch</a> <code>: ffp0</code><br></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  </span></span><br><span class=\"line\">$: cp ~/cxoffice/lib/wine/winewrapper.exe.so ~/cxoffice/lib/wine/winewrapper.exe.so-bak</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: cp CrossoverPatch/winewrapper.exe.so ~/cxoffice/lib/wine</span><br></pre></td></tr></table></figure><p></p><h4 id=\"vim\"><a href=\"#vim\" class=\"headerlink\" title=\"vim\"></a>vim</h4><hr><ol><li><a href=\"https://github.com/VundleVim/Vundle.vim\" target=\"_blank\" rel=\"noopener\">Vundle</a> =&gt; .vimrc<code>vim +PluginInstall</code></li><li><a href=\"https://github.com/vim-airline/vim-airline\" target=\"_blank\" rel=\"noopener\">vim-airline</a> =&gt; </li><li><a href=\"https://juejin.im/post/5a38c37f6fb9a0450909a151\" target=\"_blank\" rel=\"noopener\"></a></li></ol><h4 id=\"Ubuntu18-04-Mac\"><a href=\"#Ubuntu18-04-Mac\" class=\"headerlink\" title=\"Ubuntu18.04 Mac\"></a>Ubuntu18.04 Mac</h4><hr><p><img src=\"Ubuntu18.04-5.png\" alt=\"overview.png\"></p><p><img src=\"Ubuntu18.04-6.png\" alt=\"desktop.png\"></p><ol><li>gnome-tweak-tool  chrome-gnome-shell  (<code>sudo aptitude install [name]</code>)</li><li>GTK3 =&gt; <a href=\"https://www.gnome-look.org/p/1167049/\" target=\"_blank\" rel=\"noopener\">X-Arc-Collection</a></li><li>tweak =&gt; tweak      X-Arc-Collection</li><li>gnome-shell  =&gt; <a href=\"https://www.gnome-look.org/p/1167049/\" target=\"_blank\" rel=\"noopener\">macOS High Sierra</a></li><li>gnome-shell  =&gt; <a href=\"https://extensions.gnome.org/extension/19/user-themes/\" target=\"_blank\" rel=\"noopener\">User Themes</a> ( Gnome =&gt; [Alt + F2] &amp; [ r] &amp; [ Enter] )</li><li>tweakshell =&gt; tweak    shell  Sierra shell</li><li>Mac <a href=\"https://github.com/keeferrourke/la-capitaine-icon-theme/releases\" target=\"_blank\" rel=\"noopener\">la-capitaine-icon-theme</a>  <a href=\"https://www.pling.com/p/1305429/\" target=\"_blank\" rel=\"noopener\">McMojave-circle</a></li><li> ~/.icons()</li><li>tweakicon =&gt; tweak      </li><li>gnome-shell =&gt; Dash to dock (dockdock)</li><li>firefox =&gt; <a href=\"https://github.com/vinceliuice/Mojave-gtk-theme\" target=\"_blank\" rel=\"noopener\">Majave-gtk-theme</a></li></ol><h4 id=\"Ubuntu18-04--\"><a href=\"#Ubuntu18-04--\" class=\"headerlink\" title=\"Ubuntu18.04  \"></a>Ubuntu18.04  </h4><hr><p><img src=\"Ubuntu18.04-7.png\" alt=\"lockscreen.png\"></p><p><img src=\"Ubuntu18.04-8.png\" alt=\"loginscreen.png\"></p><ol><li> =&gt; <a href=\"https://github.com/NoJsJa/maintenance/tree/master/code/shell/desktop/login-manager-config-ubuntu\" target=\"_blank\" rel=\"noopener\">github / nojsja / login-manager-config-ubuntu</a></li><li>=&gt; /usr/share/gnome-shell/theme/ubuntu.cssImageMagick<code>convert -blur</code>SetAsWallpaper()<code>gnome-tweak-tool</code></li><li><code>/usr/share/gnome-shell/theme/gdm3.css</code>ubuntu18.04</li><li>=&gt; CSS(UPE)</li></ol><h4 id=\"Ubuntu18-04-plymouth\"><a href=\"#Ubuntu18-04-plymouth\" class=\"headerlink\" title=\"Ubuntu18.04 plymouth\"></a>Ubuntu18.04 plymouth</h4><hr><blockquote><p>ubuntu<a href=\"https://www.gnome-look.org/browse/cat/108/\" target=\"_blank\" rel=\"noopener\">gnome-look</a><a href=\"https://pan.baidu.com/s/1qv3GZ_BE-jj2HIpiI2X7yQ\" target=\"_blank\" rel=\"noopener\">darwin</a>: <code>rc6u</code></p><ol><li>plymouth <code>/usr/share/plymouth/themes</code></li></ol></blockquote><ol><li><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo update-alternatives --install /usr/share/plymouth/themes/ default.plymouth default.plymouth /usr/share/plymouth/themes/[THEME]/[THEME].plymouth 100</span><br></pre></td></tr></table></figure></li><li><p>plymouth</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo update-alternatives --config default.plymouth</span><br><span class=\"line\">$: sudo update-initramfs -u</span><br></pre></td></tr></table></figure></li><li><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo gedit /usr/share/plymouth/themes/default.plymouth</span><br></pre></td></tr></table></figure><p><code>ImageDir</code><code>ScriptFile</code>plymouth</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ImageDir=/usr/share/plymouth/themes/[THEME]</span><br><span class=\"line\">ScriptFile=/usr/share/plymouth/themes/[THEME]/[THEME].script</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"Ubuntu18-04--Dash-to-dock-dock\"><a href=\"#Ubuntu18-04--Dash-to-dock-dock\" class=\"headerlink\" title=\"Ubuntu18.04 [Dash to dock]dock\"></a>Ubuntu18.04 [Dash to dock]dock</h4><hr><blockquote><p>tweak[Dash to dock][Dash to dock]dock</p></blockquote><p><img src=\"Ubuntu18.04-9.png\" alt=\"dock-noise.png\"></p><p><img src=\"Ubuntu18.04-10.png\" alt=\"dock-single.png\"></p><h4 id=\"Ubuntu18-04-Release\"><a href=\"#Ubuntu18-04-Release\" class=\"headerlink\" title=\"Ubuntu18.04 Release\"></a>Ubuntu18.04 Release</h4><hr><p><img src=\"Ubuntu18.04-11.png\" alt=\"dock-tweak.png\"></p><ol><li> </li><li></li><li>   (dists)</li></ol><h4 id=\"Ubuntu18-04-\"><a href=\"#Ubuntu18-04-\" class=\"headerlink\" title=\"Ubuntu18.04 \"></a>Ubuntu18.04 </h4><hr><p>=&gt; Ubuntu18.0416.04<br></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># gdebi</span><br><span class=\"line\">$: sudo gdebi netease-cloud-music_1.0.0_amd64_ubuntu16.04.deb</span><br><span class=\"line\">$: Dependency is not satisfiable: libqt5libqgtk2</span><br><span class=\"line\"># Ubuntu18.04libqt5libqgtk2qt5-style-plugins</span><br><span class=\"line\"># libqt5libqgtk2</span><br></pre></td></tr></table></figure><br>=&gt; <br>=&gt; <p></p><ol><li>deb<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: mkdir netease-cloud-music</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: dpkg -X netease-cloud-music_1.0.0_amd64_ubuntu16.04.deb netease-cloud-music</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: dpkg -e netease-cloud-music_1.0.0_amd64_ubuntu16.04.deb neteas-cloud-music&#x2F;DEBIAN&#x2F;</span><br></pre></td></tr></table></figure></li><li>(libqt5libqgtk2qt5-style-plugins)<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># vim</span><br><span class=\"line\">$: vim neteas-cloud-music&#x2F;DEBIAN&#x2F;control</span><br><span class=\"line\"># vimlibqt5libqgtk2</span><br><span class=\"line\">:1,$s&#x2F;libqt5libqgtk2&#x2F;qt5-style-plugins&#x2F;g</span><br><span class=\"line\"># Dependslibqt5libqgtk2</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: dpkg-deb -b neteas-cloud-music</span><br><span class=\"line\">$: mv neteas-cloud-music.deb netease-cloud-music_1.0.0_amd64_ubuntu18.04.deb</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># gdebidpkg</span><br><span class=\"line\">$: sudo gdebi netease-cloud-music_1.0.0_amd64_ubuntu18.04.deb</span><br><span class=\"line\">$: sudo dpkg -i netease-cloud-music_1.0.0_amd64_ubuntu18.04.deb</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"Ubuntu18-04-Cinnamon\"><a href=\"#Ubuntu18-04-Cinnamon\" class=\"headerlink\" title=\"Ubuntu18.04 Cinnamon\"></a>Ubuntu18.04 Cinnamon</h4><hr><blockquote><p>cinnamongtkgonomegtkicondeepinCinnamonbug</p></blockquote><p></p><ul><li>CinnamonAPIwine/crossoverQQ/Wehcat</li><li>ibusfcitxfcitxsogou</li><li><code>blueman</code></li><li></li><li>Cinnamon(gnome)<code></code>winebug</li><li>Cinnamon</li></ul><p></p><ol><li>Key<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo add-apt-repository ppa:embrosyn/cinnamon  </span><br><span class=\"line\">$: sudo apt update &amp;&amp; sudo apt install cinnamon</span><br></pre></td></tr></table></figure></li><li></li><li>cinnamon<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo apt-get install ppa-purge</span><br><span class=\"line\">$: sudo ppa-purge ppa:embrosyn/cinnamon</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h4><hr><p>=&gt; ubuntu 18.04/var  1.5G</p><ul><li>1<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo apt-get clean</span><br><span class=\"line\">$: sudo apt-get autoremove</span><br></pre></td></tr></table></figure>2</li><li>2<br>()<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># /var </span></span><br><span class=\"line\">$: mv /var/lib /opt</span><br><span class=\"line\"><span class=\"comment\"># optlibvar</span></span><br><span class=\"line\">$: sudo ln -s /opt/lib /var</span><br></pre></td></tr></table></figure></li><li>3<br>/var/home/var/home/var2G-4G/home</li></ul><h4 id=\"Shadowsocks-Qt5\"><a href=\"#Shadowsocks-Qt5\" class=\"headerlink\" title=\"Shadowsocks-Qt5\"></a>Shadowsocks-Qt5</h4><hr><blockquote><p>shadowsocksGUIQtsslocal <strong>Release</strong>shadowdocks-Qt5<code>artful</code></p></blockquote><p>> sudo add-apt-repository ppa:hzwhuang/ss-qt5<br>> sudo apt update<br>> sudo apt-get install shadowsocks-qt5</p><h4 id=\"polipo-shadowsocks\"><a href=\"#polipo-shadowsocks\" class=\"headerlink\" title=\"polipo(shadowsocks)\"></a>polipo(shadowsocks)</h4><hr><ul><li>(bashzsh) =&gt; <a href=\"https://github.com/NoJsJa/maintenance/tree/master/code/shell/desktop/shadowsocks-terminal\" target=\"_blank\" rel=\"noopener\">github / nojsja / polipo-install-config.sh</a></li><li><br>>  hp  ==  http_proxy=<a href=\"http://localhost:8123\" target=\"_blank\" rel=\"noopener\">http://localhost:8123</a>  for any command<br>>  gp  == http.proxy=localhost:8123 for git proxy config<br>> 1<code>hp curl ip.gs</code><br>> 2<code>git clone https://android.googlesource.com/tools/repo --config $gp</code></li><li>polipo(<code>systemctl status polipo</code>)polipopolipo(<code>/etc/polipo/config</code>)<h4 id=\"linux\"><a href=\"#linux\" class=\"headerlink\" title=\"linux\"></a>linux</h4></li></ul><hr><blockquote><p></p></blockquote><p>=&gt; (ubuntu18.04) =&gt; <a href=\"https://github.com/NoJsJa/maintenance/tree/master/code/shell/desktop/application\" target=\"_blank\" rel=\"noopener\">github / nojsja / makeIconLink</a><br>=&gt; </p><ul><li>icon(1:164px % 64px)</li><li><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: bash makeIconLink --<span class=\"built_in\">help</span></span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: bash makeIconLink --dir /path/to/[<span class=\"built_in\">exec</span>-file] --target [<span class=\"built_in\">exec</span>-file-name] --icon [icon-file-name]</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: bash makeIconLink --uninstall [<span class=\"built_in\">exec</span>-file-name]</span><br></pre></td></tr></table></figure></li></ul><h4 id=\"shadowsocks\"><a href=\"#shadowsocks\" class=\"headerlink\" title=\"shadowsocks\"></a>shadowsocks</h4><hr><blockquote><p>systemdshadowsocksshadowsocks-qt5FQ ~</p></blockquote><p>=&gt; <a href=\"https://github.com/NoJsJa/maintenance/blob/master/code/shell/desktop/startup.sh\" target=\"_blank\" rel=\"noopener\">startup.sh</a><a href=\"https://github.com/NoJsJa/maintenance/blob/master/code/shell/desktop/shadowsocks\" target=\"_blank\" rel=\"noopener\">shadowsocks</a><br>=&gt; </p><ul><li>shadowsocks serviceshadow.service</li></ul><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">Description=Shadowsocks Service</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=oneshot</span><br><span class=\"line\"><span class=\"comment\">#  start/stop ()</span></span><br><span class=\"line\">ExecStart=/bin/bash /home/nojsja/github/maintenance/code/shell/desktop/startup.sh start</span><br><span class=\"line\">ExecStop=/bin/bash /home/nojsja/github/maintenance/code/shell/desktop/startup.sh stop</span><br><span class=\"line\">RemainAfterExit=yes</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><ul><li><code>/etc/systemd/system</code><br>> sudo cp shadow.service /etc/systemd/system</li><li><br>> systemctl enable shadow</li><li><br>> systemctl start shadow<br>> systemctl stop shadow</li></ul><h4 id=\"Ubuntu18-04shadowsockspac\"><a href=\"#Ubuntu18-04shadowsockspac\" class=\"headerlink\" title=\"Ubuntu18.04shadowsockspac\"></a>Ubuntu18.04shadowsockspac</h4><hr><p>=&gt; shadowsockspac<br></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># pip</span></span><br><span class=\"line\">$: sudo apt-get install python-pip python-dev build-essential</span><br><span class=\"line\">$: sudo pip install --upgrade pip</span><br><span class=\"line\">$: sudo pip install --upgrade virtualenv</span><br><span class=\"line\"><span class=\"comment\"># pac</span></span><br><span class=\"line\">$: sudo pip install genpac</span><br><span class=\"line\"><span class=\"comment\"># pac</span></span><br><span class=\"line\">$: mkdir ~/shadowsocks</span><br><span class=\"line\">$: <span class=\"built_in\">cd</span> shadowsocks</span><br><span class=\"line\"><span class=\"comment\"># proxyshadowsocks</span></span><br><span class=\"line\">$: genpac --proxy=<span class=\"string\">\"SOCKS5 127.0.0.1:1080\"</span> --gfwlist-proxy=<span class=\"string\">\"SOCKS5 127.0.0.1:1080\"</span> -o autoproxy.pac --gfwlist-url=<span class=\"string\">\"https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt\"</span></span><br></pre></td></tr></table></figure><br>~/shadowsocksautoproxy.pac -&gt;  -&gt;  -&gt;  -&gt; file:///path/to/autoproxy.pac(pac)pac<br>=&gt; <a href=\"https://github.com/NoJsJa/maintenance/tree/master/code/shell/desktop/shadowsocks/genpac\" target=\"_blank\" rel=\"noopener\">genpac-command</a>(user-rules.txt) autoproxy.pac<br><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># # </span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: bash genpac-command --<span class=\"built_in\">help</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: bash genpac-command --update-online</span><br><span class=\"line\"><span class=\"comment\"># user-rules.txt</span></span><br><span class=\"line\">$: bash genpac-command --update-local</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: bash genpac-command --add-rules opendesktop.org</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: bash genpac-command --add-rules opendesktop.org atom.io</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: bash genpac-command --del-rules opendesktop.org</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: bash genpac-command --del-rules opendesktop.org atom.io</span><br></pre></td></tr></table></figure><br>=&gt; <strong>pacfirefoxgoogleFQpacSwitchOmega</strong><p></p><h4 id=\"Atom\"><a href=\"#Atom\" class=\"headerlink\" title=\"Atom\"></a>Atom</h4><hr><blockquote><p>AtomVscodeSublimeBracksAtomAtomAtom45GAtomAtomatomide-typescriptAtom200~400MbAtomAtom gitrelease</p></blockquote><h4 id=\"Grub2-\"><a href=\"#Grub2-\" class=\"headerlink\" title=\"Grub2 \"></a>Grub2 </h4><hr><p><img src=\"Ubuntu18.04-12.png\" alt=\"source.png\"></p><blockquote><p>Grub2</p></blockquote><ol><li> =&gt; <a href=\"https://pan.baidu.com/s/1ioMub2JmHlIzHJbS2_2gRQ\" target=\"_blank\" rel=\"noopener\">Vimix</a>Vimix()</li><li>/boot/grubGRUB2themes<br>> sudo mkdir -p /boot/grub/themes</li><li>Vimix/boot/grub/themes<br>> sudo cp -r Vimix /boot/grub/themes</li><li>/etc/default/grub<br>> sudo gedit /etc/default/grub<br>GRUB_THEME=/boot/grub/themes/Vimix/theme.txt </li><li>GRUB<br>> sudo update-grub</li><li>()</li></ol><h4 id=\"Ubuntu18-04-ttf-mscorefonts-installer\"><a href=\"#Ubuntu18-04-ttf-mscorefonts-installer\" class=\"headerlink\" title=\"Ubuntu18.04 ttf-mscorefonts-installer\"></a>Ubuntu18.04 ttf-mscorefonts-installer</h4><hr><p><img src=\"Ubuntu18.04-13.png\" alt=\"firefox_proxy.png\"></p><ol><li><a href=\"http://sourceforge.net/projects/corefonts/files/the%20fonts/final/\" target=\"_blank\" rel=\"noopener\">sourceforge</a>11exe /home/nojsja/Downloads/ttf-mscorefonts-installer</li><li><br>> sudo dpkg-reconfigure ttf-mscorefonts-installer</li><li>exe /home/nojsja/Downloads/ttf-mscorefonts-installer</li></ol><h4 id=\"Ubuntu18-04-WPS-\"><a href=\"#Ubuntu18-04-WPS-\" class=\"headerlink\" title=\"Ubuntu18.04 WPS \"></a>Ubuntu18.04 WPS </h4><hr><p><a href=\"https://pan.baidu.com/s/10MushHhTXwfRIFkKGmwD7Q\" target=\"_blank\" rel=\"noopener\">fonts</a> (: 4jpo)Linux/usr/share/fonts<br></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: sudo mkfontscale</span><br><span class=\"line\">$: sudo mkfontdir</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: sudo <span class=\"built_in\">fc</span>-cache</span><br></pre></td></tr></table></figure><p></p><h4 id=\"Ubuntu18-04-WPS--1\"><a href=\"#Ubuntu18-04-WPS--1\" class=\"headerlink\" title=\"Ubuntu18.04 WPS \"></a>Ubuntu18.04 WPS </h4><hr><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 32bit</span></span><br><span class=\"line\">$: sudo apt-get install libnvidia-gl-440:i386</span><br></pre></td></tr></table></figure><h4 id=\"Ubuntu20-04-deepin-screenshot\"><a href=\"#Ubuntu20-04-deepin-screenshot\" class=\"headerlink\" title=\"Ubuntu20.04 deepin-screenshot\"></a>Ubuntu20.04 deepin-screenshot</h4><hr><p><code>xfce4-clipman</code><br></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo apt install xfce4-clipman</span><br></pre></td></tr></table></figure><p></p><h4 id=\"Ubuntu18-04-Gnome\"><a href=\"#Ubuntu18-04-Gnome\" class=\"headerlink\" title=\"Ubuntu18.04 Gnome\"></a>Ubuntu18.04 Gnome</h4><hr><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Upgrade</span></span><br><span class=\"line\"><span class=\"comment\">#If you were using the gnome3-team/gnome3-staging PPA, run the following before upgrading:</span></span><br><span class=\"line\">$: sudo ppa-purge ppa:gnome3-team/gnome3-staging</span><br><span class=\"line\">$: sudo ppa-purge ppa:gnome3-team/gnome3</span><br><span class=\"line\">$: sudo apt install ubuntu-gnome-desktop^</span><br><span class=\"line\"><span class=\"comment\"># The included GUI update manager will offer you the latest release of Ubuntu GNOME. Access this via the terminal:</span></span><br><span class=\"line\">$: update-manager -c</span><br><span class=\"line\"><span class=\"comment\"># Alternatively, run the following command:</span></span><br><span class=\"line\">$: sudo <span class=\"keyword\">do</span>-release-upgrade</span><br></pre></td></tr></table></figure><h4 id=\"Win10-Ubuntu18-04-\"><a href=\"#Win10-Ubuntu18-04-\" class=\"headerlink\" title=\"Win10 + Ubuntu18.04 \"></a>Win10 + Ubuntu18.04 </h4><hr><blockquote><p>UbuntuWindowsUbuntuBIOSGMT+0(GMT+8)UbuntuBIOS+88Ubuntu8BIOS0WindowsWindowsBIOSWindows0Windows8BIOSWindows8Ubuntu8+8=16</p></blockquote><ol><li>Ubuntu<br>> sudo apt-get install ntpdate<br>> sudo ntpdate time.windows.com</li><li><br>> sudo hwclock localtime systohc</li><li>linuxwindows</li></ol><h4 id=\"Ubuntu18-04--\"><a href=\"#Ubuntu18-04--\" class=\"headerlink\" title=\"Ubuntu18.04 ()\"></a>Ubuntu18.04 ()</h4><hr><blockquote><p> [ <em>GPT+UEFI</em> ]  [ <em>MBR + LEGANCY</em> ]</p><ol><li>( gpt+uefi / mbr+legancy)<br>UEFIUbuntu18.04 bios (UEFI)/boot 1GBbios(UEFI/boot/boot/efi)/8G8Gswapbios  <a href=\"https://blog.csdn.net/jesse_mx/article/details/61425361\" target=\"_blank\" rel=\"noopener\"></a></li><li>(gpt+uefi )<br>efi/boot(bootgrubefiUEFI)/efit</li><li>(mbr+legancy)<br>legancy + mbr/boot()  //boot</li></ol></blockquote><h4 id=\"Ubuntu-18-04-lvm\"><a href=\"#Ubuntu-18-04-lvm\" class=\"headerlink\" title=\"Ubuntu 18.04 lvm\"></a>Ubuntu 18.04 lvm</h4><p><a href=\"https://askubuntu.com/questions/1030867/how-to-diagnose-fix-very-slow-boot-on-ubuntu-18-04\" target=\"_blank\" rel=\"noopener\">=&gt; </a></p><ol><li> <code>/etc/default/grub</code>  <code>GRUB_CMDLINE_LINUX_DEFAULT</code> <strong>noresume</strong><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GRUB_CMDLINE_LINUX_DEFAULT=<span class=\"string\">\"quiet splash noresume\"</span></span><br></pre></td></tr></table></figure></li><li>grub<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo update-grub</span><br></pre></td></tr></table></figure></li><li></li></ol><h4 id=\"Ubuntu18-04-1-1-0\"><a href=\"#Ubuntu18-04-1-1-0\" class=\"headerlink\" title=\"Ubuntu18.04 1.1.0\"></a>Ubuntu18.04 1.1.0</h4><hr><ul><li>root<br>> sudo netease-cloud-music &gt; /dev/null 2&gt;&amp;1 &amp;</li><li>session-managerbug<br>> alias netease=unset SESSION_MANAGER &amp;&amp; netease-cloud-music<br>> netease &gt; /dev/null &amp;</li><li>bug<a href=\"https://github.com/trazyn/ieaseMusic\" target=\"_blank\" rel=\"noopener\">ieaseMusic</a></li><li>ubuntu18.04<a href=\"https://github.com/innoob/netease-cloud-music\" target=\"_blank\" rel=\"noopener\"></a>bug</li></ul><h4 id=\"Ubuntu18-04-Crossover17QQ\"><a href=\"#Ubuntu18-04-Crossover17QQ\" class=\"headerlink\" title=\"Ubuntu18.04 Crossover17QQ\"></a>Ubuntu18.04 Crossover17QQ</h4><hr><blockquote><p>ume-ui-gothic.ttf</p></blockquote><p> /opt/cxoffice/share/wine/fonts <a href=\"https://pan.baidu.com/s/13CDBKrvTAJOhrbuyLw96jA\" target=\"_blank\" rel=\"noopener\">ume-ui-gothic.ttf</a> ()ume-ui-gothic.ttf</p><h4 id=\"Ubuntu18-04-tweakgnomeBlyr\"><a href=\"#Ubuntu18-04-tweakgnomeBlyr\" class=\"headerlink\" title=\"Ubuntu18.04 tweakgnomeBlyr\"></a>Ubuntu18.04 tweakgnomeBlyr</h4><hr><p>=&gt; <code>Error: Requiring Clutter, version none: Typelib file for namespace &#39;Clutter&#39; (any version) not found ...</code><br>=&gt; Clutter<br>=&gt; <br></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: sudo apt-get install gir1.2-clutter-1.0 gir1.2-clutter-gst-3.0 gir1.2-gtkclutter-1.0</span><br></pre></td></tr></table></figure><p></p><h4 id=\"Ubuntu18-04--\"><a href=\"#Ubuntu18-04--\" class=\"headerlink\" title=\"Ubuntu18.04  \"></a>Ubuntu18.04  </h4><hr><p>ubuntu18.04gksu</p><ol><li>alias<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: <span class=\"built_in\">alias</span> gksu=<span class=\"string\">'pkexec env DISPLAY=$DISPLAY XAUTHORITY=$XAUTHORITY'</span></span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: gksu gedit /etc/default/apport</span><br><span class=\"line\"><span class=\"comment\"># `enable = 1``enable = 0`</span></span><br></pre></td></tr></table></figure></li></ol><h4 id=\"Ubuntu18-04-Gnome-Shell-\"><a href=\"#Ubuntu18-04-Gnome-Shell-\" class=\"headerlink\" title=\"Ubuntu18.04 Gnome-Shell \"></a>Ubuntu18.04 Gnome-Shell </h4><hr><ul><li><a href=\"https://extensions.gnome.org/extension/97/coverflow-alt-tab/\" target=\"_blank\" rel=\"noopener\">CoverFlow Alt-Tab</a> =&gt; Tab()</li><li><a href=\"https://extensions.gnome.org/extension/19/user-themes/\" target=\"_blank\" rel=\"noopener\">User Themes()</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/307/dash-to-dock/\" target=\"_blank\" rel=\"noopener\">Dash To Dock</a> =&gt; dock()</li><li><a href=\"https://extensions.gnome.org/extension/1160/dash-to-panel/\" target=\"_blank\" rel=\"noopener\">Dash To Panel</a> =&gt; dock()</li><li><a href=\"https://extensions.gnome.org/extension/1236/noannoyance/\" target=\"_blank\" rel=\"noopener\">NoAnnoyance</a> =&gt; pop()</li><li><a href=\"https://extensions.gnome.org/extension/595/autohide-battery/\" target=\"_blank\" rel=\"noopener\">Autohide Battery</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/8/places-status-indicator/\" target=\"_blank\" rel=\"noopener\">Places Status Indicator</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/7/removable-drive-menu/\" target=\"_blank\" rel=\"noopener\">Removable Drive Menu</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/826/suspend-button/\" target=\"_blank\" rel=\"noopener\">Suspend Button</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/495/topicons/\" target=\"_blank\" rel=\"noopener\">TopIcons</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/1031/topicons/\" target=\"_blank\" rel=\"noopener\">TopIconsPlus</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/1251/blyr/\" target=\"_blank\" rel=\"noopener\">Blyr</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/358/activities-configurator/\" target=\"_blank\" rel=\"noopener\">Activities Configurator</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/427/workspaces-to-dock/\" target=\"_blank\" rel=\"noopener\">Workspace to Dock</a> =&gt; dock()</li><li><a href=\"https://extensions.gnome.org/extension/1036/extensions/\" target=\"_blank\" rel=\"noopener\">Extensions</a> =&gt; gnome-shell()</li><li><a href=\"https://extensions.gnome.org/extension/779/clipboard-indicator/\" target=\"_blank\" rel=\"noopener\">Clipboard Indicator</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/906/sound-output-device-chooser/\" target=\"_blank\" rel=\"noopener\">Sound Input &amp; Output Device Chooser</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/1236/noannoyance/\" target=\"_blank\" rel=\"noopener\">NoAnnoyance</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/1401/bluetooth-quick-connect/\" target=\"_blank\" rel=\"noopener\">Bluetooth quick connect</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/1403/remove-alttab-delay/\" target=\"_blank\" rel=\"noopener\">Remove Alt+Tab Delay</a> =&gt; Alt + Tab()</li><li><a href=\"https://extensions.gnome.org/extension/1162/emoji-selector/\" target=\"_blank\" rel=\"noopener\">Emoji Selector</a> =&gt; Emoji()</li></ul><h4 id=\"Ubuntu18-04--Dash-to-dock-\"><a href=\"#Ubuntu18-04--Dash-to-dock-\" class=\"headerlink\" title=\"Ubuntu18.04  [ Dash to dock ] \"></a>Ubuntu18.04  [ Dash to dock ] </h4><hr><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#Use Custom Dock Indicator ( Optional )</span></span><br><span class=\"line\">$: gsettings <span class=\"built_in\">set</span> org.gnome.shell.extensions.dash-to-dock custom-theme-running-dots <span class=\"literal\">false</span></span><br><span class=\"line\">$: gsettings <span class=\"built_in\">set</span> org.gnome.shell.extensions.dash-to-dock custom-theme-customize-running-dots <span class=\"literal\">false</span></span><br><span class=\"line\">_______________________________________________________________________________________________</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Disable Custom Dock Shrink ( Required for Good looking) (  Required )</span></span><br><span class=\"line\">$: gsettings <span class=\"built_in\">set</span> org.gnome.shell.extensions.dash-to-dock custom-theme-shrink <span class=\"literal\">false</span></span><br><span class=\"line\">_______________________________________________________________________________________________</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Dock Transparency mode ( Optional )</span></span><br><span class=\"line\">$: gsettings <span class=\"built_in\">set</span> org.gnome.shell.extensions.dash-to-dock transparency-mode DEFAULT</span><br><span class=\"line\">_______________________________________________________________________________________________</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Restore to Default</span></span><br><span class=\"line\">$: dconf reset -f /org/gnome/shell/extensions/dash-to-dock/</span><br><span class=\"line\">_______________________________________________________________________________________________</span><br></pre></td></tr></table></figure><h4 id=\"Ubuntu18-04-\"><a href=\"#Ubuntu18-04-\" class=\"headerlink\" title=\"Ubuntu18.04 \"></a>Ubuntu18.04 </h4><hr><ul><li>GTK3() =&gt; <a href=\"https://www.gnome-look.org/p/1167049/\" target=\"_blank\" rel=\"noopener\">X-Arc-Collection</a></li><li>GTK3() =&gt; <a href=\"https://www.gnome-look.org/p/1241688\" target=\"_blank\" rel=\"noopener\">McOS-themes</a></li><li>Gnome Shell() =&gt; <a href=\"https://github.com/daniruiz/flat-remix\" target=\"_blank\" rel=\"noopener\">Flat-Remix</a></li><li>Gnome Shell() =&gt; <a href=\"https://www.gnome-look.org/p/1171095/\" target=\"_blank\" rel=\"noopener\">Human</a></li><li>Gnome Shell() =&gt; <a href=\"https://www.opendesktop.org/c/1460761561\" target=\"_blank\" rel=\"noopener\">macOS High Sierra</a></li><li>Gnome Shell(?) =&gt; <a href=\"https://www.gnome-look.org/p/1213208/\" target=\"_blank\" rel=\"noopener\">macOS High Sierra</a></li><li>Icon () =&gt; <a href=\"https://github.com/daniruiz/flat-remix/releases\" target=\"_blank\" rel=\"noopener\">flat-remix</a></li><li>Icon () =&gt; <a href=\"https://www.gnome-look.org/p/1012200/\" target=\"_blank\" rel=\"noopener\">Mac OS X Icon</a></li><li>Icon () =&gt; <a href=\"https://github.com/keeferrourke/la-capitaine-icon-theme/releases\" target=\"_blank\" rel=\"noopener\">la-capitaine-icon-theme</a></li><li>Icon () <a href=\"https://www.pling.com/p/1305429/\" target=\"_blank\" rel=\"noopener\">McMojave-circle</a></li><li>Icon () =&gt; <a href=\"https://github.com/zayronxio/Macos-sierra-CT\" target=\"_blank\" rel=\"noopener\">MacOS sierra ct</a></li><li>Cursor() =&gt; <a href=\"https://krourke.org/projects/art/capitaine-cursors\" target=\"_blank\" rel=\"noopener\">Capitaine Cursors</a></li></ul><h4 id=\"chrome\"><a href=\"#chrome\" class=\"headerlink\" title=\"chrome\"></a>chrome</h4><hr><ul><li><a href=\"https://chrome.google.com/webstore/detail/infinity-new-tabproductiv/dbfmnekepjoapopniengjbcpnbljalfg?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">infinity pro </a> =&gt; ()</li><li><a href=\"https://chrome.google.com/webstore/detail/octotree/bkhaagjahfmjljalopjnoealnfndnagc?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">Octotree</a> =&gt; github()</li><li><a href=\"https://chrome.google.com/webstore/detail/postman-interceptor/aicmkgpgakddgnaphhhpliifpcfhicfo?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">Postman</a> =&gt; API()</li><li><a href=\"https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">SwitchyOmega</a> =&gt; ()</li><li><a href=\"https://chrome.google.com/webstore/detail/evernote-web-clipper/pioclpoplcdbaefihamjohnefbikjilc?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\"></a> =&gt; ()</li><li><a href=\"https://chrome.google.com/webstore/detail/simpread-reader-view/ijllcpnolfcooahcekpamkbidhejabll?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">SimpRead</a> =&gt; ()</li><li><a href=\"https://chrome.google.com/webstore/detail/full-page-screen-capture/fdpohaocaechififmbbbbbknoalclacl?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">Full Page Screen Capture</a> =&gt; ()</li><li><a href=\"https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">tampermonkey</a> =&gt; badu()</li><li><a href=\"https://chrome.google.com/webstore/detail/checker-plus-for-gmail/oeopbcgkkoapgobdbedcemjljbihmemj?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">Checker Plus for Gmail</a> =&gt; Google()</li><li><a href=\"https://chrome.google.com/webstore/detail/vimium/dbepggeogbaibhgnhhndojpepiihcmeb?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">Vimium</a> =&gt; googlevim(firefox)()</li><li><a href=\"https://chrome.google.com/webstore/detail/copy-as-markdown/dgoenpnkphkichnohepecnmpmihnabdg\" target=\"_blank\" rel=\"noopener\">Markdown</a> =&gt; markdown()</li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><ul><li><a href=\"https://github.com/tonsky/FiraCode/wiki/Linux-instructions#installing-with-a-package-manager\" target=\"_blank\" rel=\"noopener\">fonts-firacode</a> =&gt; vscode<code>sudo apt install fonts-firacode</code></li><li><a href=\"https://vivaldi.com\" target=\"_blank\" rel=\"noopener\">vivaldi</a> =&gt; ()</li><li>Terminator =&gt; gnome()</li><li>Timeshift =&gt; ()</li><li>ipython3() =&gt; python()</li><li>jupyter =&gt; ()</li><li>pdb/ipdb() =&gt; python()</li><li>trash-cli() =&gt; ()</li><li>bat() =&gt; catgit()</li><li>axel() =&gt; 100 : )()</li><li><a href=\"https://github.com/aria2/aria2\" target=\"_blank\" rel=\"noopener\">aria2()</a> =&gt; </li><li><a href=\"https://github.com/oguzhaninan/Stacer\" target=\"_blank\" rel=\"noopener\">stacer</a> =&gt; linux()</li><li><a href=\"https://github.com/trazyn/ieaseMusic\" target=\"_blank\" rel=\"noopener\">ieaseMusic</a> =&gt; bug[]()</li><li>parallel() =&gt; ()</li><li>cheat() =&gt; man()</li><li>topgrade() =&gt; ()</li><li><a href=\"https://www.dbkoda.com/\" target=\"_blank\" rel=\"noopener\">dbKoda</a> =&gt; mongodb GUI()</li><li><a href=\"https://www.mongodb.com/products/compass\" target=\"_blank\" rel=\"noopener\">mongodb compass</a> =&gt; mongodb GUI()</li><li><a href=\"https://github.com/phw/peek\" target=\"_blank\" rel=\"noopener\">peek</a> =&gt; gif/webm/apng/webm()</li><li>tmux =&gt; ()</li><li>(ubuntu) =&gt; ()</li><li>(ubuntu) =&gt; ()</li><li>shutter =&gt; <code>ppa:linuxuprising/shutter</code>()</li><li>flameshot =&gt; Ubuntu20.04()</li><li><a href=\"https://webtorrent.io/desktop/\" target=\"_blank\" rel=\"noopener\">WebTorrent</a><a href=\"https://www.frostwire.com/\" target=\"_blank\" rel=\"noopener\">FrostWire</a> =&gt; bt()</li><li><a href=\"https://www.syntevo.com/smartgit/\" target=\"_blank\" rel=\"noopener\">SmartGit</a> =&gt; linuxGIT GUI()</li><li>FileZilla =&gt; ftp()</li><li><a href=\"https://github.com/Suremotoo/e-tools\" target=\"_blank\" rel=\"noopener\">e-tools</a> =&gt; coder()</li><li><a href=\"https://electronjs.org/apps/whatever\" target=\"_blank\" rel=\"noopener\">WhatEver</a> =&gt; linux()</li><li><a href=\"http://linux.wps.cn/\" target=\"_blank\" rel=\"noopener\">wps</a> =&gt; linux office for free made by KingSoftware()</li><li><a href=\"https://code.visualstudio.com/\" target=\"_blank\" rel=\"noopener\">vscode</a> =&gt;  ()</li><li>ndb =&gt; node.js/javascript ()</li><li><a href=\"https://raw.githubusercontent.com/creationix/nvm/v0.33.0/install.sh\" target=\"_blank\" rel=\"noopener\">nvm</a> =&gt; nodejs</li><li>albert ( <code>ppa:noobslab/macbuntu</code>  ) =&gt; MacSpotLight()</li><li><a href=\"https://linux.cn/article-5460-1.html\" target=\"_blank\" rel=\"noopener\">lftp</a> =&gt; FTPFTPSHTTPHTTPSHFTPFISHSFTP<br></li><li><a href=\"http://jonls.dk/redshift/\" target=\"_blank\" rel=\"noopener\">redshift-gtk</a> </li><li>apt-fast =&gt; apt<code>ppa:apt-fast/stable</code>()</li><li>nautilus action configure tool =&gt; <code>ppa:daniel-marynicz/filemanager-actions</code>()</li><li>tig =&gt; git()</li><li>shellcheck =&gt; shell()</li><li><a href=\"https://motrix.app/zh-CN/\" target=\"_blank\" rel=\"noopener\">Motrix</a> =&gt; ()</li><li><a href=\"https://www.insynchq.com/\" target=\"_blank\" rel=\"noopener\">Insync</a> =&gt; googleonedrive()</li><li><a href=\"https://github.com/teejee2008/timeshift\" target=\"_blank\" rel=\"noopener\">Timeshift</a> =&gt; ()</li><li>dconf-editor =&gt; gnomegui()</li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><p><img src=\"Ubuntu18.04-14.png\" alt=\"Vimix.png\"></p><ul><li><a href=\"https://wallpapershome.com/\" target=\"_blank\" rel=\"noopener\">Wallpaper</a> =&gt; ()</li><li><a href=\"https://www.flaticon.com\" target=\"_blank\" rel=\"noopener\">flaticon</a> =&gt; svgpng</li><li><a href=\"https://electronjs.org/apps\" target=\"_blank\" rel=\"noopener\">Electron Apps</a> =&gt; Electron (Linux/Mac/Windows)()</li><li><a href=\"https://www.centos.bz/\" target=\"_blank\" rel=\"noopener\">Linux</a> =&gt; Linux()</li><li><a href=\"https://www.ibm.com/developerworks/cn/\" target=\"_blank\" rel=\"noopener\">IBM Developer</a> =&gt; ()</li><li><a href=\"https://www.lulinux.com/archives/2513#awk\" target=\"_blank\" rel=\"noopener\">Linux</a> =&gt; ()</li><li><a href=\"https://www.kanbilibili.com/\" target=\"_blank\" rel=\"noopener\">bilibili</a> =&gt;  // ()</li><li><a href=\"https://linux.cn/\" target=\"_blank\" rel=\"noopener\">Linux</a> =&gt; ()</li><li><a href=\"https://tinypng.com/\" target=\"_blank\" rel=\"noopener\">TinyPNG</a> =&gt; ()</li><li><a href=\"https://www.iloveimg.com/zh-cn\" target=\"_blank\" rel=\"noopener\">iLoveIMG</a> =&gt; ()</li><li><a href=\"https://en.savefrom.net/\" target=\"_blank\" rel=\"noopener\">savefrom</a> =&gt; youtube()</li><li><a href=\"https://www.lulinux.com/\" target=\"_blank\" rel=\"noopener\">Linux</a> =&gt; ()</li><li><a href=\"https://greasyfork.org/zh-CN/scripts\" target=\"_blank\" rel=\"noopener\"></a> =&gt; ()</li></ul><p><em>Linuxer.</em></p>","site":{"data":{}},"excerpt":"","more":"<p><img src=\"Ubuntu18.04-1.jpg\" alt=\"welcome / home\"></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><ul><li>WineWineSystemTray </li><li>Home</li><li>Ubuntudeepin wine QQ</li><li>QQ/</li><li>Ubuntu 18.04</li><li>oh-my-zsh</li><li>Terminator</li><li></li><li></li><li>crossover18</li><li>vim</li><li>Ubuntu18.04 Mac</li><li>Ubuntu18.04  </li><li>Ubuntu18.04 plymouth</li><li>Ubuntu18.04 [Dash to dock]dock</li><li>Ubuntu18.04 Release</li><li>Ubuntu18.04 </li><li>Ubuntu18.04 cinnamon</li><li>Linux</li><li>Shadowsocks-Qt5</li><li>polipo(shadowsocks)</li><li>linux</li><li>shadowsocks</li><li>Ubuntu18.04shadowsockspac</li><li>Atom</li><li>Grub2 </li><li>Ubuntu18.04 ttf-mscorefonts-installer</li><li>Ubuntu18.04 WPS </li><li>Ubuntu20.04 deepin-screenshot</li><li>Ubuntu18.04 Gnome</li><li>Win10 + Ubuntu18.04 </li><li>Ubuntu18.04 ()</li><li>Ubuntu 18.04 lvm</li><li>Ubuntu18.04 1.1.0</li><li>Ubuntu18.04 Crossover17QQ</li><li>Ubuntu18.04 tweakgnomeBlyr</li><li>Ubuntu18.04  </li><li>Ubuntu18.04 Gnome-Shell </li><li>Ubuntu18.04  [ Dash to dock ] </li><li>Ubuntu18.04 </li><li>chrome</li><li></li><li></li></ul><h4 id=\"WineWineSystemTray\"><a href=\"#WineWineSystemTray\" class=\"headerlink\" title=\"WineWineSystemTray\"></a>WineWineSystemTray</h4><hr><p><img src=\"Ubuntu18.04-2.png\" alt=\"wine_tray.png\"></p><p><img src=\"Ubuntu18.04-3.png\" alt=\"tray.png\"></p><ol><li><p>Linux Mint18.3<br>() -  - +Wine</p></li><li><p>Ubuntu 18.04<br>gnome-shell <a href=\"https://extensions.gnome.org/extension/495/topicons/\" target=\"_blank\" rel=\"noopener\">TopIcons</a>, TopIconsgnomechrome-gnome-shell (<code>sudo apt install chrome-gnome-shell</code> )deepin QQTopIconsQQ<a href=\"https://extensions.gnome.org/extension/1160/dash-to-panel/\" target=\"_blank\" rel=\"noopener\">Dash to Panel</a></p></li></ol><h4 id=\"Home\"><a href=\"#Home\" class=\"headerlink\" title=\"Home\"></a>Home</h4><hr><ol><li><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: <span class=\"built_in\">export</span> LANG=en_US(-&gt; zh_CN)</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: xdg-user-dirs-gtk-update</span><br></pre></td></tr></table></figure></li><li> []</li><li> []  [] </li></ol><h4 id=\"Ubuntudeepin-wine-QQ\"><a href=\"#Ubuntudeepin-wine-QQ\" class=\"headerlink\" title=\"Ubuntudeepin wine QQ\"></a>Ubuntudeepin wine QQ</h4><hr><ol><li><p>deepin-wine<a href=\"https://gitee.com/wszqkzqk/deepin-wine-for-ubuntu\" target=\"_blank\" rel=\"noopener\">https://gitee.com/wszqkzqk/deepin-wine-for-ubuntu</a>zipgit<a href=\"https://pan.baidu.com/s/120C5aHuqtyxQyn_fGTxHKg\" target=\"_blank\" rel=\"noopener\"></a><code>sudo sh ./install.sh</code>deb(deb)</p></li><li><p>deepin.com<a href=\"http://mirrors.aliyun.com/deepin/pool/non-free/d/\" target=\"_blank\" rel=\"noopener\">http://mirrors.aliyun.com/deepin/pool/non-free/d/</a>deb:</p></li></ol><ul><li>QQ<a href=\"http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im/\" target=\"_blank\" rel=\"noopener\">http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im/</a></li><li>TIM<a href=\"http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.office/\" target=\"_blank\" rel=\"noopener\">http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.office/</a></li><li>QQ<a href=\"http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im.light/\" target=\"_blank\" rel=\"noopener\">http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.qq.im.light/</a></li><li><a href=\"http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.wechat/\" target=\"_blank\" rel=\"noopener\">http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.wechat/</a></li><li>Foxmail<a href=\"http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.foxmail/\" target=\"_blank\" rel=\"noopener\">http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.foxmail/</a></li><li><a href=\"http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.baidu.pan/\" target=\"_blank\" rel=\"noopener\">http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.com.baidu.pan/</a></li><li>360<a href=\"http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.cn.360.yasuo/\" target=\"_blank\" rel=\"noopener\">http://mirrors.aliyun.com/deepin/pool/non-free/d/deepin.cn.360.yasuo/</a></li><li>: <a href=\"https://pan.baidu.com/s/1cij1FhFeEn2sXdPtkJ3lSg\" target=\"_blank\" rel=\"noopener\">https://pan.baidu.com/s/1cij1FhFeEn2sXdPtkJ3lSg</a></li><li>UbuntuUbuntuLinuxMintZorinOS</li></ul><h4 id=\"QQ-\"><a href=\"#QQ-\" class=\"headerlink\" title=\"QQ/\"></a>QQ/</h4><hr><p>1.linux: <a href=\"https://github.com/geeeeeeeeek/electronic-wechat\" target=\"_blank\" rel=\"noopener\">electronic-wechat</a><a href=\"https://github.com/trazyn/weweChat\" target=\"_blank\" rel=\"noopener\">weweChat</a>crossoverwindows</p><p>2.140CrossOver18QQ8.9TIMTIM crossoverQQbugcrossover18windowscrossoverwindowsXP 64<code>&quot;WeChatWin.dll &quot;</code><br></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: apt-get install libldap-2.4-2:i386</span><br></pre></td></tr></table></figure><p></p><p>3.docker<a href=\"https://hub.docker.com/r/bestwu/qq\" target=\"_blank\" rel=\"noopener\">Tim</a>  <a href=\"https://hub.docker.com/r/bestwu/wechat\" target=\"_blank\" rel=\"noopener\">wechat</a><a href=\"https://www.runoob.com/docker/ubuntu-docker-install.html\" target=\"_blank\" rel=\"noopener\">docker</a></p><p>4.wine(crossover/deepin)()<a href=\"https://pan.baidu.com/s/1-ScZvkmR9oZPdiFurdKQdA\" target=\"_blank\" rel=\"noopener\">riched20.dll</a>(rofj)C<code>/windows/system32/riched20.dll</code><code>~/.cxoffice/[]/drive_c/</code></p><p>5.wine(crossover/deepin)(:,)</p><p>6.wine(crossover/deepin) <code>sudo apt install libjpeg62:i386</code><code></code></p><p>7.wine(crossover/deepin)QQ()QQ(http/socks)localhost/127.0.0.1IP0.0.0.0</p><h4 id=\"Ubuntu-18-04\"><a href=\"#Ubuntu-18-04\" class=\"headerlink\" title=\"Ubuntu 18.04\"></a>Ubuntu 18.04</h4><hr><p>=&gt; <br></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">systemd-analyze blame</span><br><span class=\"line\"><span class=\"comment\"># plymouth</span></span><br><span class=\"line\">sudo systemctl mask plymouth-start.service</span><br><span class=\"line\">sudo systemctl mask plymouth-read-write.service</span><br></pre></td></tr></table></figure><p></p><h4 id=\"oh-my-zsh\"><a href=\"#oh-my-zsh\" class=\"headerlink\" title=\"oh-my-zsh\"></a>oh-my-zsh</h4><hr><ol><li></li></ol><ul><li>gnzh())</li><li>ys</li><li>avit</li><li>af-magic</li></ul><ol><li></li></ol><ul><li>git =&gt; git</li><li>svn =&gt; svn</li><li>colored-man-pages =&gt; man</li><li>zsh-syntax-highlighting =&gt; </li><li>z =&gt; </li><li>zsh-autosuggestions =&gt; </li></ul><h4 id=\"Terminator\"><a href=\"#Terminator\" class=\"headerlink\" title=\"Terminator\"></a>Terminator</h4><hr><p></p><p><code>-&gt;-&gt;-&gt;</code><br><code>Ctrl+Alt+T</code><code>terminator --geometry=93x32+450+300</code>geometry</p><p><code>~/.config/terminator/config</code></p><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">  [global_config]</span><br><span class=\"line\">  enabled_plugins = CustomCommandsMenu, LaunchpadCodeURLHandler, APTURLHandler, LaunchpadBugURLHandler</span><br><span class=\"line\">  suppress_multiple_term_dialog = True</span><br><span class=\"line\">  title_hide_sizetext = True</span><br><span class=\"line\">[keybindings]</span><br><span class=\"line\">  prev_tab = &lt;Alt&gt;1</span><br><span class=\"line\">  reset_clear = &lt;Primary&gt;&lt;Shift&gt;g</span><br><span class=\"line\">  clear = &lt;Primary&gt;l</span><br><span class=\"line\">  switch_to_tab_1 = &lt;Alt&gt;1</span><br><span class=\"line\">  switch_to_tab_2 = &lt;Alt&gt;2</span><br><span class=\"line\">  switch_to_tab_3 = &lt;Alt&gt;3</span><br><span class=\"line\">  switch_to_tab_4 = &lt;Alt&gt;4</span><br><span class=\"line\">  switch_to_tab_5 = &lt;Alt&gt;5</span><br><span class=\"line\">  toggle_scrollbar = None</span><br><span class=\"line\">  toggle_zoom = &lt;Primary&gt;&lt;Shift&gt;x</span><br><span class=\"line\">[layouts]</span><br><span class=\"line\">  [[default]]</span><br><span class=\"line\">    [[[child1]]]</span><br><span class=\"line\">      parent = window0</span><br><span class=\"line\">      profile = default</span><br><span class=\"line\">      <span class=\"built_in\">type</span> = Terminal</span><br><span class=\"line\">    [[[window0]]]</span><br><span class=\"line\">      parent = <span class=\"string\">\"\"</span></span><br><span class=\"line\">      size = 925, 570</span><br><span class=\"line\">      <span class=\"built_in\">type</span> = Window</span><br><span class=\"line\">[plugins]</span><br><span class=\"line\">  [[CustomCommandsMenu]]</span><br><span class=\"line\">    [[[]]]</span><br><span class=\"line\">      <span class=\"built_in\">command</span> = clear</span><br><span class=\"line\">      enabled = True</span><br><span class=\"line\">      name = </span><br><span class=\"line\">      position = 0</span><br><span class=\"line\">[profiles]</span><br><span class=\"line\">  [[default]]</span><br><span class=\"line\">    allow_bold = False</span><br><span class=\"line\">    background_color = <span class=\"string\">\"#fbfbfb\"</span></span><br><span class=\"line\">    background_darkness = 0.93</span><br><span class=\"line\">    background_type = transparent</span><br><span class=\"line\">    copy_on_selection = True</span><br><span class=\"line\">    cursor_color = <span class=\"string\">\"#aaaaaa\"</span></span><br><span class=\"line\">    cursor_shape = ibeam</span><br><span class=\"line\">    font = Ubuntu Light 12</span><br><span class=\"line\">    foreground_color = <span class=\"string\">\"#49494a\"</span></span><br><span class=\"line\">    palette = <span class=\"string\">\"#2e3436:#ee6a6a:#38690a:#b3adb0:#3465a4:#75507b:#06989a:#d3d7cf:#979b93:#fe5f5f:#7fd42c:#b7afb1:#729fcf:#ad7fa8:#34e2e2:#eeeeec\"</span></span><br><span class=\"line\">    scroll_on_keystroke = False</span><br><span class=\"line\">    scrollbar_position = hidden</span><br><span class=\"line\">    show_titlebar = False</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: dpkg --get-selections |grep linux-image</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: uname -a</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: sudo apt-get remove</span><br><span class=\"line\">$: linux-image-x.xx.x-xx-generic</span><br><span class=\"line\">$: sudo apt-get remove  </span><br><span class=\"line\">$: linux-image-extra-x.xx.x-xx-generic  </span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: sudo dpkg --purge linux-image-x.x.x-xx-generic</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: sudo apt-mark hold linux-image-x.xx.x-xx-generic</span><br><span class=\"line\">$: sudo apt-mark hold linux-image-extra-x.xx.x-xx-generic</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: sudo apt-mark unhold linux-image-x.xx.x-xx-generic</span><br><span class=\"line\">$: sudo apt-mark unhold linux-image-extra-x.xx.x-xx-generic</span><br></pre></td></tr></table></figure><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><ul><li>AR PL UKai CN 12</li><li>Bitstream Vera Sans Mono 10</li><li>Courier 10 Pitch 11</li><li>DejaVu Sans Mono 10</li><li>FreeMono 11</li><li>Nimbus Mono L 12</li><li>TlwgMono 11</li></ul><h4 id=\"crossover18\"><a href=\"#crossover18\" class=\"headerlink\" title=\"crossover18\"></a>crossover18</h4><hr><p> <a href=\"https://pan.baidu.com/s/1BnT-cAKf-SBp-6J4CQoo-g\" target=\"_blank\" rel=\"noopener\">CrossoverPatch</a> <code>: ffp0</code><br></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#  </span></span><br><span class=\"line\">$: cp ~/cxoffice/lib/wine/winewrapper.exe.so ~/cxoffice/lib/wine/winewrapper.exe.so-bak</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: cp CrossoverPatch/winewrapper.exe.so ~/cxoffice/lib/wine</span><br></pre></td></tr></table></figure><p></p><h4 id=\"vim\"><a href=\"#vim\" class=\"headerlink\" title=\"vim\"></a>vim</h4><hr><ol><li><a href=\"https://github.com/VundleVim/Vundle.vim\" target=\"_blank\" rel=\"noopener\">Vundle</a> =&gt; .vimrc<code>vim +PluginInstall</code></li><li><a href=\"https://github.com/vim-airline/vim-airline\" target=\"_blank\" rel=\"noopener\">vim-airline</a> =&gt; </li><li><a href=\"https://juejin.im/post/5a38c37f6fb9a0450909a151\" target=\"_blank\" rel=\"noopener\"></a></li></ol><h4 id=\"Ubuntu18-04-Mac\"><a href=\"#Ubuntu18-04-Mac\" class=\"headerlink\" title=\"Ubuntu18.04 Mac\"></a>Ubuntu18.04 Mac</h4><hr><p><img src=\"Ubuntu18.04-5.png\" alt=\"overview.png\"></p><p><img src=\"Ubuntu18.04-6.png\" alt=\"desktop.png\"></p><ol><li>gnome-tweak-tool  chrome-gnome-shell  (<code>sudo aptitude install [name]</code>)</li><li>GTK3 =&gt; <a href=\"https://www.gnome-look.org/p/1167049/\" target=\"_blank\" rel=\"noopener\">X-Arc-Collection</a></li><li>tweak =&gt; tweak      X-Arc-Collection</li><li>gnome-shell  =&gt; <a href=\"https://www.gnome-look.org/p/1167049/\" target=\"_blank\" rel=\"noopener\">macOS High Sierra</a></li><li>gnome-shell  =&gt; <a href=\"https://extensions.gnome.org/extension/19/user-themes/\" target=\"_blank\" rel=\"noopener\">User Themes</a> ( Gnome =&gt; [Alt + F2] &amp; [ r] &amp; [ Enter] )</li><li>tweakshell =&gt; tweak    shell  Sierra shell</li><li>Mac <a href=\"https://github.com/keeferrourke/la-capitaine-icon-theme/releases\" target=\"_blank\" rel=\"noopener\">la-capitaine-icon-theme</a>  <a href=\"https://www.pling.com/p/1305429/\" target=\"_blank\" rel=\"noopener\">McMojave-circle</a></li><li> ~/.icons()</li><li>tweakicon =&gt; tweak      </li><li>gnome-shell =&gt; Dash to dock (dockdock)</li><li>firefox =&gt; <a href=\"https://github.com/vinceliuice/Mojave-gtk-theme\" target=\"_blank\" rel=\"noopener\">Majave-gtk-theme</a></li></ol><h4 id=\"Ubuntu18-04--\"><a href=\"#Ubuntu18-04--\" class=\"headerlink\" title=\"Ubuntu18.04  \"></a>Ubuntu18.04  </h4><hr><p><img src=\"Ubuntu18.04-7.png\" alt=\"lockscreen.png\"></p><p><img src=\"Ubuntu18.04-8.png\" alt=\"loginscreen.png\"></p><ol><li> =&gt; <a href=\"https://github.com/NoJsJa/maintenance/tree/master/code/shell/desktop/login-manager-config-ubuntu\" target=\"_blank\" rel=\"noopener\">github / nojsja / login-manager-config-ubuntu</a></li><li>=&gt; /usr/share/gnome-shell/theme/ubuntu.cssImageMagick<code>convert -blur</code>SetAsWallpaper()<code>gnome-tweak-tool</code></li><li><code>/usr/share/gnome-shell/theme/gdm3.css</code>ubuntu18.04</li><li>=&gt; CSS(UPE)</li></ol><h4 id=\"Ubuntu18-04-plymouth\"><a href=\"#Ubuntu18-04-plymouth\" class=\"headerlink\" title=\"Ubuntu18.04 plymouth\"></a>Ubuntu18.04 plymouth</h4><hr><blockquote><p>ubuntu<a href=\"https://www.gnome-look.org/browse/cat/108/\" target=\"_blank\" rel=\"noopener\">gnome-look</a><a href=\"https://pan.baidu.com/s/1qv3GZ_BE-jj2HIpiI2X7yQ\" target=\"_blank\" rel=\"noopener\">darwin</a>: <code>rc6u</code></p><ol><li>plymouth <code>/usr/share/plymouth/themes</code></li></ol></blockquote><ol><li><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo update-alternatives --install /usr/share/plymouth/themes/ default.plymouth default.plymouth /usr/share/plymouth/themes/[THEME]/[THEME].plymouth 100</span><br></pre></td></tr></table></figure></li><li><p>plymouth</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo update-alternatives --config default.plymouth</span><br><span class=\"line\">$: sudo update-initramfs -u</span><br></pre></td></tr></table></figure></li><li><p></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo gedit /usr/share/plymouth/themes/default.plymouth</span><br></pre></td></tr></table></figure><p><code>ImageDir</code><code>ScriptFile</code>plymouth</p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ImageDir=/usr/share/plymouth/themes/[THEME]</span><br><span class=\"line\">ScriptFile=/usr/share/plymouth/themes/[THEME]/[THEME].script</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"Ubuntu18-04--Dash-to-dock-dock\"><a href=\"#Ubuntu18-04--Dash-to-dock-dock\" class=\"headerlink\" title=\"Ubuntu18.04 [Dash to dock]dock\"></a>Ubuntu18.04 [Dash to dock]dock</h4><hr><blockquote><p>tweak[Dash to dock][Dash to dock]dock</p></blockquote><p><img src=\"Ubuntu18.04-9.png\" alt=\"dock-noise.png\"></p><p><img src=\"Ubuntu18.04-10.png\" alt=\"dock-single.png\"></p><h4 id=\"Ubuntu18-04-Release\"><a href=\"#Ubuntu18-04-Release\" class=\"headerlink\" title=\"Ubuntu18.04 Release\"></a>Ubuntu18.04 Release</h4><hr><p><img src=\"Ubuntu18.04-11.png\" alt=\"dock-tweak.png\"></p><ol><li> </li><li></li><li>   (dists)</li></ol><h4 id=\"Ubuntu18-04-\"><a href=\"#Ubuntu18-04-\" class=\"headerlink\" title=\"Ubuntu18.04 \"></a>Ubuntu18.04 </h4><hr><p>=&gt; Ubuntu18.0416.04<br></p><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># gdebi</span><br><span class=\"line\">$: sudo gdebi netease-cloud-music_1.0.0_amd64_ubuntu16.04.deb</span><br><span class=\"line\">$: Dependency is not satisfiable: libqt5libqgtk2</span><br><span class=\"line\"># Ubuntu18.04libqt5libqgtk2qt5-style-plugins</span><br><span class=\"line\"># libqt5libqgtk2</span><br></pre></td></tr></table></figure><br>=&gt; <br>=&gt; <p></p><ol><li>deb<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: mkdir netease-cloud-music</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: dpkg -X netease-cloud-music_1.0.0_amd64_ubuntu16.04.deb netease-cloud-music</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: dpkg -e netease-cloud-music_1.0.0_amd64_ubuntu16.04.deb neteas-cloud-music&#x2F;DEBIAN&#x2F;</span><br></pre></td></tr></table></figure></li><li>(libqt5libqgtk2qt5-style-plugins)<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># vim</span><br><span class=\"line\">$: vim neteas-cloud-music&#x2F;DEBIAN&#x2F;control</span><br><span class=\"line\"># vimlibqt5libqgtk2</span><br><span class=\"line\">:1,$s&#x2F;libqt5libqgtk2&#x2F;qt5-style-plugins&#x2F;g</span><br><span class=\"line\"># Dependslibqt5libqgtk2</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: dpkg-deb -b neteas-cloud-music</span><br><span class=\"line\">$: mv neteas-cloud-music.deb netease-cloud-music_1.0.0_amd64_ubuntu18.04.deb</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># gdebidpkg</span><br><span class=\"line\">$: sudo gdebi netease-cloud-music_1.0.0_amd64_ubuntu18.04.deb</span><br><span class=\"line\">$: sudo dpkg -i netease-cloud-music_1.0.0_amd64_ubuntu18.04.deb</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"Ubuntu18-04-Cinnamon\"><a href=\"#Ubuntu18-04-Cinnamon\" class=\"headerlink\" title=\"Ubuntu18.04 Cinnamon\"></a>Ubuntu18.04 Cinnamon</h4><hr><blockquote><p>cinnamongtkgonomegtkicondeepinCinnamonbug</p></blockquote><p></p><ul><li>CinnamonAPIwine/crossoverQQ/Wehcat</li><li>ibusfcitxfcitxsogou</li><li><code>blueman</code></li><li></li><li>Cinnamon(gnome)<code></code>winebug</li><li>Cinnamon</li></ul><p></p><ol><li>Key<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo add-apt-repository ppa:embrosyn/cinnamon  </span><br><span class=\"line\">$: sudo apt update &amp;&amp; sudo apt install cinnamon</span><br></pre></td></tr></table></figure></li><li></li><li>cinnamon<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo apt-get install ppa-purge</span><br><span class=\"line\">$: sudo ppa-purge ppa:embrosyn/cinnamon</span><br></pre></td></tr></table></figure></li></ol><h4 id=\"Linux\"><a href=\"#Linux\" class=\"headerlink\" title=\"Linux\"></a>Linux</h4><hr><p>=&gt; ubuntu 18.04/var  1.5G</p><ul><li>1<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo apt-get clean</span><br><span class=\"line\">$: sudo apt-get autoremove</span><br></pre></td></tr></table></figure>2</li><li>2<br>()<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># /var </span></span><br><span class=\"line\">$: mv /var/lib /opt</span><br><span class=\"line\"><span class=\"comment\"># optlibvar</span></span><br><span class=\"line\">$: sudo ln -s /opt/lib /var</span><br></pre></td></tr></table></figure></li><li>3<br>/var/home/var/home/var2G-4G/home</li></ul><h4 id=\"Shadowsocks-Qt5\"><a href=\"#Shadowsocks-Qt5\" class=\"headerlink\" title=\"Shadowsocks-Qt5\"></a>Shadowsocks-Qt5</h4><hr><blockquote><p>shadowsocksGUIQtsslocal <strong>Release</strong>shadowdocks-Qt5<code>artful</code></p></blockquote><p>> sudo add-apt-repository ppa:hzwhuang/ss-qt5<br>> sudo apt update<br>> sudo apt-get install shadowsocks-qt5</p><h4 id=\"polipo-shadowsocks\"><a href=\"#polipo-shadowsocks\" class=\"headerlink\" title=\"polipo(shadowsocks)\"></a>polipo(shadowsocks)</h4><hr><ul><li>(bashzsh) =&gt; <a href=\"https://github.com/NoJsJa/maintenance/tree/master/code/shell/desktop/shadowsocks-terminal\" target=\"_blank\" rel=\"noopener\">github / nojsja / polipo-install-config.sh</a></li><li><br>>  hp  ==  http_proxy=<a href=\"http://localhost:8123\" target=\"_blank\" rel=\"noopener\">http://localhost:8123</a>  for any command<br>>  gp  == http.proxy=localhost:8123 for git proxy config<br>> 1<code>hp curl ip.gs</code><br>> 2<code>git clone https://android.googlesource.com/tools/repo --config $gp</code></li><li>polipo(<code>systemctl status polipo</code>)polipopolipo(<code>/etc/polipo/config</code>)<h4 id=\"linux\"><a href=\"#linux\" class=\"headerlink\" title=\"linux\"></a>linux</h4></li></ul><hr><blockquote><p></p></blockquote><p>=&gt; (ubuntu18.04) =&gt; <a href=\"https://github.com/NoJsJa/maintenance/tree/master/code/shell/desktop/application\" target=\"_blank\" rel=\"noopener\">github / nojsja / makeIconLink</a><br>=&gt; </p><ul><li>icon(1:164px % 64px)</li><li><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: bash makeIconLink --<span class=\"built_in\">help</span></span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: bash makeIconLink --dir /path/to/[<span class=\"built_in\">exec</span>-file] --target [<span class=\"built_in\">exec</span>-file-name] --icon [icon-file-name]</span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: bash makeIconLink --uninstall [<span class=\"built_in\">exec</span>-file-name]</span><br></pre></td></tr></table></figure></li></ul><h4 id=\"shadowsocks\"><a href=\"#shadowsocks\" class=\"headerlink\" title=\"shadowsocks\"></a>shadowsocks</h4><hr><blockquote><p>systemdshadowsocksshadowsocks-qt5FQ ~</p></blockquote><p>=&gt; <a href=\"https://github.com/NoJsJa/maintenance/blob/master/code/shell/desktop/startup.sh\" target=\"_blank\" rel=\"noopener\">startup.sh</a><a href=\"https://github.com/NoJsJa/maintenance/blob/master/code/shell/desktop/shadowsocks\" target=\"_blank\" rel=\"noopener\">shadowsocks</a><br>=&gt; </p><ul><li>shadowsocks serviceshadow.service</li></ul><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[Unit]</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">Description=Shadowsocks Service</span><br><span class=\"line\"></span><br><span class=\"line\">[Service]</span><br><span class=\"line\">Type=oneshot</span><br><span class=\"line\"><span class=\"comment\">#  start/stop ()</span></span><br><span class=\"line\">ExecStart=/bin/bash /home/nojsja/github/maintenance/code/shell/desktop/startup.sh start</span><br><span class=\"line\">ExecStop=/bin/bash /home/nojsja/github/maintenance/code/shell/desktop/startup.sh stop</span><br><span class=\"line\">RemainAfterExit=yes</span><br><span class=\"line\"></span><br><span class=\"line\">[Install]</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">WantedBy=multi-user.target</span><br></pre></td></tr></table></figure><ul><li><code>/etc/systemd/system</code><br>> sudo cp shadow.service /etc/systemd/system</li><li><br>> systemctl enable shadow</li><li><br>> systemctl start shadow<br>> systemctl stop shadow</li></ul><h4 id=\"Ubuntu18-04shadowsockspac\"><a href=\"#Ubuntu18-04shadowsockspac\" class=\"headerlink\" title=\"Ubuntu18.04shadowsockspac\"></a>Ubuntu18.04shadowsockspac</h4><hr><p>=&gt; shadowsockspac<br></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># pip</span></span><br><span class=\"line\">$: sudo apt-get install python-pip python-dev build-essential</span><br><span class=\"line\">$: sudo pip install --upgrade pip</span><br><span class=\"line\">$: sudo pip install --upgrade virtualenv</span><br><span class=\"line\"><span class=\"comment\"># pac</span></span><br><span class=\"line\">$: sudo pip install genpac</span><br><span class=\"line\"><span class=\"comment\"># pac</span></span><br><span class=\"line\">$: mkdir ~/shadowsocks</span><br><span class=\"line\">$: <span class=\"built_in\">cd</span> shadowsocks</span><br><span class=\"line\"><span class=\"comment\"># proxyshadowsocks</span></span><br><span class=\"line\">$: genpac --proxy=<span class=\"string\">\"SOCKS5 127.0.0.1:1080\"</span> --gfwlist-proxy=<span class=\"string\">\"SOCKS5 127.0.0.1:1080\"</span> -o autoproxy.pac --gfwlist-url=<span class=\"string\">\"https://raw.githubusercontent.com/gfwlist/gfwlist/master/gfwlist.txt\"</span></span><br></pre></td></tr></table></figure><br>~/shadowsocksautoproxy.pac -&gt;  -&gt;  -&gt;  -&gt; file:///path/to/autoproxy.pac(pac)pac<br>=&gt; <a href=\"https://github.com/NoJsJa/maintenance/tree/master/code/shell/desktop/shadowsocks/genpac\" target=\"_blank\" rel=\"noopener\">genpac-command</a>(user-rules.txt) autoproxy.pac<br><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># # </span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: bash genpac-command --<span class=\"built_in\">help</span></span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: bash genpac-command --update-online</span><br><span class=\"line\"><span class=\"comment\"># user-rules.txt</span></span><br><span class=\"line\">$: bash genpac-command --update-local</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: bash genpac-command --add-rules opendesktop.org</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: bash genpac-command --add-rules opendesktop.org atom.io</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: bash genpac-command --del-rules opendesktop.org</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: bash genpac-command --del-rules opendesktop.org atom.io</span><br></pre></td></tr></table></figure><br>=&gt; <strong>pacfirefoxgoogleFQpacSwitchOmega</strong><p></p><h4 id=\"Atom\"><a href=\"#Atom\" class=\"headerlink\" title=\"Atom\"></a>Atom</h4><hr><blockquote><p>AtomVscodeSublimeBracksAtomAtomAtom45GAtomAtomatomide-typescriptAtom200~400MbAtomAtom gitrelease</p></blockquote><h4 id=\"Grub2-\"><a href=\"#Grub2-\" class=\"headerlink\" title=\"Grub2 \"></a>Grub2 </h4><hr><p><img src=\"Ubuntu18.04-12.png\" alt=\"source.png\"></p><blockquote><p>Grub2</p></blockquote><ol><li> =&gt; <a href=\"https://pan.baidu.com/s/1ioMub2JmHlIzHJbS2_2gRQ\" target=\"_blank\" rel=\"noopener\">Vimix</a>Vimix()</li><li>/boot/grubGRUB2themes<br>> sudo mkdir -p /boot/grub/themes</li><li>Vimix/boot/grub/themes<br>> sudo cp -r Vimix /boot/grub/themes</li><li>/etc/default/grub<br>> sudo gedit /etc/default/grub<br>GRUB_THEME=/boot/grub/themes/Vimix/theme.txt </li><li>GRUB<br>> sudo update-grub</li><li>()</li></ol><h4 id=\"Ubuntu18-04-ttf-mscorefonts-installer\"><a href=\"#Ubuntu18-04-ttf-mscorefonts-installer\" class=\"headerlink\" title=\"Ubuntu18.04 ttf-mscorefonts-installer\"></a>Ubuntu18.04 ttf-mscorefonts-installer</h4><hr><p><img src=\"Ubuntu18.04-13.png\" alt=\"firefox_proxy.png\"></p><ol><li><a href=\"http://sourceforge.net/projects/corefonts/files/the%20fonts/final/\" target=\"_blank\" rel=\"noopener\">sourceforge</a>11exe /home/nojsja/Downloads/ttf-mscorefonts-installer</li><li><br>> sudo dpkg-reconfigure ttf-mscorefonts-installer</li><li>exe /home/nojsja/Downloads/ttf-mscorefonts-installer</li></ol><h4 id=\"Ubuntu18-04-WPS-\"><a href=\"#Ubuntu18-04-WPS-\" class=\"headerlink\" title=\"Ubuntu18.04 WPS \"></a>Ubuntu18.04 WPS </h4><hr><p><a href=\"https://pan.baidu.com/s/10MushHhTXwfRIFkKGmwD7Q\" target=\"_blank\" rel=\"noopener\">fonts</a> (: 4jpo)Linux/usr/share/fonts<br></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: sudo mkfontscale</span><br><span class=\"line\">$: sudo mkfontdir</span><br><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: sudo <span class=\"built_in\">fc</span>-cache</span><br></pre></td></tr></table></figure><p></p><h4 id=\"Ubuntu18-04-WPS--1\"><a href=\"#Ubuntu18-04-WPS--1\" class=\"headerlink\" title=\"Ubuntu18.04 WPS \"></a>Ubuntu18.04 WPS </h4><hr><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 32bit</span></span><br><span class=\"line\">$: sudo apt-get install libnvidia-gl-440:i386</span><br></pre></td></tr></table></figure><h4 id=\"Ubuntu20-04-deepin-screenshot\"><a href=\"#Ubuntu20-04-deepin-screenshot\" class=\"headerlink\" title=\"Ubuntu20.04 deepin-screenshot\"></a>Ubuntu20.04 deepin-screenshot</h4><hr><p><code>xfce4-clipman</code><br></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo apt install xfce4-clipman</span><br></pre></td></tr></table></figure><p></p><h4 id=\"Ubuntu18-04-Gnome\"><a href=\"#Ubuntu18-04-Gnome\" class=\"headerlink\" title=\"Ubuntu18.04 Gnome\"></a>Ubuntu18.04 Gnome</h4><hr><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Upgrade</span></span><br><span class=\"line\"><span class=\"comment\">#If you were using the gnome3-team/gnome3-staging PPA, run the following before upgrading:</span></span><br><span class=\"line\">$: sudo ppa-purge ppa:gnome3-team/gnome3-staging</span><br><span class=\"line\">$: sudo ppa-purge ppa:gnome3-team/gnome3</span><br><span class=\"line\">$: sudo apt install ubuntu-gnome-desktop^</span><br><span class=\"line\"><span class=\"comment\"># The included GUI update manager will offer you the latest release of Ubuntu GNOME. Access this via the terminal:</span></span><br><span class=\"line\">$: update-manager -c</span><br><span class=\"line\"><span class=\"comment\"># Alternatively, run the following command:</span></span><br><span class=\"line\">$: sudo <span class=\"keyword\">do</span>-release-upgrade</span><br></pre></td></tr></table></figure><h4 id=\"Win10-Ubuntu18-04-\"><a href=\"#Win10-Ubuntu18-04-\" class=\"headerlink\" title=\"Win10 + Ubuntu18.04 \"></a>Win10 + Ubuntu18.04 </h4><hr><blockquote><p>UbuntuWindowsUbuntuBIOSGMT+0(GMT+8)UbuntuBIOS+88Ubuntu8BIOS0WindowsWindowsBIOSWindows0Windows8BIOSWindows8Ubuntu8+8=16</p></blockquote><ol><li>Ubuntu<br>> sudo apt-get install ntpdate<br>> sudo ntpdate time.windows.com</li><li><br>> sudo hwclock localtime systohc</li><li>linuxwindows</li></ol><h4 id=\"Ubuntu18-04--\"><a href=\"#Ubuntu18-04--\" class=\"headerlink\" title=\"Ubuntu18.04 ()\"></a>Ubuntu18.04 ()</h4><hr><blockquote><p> [ <em>GPT+UEFI</em> ]  [ <em>MBR + LEGANCY</em> ]</p><ol><li>( gpt+uefi / mbr+legancy)<br>UEFIUbuntu18.04 bios (UEFI)/boot 1GBbios(UEFI/boot/boot/efi)/8G8Gswapbios  <a href=\"https://blog.csdn.net/jesse_mx/article/details/61425361\" target=\"_blank\" rel=\"noopener\"></a></li><li>(gpt+uefi )<br>efi/boot(bootgrubefiUEFI)/efit</li><li>(mbr+legancy)<br>legancy + mbr/boot()  //boot</li></ol></blockquote><h4 id=\"Ubuntu-18-04-lvm\"><a href=\"#Ubuntu-18-04-lvm\" class=\"headerlink\" title=\"Ubuntu 18.04 lvm\"></a>Ubuntu 18.04 lvm</h4><p><a href=\"https://askubuntu.com/questions/1030867/how-to-diagnose-fix-very-slow-boot-on-ubuntu-18-04\" target=\"_blank\" rel=\"noopener\">=&gt; </a></p><ol><li> <code>/etc/default/grub</code>  <code>GRUB_CMDLINE_LINUX_DEFAULT</code> <strong>noresume</strong><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">GRUB_CMDLINE_LINUX_DEFAULT=<span class=\"string\">\"quiet splash noresume\"</span></span><br></pre></td></tr></table></figure></li><li>grub<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: sudo update-grub</span><br></pre></td></tr></table></figure></li><li></li></ol><h4 id=\"Ubuntu18-04-1-1-0\"><a href=\"#Ubuntu18-04-1-1-0\" class=\"headerlink\" title=\"Ubuntu18.04 1.1.0\"></a>Ubuntu18.04 1.1.0</h4><hr><ul><li>root<br>> sudo netease-cloud-music &gt; /dev/null 2&gt;&amp;1 &amp;</li><li>session-managerbug<br>> alias netease=unset SESSION_MANAGER &amp;&amp; netease-cloud-music<br>> netease &gt; /dev/null &amp;</li><li>bug<a href=\"https://github.com/trazyn/ieaseMusic\" target=\"_blank\" rel=\"noopener\">ieaseMusic</a></li><li>ubuntu18.04<a href=\"https://github.com/innoob/netease-cloud-music\" target=\"_blank\" rel=\"noopener\"></a>bug</li></ul><h4 id=\"Ubuntu18-04-Crossover17QQ\"><a href=\"#Ubuntu18-04-Crossover17QQ\" class=\"headerlink\" title=\"Ubuntu18.04 Crossover17QQ\"></a>Ubuntu18.04 Crossover17QQ</h4><hr><blockquote><p>ume-ui-gothic.ttf</p></blockquote><p> /opt/cxoffice/share/wine/fonts <a href=\"https://pan.baidu.com/s/13CDBKrvTAJOhrbuyLw96jA\" target=\"_blank\" rel=\"noopener\">ume-ui-gothic.ttf</a> ()ume-ui-gothic.ttf</p><h4 id=\"Ubuntu18-04-tweakgnomeBlyr\"><a href=\"#Ubuntu18-04-tweakgnomeBlyr\" class=\"headerlink\" title=\"Ubuntu18.04 tweakgnomeBlyr\"></a>Ubuntu18.04 tweakgnomeBlyr</h4><hr><p>=&gt; <code>Error: Requiring Clutter, version none: Typelib file for namespace &#39;Clutter&#39; (any version) not found ...</code><br>=&gt; Clutter<br>=&gt; <br></p><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># </span></span><br><span class=\"line\">$: sudo apt-get install gir1.2-clutter-1.0 gir1.2-clutter-gst-3.0 gir1.2-gtkclutter-1.0</span><br></pre></td></tr></table></figure><p></p><h4 id=\"Ubuntu18-04--\"><a href=\"#Ubuntu18-04--\" class=\"headerlink\" title=\"Ubuntu18.04  \"></a>Ubuntu18.04  </h4><hr><p>ubuntu18.04gksu</p><ol><li>alias<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: <span class=\"built_in\">alias</span> gksu=<span class=\"string\">'pkexec env DISPLAY=$DISPLAY XAUTHORITY=$XAUTHORITY'</span></span><br></pre></td></tr></table></figure></li><li><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$: gksu gedit /etc/default/apport</span><br><span class=\"line\"><span class=\"comment\"># `enable = 1``enable = 0`</span></span><br></pre></td></tr></table></figure></li></ol><h4 id=\"Ubuntu18-04-Gnome-Shell-\"><a href=\"#Ubuntu18-04-Gnome-Shell-\" class=\"headerlink\" title=\"Ubuntu18.04 Gnome-Shell \"></a>Ubuntu18.04 Gnome-Shell </h4><hr><ul><li><a href=\"https://extensions.gnome.org/extension/97/coverflow-alt-tab/\" target=\"_blank\" rel=\"noopener\">CoverFlow Alt-Tab</a> =&gt; Tab()</li><li><a href=\"https://extensions.gnome.org/extension/19/user-themes/\" target=\"_blank\" rel=\"noopener\">User Themes()</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/307/dash-to-dock/\" target=\"_blank\" rel=\"noopener\">Dash To Dock</a> =&gt; dock()</li><li><a href=\"https://extensions.gnome.org/extension/1160/dash-to-panel/\" target=\"_blank\" rel=\"noopener\">Dash To Panel</a> =&gt; dock()</li><li><a href=\"https://extensions.gnome.org/extension/1236/noannoyance/\" target=\"_blank\" rel=\"noopener\">NoAnnoyance</a> =&gt; pop()</li><li><a href=\"https://extensions.gnome.org/extension/595/autohide-battery/\" target=\"_blank\" rel=\"noopener\">Autohide Battery</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/8/places-status-indicator/\" target=\"_blank\" rel=\"noopener\">Places Status Indicator</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/7/removable-drive-menu/\" target=\"_blank\" rel=\"noopener\">Removable Drive Menu</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/826/suspend-button/\" target=\"_blank\" rel=\"noopener\">Suspend Button</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/495/topicons/\" target=\"_blank\" rel=\"noopener\">TopIcons</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/1031/topicons/\" target=\"_blank\" rel=\"noopener\">TopIconsPlus</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/1251/blyr/\" target=\"_blank\" rel=\"noopener\">Blyr</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/358/activities-configurator/\" target=\"_blank\" rel=\"noopener\">Activities Configurator</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/427/workspaces-to-dock/\" target=\"_blank\" rel=\"noopener\">Workspace to Dock</a> =&gt; dock()</li><li><a href=\"https://extensions.gnome.org/extension/1036/extensions/\" target=\"_blank\" rel=\"noopener\">Extensions</a> =&gt; gnome-shell()</li><li><a href=\"https://extensions.gnome.org/extension/779/clipboard-indicator/\" target=\"_blank\" rel=\"noopener\">Clipboard Indicator</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/906/sound-output-device-chooser/\" target=\"_blank\" rel=\"noopener\">Sound Input &amp; Output Device Chooser</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/1236/noannoyance/\" target=\"_blank\" rel=\"noopener\">NoAnnoyance</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/1401/bluetooth-quick-connect/\" target=\"_blank\" rel=\"noopener\">Bluetooth quick connect</a> =&gt; ()</li><li><a href=\"https://extensions.gnome.org/extension/1403/remove-alttab-delay/\" target=\"_blank\" rel=\"noopener\">Remove Alt+Tab Delay</a> =&gt; Alt + Tab()</li><li><a href=\"https://extensions.gnome.org/extension/1162/emoji-selector/\" target=\"_blank\" rel=\"noopener\">Emoji Selector</a> =&gt; Emoji()</li></ul><h4 id=\"Ubuntu18-04--Dash-to-dock-\"><a href=\"#Ubuntu18-04--Dash-to-dock-\" class=\"headerlink\" title=\"Ubuntu18.04  [ Dash to dock ] \"></a>Ubuntu18.04  [ Dash to dock ] </h4><hr><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#Use Custom Dock Indicator ( Optional )</span></span><br><span class=\"line\">$: gsettings <span class=\"built_in\">set</span> org.gnome.shell.extensions.dash-to-dock custom-theme-running-dots <span class=\"literal\">false</span></span><br><span class=\"line\">$: gsettings <span class=\"built_in\">set</span> org.gnome.shell.extensions.dash-to-dock custom-theme-customize-running-dots <span class=\"literal\">false</span></span><br><span class=\"line\">_______________________________________________________________________________________________</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Disable Custom Dock Shrink ( Required for Good looking) (  Required )</span></span><br><span class=\"line\">$: gsettings <span class=\"built_in\">set</span> org.gnome.shell.extensions.dash-to-dock custom-theme-shrink <span class=\"literal\">false</span></span><br><span class=\"line\">_______________________________________________________________________________________________</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Dock Transparency mode ( Optional )</span></span><br><span class=\"line\">$: gsettings <span class=\"built_in\">set</span> org.gnome.shell.extensions.dash-to-dock transparency-mode DEFAULT</span><br><span class=\"line\">_______________________________________________________________________________________________</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># Restore to Default</span></span><br><span class=\"line\">$: dconf reset -f /org/gnome/shell/extensions/dash-to-dock/</span><br><span class=\"line\">_______________________________________________________________________________________________</span><br></pre></td></tr></table></figure><h4 id=\"Ubuntu18-04-\"><a href=\"#Ubuntu18-04-\" class=\"headerlink\" title=\"Ubuntu18.04 \"></a>Ubuntu18.04 </h4><hr><ul><li>GTK3() =&gt; <a href=\"https://www.gnome-look.org/p/1167049/\" target=\"_blank\" rel=\"noopener\">X-Arc-Collection</a></li><li>GTK3() =&gt; <a href=\"https://www.gnome-look.org/p/1241688\" target=\"_blank\" rel=\"noopener\">McOS-themes</a></li><li>Gnome Shell() =&gt; <a href=\"https://github.com/daniruiz/flat-remix\" target=\"_blank\" rel=\"noopener\">Flat-Remix</a></li><li>Gnome Shell() =&gt; <a href=\"https://www.gnome-look.org/p/1171095/\" target=\"_blank\" rel=\"noopener\">Human</a></li><li>Gnome Shell() =&gt; <a href=\"https://www.opendesktop.org/c/1460761561\" target=\"_blank\" rel=\"noopener\">macOS High Sierra</a></li><li>Gnome Shell(?) =&gt; <a href=\"https://www.gnome-look.org/p/1213208/\" target=\"_blank\" rel=\"noopener\">macOS High Sierra</a></li><li>Icon () =&gt; <a href=\"https://github.com/daniruiz/flat-remix/releases\" target=\"_blank\" rel=\"noopener\">flat-remix</a></li><li>Icon () =&gt; <a href=\"https://www.gnome-look.org/p/1012200/\" target=\"_blank\" rel=\"noopener\">Mac OS X Icon</a></li><li>Icon () =&gt; <a href=\"https://github.com/keeferrourke/la-capitaine-icon-theme/releases\" target=\"_blank\" rel=\"noopener\">la-capitaine-icon-theme</a></li><li>Icon () <a href=\"https://www.pling.com/p/1305429/\" target=\"_blank\" rel=\"noopener\">McMojave-circle</a></li><li>Icon () =&gt; <a href=\"https://github.com/zayronxio/Macos-sierra-CT\" target=\"_blank\" rel=\"noopener\">MacOS sierra ct</a></li><li>Cursor() =&gt; <a href=\"https://krourke.org/projects/art/capitaine-cursors\" target=\"_blank\" rel=\"noopener\">Capitaine Cursors</a></li></ul><h4 id=\"chrome\"><a href=\"#chrome\" class=\"headerlink\" title=\"chrome\"></a>chrome</h4><hr><ul><li><a href=\"https://chrome.google.com/webstore/detail/infinity-new-tabproductiv/dbfmnekepjoapopniengjbcpnbljalfg?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">infinity pro </a> =&gt; ()</li><li><a href=\"https://chrome.google.com/webstore/detail/octotree/bkhaagjahfmjljalopjnoealnfndnagc?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">Octotree</a> =&gt; github()</li><li><a href=\"https://chrome.google.com/webstore/detail/postman-interceptor/aicmkgpgakddgnaphhhpliifpcfhicfo?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">Postman</a> =&gt; API()</li><li><a href=\"https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">SwitchyOmega</a> =&gt; ()</li><li><a href=\"https://chrome.google.com/webstore/detail/evernote-web-clipper/pioclpoplcdbaefihamjohnefbikjilc?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\"></a> =&gt; ()</li><li><a href=\"https://chrome.google.com/webstore/detail/simpread-reader-view/ijllcpnolfcooahcekpamkbidhejabll?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">SimpRead</a> =&gt; ()</li><li><a href=\"https://chrome.google.com/webstore/detail/full-page-screen-capture/fdpohaocaechififmbbbbbknoalclacl?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">Full Page Screen Capture</a> =&gt; ()</li><li><a href=\"https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">tampermonkey</a> =&gt; badu()</li><li><a href=\"https://chrome.google.com/webstore/detail/checker-plus-for-gmail/oeopbcgkkoapgobdbedcemjljbihmemj?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">Checker Plus for Gmail</a> =&gt; Google()</li><li><a href=\"https://chrome.google.com/webstore/detail/vimium/dbepggeogbaibhgnhhndojpepiihcmeb?utm_source=InfinityNewtab\" target=\"_blank\" rel=\"noopener\">Vimium</a> =&gt; googlevim(firefox)()</li><li><a href=\"https://chrome.google.com/webstore/detail/copy-as-markdown/dgoenpnkphkichnohepecnmpmihnabdg\" target=\"_blank\" rel=\"noopener\">Markdown</a> =&gt; markdown()</li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><ul><li><a href=\"https://github.com/tonsky/FiraCode/wiki/Linux-instructions#installing-with-a-package-manager\" target=\"_blank\" rel=\"noopener\">fonts-firacode</a> =&gt; vscode<code>sudo apt install fonts-firacode</code></li><li><a href=\"https://vivaldi.com\" target=\"_blank\" rel=\"noopener\">vivaldi</a> =&gt; ()</li><li>Terminator =&gt; gnome()</li><li>Timeshift =&gt; ()</li><li>ipython3() =&gt; python()</li><li>jupyter =&gt; ()</li><li>pdb/ipdb() =&gt; python()</li><li>trash-cli() =&gt; ()</li><li>bat() =&gt; catgit()</li><li>axel() =&gt; 100 : )()</li><li><a href=\"https://github.com/aria2/aria2\" target=\"_blank\" rel=\"noopener\">aria2()</a> =&gt; </li><li><a href=\"https://github.com/oguzhaninan/Stacer\" target=\"_blank\" rel=\"noopener\">stacer</a> =&gt; linux()</li><li><a href=\"https://github.com/trazyn/ieaseMusic\" target=\"_blank\" rel=\"noopener\">ieaseMusic</a> =&gt; bug[]()</li><li>parallel() =&gt; ()</li><li>cheat() =&gt; man()</li><li>topgrade() =&gt; ()</li><li><a href=\"https://www.dbkoda.com/\" target=\"_blank\" rel=\"noopener\">dbKoda</a> =&gt; mongodb GUI()</li><li><a href=\"https://www.mongodb.com/products/compass\" target=\"_blank\" rel=\"noopener\">mongodb compass</a> =&gt; mongodb GUI()</li><li><a href=\"https://github.com/phw/peek\" target=\"_blank\" rel=\"noopener\">peek</a> =&gt; gif/webm/apng/webm()</li><li>tmux =&gt; ()</li><li>(ubuntu) =&gt; ()</li><li>(ubuntu) =&gt; ()</li><li>shutter =&gt; <code>ppa:linuxuprising/shutter</code>()</li><li>flameshot =&gt; Ubuntu20.04()</li><li><a href=\"https://webtorrent.io/desktop/\" target=\"_blank\" rel=\"noopener\">WebTorrent</a><a href=\"https://www.frostwire.com/\" target=\"_blank\" rel=\"noopener\">FrostWire</a> =&gt; bt()</li><li><a href=\"https://www.syntevo.com/smartgit/\" target=\"_blank\" rel=\"noopener\">SmartGit</a> =&gt; linuxGIT GUI()</li><li>FileZilla =&gt; ftp()</li><li><a href=\"https://github.com/Suremotoo/e-tools\" target=\"_blank\" rel=\"noopener\">e-tools</a> =&gt; coder()</li><li><a href=\"https://electronjs.org/apps/whatever\" target=\"_blank\" rel=\"noopener\">WhatEver</a> =&gt; linux()</li><li><a href=\"http://linux.wps.cn/\" target=\"_blank\" rel=\"noopener\">wps</a> =&gt; linux office for free made by KingSoftware()</li><li><a href=\"https://code.visualstudio.com/\" target=\"_blank\" rel=\"noopener\">vscode</a> =&gt;  ()</li><li>ndb =&gt; node.js/javascript ()</li><li><a href=\"https://raw.githubusercontent.com/creationix/nvm/v0.33.0/install.sh\" target=\"_blank\" rel=\"noopener\">nvm</a> =&gt; nodejs</li><li>albert ( <code>ppa:noobslab/macbuntu</code>  ) =&gt; MacSpotLight()</li><li><a href=\"https://linux.cn/article-5460-1.html\" target=\"_blank\" rel=\"noopener\">lftp</a> =&gt; FTPFTPSHTTPHTTPSHFTPFISHSFTP<br></li><li><a href=\"http://jonls.dk/redshift/\" target=\"_blank\" rel=\"noopener\">redshift-gtk</a> </li><li>apt-fast =&gt; apt<code>ppa:apt-fast/stable</code>()</li><li>nautilus action configure tool =&gt; <code>ppa:daniel-marynicz/filemanager-actions</code>()</li><li>tig =&gt; git()</li><li>shellcheck =&gt; shell()</li><li><a href=\"https://motrix.app/zh-CN/\" target=\"_blank\" rel=\"noopener\">Motrix</a> =&gt; ()</li><li><a href=\"https://www.insynchq.com/\" target=\"_blank\" rel=\"noopener\">Insync</a> =&gt; googleonedrive()</li><li><a href=\"https://github.com/teejee2008/timeshift\" target=\"_blank\" rel=\"noopener\">Timeshift</a> =&gt; ()</li><li>dconf-editor =&gt; gnomegui()</li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><hr><p><img src=\"Ubuntu18.04-14.png\" alt=\"Vimix.png\"></p><ul><li><a href=\"https://wallpapershome.com/\" target=\"_blank\" rel=\"noopener\">Wallpaper</a> =&gt; ()</li><li><a href=\"https://www.flaticon.com\" target=\"_blank\" rel=\"noopener\">flaticon</a> =&gt; svgpng</li><li><a href=\"https://electronjs.org/apps\" target=\"_blank\" rel=\"noopener\">Electron Apps</a> =&gt; Electron (Linux/Mac/Windows)()</li><li><a href=\"https://www.centos.bz/\" target=\"_blank\" rel=\"noopener\">Linux</a> =&gt; Linux()</li><li><a href=\"https://www.ibm.com/developerworks/cn/\" target=\"_blank\" rel=\"noopener\">IBM Developer</a> =&gt; ()</li><li><a href=\"https://www.lulinux.com/archives/2513#awk\" target=\"_blank\" rel=\"noopener\">Linux</a> =&gt; ()</li><li><a href=\"https://www.kanbilibili.com/\" target=\"_blank\" rel=\"noopener\">bilibili</a> =&gt;  // ()</li><li><a href=\"https://linux.cn/\" target=\"_blank\" rel=\"noopener\">Linux</a> =&gt; ()</li><li><a href=\"https://tinypng.com/\" target=\"_blank\" rel=\"noopener\">TinyPNG</a> =&gt; ()</li><li><a href=\"https://www.iloveimg.com/zh-cn\" target=\"_blank\" rel=\"noopener\">iLoveIMG</a> =&gt; ()</li><li><a href=\"https://en.savefrom.net/\" target=\"_blank\" rel=\"noopener\">savefrom</a> =&gt; youtube()</li><li><a href=\"https://www.lulinux.com/\" target=\"_blank\" rel=\"noopener\">Linux</a> =&gt; ()</li><li><a href=\"https://greasyfork.org/zh-CN/scripts\" target=\"_blank\" rel=\"noopener\"></a> =&gt; ()</li></ul><p><em>Linuxer.</em></p>"},{"title":"Antd","catalog":true,"toc_nav_num":true,"header-img":"article_header.png","date":"2020-08-28T08:19:59.000Z","subtitle":"Antd Editable Tree","top":2,"_content":"\n### I \n---------\n\nAntdAnt DesignReact UI`Button``Form``Input``Modal``List`...`Tree``Upload``Table``Tree`...TreeAntdTreeAntd TreeAntd`EditableTree`[nojsja/EditableTree](https://github.com/NoJsJa/react-nojsja/tree/master/components/EditableTree)\n\n![editable_tree](./editable_tree.png)\n\n### II \n-------------\n\n1. \n2. \n3. \n4. \n5. \n6. \n7. 50\n\n### III \n--------------\n\nReact / Antd / Mobx\n\n[Antd Tree](https://ant.design/components/tree-cn/)\n\n#### \n\n* --- Tree.js - Tree`Model`\n* --- TreeNode.jsx - \n* --- index.jsx - `TreeNode`\n* --- index.less - \n\n#### \n\n* Antd`Tree`\n```json\n[\n  {\n    title: 'parent 1',\n    key: '0-0',\n    children: [\n      {\n        title: 'parent 1-0',\n        key: '0-0-0',\n        disabled: true,\n        children: [\n          {\n            title: 'leaf',\n            key: '0-0-0-0',\n            disableCheckbox: true,\n          },\n          {\n            title: 'leaf',\n            key: '0-0-0-1',\n          }\n        ]\n      },\n      {\n        title: 'parent 1-1',\n        key: '0-0-1',\n        children: [{ title: <span style={{ color: '#1890ff' }}>sss</span>, key: '0-0-1-0' }]\n      }\n    ]\n  }\n]\n```\n* `title`(label)`key`()`children`()  \n\n* `title`ReactNodeAntd`title``title`ReactTree`TreeNode.js`Component`Tree.js`Model\n\n#### index.jsx\n>`TreeNode`\n\n* `componentDidMount`Tree Modelstate\n\n* `componentWillReceiveProps`ModelstateJs`deepComparison`\n\n* `formatNodeData`  Antd Tree\n```json\n[\n  {\n    nodeName: '',\n    id: '',\n    isInEdit: true,\n    nodeValue: [\n      {\n        nodeName: '',\n        id: '',\n        nodeValue: [\n          {\n            nodeName: '',\n            id: '',\n            nodeValue: 'A',\n          },\n          {\n            nodeName: '',\n            id: '',\n            nodeValue: 'B1',\n          },\n        ],\n      }\n    ],\n  },\n]\n```\n\n* \n```js\n...\n\n@inject('lang')\n@observer\nclass EditableTree extends Component {\n  state = {\n    treeData: [], // Antd Tree \n    expandedKeys: [], // /\n    focusKey: '',\n    maxLevel: 50, // \n  };\n  dataOrigin = []\n  treeModel = null\n  key=getRandomString()\n\n  /* treeModelstate */\n  componentDidMount() {\n    const { data, maxLevel = 50 } = this.props;\n    if (data) {\n      this.dataOrigin = toJS(data);\n      TreeClass.defaultTreeValueWrapper(this.dataOrigin); // tree\n      const formattedData = this.formatTreeData(this.dataOrigin); // Antd Tree\n      this.updateTreeModel(); // model\n      const keys = TreeClass.getTreeKeys(this.dataOrigin); // key\n      this.setState({\n        treeData: formattedData,\n        maxLevel,\n        expandedKeys: keys,\n      });\n    }\n  }\n\n  /* propstreeModelstate */\n  componentWillReceiveProps(nextProps) {\n    let { data, maxLevel = 50 } = nextProps;\n    data = toJS(data);\n    if (!deepComparison(this.dataOrigin, data)) { // \n      this.dataOrigin = data;\n      TreeClass.defaultTreeValueWrapper(this.dataOrigin);\n      const formattedData = this.formatTreeData(this.dataOrigin);\n      this.updateTreeModel();\n      const keys = TreeClass.getTreeKeys(this.dataOrigin);\n      this.onDataChange(this.dataOrigin); // onChange\n      this.setState({\n        treeData: formattedData,\n        maxLevel,\n        expandedKeys: keys,\n      });\n    }\n  }\n\n  /*  */\n  modifyNode = (key, treeNode) => {\n    const modifiedData = this.treeModel.modifyNode(key, treeNode); // model\n    this.setState({\n      treeData: this.formatTreeData(modifiedData), // state,\n    }, () => this.onDataChange(this.dataOrigin));\n  }\n\n  /**\n   * modifyNode\n   * treeModelstate\n   **/\n\n  /*  */\n  getInToEditable = (key, treeNode) => { ... }\n  /*  */\n  addSisterNode = (key) => { ... }\n  /*  */\n  addSubNode = (key) => { ... }\n  /*  */\n  removeNode = (key) => { ... }\n\n  /*  */\n  formatNodeData = (treeData) => {\n    let tree = {};\n    const key = `${this.key}_${treeData.id}`;\n    if (treeData.toString() === '[object Object]' && tree !== null) {\n      tree.key = key;\n      treeData.key = key;\n      tree.title = /*  */\n        (<TreeNode\n          setParent={this.setAttr}\n          focusKey={this.state.focusKey}\n          treeData={treeData}\n          modifyNode={this.modifyNode}\n          addSisterNode={this.addSisterNode}\n          getInToEditable={this.getInToEditable}\n          addSubNode={this.addSubNode}\n          removeNode={this.removeNode}\n          setFocus={this.setFocus}\n        />);\n      if (treeData.nodeValue instanceof Array) tree.children = treeData.nodeValue.map(d => this.formatNodeData(d));\n    } else {\n      tree = '';\n    }\n    return tree;\n  }\n\n  /*  */\n  formatTreeData = (treeData) => {\n    let tree = [];\n    if (treeData instanceof Array) tree = treeData.map(treeNode => this.formatNodeData(treeNode));\n    return tree;\n  }\n\n  /* TreeModel */\n  updateTreeModel = () => {\n    this.treeModel = new TreeClass(\n      this.dataOrigin, this.key, {\n        maxLevel: this.state.maxLevel,\n        overLevelTips: this.props.lang.lang.template_tree_max_level_tips,\n        completeEditingNodeTips: this.props.lang.lang.pleaseCompleteTheNodeBeingEdited,\n        addSameLevelTips: this.props.lang.extendedMetadata_same_level_name_cannot_be_added,\n      }\n    );\n  }\n\n  /*  */\n  onDataChange = (modifiedData) => {\n    const { onDataChange = () => {} } = this.props;\n    onDataChange(modifiedData);\n  }\n\n  ...\n\n  render() {\n    const { treeData } = this.state;\n    return (\n      <div className=\"editable-tree-wrapper\">\n      {\n        (treeData && treeData.length) ?\n          <Tree\n            showLine\n            onExpand={this.onExpand}\n            expandedKeys={this.state.expandedKeys}\n            // defaultExpandedKeys={this.state.expandedKeys}\n            defaultExpandAll\n            treeData={treeData}\n          />\n        : null\n      }\n      </div>\n    );\n  }\n}\n\n```\n\n#### Tree.js\n\n>Tree`Model`\n\n\n```js\nexport default class Tree {\n  constructor(data, treeKey, {\n    maxLevel,\n    overLevelTips = '',\n    addSameLevelTips = '',\n    completeEditingNodeTips = '',\n  }) {\n    this.treeData = data;\n    this.treeKey = treeKey;\n    this.maxLevel = maxLevel;\n    this.overLevelTips = overLevelTips;\n    this.completeEditingNodeTips = completeEditingNodeTips;\n    this.addSameLevelTips = addSameLevelTips;\n  }\n\n  ...\n\n  /*  */\n  static findInEdit(items) {\n    ...\n  }\n\n  /*  */\n  getInToEditable(key, {\n    nodeName, nodeValue, id, isInEdit,\n  } = {}) {\n    ...\n  }\n\n  /*  */\n  modifyNode(key, {\n    nodeName = '', nodeValue = '', nameEditable = true,\n    valueEditable = true, nodeDeletable = true, isInEdit = false,\n  } = {}) {\n    ...\n  }\n\n  /*  */\n  addSisterNode(key, {\n    nodeName = '', nameEditable = true, valueEditable = true,\n    nodeDeletable = true, isInEdit = true, nodeValue = '',\n  } = {}) {\n    ...\n  }\n\n  /*  */\n  addSubNode(key, {\n    nodeName = '', nameEditable = true, valueEditable = true,\n    nodeDeletable = true, isInEdit = true, nodeValue = '',\n  } = {}) {\n    ...\n  }\n\n  /*  */\n  removeNode(key) {\n    ...\n  }\n\n  /*  */\n  getTreeData() {\n    return JSON.parse(JSON.stringify(this.treeData));\n  }\n}\n\n```\n\n#### TreeNode.jsx\n>React  \n\n()`nameEditable``valueEditable``nodeDeletable``true`  \n\n![tree_add_sister](./tree_add_sister.png)\n\n![tree_add_sub](./tree_add_sub.png)\n\n`isInEdit`\n\n![tree_in_edit](./tree_in_edit.png)\n\n [TreeNode.jsx](https://github.com/NoJsJa/react-nojsja/blob/master/components/EditableTree/TreeNode.jsx)\n\n### IV &\n------------------------------\n\n#### \n\n* \n\n* TreeNodeTreeNode/\n\n* `expandedKeys``expandedKeys`key`expandedKeys`statemobx store\n```js\n...\nrender() {\n    const { treeData } = this.state;\n    return (\n      <div className=\"editable-tree-wrapper\">\n      {\n        (treeData && treeData.length) ?\n          <Tree\n            showLine\n            onExpand={this.onExpand}\n            expandedKeys={this.state.expandedKeys}\n            treeData={treeData}\n          />\n        : null\n      }\n      </div>\n    );\n  }\n```\n\n#### Antd\n\n* `TreeNode.jsx``EditableTree``<span>``<input>`Antd`Row/Col``input``span`Col\n\n* Antd`Row/Col``<span>``<div>``div``min-width``max-width``overflow`\n\n![tree_in_edit](./tree_in_edit.png)\n\n### V \n---------\n\nTree`Semantic UI``Semantic UI`Treestate`EditableTree``treeModel``TreeNode.jsx``Tree.js``index.jsx``Antd`()...","source":"_posts/2020-08-28-Antd.md","raw":"---\ntitle: Antd\ncatalog: true\ntoc_nav_num: true\nheader-img: article_header.png\ndate: 2020-08-28 16:19:59\nsubtitle: \"Antd Editable Tree\"\ntags:\n- antd\n- tree\ncategories:\n- Antd\n- React\ntop: 2\n---\n\n### I \n---------\n\nAntdAnt DesignReact UI`Button``Form``Input``Modal``List`...`Tree``Upload``Table``Tree`...TreeAntdTreeAntd TreeAntd`EditableTree`[nojsja/EditableTree](https://github.com/NoJsJa/react-nojsja/tree/master/components/EditableTree)\n\n![editable_tree](./editable_tree.png)\n\n### II \n-------------\n\n1. \n2. \n3. \n4. \n5. \n6. \n7. 50\n\n### III \n--------------\n\nReact / Antd / Mobx\n\n[Antd Tree](https://ant.design/components/tree-cn/)\n\n#### \n\n* --- Tree.js - Tree`Model`\n* --- TreeNode.jsx - \n* --- index.jsx - `TreeNode`\n* --- index.less - \n\n#### \n\n* Antd`Tree`\n```json\n[\n  {\n    title: 'parent 1',\n    key: '0-0',\n    children: [\n      {\n        title: 'parent 1-0',\n        key: '0-0-0',\n        disabled: true,\n        children: [\n          {\n            title: 'leaf',\n            key: '0-0-0-0',\n            disableCheckbox: true,\n          },\n          {\n            title: 'leaf',\n            key: '0-0-0-1',\n          }\n        ]\n      },\n      {\n        title: 'parent 1-1',\n        key: '0-0-1',\n        children: [{ title: <span style={{ color: '#1890ff' }}>sss</span>, key: '0-0-1-0' }]\n      }\n    ]\n  }\n]\n```\n* `title`(label)`key`()`children`()  \n\n* `title`ReactNodeAntd`title``title`ReactTree`TreeNode.js`Component`Tree.js`Model\n\n#### index.jsx\n>`TreeNode`\n\n* `componentDidMount`Tree Modelstate\n\n* `componentWillReceiveProps`ModelstateJs`deepComparison`\n\n* `formatNodeData`  Antd Tree\n```json\n[\n  {\n    nodeName: '',\n    id: '',\n    isInEdit: true,\n    nodeValue: [\n      {\n        nodeName: '',\n        id: '',\n        nodeValue: [\n          {\n            nodeName: '',\n            id: '',\n            nodeValue: 'A',\n          },\n          {\n            nodeName: '',\n            id: '',\n            nodeValue: 'B1',\n          },\n        ],\n      }\n    ],\n  },\n]\n```\n\n* \n```js\n...\n\n@inject('lang')\n@observer\nclass EditableTree extends Component {\n  state = {\n    treeData: [], // Antd Tree \n    expandedKeys: [], // /\n    focusKey: '',\n    maxLevel: 50, // \n  };\n  dataOrigin = []\n  treeModel = null\n  key=getRandomString()\n\n  /* treeModelstate */\n  componentDidMount() {\n    const { data, maxLevel = 50 } = this.props;\n    if (data) {\n      this.dataOrigin = toJS(data);\n      TreeClass.defaultTreeValueWrapper(this.dataOrigin); // tree\n      const formattedData = this.formatTreeData(this.dataOrigin); // Antd Tree\n      this.updateTreeModel(); // model\n      const keys = TreeClass.getTreeKeys(this.dataOrigin); // key\n      this.setState({\n        treeData: formattedData,\n        maxLevel,\n        expandedKeys: keys,\n      });\n    }\n  }\n\n  /* propstreeModelstate */\n  componentWillReceiveProps(nextProps) {\n    let { data, maxLevel = 50 } = nextProps;\n    data = toJS(data);\n    if (!deepComparison(this.dataOrigin, data)) { // \n      this.dataOrigin = data;\n      TreeClass.defaultTreeValueWrapper(this.dataOrigin);\n      const formattedData = this.formatTreeData(this.dataOrigin);\n      this.updateTreeModel();\n      const keys = TreeClass.getTreeKeys(this.dataOrigin);\n      this.onDataChange(this.dataOrigin); // onChange\n      this.setState({\n        treeData: formattedData,\n        maxLevel,\n        expandedKeys: keys,\n      });\n    }\n  }\n\n  /*  */\n  modifyNode = (key, treeNode) => {\n    const modifiedData = this.treeModel.modifyNode(key, treeNode); // model\n    this.setState({\n      treeData: this.formatTreeData(modifiedData), // state,\n    }, () => this.onDataChange(this.dataOrigin));\n  }\n\n  /**\n   * modifyNode\n   * treeModelstate\n   **/\n\n  /*  */\n  getInToEditable = (key, treeNode) => { ... }\n  /*  */\n  addSisterNode = (key) => { ... }\n  /*  */\n  addSubNode = (key) => { ... }\n  /*  */\n  removeNode = (key) => { ... }\n\n  /*  */\n  formatNodeData = (treeData) => {\n    let tree = {};\n    const key = `${this.key}_${treeData.id}`;\n    if (treeData.toString() === '[object Object]' && tree !== null) {\n      tree.key = key;\n      treeData.key = key;\n      tree.title = /*  */\n        (<TreeNode\n          setParent={this.setAttr}\n          focusKey={this.state.focusKey}\n          treeData={treeData}\n          modifyNode={this.modifyNode}\n          addSisterNode={this.addSisterNode}\n          getInToEditable={this.getInToEditable}\n          addSubNode={this.addSubNode}\n          removeNode={this.removeNode}\n          setFocus={this.setFocus}\n        />);\n      if (treeData.nodeValue instanceof Array) tree.children = treeData.nodeValue.map(d => this.formatNodeData(d));\n    } else {\n      tree = '';\n    }\n    return tree;\n  }\n\n  /*  */\n  formatTreeData = (treeData) => {\n    let tree = [];\n    if (treeData instanceof Array) tree = treeData.map(treeNode => this.formatNodeData(treeNode));\n    return tree;\n  }\n\n  /* TreeModel */\n  updateTreeModel = () => {\n    this.treeModel = new TreeClass(\n      this.dataOrigin, this.key, {\n        maxLevel: this.state.maxLevel,\n        overLevelTips: this.props.lang.lang.template_tree_max_level_tips,\n        completeEditingNodeTips: this.props.lang.lang.pleaseCompleteTheNodeBeingEdited,\n        addSameLevelTips: this.props.lang.extendedMetadata_same_level_name_cannot_be_added,\n      }\n    );\n  }\n\n  /*  */\n  onDataChange = (modifiedData) => {\n    const { onDataChange = () => {} } = this.props;\n    onDataChange(modifiedData);\n  }\n\n  ...\n\n  render() {\n    const { treeData } = this.state;\n    return (\n      <div className=\"editable-tree-wrapper\">\n      {\n        (treeData && treeData.length) ?\n          <Tree\n            showLine\n            onExpand={this.onExpand}\n            expandedKeys={this.state.expandedKeys}\n            // defaultExpandedKeys={this.state.expandedKeys}\n            defaultExpandAll\n            treeData={treeData}\n          />\n        : null\n      }\n      </div>\n    );\n  }\n}\n\n```\n\n#### Tree.js\n\n>Tree`Model`\n\n\n```js\nexport default class Tree {\n  constructor(data, treeKey, {\n    maxLevel,\n    overLevelTips = '',\n    addSameLevelTips = '',\n    completeEditingNodeTips = '',\n  }) {\n    this.treeData = data;\n    this.treeKey = treeKey;\n    this.maxLevel = maxLevel;\n    this.overLevelTips = overLevelTips;\n    this.completeEditingNodeTips = completeEditingNodeTips;\n    this.addSameLevelTips = addSameLevelTips;\n  }\n\n  ...\n\n  /*  */\n  static findInEdit(items) {\n    ...\n  }\n\n  /*  */\n  getInToEditable(key, {\n    nodeName, nodeValue, id, isInEdit,\n  } = {}) {\n    ...\n  }\n\n  /*  */\n  modifyNode(key, {\n    nodeName = '', nodeValue = '', nameEditable = true,\n    valueEditable = true, nodeDeletable = true, isInEdit = false,\n  } = {}) {\n    ...\n  }\n\n  /*  */\n  addSisterNode(key, {\n    nodeName = '', nameEditable = true, valueEditable = true,\n    nodeDeletable = true, isInEdit = true, nodeValue = '',\n  } = {}) {\n    ...\n  }\n\n  /*  */\n  addSubNode(key, {\n    nodeName = '', nameEditable = true, valueEditable = true,\n    nodeDeletable = true, isInEdit = true, nodeValue = '',\n  } = {}) {\n    ...\n  }\n\n  /*  */\n  removeNode(key) {\n    ...\n  }\n\n  /*  */\n  getTreeData() {\n    return JSON.parse(JSON.stringify(this.treeData));\n  }\n}\n\n```\n\n#### TreeNode.jsx\n>React  \n\n()`nameEditable``valueEditable``nodeDeletable``true`  \n\n![tree_add_sister](./tree_add_sister.png)\n\n![tree_add_sub](./tree_add_sub.png)\n\n`isInEdit`\n\n![tree_in_edit](./tree_in_edit.png)\n\n [TreeNode.jsx](https://github.com/NoJsJa/react-nojsja/blob/master/components/EditableTree/TreeNode.jsx)\n\n### IV &\n------------------------------\n\n#### \n\n* \n\n* TreeNodeTreeNode/\n\n* `expandedKeys``expandedKeys`key`expandedKeys`statemobx store\n```js\n...\nrender() {\n    const { treeData } = this.state;\n    return (\n      <div className=\"editable-tree-wrapper\">\n      {\n        (treeData && treeData.length) ?\n          <Tree\n            showLine\n            onExpand={this.onExpand}\n            expandedKeys={this.state.expandedKeys}\n            treeData={treeData}\n          />\n        : null\n      }\n      </div>\n    );\n  }\n```\n\n#### Antd\n\n* `TreeNode.jsx``EditableTree``<span>``<input>`Antd`Row/Col``input``span`Col\n\n* Antd`Row/Col``<span>``<div>``div``min-width``max-width``overflow`\n\n![tree_in_edit](./tree_in_edit.png)\n\n### V \n---------\n\nTree`Semantic UI``Semantic UI`Treestate`EditableTree``treeModel``TreeNode.jsx``Tree.js``index.jsx``Antd`()...","slug":"Antd","published":1,"updated":"2020-08-28T12:35:40.156Z","_id":"ckee5ptx70000q595gus658so","comments":1,"layout":"post","photos":[],"link":"","content":"<h3 id=\"I-\"><a href=\"#I-\" class=\"headerlink\" title=\"I \"></a>I </h3><hr><p>AntdAnt DesignReact UI<code>Button</code><code>Form</code><code>Input</code><code>Modal</code><code>List</code><code>Tree</code><code>Upload</code><code>Table</code><code>Tree</code>TreeAntdTreeAntd TreeAntd<code>EditableTree</code><a href=\"https://github.com/NoJsJa/react-nojsja/tree/master/components/EditableTree\" target=\"_blank\" rel=\"noopener\">nojsja/EditableTree</a></p><p><img src=\"./editable_tree.png\" alt=\"editable_tree\"></p><h3 id=\"II-\"><a href=\"#II-\" class=\"headerlink\" title=\"II \"></a>II </h3><hr><ol><li></li><li></li><li></li><li></li><li></li><li></li><li>50</li></ol><h3 id=\"III-\"><a href=\"#III-\" class=\"headerlink\" title=\"III \"></a>III </h3><hr><p>React / Antd / Mobx</p><p><a href=\"https://ant.design/components/tree-cn/\" target=\"_blank\" rel=\"noopener\">Antd Tree</a></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li>- Tree.js - Tree<code>Model</code></li><li>- TreeNode.jsx - </li><li>- index.jsx - <code>TreeNode</code></li><li>- index.less - </li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li>Antd<code>Tree</code><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    title: 'parent 1',</span><br><span class=\"line\">    key: '0-0',</span><br><span class=\"line\">    children: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        title: 'parent 1-0',</span><br><span class=\"line\">        key: '0-0-0',</span><br><span class=\"line\">        disabled: true,</span><br><span class=\"line\">        children: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            title: 'leaf',</span><br><span class=\"line\">            key: '0-0-0-0',</span><br><span class=\"line\">            disableCheckbox: true,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            title: 'leaf',</span><br><span class=\"line\">            key: '0-0-0-1',</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        title: 'parent 1-1',</span><br><span class=\"line\">        key: '0-0-1',</span><br><span class=\"line\">        children: [&#123; title: &lt;span style=&#123;&#123; color: '#1890ff' &#125;&#125;&gt;sss&lt;/span&gt;, key: '0-0-1-0' &#125;]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li><li><p><code>title</code>(label)<code>key</code>()<code>children</code>()</p></li><li><p><code>title</code>ReactNodeAntd<code>title</code><code>title</code>ReactTree<code>TreeNode.js</code>Component<code>Tree.js</code>Model</p></li></ul><h4 id=\"index-jsx\"><a href=\"#index-jsx\" class=\"headerlink\" title=\"index.jsx\"></a>index.jsx</h4><blockquote><p><code>TreeNode</code></p></blockquote><ul><li><p><code>componentDidMount</code>Tree Modelstate</p></li><li><p><code>componentWillReceiveProps</code>ModelstateJs<code>deepComparison</code></p></li><li><p><code>formatNodeData</code>  Antd Tree</p><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    nodeName: '',</span><br><span class=\"line\">    id: '',</span><br><span class=\"line\">    isInEdit: true,</span><br><span class=\"line\">    nodeValue: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        nodeName: '',</span><br><span class=\"line\">        id: '',</span><br><span class=\"line\">        nodeValue: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            nodeName: '',</span><br><span class=\"line\">            id: '',</span><br><span class=\"line\">            nodeValue: 'A',</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            nodeName: '',</span><br><span class=\"line\">            id: '',</span><br><span class=\"line\">            nodeValue: 'B1',</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li><li><p></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">@inject(<span class=\"string\">'lang'</span>)</span><br><span class=\"line\">@observer</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EditableTree</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  state = &#123;</span><br><span class=\"line\">    treeData: [], <span class=\"comment\">// Antd Tree </span></span><br><span class=\"line\">    expandedKeys: [], <span class=\"comment\">// /</span></span><br><span class=\"line\">    focusKey: <span class=\"string\">''</span>,</span><br><span class=\"line\">    maxLevel: <span class=\"number\">50</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  dataOrigin = []</span><br><span class=\"line\">  treeModel = <span class=\"literal\">null</span></span><br><span class=\"line\">  key=getRandomString()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* treeModelstate */</span></span><br><span class=\"line\">  componentDidMount() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; data, maxLevel = <span class=\"number\">50</span> &#125; = <span class=\"keyword\">this</span>.props;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (data) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.dataOrigin = toJS(data);</span><br><span class=\"line\">      TreeClass.defaultTreeValueWrapper(<span class=\"keyword\">this</span>.dataOrigin); <span class=\"comment\">// tree</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> formattedData = <span class=\"keyword\">this</span>.formatTreeData(<span class=\"keyword\">this</span>.dataOrigin); <span class=\"comment\">// Antd Tree</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.updateTreeModel(); <span class=\"comment\">// model</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> keys = TreeClass.getTreeKeys(<span class=\"keyword\">this</span>.dataOrigin); <span class=\"comment\">// key</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.setState(&#123;</span><br><span class=\"line\">        treeData: formattedData,</span><br><span class=\"line\">        maxLevel,</span><br><span class=\"line\">        expandedKeys: keys,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* propstreeModelstate */</span></span><br><span class=\"line\">  componentWillReceiveProps(nextProps) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> &#123; data, maxLevel = <span class=\"number\">50</span> &#125; = nextProps;</span><br><span class=\"line\">    data = toJS(data);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!deepComparison(<span class=\"keyword\">this</span>.dataOrigin, data)) &#123; <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.dataOrigin = data;</span><br><span class=\"line\">      TreeClass.defaultTreeValueWrapper(<span class=\"keyword\">this</span>.dataOrigin);</span><br><span class=\"line\">      <span class=\"keyword\">const</span> formattedData = <span class=\"keyword\">this</span>.formatTreeData(<span class=\"keyword\">this</span>.dataOrigin);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.updateTreeModel();</span><br><span class=\"line\">      <span class=\"keyword\">const</span> keys = TreeClass.getTreeKeys(<span class=\"keyword\">this</span>.dataOrigin);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.onDataChange(<span class=\"keyword\">this</span>.dataOrigin); <span class=\"comment\">// onChange</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.setState(&#123;</span><br><span class=\"line\">        treeData: formattedData,</span><br><span class=\"line\">        maxLevel,</span><br><span class=\"line\">        expandedKeys: keys,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  modifyNode = <span class=\"function\">(<span class=\"params\">key, treeNode</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> modifiedData = <span class=\"keyword\">this</span>.treeModel.modifyNode(key, treeNode); <span class=\"comment\">// model</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setState(&#123;</span><br><span class=\"line\">      treeData: <span class=\"keyword\">this</span>.formatTreeData(modifiedData), <span class=\"comment\">// state,</span></span><br><span class=\"line\">    &#125;, () =&gt; <span class=\"keyword\">this</span>.onDataChange(<span class=\"keyword\">this</span>.dataOrigin));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * modifyNode</span></span><br><span class=\"line\"><span class=\"comment\">   * treeModelstate</span></span><br><span class=\"line\"><span class=\"comment\">   **/</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  getInToEditable = <span class=\"function\">(<span class=\"params\">key, treeNode</span>) =&gt;</span> &#123; ... &#125;</span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  addSisterNode = <span class=\"function\">(<span class=\"params\">key</span>) =&gt;</span> &#123; ... &#125;</span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  addSubNode = <span class=\"function\">(<span class=\"params\">key</span>) =&gt;</span> &#123; ... &#125;</span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  removeNode = <span class=\"function\">(<span class=\"params\">key</span>) =&gt;</span> &#123; ... &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  formatNodeData = <span class=\"function\">(<span class=\"params\">treeData</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> tree = &#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> key = <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.key&#125;</span>_<span class=\"subst\">$&#123;treeData.id&#125;</span>`</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (treeData.toString() === <span class=\"string\">'[object Object]'</span> &amp;&amp; tree !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      tree.key = key;</span><br><span class=\"line\">      treeData.key = key;</span><br><span class=\"line\">      tree.title = <span class=\"comment\">/*  */</span></span><br><span class=\"line\">        (<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TreeNode</span></span></span></span><br><span class=\"line\"><span class=\"xml\">          setParent=&#123;this.setAttr&#125;</span></span><br><span class=\"line\"><span class=\"xml\">          focusKey=&#123;this.state.focusKey&#125;</span></span><br><span class=\"line\"><span class=\"xml\">          treeData=&#123;treeData&#125;</span></span><br><span class=\"line\"><span class=\"xml\">          modifyNode=&#123;this.modifyNode&#125;</span></span><br><span class=\"line\"><span class=\"xml\">          addSisterNode=&#123;this.addSisterNode&#125;</span></span><br><span class=\"line\"><span class=\"xml\">          getInToEditable=&#123;this.getInToEditable&#125;</span></span><br><span class=\"line\"><span class=\"xml\">          addSubNode=&#123;this.addSubNode&#125;</span></span><br><span class=\"line\"><span class=\"xml\">          removeNode=&#123;this.removeNode&#125;</span></span><br><span class=\"line\"><span class=\"xml\">          setFocus=&#123;this.setFocus&#125;</span></span><br><span class=\"line\"><span class=\"xml\">        /&gt;</span>);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (treeData.nodeValue <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Array</span>) tree.children = treeData.nodeValue.map(<span class=\"function\"><span class=\"params\">d</span> =&gt;</span> <span class=\"keyword\">this</span>.formatNodeData(d));</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      tree = <span class=\"string\">''</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tree;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  formatTreeData = <span class=\"function\">(<span class=\"params\">treeData</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> tree = [];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (treeData <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Array</span>) tree = treeData.map(<span class=\"function\"><span class=\"params\">treeNode</span> =&gt;</span> <span class=\"keyword\">this</span>.formatNodeData(treeNode));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tree;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* TreeModel */</span></span><br><span class=\"line\">  updateTreeModel = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.treeModel = <span class=\"keyword\">new</span> TreeClass(</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.dataOrigin, <span class=\"keyword\">this</span>.key, &#123;</span><br><span class=\"line\">        maxLevel: <span class=\"keyword\">this</span>.state.maxLevel,</span><br><span class=\"line\">        overLevelTips: <span class=\"keyword\">this</span>.props.lang.lang.template_tree_max_level_tips,</span><br><span class=\"line\">        completeEditingNodeTips: <span class=\"keyword\">this</span>.props.lang.lang.pleaseCompleteTheNodeBeingEdited,</span><br><span class=\"line\">        addSameLevelTips: <span class=\"keyword\">this</span>.props.lang.extendedMetadata_same_level_name_cannot_be_added,</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  onDataChange = <span class=\"function\">(<span class=\"params\">modifiedData</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; onDataChange = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;&#125; &#125; = <span class=\"keyword\">this</span>.props;</span><br><span class=\"line\">    onDataChange(modifiedData);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  ...</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; treeData &#125; = <span class=\"keyword\">this</span>.state;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">\"editable-tree-wrapper\"</span>&gt;</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        (treeData &amp;&amp; treeData.length) ?</span><br><span class=\"line\">          &lt;Tree</span><br><span class=\"line\">            showLine</span><br><span class=\"line\">            onExpand=&#123;<span class=\"keyword\">this</span>.onExpand&#125;</span><br><span class=\"line\">            expandedKeys=&#123;<span class=\"keyword\">this</span>.state.expandedKeys&#125;</span><br><span class=\"line\">            <span class=\"comment\">// defaultExpandedKeys=&#123;this.state.expandedKeys&#125;</span></span><br><span class=\"line\">            defaultExpandAll</span><br><span class=\"line\">            treeData=&#123;treeData&#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        : <span class=\"literal\">null</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    );</span></span><br><span class=\"line\"><span class=\"regexp\">  &#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id=\"Tree-js\"><a href=\"#Tree-js\" class=\"headerlink\" title=\"Tree.js\"></a>Tree.js</h4><blockquote><p>Tree<code>Model</code></p></blockquote><p><br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Tree</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(data, treeKey, &#123;</span><br><span class=\"line\">    maxLevel,</span><br><span class=\"line\">    overLevelTips = <span class=\"string\">''</span>,</span><br><span class=\"line\">    addSameLevelTips = <span class=\"string\">''</span>,</span><br><span class=\"line\">    completeEditingNodeTips = <span class=\"string\">''</span>,</span><br><span class=\"line\">  &#125;) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.treeData = data;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.treeKey = treeKey;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.maxLevel = maxLevel;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.overLevelTips = overLevelTips;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.completeEditingNodeTips = completeEditingNodeTips;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.addSameLevelTips = addSameLevelTips;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  ...</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> findInEdit(items) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  getInToEditable(key, &#123;</span><br><span class=\"line\">    nodeName, nodeValue, id, isInEdit,</span><br><span class=\"line\">  &#125; = &#123;&#125;) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  modifyNode(key, &#123;</span><br><span class=\"line\">    nodeName = <span class=\"string\">''</span>, nodeValue = <span class=\"string\">''</span>, nameEditable = <span class=\"literal\">true</span>,</span><br><span class=\"line\">    valueEditable = <span class=\"literal\">true</span>, nodeDeletable = <span class=\"literal\">true</span>, isInEdit = <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125; = &#123;&#125;) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  addSisterNode(key, &#123;</span><br><span class=\"line\">    nodeName = <span class=\"string\">''</span>, nameEditable = <span class=\"literal\">true</span>, valueEditable = <span class=\"literal\">true</span>,</span><br><span class=\"line\">    nodeDeletable = <span class=\"literal\">true</span>, isInEdit = <span class=\"literal\">true</span>, nodeValue = <span class=\"string\">''</span>,</span><br><span class=\"line\">  &#125; = &#123;&#125;) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  addSubNode(key, &#123;</span><br><span class=\"line\">    nodeName = <span class=\"string\">''</span>, nameEditable = <span class=\"literal\">true</span>, valueEditable = <span class=\"literal\">true</span>,</span><br><span class=\"line\">    nodeDeletable = <span class=\"literal\">true</span>, isInEdit = <span class=\"literal\">true</span>, nodeValue = <span class=\"string\">''</span>,</span><br><span class=\"line\">  &#125; = &#123;&#125;) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  removeNode(key) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  getTreeData() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">JSON</span>.stringify(<span class=\"keyword\">this</span>.treeData));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><h4 id=\"TreeNode-jsx\"><a href=\"#TreeNode-jsx\" class=\"headerlink\" title=\"TreeNode.jsx\"></a>TreeNode.jsx</h4><blockquote><p>React</p></blockquote><p>()<code>nameEditable</code><code>valueEditable</code><code>nodeDeletable</code><code>true</code></p><p><img src=\"./tree_add_sister.png\" alt=\"tree_add_sister\"></p><p><img src=\"./tree_add_sub.png\" alt=\"tree_add_sub\"></p><p><code>isInEdit</code></p><p><img src=\"./tree_in_edit.png\" alt=\"tree_in_edit\"></p><p> <a href=\"https://github.com/NoJsJa/react-nojsja/blob/master/components/EditableTree/TreeNode.jsx\" target=\"_blank\" rel=\"noopener\">TreeNode.jsx</a></p><h3 id=\"IV--amp-\"><a href=\"#IV--amp-\" class=\"headerlink\" title=\"IV &amp;\"></a>IV &amp;</h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li><p></p></li><li><p>TreeNodeTreeNode/</p></li><li><p><code>expandedKeys</code><code>expandedKeys</code>key<code>expandedKeys</code>statemobx store</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; treeData &#125; = <span class=\"keyword\">this</span>.state;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">\"editable-tree-wrapper\"</span>&gt;</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        (treeData &amp;&amp; treeData.length) ?</span><br><span class=\"line\">          &lt;Tree</span><br><span class=\"line\">            showLine</span><br><span class=\"line\">            onExpand=&#123;<span class=\"keyword\">this</span>.onExpand&#125;</span><br><span class=\"line\">            expandedKeys=&#123;<span class=\"keyword\">this</span>.state.expandedKeys&#125;</span><br><span class=\"line\">            treeData=&#123;treeData&#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        : <span class=\"literal\">null</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    );</span></span><br><span class=\"line\"><span class=\"regexp\">  &#125;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id=\"Antd\"><a href=\"#Antd\" class=\"headerlink\" title=\"Antd\"></a>Antd</h4><ul><li><p><code>TreeNode.jsx</code><code>EditableTree</code><code>&lt;span&gt;</code><code>&lt;input&gt;</code>Antd<code>Row/Col</code><code>input</code><code>span</code>Col</p></li><li><p>Antd<code>Row/Col</code><code>&lt;span&gt;</code><code>&lt;div&gt;</code><code>div</code><code>min-width</code><code>max-width</code><code>overflow</code></p></li></ul><p><img src=\"./tree_in_edit.png\" alt=\"tree_in_edit\"></p><h3 id=\"V-\"><a href=\"#V-\" class=\"headerlink\" title=\"V \"></a>V </h3><hr><p>Tree<code>Semantic UI</code><code>Semantic UI</code>Treestate<code>EditableTree</code><code>treeModel</code><code>TreeNode.jsx</code><code>Tree.js</code><code>index.jsx</code><code>Antd</code>()</p>","site":{"data":{}},"excerpt":"","more":"<h3 id=\"I-\"><a href=\"#I-\" class=\"headerlink\" title=\"I \"></a>I </h3><hr><p>AntdAnt DesignReact UI<code>Button</code><code>Form</code><code>Input</code><code>Modal</code><code>List</code><code>Tree</code><code>Upload</code><code>Table</code><code>Tree</code>TreeAntdTreeAntd TreeAntd<code>EditableTree</code><a href=\"https://github.com/NoJsJa/react-nojsja/tree/master/components/EditableTree\" target=\"_blank\" rel=\"noopener\">nojsja/EditableTree</a></p><p><img src=\"./editable_tree.png\" alt=\"editable_tree\"></p><h3 id=\"II-\"><a href=\"#II-\" class=\"headerlink\" title=\"II \"></a>II </h3><hr><ol><li></li><li></li><li></li><li></li><li></li><li></li><li>50</li></ol><h3 id=\"III-\"><a href=\"#III-\" class=\"headerlink\" title=\"III \"></a>III </h3><hr><p>React / Antd / Mobx</p><p><a href=\"https://ant.design/components/tree-cn/\" target=\"_blank\" rel=\"noopener\">Antd Tree</a></p><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li>- Tree.js - Tree<code>Model</code></li><li>- TreeNode.jsx - </li><li>- index.jsx - <code>TreeNode</code></li><li>- index.less - </li></ul><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li>Antd<code>Tree</code><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    title: 'parent 1',</span><br><span class=\"line\">    key: '0-0',</span><br><span class=\"line\">    children: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        title: 'parent 1-0',</span><br><span class=\"line\">        key: '0-0-0',</span><br><span class=\"line\">        disabled: true,</span><br><span class=\"line\">        children: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            title: 'leaf',</span><br><span class=\"line\">            key: '0-0-0-0',</span><br><span class=\"line\">            disableCheckbox: true,</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            title: 'leaf',</span><br><span class=\"line\">            key: '0-0-0-1',</span><br><span class=\"line\">          &#125;</span><br><span class=\"line\">        ]</span><br><span class=\"line\">      &#125;,</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        title: 'parent 1-1',</span><br><span class=\"line\">        key: '0-0-1',</span><br><span class=\"line\">        children: [&#123; title: &lt;span style=&#123;&#123; color: '#1890ff' &#125;&#125;&gt;sss&lt;/span&gt;, key: '0-0-1-0' &#125;]</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ]</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li><li><p><code>title</code>(label)<code>key</code>()<code>children</code>()</p></li><li><p><code>title</code>ReactNodeAntd<code>title</code><code>title</code>ReactTree<code>TreeNode.js</code>Component<code>Tree.js</code>Model</p></li></ul><h4 id=\"index-jsx\"><a href=\"#index-jsx\" class=\"headerlink\" title=\"index.jsx\"></a>index.jsx</h4><blockquote><p><code>TreeNode</code></p></blockquote><ul><li><p><code>componentDidMount</code>Tree Modelstate</p></li><li><p><code>componentWillReceiveProps</code>ModelstateJs<code>deepComparison</code></p></li><li><p><code>formatNodeData</code>  Antd Tree</p><figure class=\"highlight\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[</span><br><span class=\"line\">  &#123;</span><br><span class=\"line\">    nodeName: '',</span><br><span class=\"line\">    id: '',</span><br><span class=\"line\">    isInEdit: true,</span><br><span class=\"line\">    nodeValue: [</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        nodeName: '',</span><br><span class=\"line\">        id: '',</span><br><span class=\"line\">        nodeValue: [</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            nodeName: '',</span><br><span class=\"line\">            id: '',</span><br><span class=\"line\">            nodeValue: 'A',</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">          &#123;</span><br><span class=\"line\">            nodeName: '',</span><br><span class=\"line\">            id: '',</span><br><span class=\"line\">            nodeValue: 'B1',</span><br><span class=\"line\">          &#125;,</span><br><span class=\"line\">        ],</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    ],</span><br><span class=\"line\">  &#125;,</span><br><span class=\"line\">]</span><br></pre></td></tr></table></figure></li><li><p></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">@inject(<span class=\"string\">'lang'</span>)</span><br><span class=\"line\">@observer</span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">EditableTree</span> <span class=\"keyword\">extends</span> <span class=\"title\">Component</span> </span>&#123;</span><br><span class=\"line\">  state = &#123;</span><br><span class=\"line\">    treeData: [], <span class=\"comment\">// Antd Tree </span></span><br><span class=\"line\">    expandedKeys: [], <span class=\"comment\">// /</span></span><br><span class=\"line\">    focusKey: <span class=\"string\">''</span>,</span><br><span class=\"line\">    maxLevel: <span class=\"number\">50</span>, <span class=\"comment\">// </span></span><br><span class=\"line\">  &#125;;</span><br><span class=\"line\">  dataOrigin = []</span><br><span class=\"line\">  treeModel = <span class=\"literal\">null</span></span><br><span class=\"line\">  key=getRandomString()</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* treeModelstate */</span></span><br><span class=\"line\">  componentDidMount() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; data, maxLevel = <span class=\"number\">50</span> &#125; = <span class=\"keyword\">this</span>.props;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (data) &#123;</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.dataOrigin = toJS(data);</span><br><span class=\"line\">      TreeClass.defaultTreeValueWrapper(<span class=\"keyword\">this</span>.dataOrigin); <span class=\"comment\">// tree</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> formattedData = <span class=\"keyword\">this</span>.formatTreeData(<span class=\"keyword\">this</span>.dataOrigin); <span class=\"comment\">// Antd Tree</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.updateTreeModel(); <span class=\"comment\">// model</span></span><br><span class=\"line\">      <span class=\"keyword\">const</span> keys = TreeClass.getTreeKeys(<span class=\"keyword\">this</span>.dataOrigin); <span class=\"comment\">// key</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.setState(&#123;</span><br><span class=\"line\">        treeData: formattedData,</span><br><span class=\"line\">        maxLevel,</span><br><span class=\"line\">        expandedKeys: keys,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* propstreeModelstate */</span></span><br><span class=\"line\">  componentWillReceiveProps(nextProps) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> &#123; data, maxLevel = <span class=\"number\">50</span> &#125; = nextProps;</span><br><span class=\"line\">    data = toJS(data);</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (!deepComparison(<span class=\"keyword\">this</span>.dataOrigin, data)) &#123; <span class=\"comment\">// </span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.dataOrigin = data;</span><br><span class=\"line\">      TreeClass.defaultTreeValueWrapper(<span class=\"keyword\">this</span>.dataOrigin);</span><br><span class=\"line\">      <span class=\"keyword\">const</span> formattedData = <span class=\"keyword\">this</span>.formatTreeData(<span class=\"keyword\">this</span>.dataOrigin);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.updateTreeModel();</span><br><span class=\"line\">      <span class=\"keyword\">const</span> keys = TreeClass.getTreeKeys(<span class=\"keyword\">this</span>.dataOrigin);</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.onDataChange(<span class=\"keyword\">this</span>.dataOrigin); <span class=\"comment\">// onChange</span></span><br><span class=\"line\">      <span class=\"keyword\">this</span>.setState(&#123;</span><br><span class=\"line\">        treeData: formattedData,</span><br><span class=\"line\">        maxLevel,</span><br><span class=\"line\">        expandedKeys: keys,</span><br><span class=\"line\">      &#125;);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  modifyNode = <span class=\"function\">(<span class=\"params\">key, treeNode</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> modifiedData = <span class=\"keyword\">this</span>.treeModel.modifyNode(key, treeNode); <span class=\"comment\">// model</span></span><br><span class=\"line\">    <span class=\"keyword\">this</span>.setState(&#123;</span><br><span class=\"line\">      treeData: <span class=\"keyword\">this</span>.formatTreeData(modifiedData), <span class=\"comment\">// state,</span></span><br><span class=\"line\">    &#125;, () =&gt; <span class=\"keyword\">this</span>.onDataChange(<span class=\"keyword\">this</span>.dataOrigin));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">   * modifyNode</span></span><br><span class=\"line\"><span class=\"comment\">   * treeModelstate</span></span><br><span class=\"line\"><span class=\"comment\">   **/</span></span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  getInToEditable = <span class=\"function\">(<span class=\"params\">key, treeNode</span>) =&gt;</span> &#123; ... &#125;</span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  addSisterNode = <span class=\"function\">(<span class=\"params\">key</span>) =&gt;</span> &#123; ... &#125;</span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  addSubNode = <span class=\"function\">(<span class=\"params\">key</span>) =&gt;</span> &#123; ... &#125;</span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  removeNode = <span class=\"function\">(<span class=\"params\">key</span>) =&gt;</span> &#123; ... &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  formatNodeData = <span class=\"function\">(<span class=\"params\">treeData</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> tree = &#123;&#125;;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> key = <span class=\"string\">`<span class=\"subst\">$&#123;<span class=\"keyword\">this</span>.key&#125;</span>_<span class=\"subst\">$&#123;treeData.id&#125;</span>`</span>;</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (treeData.toString() === <span class=\"string\">'[object Object]'</span> &amp;&amp; tree !== <span class=\"literal\">null</span>) &#123;</span><br><span class=\"line\">      tree.key = key;</span><br><span class=\"line\">      treeData.key = key;</span><br><span class=\"line\">      tree.title = <span class=\"comment\">/*  */</span></span><br><span class=\"line\">        (<span class=\"xml\"><span class=\"tag\">&lt;<span class=\"name\">TreeNode</span></span></span></span><br><span class=\"line\"><span class=\"xml\">          setParent=&#123;this.setAttr&#125;</span></span><br><span class=\"line\"><span class=\"xml\">          focusKey=&#123;this.state.focusKey&#125;</span></span><br><span class=\"line\"><span class=\"xml\">          treeData=&#123;treeData&#125;</span></span><br><span class=\"line\"><span class=\"xml\">          modifyNode=&#123;this.modifyNode&#125;</span></span><br><span class=\"line\"><span class=\"xml\">          addSisterNode=&#123;this.addSisterNode&#125;</span></span><br><span class=\"line\"><span class=\"xml\">          getInToEditable=&#123;this.getInToEditable&#125;</span></span><br><span class=\"line\"><span class=\"xml\">          addSubNode=&#123;this.addSubNode&#125;</span></span><br><span class=\"line\"><span class=\"xml\">          removeNode=&#123;this.removeNode&#125;</span></span><br><span class=\"line\"><span class=\"xml\">          setFocus=&#123;this.setFocus&#125;</span></span><br><span class=\"line\"><span class=\"xml\">        /&gt;</span>);</span><br><span class=\"line\">      <span class=\"keyword\">if</span> (treeData.nodeValue <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Array</span>) tree.children = treeData.nodeValue.map(<span class=\"function\"><span class=\"params\">d</span> =&gt;</span> <span class=\"keyword\">this</span>.formatNodeData(d));</span><br><span class=\"line\">    &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">      tree = <span class=\"string\">''</span>;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tree;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  formatTreeData = <span class=\"function\">(<span class=\"params\">treeData</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">let</span> tree = [];</span><br><span class=\"line\">    <span class=\"keyword\">if</span> (treeData <span class=\"keyword\">instanceof</span> <span class=\"built_in\">Array</span>) tree = treeData.map(<span class=\"function\"><span class=\"params\">treeNode</span> =&gt;</span> <span class=\"keyword\">this</span>.formatNodeData(treeNode));</span><br><span class=\"line\">    <span class=\"keyword\">return</span> tree;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/* TreeModel */</span></span><br><span class=\"line\">  updateTreeModel = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.treeModel = <span class=\"keyword\">new</span> TreeClass(</span><br><span class=\"line\">      <span class=\"keyword\">this</span>.dataOrigin, <span class=\"keyword\">this</span>.key, &#123;</span><br><span class=\"line\">        maxLevel: <span class=\"keyword\">this</span>.state.maxLevel,</span><br><span class=\"line\">        overLevelTips: <span class=\"keyword\">this</span>.props.lang.lang.template_tree_max_level_tips,</span><br><span class=\"line\">        completeEditingNodeTips: <span class=\"keyword\">this</span>.props.lang.lang.pleaseCompleteTheNodeBeingEdited,</span><br><span class=\"line\">        addSameLevelTips: <span class=\"keyword\">this</span>.props.lang.extendedMetadata_same_level_name_cannot_be_added,</span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">    );</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  onDataChange = <span class=\"function\">(<span class=\"params\">modifiedData</span>) =&gt;</span> &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; onDataChange = <span class=\"function\"><span class=\"params\">()</span> =&gt;</span> &#123;&#125; &#125; = <span class=\"keyword\">this</span>.props;</span><br><span class=\"line\">    onDataChange(modifiedData);</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  ...</span><br><span class=\"line\"></span><br><span class=\"line\">  render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; treeData &#125; = <span class=\"keyword\">this</span>.state;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">\"editable-tree-wrapper\"</span>&gt;</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        (treeData &amp;&amp; treeData.length) ?</span><br><span class=\"line\">          &lt;Tree</span><br><span class=\"line\">            showLine</span><br><span class=\"line\">            onExpand=&#123;<span class=\"keyword\">this</span>.onExpand&#125;</span><br><span class=\"line\">            expandedKeys=&#123;<span class=\"keyword\">this</span>.state.expandedKeys&#125;</span><br><span class=\"line\">            <span class=\"comment\">// defaultExpandedKeys=&#123;this.state.expandedKeys&#125;</span></span><br><span class=\"line\">            defaultExpandAll</span><br><span class=\"line\">            treeData=&#123;treeData&#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        : <span class=\"literal\">null</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    );</span></span><br><span class=\"line\"><span class=\"regexp\">  &#125;</span></span><br><span class=\"line\"><span class=\"regexp\">&#125;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id=\"Tree-js\"><a href=\"#Tree-js\" class=\"headerlink\" title=\"Tree.js\"></a>Tree.js</h4><blockquote><p>Tree<code>Model</code></p></blockquote><p><br></p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">export</span> <span class=\"keyword\">default</span> <span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Tree</span> </span>&#123;</span><br><span class=\"line\">  <span class=\"keyword\">constructor</span>(data, treeKey, &#123;</span><br><span class=\"line\">    maxLevel,</span><br><span class=\"line\">    overLevelTips = <span class=\"string\">''</span>,</span><br><span class=\"line\">    addSameLevelTips = <span class=\"string\">''</span>,</span><br><span class=\"line\">    completeEditingNodeTips = <span class=\"string\">''</span>,</span><br><span class=\"line\">  &#125;) &#123;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.treeData = data;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.treeKey = treeKey;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.maxLevel = maxLevel;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.overLevelTips = overLevelTips;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.completeEditingNodeTips = completeEditingNodeTips;</span><br><span class=\"line\">    <span class=\"keyword\">this</span>.addSameLevelTips = addSameLevelTips;</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  ...</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  <span class=\"keyword\">static</span> findInEdit(items) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  getInToEditable(key, &#123;</span><br><span class=\"line\">    nodeName, nodeValue, id, isInEdit,</span><br><span class=\"line\">  &#125; = &#123;&#125;) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  modifyNode(key, &#123;</span><br><span class=\"line\">    nodeName = <span class=\"string\">''</span>, nodeValue = <span class=\"string\">''</span>, nameEditable = <span class=\"literal\">true</span>,</span><br><span class=\"line\">    valueEditable = <span class=\"literal\">true</span>, nodeDeletable = <span class=\"literal\">true</span>, isInEdit = <span class=\"literal\">false</span>,</span><br><span class=\"line\">  &#125; = &#123;&#125;) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  addSisterNode(key, &#123;</span><br><span class=\"line\">    nodeName = <span class=\"string\">''</span>, nameEditable = <span class=\"literal\">true</span>, valueEditable = <span class=\"literal\">true</span>,</span><br><span class=\"line\">    nodeDeletable = <span class=\"literal\">true</span>, isInEdit = <span class=\"literal\">true</span>, nodeValue = <span class=\"string\">''</span>,</span><br><span class=\"line\">  &#125; = &#123;&#125;) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  addSubNode(key, &#123;</span><br><span class=\"line\">    nodeName = <span class=\"string\">''</span>, nameEditable = <span class=\"literal\">true</span>, valueEditable = <span class=\"literal\">true</span>,</span><br><span class=\"line\">    nodeDeletable = <span class=\"literal\">true</span>, isInEdit = <span class=\"literal\">true</span>, nodeValue = <span class=\"string\">''</span>,</span><br><span class=\"line\">  &#125; = &#123;&#125;) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  removeNode(key) &#123;</span><br><span class=\"line\">    ...</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">  <span class=\"comment\">/*  */</span></span><br><span class=\"line\">  getTreeData() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> <span class=\"built_in\">JSON</span>.parse(<span class=\"built_in\">JSON</span>.stringify(<span class=\"keyword\">this</span>.treeData));</span><br><span class=\"line\">  &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure><p></p><h4 id=\"TreeNode-jsx\"><a href=\"#TreeNode-jsx\" class=\"headerlink\" title=\"TreeNode.jsx\"></a>TreeNode.jsx</h4><blockquote><p>React</p></blockquote><p>()<code>nameEditable</code><code>valueEditable</code><code>nodeDeletable</code><code>true</code></p><p><img src=\"./tree_add_sister.png\" alt=\"tree_add_sister\"></p><p><img src=\"./tree_add_sub.png\" alt=\"tree_add_sub\"></p><p><code>isInEdit</code></p><p><img src=\"./tree_in_edit.png\" alt=\"tree_in_edit\"></p><p> <a href=\"https://github.com/NoJsJa/react-nojsja/blob/master/components/EditableTree/TreeNode.jsx\" target=\"_blank\" rel=\"noopener\">TreeNode.jsx</a></p><h3 id=\"IV--amp-\"><a href=\"#IV--amp-\" class=\"headerlink\" title=\"IV &amp;\"></a>IV &amp;</h3><hr><h4 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h4><ul><li><p></p></li><li><p>TreeNodeTreeNode/</p></li><li><p><code>expandedKeys</code><code>expandedKeys</code>key<code>expandedKeys</code>statemobx store</p><figure class=\"highlight js\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">...</span><br><span class=\"line\">render() &#123;</span><br><span class=\"line\">    <span class=\"keyword\">const</span> &#123; treeData &#125; = <span class=\"keyword\">this</span>.state;</span><br><span class=\"line\">    <span class=\"keyword\">return</span> (</span><br><span class=\"line\">      &lt;div className=<span class=\"string\">\"editable-tree-wrapper\"</span>&gt;</span><br><span class=\"line\">      &#123;</span><br><span class=\"line\">        (treeData &amp;&amp; treeData.length) ?</span><br><span class=\"line\">          &lt;Tree</span><br><span class=\"line\">            showLine</span><br><span class=\"line\">            onExpand=&#123;<span class=\"keyword\">this</span>.onExpand&#125;</span><br><span class=\"line\">            expandedKeys=&#123;<span class=\"keyword\">this</span>.state.expandedKeys&#125;</span><br><span class=\"line\">            treeData=&#123;treeData&#125;</span><br><span class=\"line\">          /&gt;</span><br><span class=\"line\">        : <span class=\"literal\">null</span></span><br><span class=\"line\">      &#125;</span><br><span class=\"line\">      &lt;<span class=\"regexp\">/div&gt;</span></span><br><span class=\"line\"><span class=\"regexp\">    );</span></span><br><span class=\"line\"><span class=\"regexp\">  &#125;</span></span><br></pre></td></tr></table></figure></li></ul><h4 id=\"Antd\"><a href=\"#Antd\" class=\"headerlink\" title=\"Antd\"></a>Antd</h4><ul><li><p><code>TreeNode.jsx</code><code>EditableTree</code><code>&lt;span&gt;</code><code>&lt;input&gt;</code>Antd<code>Row/Col</code><code>input</code><code>span</code>Col</p></li><li><p>Antd<code>Row/Col</code><code>&lt;span&gt;</code><code>&lt;div&gt;</code><code>div</code><code>min-width</code><code>max-width</code><code>overflow</code></p></li></ul><p><img src=\"./tree_in_edit.png\" alt=\"tree_in_edit\"></p><h3 id=\"V-\"><a href=\"#V-\" class=\"headerlink\" title=\"V \"></a>V </h3><hr><p>Tree<code>Semantic UI</code><code>Semantic UI</code>Treestate<code>EditableTree</code><code>treeModel</code><code>TreeNode.jsx</code><code>Tree.js</code><code>index.jsx</code><code>Antd</code>()</p>"},{"title":"32JS","catalog":true,"toc_nav_num":true,"header-img":"article_header.png","date":"2020-09-25T03:19:34.000Z","subtitle":"js native development","_content":"\n[32JS](https://juejin.im/post/6875152247714480136#heading-20)\n # 32JS\n \n JSoffer32JS\n \n MDNJS\n \n ## 01.\n \n \n \n     const arr = [1, [2, [3, [4, 5]]], 6];\n     // => [1, 2, 3, 4, 5, 6]\n     \n \n ### flat()\n \n     const res1 = arr.flat(Infinity);\n     \n \n ### \n \n     const res2 = JSON.stringify(arr).replace(/\\[|\\]/g, '').split(',');\n     \n \n \n \n ### \n \n     const res3 = JSON.parse('[' + JSON.stringify(arr).replace(/\\[|\\]/g, '') + ']');\n     \n \n ### reduce\n \n     const flatten = arr => {\n       return arr.reduce((pre, cur) => {\n         return pre.concat(Array.isArray(cur) ? flatten(cur) : cur);\n       }, [])\n     }\n     const res4 = flatten(arr);\n     \n \n ### \n \n     const res5 = [];\n     const fn = arr => {\n       for (let i = 0; i < arr.length; i++) {\n         if (Array.isArray(arr[i])) {\n           fn(arr[i]);\n         } else {\n           res5.push(arr[i]);\n         }\n       }\n     }\n     fn(arr);\n     \n \n ## 02.\n \n     const arr = [1, 1, '1', 17, true, true, false, false, 'true', 'a', {}, {}];\n     // => [1, '1', 17, true, false, 'true', 'a', {}, {}]\n     \n \n ### Set\n \n     const res1 = Array.from(new Set(arr));\n     \n \n ### for+splice\n \n     const unique1 = arr => {\n       let len = arr.length;\n       for (let i = 0; i < len; i++) {\n         for (let j = i + 1; j < len; j++) {\n           if (arr[i] === arr[j]) {\n             arr.splice(j, 1);\n             // j--jlen--\n             len--;\n             j--;\n           }\n         }\n       }\n       return arr;\n     }\n     \n \n ### indexOf\n \n     const unique2 = arr => {\n       const res = [];\n       for (let i = 0; i < arr.length; i++) {\n         if (res.indexOf(arr[i]) === -1) res.push(arr[i]);\n       }\n       return res;\n     }\n     \n \n includefilter\n \n ### include\n \n     const unique3 = arr => {\n       const res = [];\n       for (let i = 0; i < arr.length; i++) {\n         if (!res.includes(arr[i])) res.push(arr[i]);\n       }\n       return res;\n     }\n     \n \n ### filter\n \n     const unique4 = arr => {\n       return arr.filter((item, index) => {\n         return arr.indexOf(item) === index;\n       });\n     }\n     \n \n ### Map\n \n     const unique5 = arr => {\n       const map = new Map();\n       const res = [];\n       for (let i = 0; i < arr.length; i++) {\n         if (!map.has(arr[i])) {\n           map.set(arr[i], true)\n           res.push(arr[i]);\n         }\n       }\n       return res;\n     }\n     \n \n ## 03.\n \n **length****arguments**DOM\n \n ### Array.from\n \n     Array.from(document.querySelectorAll('div'))\n     \n \n ### Array.prototype.slice.call()\n \n     Array.prototype.slice.call(document.querySelectorAll('div'))\n     \n \n ### \n \n     [...document.querySelectorAll('div')]\n     \n \n ### concat\n \n     Array.prototype.concat.apply([], document.querySelectorAll('div'));\n     \n \n ## 04.Array.prototype.filter()\n \n ![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/804ee51d522746c3b219548d038413c2~tplv-k3u1fbpfcp-zoom-1.image)\n \n     Array.prototype.filter = function(callback, thisArg) {\n       if (this == undefined) {\n         throw new TypeError('this is null or not undefined');\n       }\n       if (typeof callback !== 'function') {\n         throw new TypeError(callback + 'is not a function');\n       }\n       const res = [];\n       // O\n       const O = Object(this);\n       // >>>0 lennumber\n       const len = O.length >>> 0;\n       for (let i = 0; i < len; i++) {\n         // iO\n         if (i in O) {\n           // \n           if (callback.call(thisArg, O[i], i, O)) {\n             res.push(O[i]);\n           }\n         }\n       }\n       return res;\n     }\n     \n \n `>>>0`[>>>0](https://zhuanlan.zhihu.com/p/100790268)\n \n ## 05.Array.prototype.map()\n \n ![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b099cf3e06bc4421abac4dc460a13c17~tplv-k3u1fbpfcp-zoom-1.image)\n \n     Array.prototype.map = function(callback, thisArg) {\n       if (this == undefined) {\n         throw new TypeError('this is null or not defined');\n       }\n       if (typeof callback !== 'function') {\n         throw new TypeError(callback + ' is not a function');\n       }\n       const res = [];\n       // \n       const O = Object(this);\n       const len = O.length >>> 0;\n       for (let i = 0; i < len; i++) {\n         if (i in O) {\n           // \n           res[i] = callback.call(thisArg, O[i], i, this);\n         }\n       }\n       return res;\n     }\n     \n \n ## 06.Array.prototype.forEach()\n \n ![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c3819fb0c404ae5a8f4cddc4e80731e~tplv-k3u1fbpfcp-zoom-1.image)\n \n `forEach`map`forEach`\n \n     Array.prototype.forEach = function(callback, thisArg) {\n       if (this == null) {\n         throw new TypeError('this is null or not defined');\n       }\n       if (typeof callback !== \"function\") {\n         throw new TypeError(callback + ' is not a function');\n       }\n       const O = Object(this);\n       const len = O.length >>> 0;\n       let k = 0;\n       while (k < len) {\n         if (k in O) {\n           callback.call(thisArg, O[k], k, O);\n         }\n         k++;\n       }\n     }\n     \n \n ## 07.Array.prototype.reduce()\n \n ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e51625eb9e2d47799ff39c5956139af7~tplv-k3u1fbpfcp-zoom-1.image)\n \n     Array.prototype.reduce = function(callback, initialValue) {\n       if (this == undefined) {\n         throw new TypeError('this is null or not defined');\n       }\n       if (typeof callback !== 'function') {\n         throw new TypeError(callbackfn + ' is not a function');\n       }\n       const O = Object(this);\n       const len = this.length >>> 0;\n       let accumulator = initialValue;\n       let k = 0;\n       // undefined\n       // \n       if (accumulator === undefined) {\n         while (k < len && !(k in O)) {\n           k++;\n         }\n         // TypeError\n         if (k >= len) {\n           throw new TypeError('Reduce of empty array with no initial value');\n         }\n         accumulator = O[k++];\n       }\n       while (k < len) {\n         if (k in O) {\n           accumulator = callback.call(undefined, accumulator, O[k], k, O);\n         }\n         k++;\n       }\n       return accumulator;\n     }\n     \n \n ## 08.Function.prototype.apply()\n \n this`window`\n \n     Function.prototype.apply = function(context = window, args) {\n       if (typeof this !== 'function') {\n         throw new TypeError('Type Error');\n       }\n       const fn = Symbol('fn');\n       context[fn] = this;\n     \n       const res = context[fn](...args);\n       delete context[fn];\n       return res;\n     }\n     \n \n ## 09.Function.prototype.call\n \n `call``call()`\n \n     Function.prototype.call = function(context = window, ...args) {\n       if (typeof this !== 'function') {\n         throw new TypeError('Type Error');\n       }\n       const fn = Symbol('fn');\n       context[fn] = this;\n     \n       const res = this[fn](...args);\n       delete this.fn;\n       return res;\n     }\n     \n \n ## 10.Function.prototype.bind\n \n     Function.prototype.bind = function(context, ...args) {\n       if (typeof this !== 'function') {\n         throw new Error(\"Type Error\");\n       }\n       // this\n       var self = this;\n     \n       return function F() {\n         // new\n         if(this instanceof F) {\n           return new self(...args, ...arguments)\n         }\n         return self.apply(context, [...args, ...arguments])\n       }\n     }\n     \n \n ## 11.debounce\n \n n,n,\n \n     const debounce = (fn, time) => {\n       let timeout = null;\n       return function() {\n         clearTimeout(timeout)\n         timeout = setTimeout(() => {\n           fn.apply(this, arguments);\n         }, time);\n       }\n     };\n     \n \n `window``resize`\n \n ## 12.throttle\n \n ,n,\n \n     const throttle = (fn, time) => {\n       let flag = true;\n       return function() {\n         if (!flag) return;\n         flag = false;\n         setTimeout(() => {\n           fn.apply(this, arguments);\n           flag = true;\n         }, time);\n       }\n     }\n     \n \n \n \n ## 13.\n \n >   f(1)(2)\n \n `add(1)(2)(3)(4)=10;`  `add(1)(1,2,3)(2)=9;`\n \n     function add() {\n       const _args = [...arguments];\n       function fn() {\n         _args.push(...arguments);\n         return fn;\n       }\n       fn.toString = function() {\n         return _args.reduce((sum, cur) => sum + cur);\n       }\n       return fn;\n     }\n     \n \n ## 14.new\n \n 3\n \n 1.  `ctor.prototype`\n 2.  this\n 3.  \n \n     function newOperator(ctor, ...args) {\n       if (typeof ctor !== 'function') {\n         throw new TypeError('Type Error');\n       }\n       const obj = Object.create(ctor.prototype);\n       const res = ctor.apply(obj, args);\n     \n       const isObject = typeof res === 'object' && res !== null;\n       const isFunction = typeof res === 'function';\n       return isObject || isFunction ? res : obj;\n     }\n     \n \n ## 15.instanceof\n \n `instanceof``prototype`\n \n     const myInstanceof = (left, right) => {\n       // false\n       if (typeof left !== 'object' || left === null) return false;\n       let proto = Object.getPrototypeOf(left);\n       while (true) {\n         if (proto === null) return false;\n         if (proto === right.prototype) return true;\n         proto = Object.getPrototypeOf(proto);\n       }\n     }\n     \n \n ## 16.\n \n \n \n     function Parent() {\n       this.name = 'parent';\n     }\n     function Child() {\n       Parent.call(this);\n       this.type = 'children';\n     }\n     Child.prototype = Object.create(Parent.prototype);\n     Child.prototype.constructor = Child;\n     \n \n ## 17.Object.is\n \n `Object.is`\n \n     +0 === -0  // true\n     NaN === NaN // false\n     \n \n     const is= (x, y) => {\n       if (x === y) {\n         // +0-0\n         return x !== 0 || y !== 0 || 1/x === 1/y;\n       } else {\n         return x !== x && y !== y;\n       }\n     }\n     \n \n ## 18.Object.assign\n \n `Object.assign()`\n \n     Object.defineProperty(Object, 'assign', {\n       value: function(target, ...args) {\n         if (target == null) {\n           return new TypeError('Cannot convert undefined or null to object');\n         }\n         \n         // \n         const to = Object(target);\n     \n         for (let i = 0; i < args.length; i++) {\n           // \n           const nextSource = args[i];\n           if (nextSource !== null) {\n             // for...inhasOwnProperty\n             for (const nextKey in nextSource) {\n               if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                 to[nextKey] = nextSource[nextKey];\n               }\n             }\n           }\n         }\n         return to;\n       },\n       // \n       enumerable: false,\n       writable: true,\n       configurable: true,\n     })\n     \n \n ## 19.\n \n Symbol\n \n     const cloneDeep1 = (target, hash = new WeakMap()) => {\n       // \n       if (typeof target !== 'object' || target === null) {\n         return target;\n       }\n       // \n       if (hash.has(target)) return hash.get(target);\n     \n       const cloneTarget = Array.isArray(target) ? [] : {};\n       hash.set(target, cloneTarget);\n     \n       // Symbol\n       const symKeys = Object.getOwnPropertySymbols(target);\n       if (symKeys.length) {\n         symKeys.forEach(symKey => {\n           if (typeof target[symKey] === 'object' && target[symKey] !== null) {\n             cloneTarget[symKey] = cloneDeep1(target[symKey]);\n           } else {\n             cloneTarget[symKey] = target[symKey];\n           }\n         })\n       }\n     \n       for (const i in target) {\n         if (Object.prototype.hasOwnProperty.call(target, i)) {\n           cloneTarget[i] =\n             typeof target[i] === 'object' && target[i] !== null\n             ? cloneDeep1(target[i], hash)\n             : target[i];\n         }\n       }\n       return cloneTarget;\n     }\n     \n \n ## 20.Promise\n \n [Promise](https://juejin.im/post/6860037916622913550)\n \n     const PENDING = 'PENDING';      // \n     const FULFILLED = 'FULFILLED';  // \n     const REJECTED = 'REJECTED';    // \n     \n     class Promise {\n       constructor(exector) {\n         // \n         this.status = PENDING;\n         // thisthencatch\n         this.value = undefined;\n         this.reason = undefined;\n         // \n         this.onFulfilledCallbacks = [];\n         // \n         this.onRejectedCallbacks = [];\n     \n         const resolve = value => {\n           // \n           if (this.status === PENDING) {\n             this.status = FULFILLED;\n             this.value = value;\n             // \n             this.onFulfilledCallbacks.forEach(fn => fn(this.value));\n           }\n         }\n         const reject = reason => {\n           // \n           if (this.status === PENDING) {\n             this.status = REJECTED;\n             this.reason = reason;\n             // \n             this.onRejectedCallbacks.forEach(fn => fn(this.reason))\n           }\n         }\n         try {\n           // executor\n           // resolverejectexecutorresolvereject\n           exector(resolve, reject);\n         } catch(e) {\n           // executorreject\n           reject(e);\n         }\n       }\n       then(onFulfilled, onRejected) {\n         onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : value => value;\n         onRejected = typeof onRejected === 'function'? onRejected:\n           reason => { throw new Error(reason instanceof Error ? reason.message:reason) }\n         // this\n         const self = this;\n         return new Promise((resolve, reject) => {\n           if (self.status === PENDING) {\n             self.onFulfilledCallbacks.push(() => {\n               // try\n               try {\n                 // \n                 setTimeout(() => {\n                   const result = onFulfilled(self.value);\n                   // \n                   // 1. Promisethen\n                   // 2. PromisePromiseresolve\n                   result instanceof Promise ? result.then(resolve, reject) : resolve(result);\n                 })\n               } catch(e) {\n                 reject(e);\n               }\n             });\n             self.onRejectedCallbacks.push(() => {\n               // \n               try {\n                 setTimeout(() => {\n                   const result = onRejected(self.reason);\n                   // reject\n                   result instanceof Promise ? result.then(resolve, reject) : reject(result);\n                 })\n               } catch(e) {\n                 reject(e);\n               }\n             })\n           } else if (self.status === FULFILLED) {\n             try {\n               setTimeout(() => {\n                 const result = onFulfilled(self.value);\n                 result instanceof Promise ? result.then(resolve, reject) : resolve(result);\n               });\n             } catch(e) {\n               reject(e);\n             }\n           } else if (self.status === REJECTED){\n             try {\n               setTimeout(() => {\n                 const result = onRejected(self.reason);\n                 result instanceof Promise ? result.then(resolve, reject) : reject(result);\n               })\n             } catch(e) {\n               reject(e);\n             }\n           }\n         });\n       }\n       catch(onRejected) {\n         return this.then(null, onRejected);\n       }\n       static resolve(value) {\n         if (value instanceof Promise) {\n           // Promise\n           return value;\n         } else {\n           // PromisePromiseFULFILLED\n           return new Promise((resolve, reject) => resolve(value));\n         }\n       }\n       static reject(reason) {\n         return new Promise((resolve, reject) => {\n           reject(reason);\n         })\n       }\n     }\n     \n \n ## 21.Promise.all\n \n `Promise.all`Promise`resolve``reject`\n \n     Promise.myAll = function(promiseArr) {\n       return new Promise((resolve, reject) => {\n         const ans = [];\n         let index = 0;\n         for (let i = 0; i < promiseArr.length; i++) {\n           promiseArr[i]\n           .then(res => {\n             ans[i] = res;\n             index++;\n             if (index === promiseArr.length) {\n               resolve(ans);\n             }\n           })\n           .catch(err => reject(err));\n         }\n       })\n     }\n     \n \n ## 22.Promise.race\n \n     Promise.race = function(promiseArr) {\n       return new Promise((resolve, reject) => {\n         promiseArr.forEach(p => {\n           // PromisePromise\n           Promise.resolve(p).then(\n             val => resolve(val),\n             err => reject(err),\n           )\n         })\n       })\n     }\n     \n \n ## 23.Promise\n \n Promise\n \n [Promise](https://juejin.im/post/6854573217013563405)\n \n     class Scheduler {\n       constructor() {\n         this.queue = [];\n         this.maxCount = 2;\n         this.runCounts = 0;\n       }\n       add(promiseCreator) {\n         this.queue.push(promiseCreator);\n       }\n       taskStart() {\n         for (let i = 0; i < this.maxCount; i++) {\n           this.request();\n         }\n       }\n       request() {\n         if (!this.queue || !this.queue.length || this.runCounts >= this.maxCount) {\n           return;\n         }\n         this.runCounts++;\n     \n         this.queue.shift()().then(() => {\n           this.runCounts--;\n           this.request();\n         });\n       }\n     }\n        \n     const timeout = time => new Promise(resolve => {\n       setTimeout(resolve, time);\n     })\n       \n     const scheduler = new Scheduler();\n       \n     const addTask = (time,order) => {\n       scheduler.add(() => timeout(time).then(()=>console.log(order)))\n     }\n       \n       \n     addTask(1000, '1');\n     addTask(500, '2');\n     addTask(300, '3');\n     addTask(400, '4');\n     scheduler.taskStart()\n     // 2\n     // 3\n     // 1\n     // 4\n     \n \n ## 24.JSONP\n \n script****GET\n \n     const jsonp = ({ url, params, callbackName }) => {\n       const generateUrl = () => {\n         let dataSrc = '';\n         for (let key in params) {\n           if (Object.prototype.hasOwnProperty.call(params, key)) {\n             dataSrc += `${key}=${params[key]}&`;\n           }\n         }\n         dataSrc += `callback=${callbackName}`;\n         return `${url}?${dataSrc}`;\n       }\n       return new Promise((resolve, reject) => {\n         const scriptEle = document.createElement('script');\n         scriptEle.src = generateUrl();\n         document.body.appendChild(scriptEle);\n         window[callbackName] = data => {\n           resolve(data);\n           document.removeChild(scriptEle);\n         }\n       })\n     }\n     \n \n ## 25.AJAX\n \n     const getJSON = function(url) {\n       return new Promise((resolve, reject) => {\n         const xhr = XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Mscrosoft.XMLHttp');\n         xhr.open('GET', url, false);\n         xhr.setRequestHeader('Accept', 'application/json');\n         xhr.onreadystatechange = function() {\n           if (xhr.readyState !== 4) return;\n           if (xhr.status === 200 || xhr.status === 304) {\n             resolve(xhr.responseText);\n           } else {\n             reject(new Error(xhr.responseText));\n           }\n         }\n         xhr.send();\n       })\n     }\n     \n \n ## 26.event\n \n nodenode****\n \n > SubjectObserver\n \n     function EventEmitter() {\n       this.events = new Map();\n     }\n     \n     // \n     // addListenerremoveListeneronceremoveAllListenersemit\n     \n     // addlistener\n     const wrapCallback = (fn, once = false) => ({ callback: fn, once });\n     EventEmitter.prototype.addListener = function(type, fn, once = false) {\n       const hanlder = this.events.get(type);\n       if (!hanlder) {\n         // type\n         this.events.set(type, wrapCallback(fn, once));\n       } else if (hanlder && typeof hanlder.callback === 'function') {\n         // type\n         this.events.set(type, [hanlder, wrapCallback(fn, once)]);\n       } else {\n         // type>=2\n         hanlder.push(wrapCallback(fn, once));\n       }\n     }\n     // removeListener\n     EventEmitter.prototype.removeListener = function(type, listener) {\n       const hanlder = this.events.get(type);\n       if (!hanlder) return;\n       if (!Array.isArray(this.events)) {\n         if (hanlder.callback === listener.callback) this.events.delete(type);\n         else return;\n       }\n       for (let i = 0; i < hanlder.length; i++) {\n         const item = hanlder[i];\n         if (item.callback === listener.callback) {\n           hanlder.splice(i, 1);\n           i--;\n           if (hanlder.length === 1) {\n             this.events.set(type, hanlder[0]);\n           }\n         }\n       }\n     }\n     // once\n     EventEmitter.prototype.once = function(type, listener) {\n       this.addListener(type, listener, true);\n     }\n     // emit\n     EventEmitter.prototype.emit = function(type, ...args) {\n       const hanlder = this.events.get(type);\n       if (!hanlder) return;\n       if (Array.isArray(hanlder)) {\n         hanlder.forEach(item => {\n           item.callback.apply(this, args);\n           if (item.once) {\n             this.removeListener(type, item);\n           }\n         })\n       } else {\n         hanlder.callback.apply(this, args);\n         if (hanlder.once) {\n           this.events.delete(type);\n         }\n       }\n       return true;\n     }\n     EventEmitter.prototype.removeAllListeners = function(type) {\n       const hanlder = this.events.get(type);\n       if (!hanlder) return;\n       this.events.delete(type);\n     }\n     \n \n ## 27.\n \n img`data-src='default.png'`**src**\n \n     function lazyload() {\n       const imgs = document.getElementsByTagName('img');\n       const len = imgs.length;\n       // \n       const viewHeight = document.documentElement.clientHeight;\n       // \n       const scrollHeight = document.documentElement.scrollTop || document.body.scrollTop;\n       for (let i = 0; i < len; i++) {\n         const offsetHeight = imgs[i].offsetTop;\n         if (offsetHeight < viewHeight + scrollHeight) {\n           const src = imgs[i].dataset.src;\n           imgs[i].src = src;\n         }\n       }\n     }\n     \n     // \n     window.addEventListener('scroll', lazyload);\n     \n \n ## 28.\n \n **clientHeight****scrollTop****scrollHeight**\n \n     window.addEventListener('scroll', function() {\n       const clientHeight = document.documentElement.clientHeight;\n       const scrollTop = document.documentElement.scrollTop;\n       const scrollHeight = document.documentElement.scrollHeight;\n       if (clientHeight + scrollTop >= scrollHeight) {\n         // \n         // ...\n       }\n     }, false);\n     \n \n Demo[Demo](https://github.com/SherrybabyOne/Demos/blob/master/Interview/JavaScript/%E6%BB%9A%E5%8A%A8%E5%8A%A0%E8%BD%BD.html)\n \n ## 29.\n \n **createDocumentFragment****requestAnimationFrame**\n \n     setTimeout(() => {\n       // \n       const total = 100000;\n       // \n       const once = 20;\n       // \n       const loopCount = Math.ceil(total / once);\n       let countOfRender = 0;\n       const ul = document.querySelector('ul');\n       // \n       function add() {\n         const fragment = document.createDocumentFragment();\n         for(let i = 0; i < once; i++) {\n           const li = document.createElement('li');\n           li.innerText = Math.floor(Math.random() * total);\n           fragment.appendChild(li);\n         }\n         ul.appendChild(fragment);\n         countOfRender += 1;\n         loop();\n       }\n       function loop() {\n         if(countOfRender < loopCount) {\n           window.requestAnimationFrame(add);\n         }\n       }\n       loop();\n     }, 0)\n     \n \n ## 30.HTML\n \n \n \n     const fn = () => {\n       return [...new Set([...document.querySelectorAll('*')].map(el => el.tagName))].length;\n     }\n     \n \n DOM****\n \n ## 31.VirtualDomDOM\n \n SPA\n \n     // vnode\n     // {\n     //   tag,\n     //   attrs,\n     //   children,\n     // }\n     \n     //Virtual DOM => DOM\n     function render(vnode, container) {\n       container.appendChild(_render(vnode));\n     }\n     function _render(vnode) {\n       // \n       if (typeof vnode === 'number') {\n         vnode = String(vnode);\n       }\n       // \n       if (typeof vnode === 'string') {\n         return document.createTextNode(vnode);\n       }\n       // DOM\n       const dom = document.createElement(vnode.tag);\n       if (vnode.attrs) {\n         // \n         Object.keys(vnode.attrs).forEach(key => {\n           const value = vnode.attrs[key];\n           dom.setAttribute(key, value);\n         })\n       }\n       // \n       vnode.children.forEach(child => render(child, dom));\n       return dom;\n     }\n     \n \n ## 32.\n \n     var a = {\n         b: 123,\n         c: '456',\n         e: '789',\n     }\n     var str=`a{a.b}aa{a.c}aa {a.d}aaaa`;\n     // => 'a123aa456aa {a.d}aaaa'\n     \n \n str`{}``{a.d}`\n \n \n \n     const fn1 = (str, obj) => {\n         let res = '';\n         // {\n         let flag = false;\n         let start;\n         for (let i = 0; i < str.length; i++) {\n             if (str[i] === '{') {\n                 flag = true;\n                 start = i + 1;\n                 continue;\n             }\n             if (!flag) res += str[i];\n             else {\n                 if (str[i] === '}') {\n                     flag = false;\n                     res += match(str.slice(start, i), obj);\n                 }\n             }\n         }\n         return res;\n     }\n     // \n     const match = (str, obj) => {\n         const keys = str.split('.').slice(1);\n         let index = 0;\n         let o = obj;\n         while (index < keys.length) {\n             const key = keys[index];\n             if (!o[key]) {\n                 return `{${str}}`;\n             } else {\n                 o = o[key];\n             }\n             index++;\n         }\n         return o;\n     }","source":"_posts/2020-09-25-32JS.md","raw":"---\ntitle: 32JS\ncatalog: true\ntoc_nav_num: true\nheader-img: article_header.png\ndate: 2020-09-25 11:19:34\nsubtitle: \"js native development\"\ntags:\n- js\ncategories:\n- Js\n---\n\n[32JS](https://juejin.im/post/6875152247714480136#heading-20)\n # 32JS\n \n JSoffer32JS\n \n MDNJS\n \n ## 01.\n \n \n \n     const arr = [1, [2, [3, [4, 5]]], 6];\n     // => [1, 2, 3, 4, 5, 6]\n     \n \n ### flat()\n \n     const res1 = arr.flat(Infinity);\n     \n \n ### \n \n     const res2 = JSON.stringify(arr).replace(/\\[|\\]/g, '').split(',');\n     \n \n \n \n ### \n \n     const res3 = JSON.parse('[' + JSON.stringify(arr).replace(/\\[|\\]/g, '') + ']');\n     \n \n ### reduce\n \n     const flatten = arr => {\n       return arr.reduce((pre, cur) => {\n         return pre.concat(Array.isArray(cur) ? flatten(cur) : cur);\n       }, [])\n     }\n     const res4 = flatten(arr);\n     \n \n ### \n \n     const res5 = [];\n     const fn = arr => {\n       for (let i = 0; i < arr.length; i++) {\n         if (Array.isArray(arr[i])) {\n           fn(arr[i]);\n         } else {\n           res5.push(arr[i]);\n         }\n       }\n     }\n     fn(arr);\n     \n \n ## 02.\n \n     const arr = [1, 1, '1', 17, true, true, false, false, 'true', 'a', {}, {}];\n     // => [1, '1', 17, true, false, 'true', 'a', {}, {}]\n     \n \n ### Set\n \n     const res1 = Array.from(new Set(arr));\n     \n \n ### for+splice\n \n     const unique1 = arr => {\n       let len = arr.length;\n       for (let i = 0; i < len; i++) {\n         for (let j = i + 1; j < len; j++) {\n           if (arr[i] === arr[j]) {\n             arr.splice(j, 1);\n             // j--jlen--\n             len--;\n             j--;\n           }\n         }\n       }\n       return arr;\n     }\n     \n \n ### indexOf\n \n     const unique2 = arr => {\n       const res = [];\n       for (let i = 0; i < arr.length; i++) {\n         if (res.indexOf(arr[i]) === -1) res.push(arr[i]);\n       }\n       return res;\n     }\n     \n \n includefilter\n \n ### include\n \n     const unique3 = arr => {\n       const res = [];\n       for (let i = 0; i < arr.length; i++) {\n         if (!res.includes(arr[i])) res.push(arr[i]);\n       }\n       return res;\n     }\n     \n \n ### filter\n \n     const unique4 = arr => {\n       return arr.filter((item, index) => {\n         return arr.indexOf(item) === index;\n       });\n     }\n     \n \n ### Map\n \n     const unique5 = arr => {\n       const map = new Map();\n       const res = [];\n       for (let i = 0; i < arr.length; i++) {\n         if (!map.has(arr[i])) {\n           map.set(arr[i], true)\n           res.push(arr[i]);\n         }\n       }\n       return res;\n     }\n     \n \n ## 03.\n \n **length****arguments**DOM\n \n ### Array.from\n \n     Array.from(document.querySelectorAll('div'))\n     \n \n ### Array.prototype.slice.call()\n \n     Array.prototype.slice.call(document.querySelectorAll('div'))\n     \n \n ### \n \n     [...document.querySelectorAll('div')]\n     \n \n ### concat\n \n     Array.prototype.concat.apply([], document.querySelectorAll('div'));\n     \n \n ## 04.Array.prototype.filter()\n \n ![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/804ee51d522746c3b219548d038413c2~tplv-k3u1fbpfcp-zoom-1.image)\n \n     Array.prototype.filter = function(callback, thisArg) {\n       if (this == undefined) {\n         throw new TypeError('this is null or not undefined');\n       }\n       if (typeof callback !== 'function') {\n         throw new TypeError(callback + 'is not a function');\n       }\n       const res = [];\n       // O\n       const O = Object(this);\n       // >>>0 lennumber\n       const len = O.length >>> 0;\n       for (let i = 0; i < len; i++) {\n         // iO\n         if (i in O) {\n           // \n           if (callback.call(thisArg, O[i], i, O)) {\n             res.push(O[i]);\n           }\n         }\n       }\n       return res;\n     }\n     \n \n `>>>0`[>>>0](https://zhuanlan.zhihu.com/p/100790268)\n \n ## 05.Array.prototype.map()\n \n ![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b099cf3e06bc4421abac4dc460a13c17~tplv-k3u1fbpfcp-zoom-1.image)\n \n     Array.prototype.map = function(callback, thisArg) {\n       if (this == undefined) {\n         throw new TypeError('this is null or not defined');\n       }\n       if (typeof callback !== 'function') {\n         throw new TypeError(callback + ' is not a function');\n       }\n       const res = [];\n       // \n       const O = Object(this);\n       const len = O.length >>> 0;\n       for (let i = 0; i < len; i++) {\n         if (i in O) {\n           // \n           res[i] = callback.call(thisArg, O[i], i, this);\n         }\n       }\n       return res;\n     }\n     \n \n ## 06.Array.prototype.forEach()\n \n ![](https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c3819fb0c404ae5a8f4cddc4e80731e~tplv-k3u1fbpfcp-zoom-1.image)\n \n `forEach`map`forEach`\n \n     Array.prototype.forEach = function(callback, thisArg) {\n       if (this == null) {\n         throw new TypeError('this is null or not defined');\n       }\n       if (typeof callback !== \"function\") {\n         throw new TypeError(callback + ' is not a function');\n       }\n       const O = Object(this);\n       const len = O.length >>> 0;\n       let k = 0;\n       while (k < len) {\n         if (k in O) {\n           callback.call(thisArg, O[k], k, O);\n         }\n         k++;\n       }\n     }\n     \n \n ## 07.Array.prototype.reduce()\n \n ![](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e51625eb9e2d47799ff39c5956139af7~tplv-k3u1fbpfcp-zoom-1.image)\n \n     Array.prototype.reduce = function(callback, initialValue) {\n       if (this == undefined) {\n         throw new TypeError('this is null or not defined');\n       }\n       if (typeof callback !== 'function') {\n         throw new TypeError(callbackfn + ' is not a function');\n       }\n       const O = Object(this);\n       const len = this.length >>> 0;\n       let accumulator = initialValue;\n       let k = 0;\n       // undefined\n       // \n       if (accumulator === undefined) {\n         while (k < len && !(k in O)) {\n           k++;\n         }\n         // TypeError\n         if (k >= len) {\n           throw new TypeError('Reduce of empty array with no initial value');\n         }\n         accumulator = O[k++];\n       }\n       while (k < len) {\n         if (k in O) {\n           accumulator = callback.call(undefined, accumulator, O[k], k, O);\n         }\n         k++;\n       }\n       return accumulator;\n     }\n     \n \n ## 08.Function.prototype.apply()\n \n this`window`\n \n     Function.prototype.apply = function(context = window, args) {\n       if (typeof this !== 'function') {\n         throw new TypeError('Type Error');\n       }\n       const fn = Symbol('fn');\n       context[fn] = this;\n     \n       const res = context[fn](...args);\n       delete context[fn];\n       return res;\n     }\n     \n \n ## 09.Function.prototype.call\n \n `call``call()`\n \n     Function.prototype.call = function(context = window, ...args) {\n       if (typeof this !== 'function') {\n         throw new TypeError('Type Error');\n       }\n       const fn = Symbol('fn');\n       context[fn] = this;\n     \n       const res = this[fn](...args);\n       delete this.fn;\n       return res;\n     }\n     \n \n ## 10.Function.prototype.bind\n \n     Function.prototype.bind = function(context, ...args) {\n       if (typeof this !== 'function') {\n         throw new Error(\"Type Error\");\n       }\n       // this\n       var self = this;\n     \n       return function F() {\n         // new\n         if(this instanceof F) {\n           return new self(...args, ...arguments)\n         }\n         return self.apply(context, [...args, ...arguments])\n       }\n     }\n     \n \n ## 11.debounce\n \n n,n,\n \n     const debounce = (fn, time) => {\n       let timeout = null;\n       return function() {\n         clearTimeout(timeout)\n         timeout = setTimeout(() => {\n           fn.apply(this, arguments);\n         }, time);\n       }\n     };\n     \n \n `window``resize`\n \n ## 12.throttle\n \n ,n,\n \n     const throttle = (fn, time) => {\n       let flag = true;\n       return function() {\n         if (!flag) return;\n         flag = false;\n         setTimeout(() => {\n           fn.apply(this, arguments);\n           flag = true;\n         }, time);\n       }\n     }\n     \n \n \n \n ## 13.\n \n >   f(1)(2)\n \n `add(1)(2)(3)(4)=10;`  `add(1)(1,2,3)(2)=9;`\n \n     function add() {\n       const _args = [...arguments];\n       function fn() {\n         _args.push(...arguments);\n         return fn;\n       }\n       fn.toString = function() {\n         return _args.reduce((sum, cur) => sum + cur);\n       }\n       return fn;\n     }\n     \n \n ## 14.new\n \n 3\n \n 1.  `ctor.prototype`\n 2.  this\n 3.  \n \n     function newOperator(ctor, ...args) {\n       if (typeof ctor !== 'function') {\n         throw new TypeError('Type Error');\n       }\n       const obj = Object.create(ctor.prototype);\n       const res = ctor.apply(obj, args);\n     \n       const isObject = typeof res === 'object' && res !== null;\n       const isFunction = typeof res === 'function';\n       return isObject || isFunction ? res : obj;\n     }\n     \n \n ## 15.instanceof\n \n `instanceof``prototype`\n \n     const myInstanceof = (left, right) => {\n       // false\n       if (typeof left !== 'object' || left === null) return false;\n       let proto = Object.getPrototypeOf(left);\n       while (true) {\n         if (proto === null) return false;\n         if (proto === right.prototype) return true;\n         proto = Object.getPrototypeOf(proto);\n       }\n     }\n     \n \n ## 16.\n \n \n \n     function Parent() {\n       this.name = 'parent';\n     }\n     function Child() {\n       Parent.call(this);\n       this.type = 'children';\n     }\n     Child.prototype = Object.create(Parent.prototype);\n     Child.prototype.constructor = Child;\n     \n \n ## 17.Object.is\n \n `Object.is`\n \n     +0 === -0  // true\n     NaN === NaN // false\n     \n \n     const is= (x, y) => {\n       if (x === y) {\n         // +0-0\n         return x !== 0 || y !== 0 || 1/x === 1/y;\n       } else {\n         return x !== x && y !== y;\n       }\n     }\n     \n \n ## 18.Object.assign\n \n `Object.assign()`\n \n     Object.defineProperty(Object, 'assign', {\n       value: function(target, ...args) {\n         if (target == null) {\n           return new TypeError('Cannot convert undefined or null to object');\n         }\n         \n         // \n         const to = Object(target);\n     \n         for (let i = 0; i < args.length; i++) {\n           // \n           const nextSource = args[i];\n           if (nextSource !== null) {\n             // for...inhasOwnProperty\n             for (const nextKey in nextSource) {\n               if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n                 to[nextKey] = nextSource[nextKey];\n               }\n             }\n           }\n         }\n         return to;\n       },\n       // \n       enumerable: false,\n       writable: true,\n       configurable: true,\n     })\n     \n \n ## 19.\n \n Symbol\n \n     const cloneDeep1 = (target, hash = new WeakMap()) => {\n       // \n       if (typeof target !== 'object' || target === null) {\n         return target;\n       }\n       // \n       if (hash.has(target)) return hash.get(target);\n     \n       const cloneTarget = Array.isArray(target) ? [] : {};\n       hash.set(target, cloneTarget);\n     \n       // Symbol\n       const symKeys = Object.getOwnPropertySymbols(target);\n       if (symKeys.length) {\n         symKeys.forEach(symKey => {\n           if (typeof target[symKey] === 'object' && target[symKey] !== null) {\n             cloneTarget[symKey] = cloneDeep1(target[symKey]);\n           } else {\n             cloneTarget[symKey] = target[symKey];\n           }\n         })\n       }\n     \n       for (const i in target) {\n         if (Object.prototype.hasOwnProperty.call(target, i)) {\n           cloneTarget[i] =\n             typeof target[i] === 'object' && target[i] !== null\n             ? cloneDeep1(target[i], hash)\n             : target[i];\n         }\n       }\n       return cloneTarget;\n     }\n     \n \n ## 20.Promise\n \n [Promise](https://juejin.im/post/6860037916622913550)\n \n     const PENDING = 'PENDING';      // \n     const FULFILLED = 'FULFILLED';  // \n     const REJECTED = 'REJECTED';    // \n     \n     class Promise {\n       constructor(exector) {\n         // \n         this.status = PENDING;\n         // thisthencatch\n         this.value = undefined;\n         this.reason = undefined;\n         // \n         this.onFulfilledCallbacks = [];\n         // \n         this.onRejectedCallbacks = [];\n     \n         const resolve = value => {\n           // \n           if (this.status === PENDING) {\n             this.status = FULFILLED;\n             this.value = value;\n             // \n             this.onFulfilledCallbacks.forEach(fn => fn(this.value));\n           }\n         }\n         const reject = reason => {\n           // \n           if (this.status === PENDING) {\n             this.status = REJECTED;\n             this.reason = reason;\n             // \n             this.onRejectedCallbacks.forEach(fn => fn(this.reason))\n           }\n         }\n         try {\n           // executor\n           // resolverejectexecutorresolvereject\n           exector(resolve, reject);\n         } catch(e) {\n           // executorreject\n           reject(e);\n         }\n       }\n       then(onFulfilled, onRejected) {\n         onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : value => value;\n         onRejected = typeof onRejected === 'function'? onRejected:\n           reason => { throw new Error(reason instanceof Error ? reason.message:reason) }\n         // this\n         const self = this;\n         return new Promise((resolve, reject) => {\n           if (self.status === PENDING) {\n             self.onFulfilledCallbacks.push(() => {\n               // try\n               try {\n                 // \n                 setTimeout(() => {\n                   const result = onFulfilled(self.value);\n                   // \n                   // 1. Promisethen\n                   // 2. PromisePromiseresolve\n                   result instanceof Promise ? result.then(resolve, reject) : resolve(result);\n                 })\n               } catch(e) {\n                 reject(e);\n               }\n             });\n             self.onRejectedCallbacks.push(() => {\n               // \n               try {\n                 setTimeout(() => {\n                   const result = onRejected(self.reason);\n                   // reject\n                   result instanceof Promise ? result.then(resolve, reject) : reject(result);\n                 })\n               } catch(e) {\n                 reject(e);\n               }\n             })\n           } else if (self.status === FULFILLED) {\n             try {\n               setTimeout(() => {\n                 const result = onFulfilled(self.value);\n                 result instanceof Promise ? result.then(resolve, reject) : resolve(result);\n               });\n             } catch(e) {\n               reject(e);\n             }\n           } else if (self.status === REJECTED){\n             try {\n               setTimeout(() => {\n                 const result = onRejected(self.reason);\n                 result instanceof Promise ? result.then(resolve, reject) : reject(result);\n               })\n             } catch(e) {\n               reject(e);\n             }\n           }\n         });\n       }\n       catch(onRejected) {\n         return this.then(null, onRejected);\n       }\n       static resolve(value) {\n         if (value instanceof Promise) {\n           // Promise\n           return value;\n         } else {\n           // PromisePromiseFULFILLED\n           return new Promise((resolve, reject) => resolve(value));\n         }\n       }\n       static reject(reason) {\n         return new Promise((resolve, reject) => {\n           reject(reason);\n         })\n       }\n     }\n     \n \n ## 21.Promise.all\n \n `Promise.all`Promise`resolve``reject`\n \n     Promise.myAll = function(promiseArr) {\n       return new Promise((resolve, reject) => {\n         const ans = [];\n         let index = 0;\n         for (let i = 0; i < promiseArr.length; i++) {\n           promiseArr[i]\n           .then(res => {\n             ans[i] = res;\n             index++;\n             if (index === promiseArr.length) {\n               resolve(ans);\n             }\n           })\n           .catch(err => reject(err));\n         }\n       })\n     }\n     \n \n ## 22.Promise.race\n \n     Promise.race = function(promiseArr) {\n       return new Promise((resolve, reject) => {\n         promiseArr.forEach(p => {\n           // PromisePromise\n           Promise.resolve(p).then(\n             val => resolve(val),\n             err => reject(err),\n           )\n         })\n       })\n     }\n     \n \n ## 23.Promise\n \n Promise\n \n [Promise](https://juejin.im/post/6854573217013563405)\n \n     class Scheduler {\n       constructor() {\n         this.queue = [];\n         this.maxCount = 2;\n         this.runCounts = 0;\n       }\n       add(promiseCreator) {\n         this.queue.push(promiseCreator);\n       }\n       taskStart() {\n         for (let i = 0; i < this.maxCount; i++) {\n           this.request();\n         }\n       }\n       request() {\n         if (!this.queue || !this.queue.length || this.runCounts >= this.maxCount) {\n           return;\n         }\n         this.runCounts++;\n     \n         this.queue.shift()().then(() => {\n           this.runCounts--;\n           this.request();\n         });\n       }\n     }\n        \n     const timeout = time => new Promise(resolve => {\n       setTimeout(resolve, time);\n     })\n       \n     const scheduler = new Scheduler();\n       \n     const addTask = (time,order) => {\n       scheduler.add(() => timeout(time).then(()=>console.log(order)))\n     }\n       \n       \n     addTask(1000, '1');\n     addTask(500, '2');\n     addTask(300, '3');\n     addTask(400, '4');\n     scheduler.taskStart()\n     // 2\n     // 3\n     // 1\n     // 4\n     \n \n ## 24.JSONP\n \n script****GET\n \n     const jsonp = ({ url, params, callbackName }) => {\n       const generateUrl = () => {\n         let dataSrc = '';\n         for (let key in params) {\n           if (Object.prototype.hasOwnProperty.call(params, key)) {\n             dataSrc += `${key}=${params[key]}&`;\n           }\n         }\n         dataSrc += `callback=${callbackName}`;\n         return `${url}?${dataSrc}`;\n       }\n       return new Promise((resolve, reject) => {\n         const scriptEle = document.createElement('script');\n         scriptEle.src = generateUrl();\n         document.body.appendChild(scriptEle);\n         window[callbackName] = data => {\n           resolve(data);\n           document.removeChild(scriptEle);\n         }\n       })\n     }\n     \n \n ## 25.AJAX\n \n     const getJSON = function(url) {\n       return new Promise((resolve, reject) => {\n         const xhr = XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Mscrosoft.XMLHttp');\n         xhr.open('GET', url, false);\n         xhr.setRequestHeader('Accept', 'application/json');\n         xhr.onreadystatechange = function() {\n           if (xhr.readyState !== 4) return;\n           if (xhr.status === 200 || xhr.status === 304) {\n             resolve(xhr.responseText);\n           } else {\n             reject(new Error(xhr.responseText));\n           }\n         }\n         xhr.send();\n       })\n     }\n     \n \n ## 26.event\n \n nodenode****\n \n > SubjectObserver\n \n     function EventEmitter() {\n       this.events = new Map();\n     }\n     \n     // \n     // addListenerremoveListeneronceremoveAllListenersemit\n     \n     // addlistener\n     const wrapCallback = (fn, once = false) => ({ callback: fn, once });\n     EventEmitter.prototype.addListener = function(type, fn, once = false) {\n       const hanlder = this.events.get(type);\n       if (!hanlder) {\n         // type\n         this.events.set(type, wrapCallback(fn, once));\n       } else if (hanlder && typeof hanlder.callback === 'function') {\n         // type\n         this.events.set(type, [hanlder, wrapCallback(fn, once)]);\n       } else {\n         // type>=2\n         hanlder.push(wrapCallback(fn, once));\n       }\n     }\n     // removeListener\n     EventEmitter.prototype.removeListener = function(type, listener) {\n       const hanlder = this.events.get(type);\n       if (!hanlder) return;\n       if (!Array.isArray(this.events)) {\n         if (hanlder.callback === listener.callback) this.events.delete(type);\n         else return;\n       }\n       for (let i = 0; i < hanlder.length; i++) {\n         const item = hanlder[i];\n         if (item.callback === listener.callback) {\n           hanlder.splice(i, 1);\n           i--;\n           if (hanlder.length === 1) {\n             this.events.set(type, hanlder[0]);\n           }\n         }\n       }\n     }\n     // once\n     EventEmitter.prototype.once = function(type, listener) {\n       this.addListener(type, listener, true);\n     }\n     // emit\n     EventEmitter.prototype.emit = function(type, ...args) {\n       const hanlder = this.events.get(type);\n       if (!hanlder) return;\n       if (Array.isArray(hanlder)) {\n         hanlder.forEach(item => {\n           item.callback.apply(this, args);\n           if (item.once) {\n             this.removeListener(type, item);\n           }\n         })\n       } else {\n         hanlder.callback.apply(this, args);\n         if (hanlder.once) {\n           this.events.delete(type);\n         }\n       }\n       return true;\n     }\n     EventEmitter.prototype.removeAllListeners = function(type) {\n       const hanlder = this.events.get(type);\n       if (!hanlder) return;\n       this.events.delete(type);\n     }\n     \n \n ## 27.\n \n img`data-src='default.png'`**src**\n \n     function lazyload() {\n       const imgs = document.getElementsByTagName('img');\n       const len = imgs.length;\n       // \n       const viewHeight = document.documentElement.clientHeight;\n       // \n       const scrollHeight = document.documentElement.scrollTop || document.body.scrollTop;\n       for (let i = 0; i < len; i++) {\n         const offsetHeight = imgs[i].offsetTop;\n         if (offsetHeight < viewHeight + scrollHeight) {\n           const src = imgs[i].dataset.src;\n           imgs[i].src = src;\n         }\n       }\n     }\n     \n     // \n     window.addEventListener('scroll', lazyload);\n     \n \n ## 28.\n \n **clientHeight****scrollTop****scrollHeight**\n \n     window.addEventListener('scroll', function() {\n       const clientHeight = document.documentElement.clientHeight;\n       const scrollTop = document.documentElement.scrollTop;\n       const scrollHeight = document.documentElement.scrollHeight;\n       if (clientHeight + scrollTop >= scrollHeight) {\n         // \n         // ...\n       }\n     }, false);\n     \n \n Demo[Demo](https://github.com/SherrybabyOne/Demos/blob/master/Interview/JavaScript/%E6%BB%9A%E5%8A%A8%E5%8A%A0%E8%BD%BD.html)\n \n ## 29.\n \n **createDocumentFragment****requestAnimationFrame**\n \n     setTimeout(() => {\n       // \n       const total = 100000;\n       // \n       const once = 20;\n       // \n       const loopCount = Math.ceil(total / once);\n       let countOfRender = 0;\n       const ul = document.querySelector('ul');\n       // \n       function add() {\n         const fragment = document.createDocumentFragment();\n         for(let i = 0; i < once; i++) {\n           const li = document.createElement('li');\n           li.innerText = Math.floor(Math.random() * total);\n           fragment.appendChild(li);\n         }\n         ul.appendChild(fragment);\n         countOfRender += 1;\n         loop();\n       }\n       function loop() {\n         if(countOfRender < loopCount) {\n           window.requestAnimationFrame(add);\n         }\n       }\n       loop();\n     }, 0)\n     \n \n ## 30.HTML\n \n \n \n     const fn = () => {\n       return [...new Set([...document.querySelectorAll('*')].map(el => el.tagName))].length;\n     }\n     \n \n DOM****\n \n ## 31.VirtualDomDOM\n \n SPA\n \n     // vnode\n     // {\n     //   tag,\n     //   attrs,\n     //   children,\n     // }\n     \n     //Virtual DOM => DOM\n     function render(vnode, container) {\n       container.appendChild(_render(vnode));\n     }\n     function _render(vnode) {\n       // \n       if (typeof vnode === 'number') {\n         vnode = String(vnode);\n       }\n       // \n       if (typeof vnode === 'string') {\n         return document.createTextNode(vnode);\n       }\n       // DOM\n       const dom = document.createElement(vnode.tag);\n       if (vnode.attrs) {\n         // \n         Object.keys(vnode.attrs).forEach(key => {\n           const value = vnode.attrs[key];\n           dom.setAttribute(key, value);\n         })\n       }\n       // \n       vnode.children.forEach(child => render(child, dom));\n       return dom;\n     }\n     \n \n ## 32.\n \n     var a = {\n         b: 123,\n         c: '456',\n         e: '789',\n     }\n     var str=`a{a.b}aa{a.c}aa {a.d}aaaa`;\n     // => 'a123aa456aa {a.d}aaaa'\n     \n \n str`{}``{a.d}`\n \n \n \n     const fn1 = (str, obj) => {\n         let res = '';\n         // {\n         let flag = false;\n         let start;\n         for (let i = 0; i < str.length; i++) {\n             if (str[i] === '{') {\n                 flag = true;\n                 start = i + 1;\n                 continue;\n             }\n             if (!flag) res += str[i];\n             else {\n                 if (str[i] === '}') {\n                     flag = false;\n                     res += match(str.slice(start, i), obj);\n                 }\n             }\n         }\n         return res;\n     }\n     // \n     const match = (str, obj) => {\n         const keys = str.split('.').slice(1);\n         let index = 0;\n         let o = obj;\n         while (index < keys.length) {\n             const key = keys[index];\n             if (!o[key]) {\n                 return `{${str}}`;\n             } else {\n                 o = o[key];\n             }\n             index++;\n         }\n         return o;\n     }","slug":"32JS","published":1,"updated":"2020-09-25T03:23:11.353Z","comments":1,"layout":"post","photos":[],"link":"","_id":"ckfhotf380000jy957edi6pxb","content":"<p><a href=\"https://juejin.im/post/6875152247714480136#heading-20\" target=\"_blank\" rel=\"noopener\">32JS</a></p><h1 id=\"32JS\"><a href=\"#32JS\" class=\"headerlink\" title=\"32JS\"></a>32JS</h1><p>JSoffer32JS</p><p>MDNJS</p><h2 id=\"01-\"><a href=\"#01-\" class=\"headerlink\" title=\"01.\"></a>01.</h2><p></p><pre><code> const arr = [1, [2, [3, [4, 5]]], 6];\n // =&gt; [1, 2, 3, 4, 5, 6]\n \n</code></pre><h3 id=\"flat\"><a href=\"#flat\" class=\"headerlink\" title=\"flat()\"></a>flat()</h3><pre><code> const res1 = arr.flat(Infinity);\n \n</code></pre><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre><code> const res2 = JSON.stringify(arr).replace(/\\[|\\]/g, &#39;&#39;).split(&#39;,&#39;);\n \n</code></pre><p></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre><code> const res3 = JSON.parse(&#39;[&#39; + JSON.stringify(arr).replace(/\\[|\\]/g, &#39;&#39;) + &#39;]&#39;);\n \n</code></pre><h3 id=\"reduce\"><a href=\"#reduce\" class=\"headerlink\" title=\"reduce\"></a>reduce</h3><pre><code> const flatten = arr =&gt; {\n   return arr.reduce((pre, cur) =&gt; {\n     return pre.concat(Array.isArray(cur) ? flatten(cur) : cur);\n   }, [])\n }\n const res4 = flatten(arr);\n \n</code></pre><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre><code> const res5 = [];\n const fn = arr =&gt; {\n   for (let i = 0; i &lt; arr.length; i++) {\n     if (Array.isArray(arr[i])) {\n       fn(arr[i]);\n     } else {\n       res5.push(arr[i]);\n     }\n   }\n }\n fn(arr);\n \n</code></pre><h2 id=\"02-\"><a href=\"#02-\" class=\"headerlink\" title=\"02.\"></a>02.</h2><pre><code> const arr = [1, 1, &#39;1&#39;, 17, true, true, false, false, &#39;true&#39;, &#39;a&#39;, {}, {}];\n // =&gt; [1, &#39;1&#39;, 17, true, false, &#39;true&#39;, &#39;a&#39;, {}, {}]\n \n</code></pre><h3 id=\"Set\"><a href=\"#Set\" class=\"headerlink\" title=\"Set\"></a>Set</h3><pre><code> const res1 = Array.from(new Set(arr));\n \n</code></pre><h3 id=\"for-splice\"><a href=\"#for-splice\" class=\"headerlink\" title=\"for+splice\"></a>for+splice</h3><pre><code> const unique1 = arr =&gt; {\n   let len = arr.length;\n   for (let i = 0; i &lt; len; i++) {\n     for (let j = i + 1; j &lt; len; j++) {\n       if (arr[i] === arr[j]) {\n         arr.splice(j, 1);\n         // j--jlen--\n         len--;\n         j--;\n       }\n     }\n   }\n   return arr;\n }\n \n</code></pre><h3 id=\"indexOf\"><a href=\"#indexOf\" class=\"headerlink\" title=\"indexOf\"></a>indexOf</h3><pre><code> const unique2 = arr =&gt; {\n   const res = [];\n   for (let i = 0; i &lt; arr.length; i++) {\n     if (res.indexOf(arr[i]) === -1) res.push(arr[i]);\n   }\n   return res;\n }\n \n</code></pre><p>includefilter</p><h3 id=\"include\"><a href=\"#include\" class=\"headerlink\" title=\"include\"></a>include</h3><pre><code> const unique3 = arr =&gt; {\n   const res = [];\n   for (let i = 0; i &lt; arr.length; i++) {\n     if (!res.includes(arr[i])) res.push(arr[i]);\n   }\n   return res;\n }\n \n</code></pre><h3 id=\"filter\"><a href=\"#filter\" class=\"headerlink\" title=\"filter\"></a>filter</h3><pre><code> const unique4 = arr =&gt; {\n   return arr.filter((item, index) =&gt; {\n     return arr.indexOf(item) === index;\n   });\n }\n \n</code></pre><h3 id=\"Map\"><a href=\"#Map\" class=\"headerlink\" title=\"Map\"></a>Map</h3><pre><code> const unique5 = arr =&gt; {\n   const map = new Map();\n   const res = [];\n   for (let i = 0; i &lt; arr.length; i++) {\n     if (!map.has(arr[i])) {\n       map.set(arr[i], true)\n       res.push(arr[i]);\n     }\n   }\n   return res;\n }\n \n</code></pre><h2 id=\"03-\"><a href=\"#03-\" class=\"headerlink\" title=\"03.\"></a>03.</h2><p><strong>length</strong><strong>arguments</strong>DOM</p><h3 id=\"Array-from\"><a href=\"#Array-from\" class=\"headerlink\" title=\"Array.from\"></a>Array.from</h3><pre><code> Array.from(document.querySelectorAll(&#39;div&#39;))\n \n</code></pre><h3 id=\"Array-prototype-slice-call\"><a href=\"#Array-prototype-slice-call\" class=\"headerlink\" title=\"Array.prototype.slice.call()\"></a>Array.prototype.slice.call()</h3><pre><code> Array.prototype.slice.call(document.querySelectorAll(&#39;div&#39;))\n \n</code></pre><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre><code> [...document.querySelectorAll(&#39;div&#39;)]\n \n</code></pre><h3 id=\"concat\"><a href=\"#concat\" class=\"headerlink\" title=\"concat\"></a>concat</h3><pre><code> Array.prototype.concat.apply([], document.querySelectorAll(&#39;div&#39;));\n \n</code></pre><h2 id=\"04-Array-prototype-filter\"><a href=\"#04-Array-prototype-filter\" class=\"headerlink\" title=\"04.Array.prototype.filter()\"></a>04.Array.prototype.filter()</h2><p><img src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/804ee51d522746c3b219548d038413c2~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"\"></p><pre><code> Array.prototype.filter = function(callback, thisArg) {\n   if (this == undefined) {\n     throw new TypeError(&#39;this is null or not undefined&#39;);\n   }\n   if (typeof callback !== &#39;function&#39;) {\n     throw new TypeError(callback + &#39;is not a function&#39;);\n   }\n   const res = [];\n   // O\n   const O = Object(this);\n   // &gt;&gt;&gt;0 lennumber\n   const len = O.length &gt;&gt;&gt; 0;\n   for (let i = 0; i &lt; len; i++) {\n     // iO\n     if (i in O) {\n       // \n       if (callback.call(thisArg, O[i], i, O)) {\n         res.push(O[i]);\n       }\n     }\n   }\n   return res;\n }\n \n</code></pre><p><code>&gt;&gt;&gt;0</code><a href=\"https://zhuanlan.zhihu.com/p/100790268\" target=\"_blank\" rel=\"noopener\">&gt;&gt;&gt;0</a></p><h2 id=\"05-Array-prototype-map\"><a href=\"#05-Array-prototype-map\" class=\"headerlink\" title=\"05.Array.prototype.map()\"></a>05.Array.prototype.map()</h2><p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b099cf3e06bc4421abac4dc460a13c17~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"\"></p><pre><code> Array.prototype.map = function(callback, thisArg) {\n   if (this == undefined) {\n     throw new TypeError(&#39;this is null or not defined&#39;);\n   }\n   if (typeof callback !== &#39;function&#39;) {\n     throw new TypeError(callback + &#39; is not a function&#39;);\n   }\n   const res = [];\n   // \n   const O = Object(this);\n   const len = O.length &gt;&gt;&gt; 0;\n   for (let i = 0; i &lt; len; i++) {\n     if (i in O) {\n       // \n       res[i] = callback.call(thisArg, O[i], i, this);\n     }\n   }\n   return res;\n }\n \n</code></pre><h2 id=\"06-Array-prototype-forEach\"><a href=\"#06-Array-prototype-forEach\" class=\"headerlink\" title=\"06.Array.prototype.forEach()\"></a>06.Array.prototype.forEach()</h2><p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c3819fb0c404ae5a8f4cddc4e80731e~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"\"></p><p><code>forEach</code>map<code>forEach</code></p><pre><code> Array.prototype.forEach = function(callback, thisArg) {\n   if (this == null) {\n     throw new TypeError(&#39;this is null or not defined&#39;);\n   }\n   if (typeof callback !== &quot;function&quot;) {\n     throw new TypeError(callback + &#39; is not a function&#39;);\n   }\n   const O = Object(this);\n   const len = O.length &gt;&gt;&gt; 0;\n   let k = 0;\n   while (k &lt; len) {\n     if (k in O) {\n       callback.call(thisArg, O[k], k, O);\n     }\n     k++;\n   }\n }\n \n</code></pre><h2 id=\"07-Array-prototype-reduce\"><a href=\"#07-Array-prototype-reduce\" class=\"headerlink\" title=\"07.Array.prototype.reduce()\"></a>07.Array.prototype.reduce()</h2><p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e51625eb9e2d47799ff39c5956139af7~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"\"></p><pre><code> Array.prototype.reduce = function(callback, initialValue) {\n   if (this == undefined) {\n     throw new TypeError(&#39;this is null or not defined&#39;);\n   }\n   if (typeof callback !== &#39;function&#39;) {\n     throw new TypeError(callbackfn + &#39; is not a function&#39;);\n   }\n   const O = Object(this);\n   const len = this.length &gt;&gt;&gt; 0;\n   let accumulator = initialValue;\n   let k = 0;\n   // undefined\n   // \n   if (accumulator === undefined) {\n     while (k &lt; len &amp;&amp; !(k in O)) {\n       k++;\n     }\n     // TypeError\n     if (k &gt;= len) {\n       throw new TypeError(&#39;Reduce of empty array with no initial value&#39;);\n     }\n     accumulator = O[k++];\n   }\n   while (k &lt; len) {\n     if (k in O) {\n       accumulator = callback.call(undefined, accumulator, O[k], k, O);\n     }\n     k++;\n   }\n   return accumulator;\n }\n \n</code></pre><h2 id=\"08-Function-prototype-apply\"><a href=\"#08-Function-prototype-apply\" class=\"headerlink\" title=\"08.Function.prototype.apply()\"></a>08.Function.prototype.apply()</h2><p>this<code>window</code></p><pre><code> Function.prototype.apply = function(context = window, args) {\n   if (typeof this !== &#39;function&#39;) {\n     throw new TypeError(&#39;Type Error&#39;);\n   }\n   const fn = Symbol(&#39;fn&#39;);\n   context[fn] = this;\n\n   const res = context[fn](...args);\n   delete context[fn];\n   return res;\n }\n \n</code></pre><h2 id=\"09-Function-prototype-call\"><a href=\"#09-Function-prototype-call\" class=\"headerlink\" title=\"09.Function.prototype.call\"></a>09.Function.prototype.call</h2><p><code>call</code><code>call()</code></p><pre><code> Function.prototype.call = function(context = window, ...args) {\n   if (typeof this !== &#39;function&#39;) {\n     throw new TypeError(&#39;Type Error&#39;);\n   }\n   const fn = Symbol(&#39;fn&#39;);\n   context[fn] = this;\n\n   const res = this[fn](...args);\n   delete this.fn;\n   return res;\n }\n \n</code></pre><h2 id=\"10-Function-prototype-bind\"><a href=\"#10-Function-prototype-bind\" class=\"headerlink\" title=\"10.Function.prototype.bind\"></a>10.Function.prototype.bind</h2><pre><code> Function.prototype.bind = function(context, ...args) {\n   if (typeof this !== &#39;function&#39;) {\n     throw new Error(&quot;Type Error&quot;);\n   }\n   // this\n   var self = this;\n\n   return function F() {\n     // new\n     if(this instanceof F) {\n       return new self(...args, ...arguments)\n     }\n     return self.apply(context, [...args, ...arguments])\n   }\n }\n \n</code></pre><h2 id=\"11-debounce\"><a href=\"#11-debounce\" class=\"headerlink\" title=\"11.debounce\"></a>11.debounce</h2><p>n,n,</p><pre><code> const debounce = (fn, time) =&gt; {\n   let timeout = null;\n   return function() {\n     clearTimeout(timeout)\n     timeout = setTimeout(() =&gt; {\n       fn.apply(this, arguments);\n     }, time);\n   }\n };\n \n</code></pre><p><code>window</code><code>resize</code></p><h2 id=\"12-throttle\"><a href=\"#12-throttle\" class=\"headerlink\" title=\"12.throttle\"></a>12.throttle</h2><p>,n,</p><pre><code> const throttle = (fn, time) =&gt; {\n   let flag = true;\n   return function() {\n     if (!flag) return;\n     flag = false;\n     setTimeout(() =&gt; {\n       fn.apply(this, arguments);\n       flag = true;\n     }, time);\n   }\n }\n \n</code></pre><p></p><h2 id=\"13-\"><a href=\"#13-\" class=\"headerlink\" title=\"13.\"></a>13.</h2><blockquote><p>  f(1)(2)</p></blockquote><p><code>add(1)(2)(3)(4)=10;</code>  <code>add(1)(1,2,3)(2)=9;</code></p><pre><code> function add() {\n   const _args = [...arguments];\n   function fn() {\n     _args.push(...arguments);\n     return fn;\n   }\n   fn.toString = function() {\n     return _args.reduce((sum, cur) =&gt; sum + cur);\n   }\n   return fn;\n }\n \n</code></pre><h2 id=\"14-new\"><a href=\"#14-new\" class=\"headerlink\" title=\"14.new\"></a>14.new</h2><p>3</p><ol><li><code>ctor.prototype</code></li><li>this</li><li><p></p><p>function newOperator(ctor, args) {<br>if (typeof ctor !== function) {</p><pre><code>throw new TypeError(&#39;Type Error&#39;);\n</code></pre><p>}<br>const obj = Object.create(ctor.prototype);<br>const res = ctor.apply(obj, args);</p><p>const isObject = typeof res === object &amp;&amp; res !== null;<br>const isFunction = typeof res === function;<br>return isObject || isFunction ? res : obj;<br>}<br></p><h2 id=\"15-instanceof\"><a href=\"#15-instanceof\" class=\"headerlink\" title=\"15.instanceof\"></a>15.instanceof</h2><p><code>instanceof</code><code>prototype</code></p><p>const myInstanceof = (left, right) =&gt; {<br>// false<br>if (typeof left !== object || left === null) return false;<br>let proto = Object.getPrototypeOf(left);<br>while (true) {</p><pre><code>if (proto === null) return false;\nif (proto === right.prototype) return true;\nproto = Object.getPrototypeOf(proto);\n</code></pre><p>}<br>}<br></p><h2 id=\"16-\"><a href=\"#16-\" class=\"headerlink\" title=\"16.\"></a>16.</h2><p></p><p>function Parent() {<br>this.name = parent;<br>}<br>function Child() {<br>Parent.call(this);<br>this.type = children;<br>}<br>Child.prototype = Object.create(Parent.prototype);<br>Child.prototype.constructor = Child;<br></p><h2 id=\"17-Object-is\"><a href=\"#17-Object-is\" class=\"headerlink\" title=\"17.Object.is\"></a>17.Object.is</h2><p><code>Object.is</code></p><p>+0 === -0 // true<br>NaN === NaN // false<br></p><p>const is= (x, y) =&gt; {<br>if (x === y) {</p><pre><code>// +0-0\nreturn x !== 0 || y !== 0 || 1/x === 1/y;\n</code></pre><p>} else {</p><pre><code>return x !== x &amp;&amp; y !== y;\n</code></pre><p>}<br>}<br></p><h2 id=\"18-Object-assign\"><a href=\"#18-Object-assign\" class=\"headerlink\" title=\"18.Object.assign\"></a>18.Object.assign</h2><p><code>Object.assign()</code></p><p>Object.defineProperty(Object, assign, {<br>value: function(target, args) {</p><pre><code>if (target == null) {\n  return new TypeError(&#39;Cannot convert undefined or null to object&#39;);\n}\n\n// \nconst to = Object(target);\n\nfor (let i = 0; i &lt; args.length; i++) {\n  // \n  const nextSource = args[i];\n  if (nextSource !== null) {\n    // for...inhasOwnProperty\n    for (const nextKey in nextSource) {\n      if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n        to[nextKey] = nextSource[nextKey];\n      }\n    }\n  }\n}\nreturn to;\n</code></pre><p>},<br>// <br>enumerable: false,<br>writable: true,<br>configurable: true,<br>})<br></p><h2 id=\"19-\"><a href=\"#19-\" class=\"headerlink\" title=\"19.\"></a>19.</h2><p>Symbol</p><p>const cloneDeep1 = (target, hash = new WeakMap()) =&gt; {<br>// <br>if (typeof target !== object || target === null) {</p><pre><code>return target;\n</code></pre><p>}<br>// <br>if (hash.has(target)) return hash.get(target);</p><p>const cloneTarget = Array.isArray(target) ? [] : {};<br>hash.set(target, cloneTarget);</p><p>// Symbol<br>const symKeys = Object.getOwnPropertySymbols(target);<br>if (symKeys.length) {</p><pre><code>symKeys.forEach(symKey =&gt; {\n  if (typeof target[symKey] === &#39;object&#39; &amp;&amp; target[symKey] !== null) {\n    cloneTarget[symKey] = cloneDeep1(target[symKey]);\n  } else {\n    cloneTarget[symKey] = target[symKey];\n  }\n})\n</code></pre><p>}</p><p>for (const i in target) {</p><pre><code>if (Object.prototype.hasOwnProperty.call(target, i)) {\n  cloneTarget[i] =\n    typeof target[i] === &#39;object&#39; &amp;&amp; target[i] !== null\n    ? cloneDeep1(target[i], hash)\n    : target[i];\n}\n</code></pre><p>}<br>return cloneTarget;<br>}<br></p><h2 id=\"20-Promise\"><a href=\"#20-Promise\" class=\"headerlink\" title=\"20.Promise\"></a>20.Promise</h2><p><a href=\"https://juejin.im/post/6860037916622913550\" target=\"_blank\" rel=\"noopener\">Promise</a></p><p>const PENDING = PENDING; // <br>const FULFILLED = FULFILLED; // <br>const REJECTED = REJECTED; // </p><p>class Promise {<br>constructor(exector) {</p><pre><code>// \nthis.status = PENDING;\n// thisthencatch\nthis.value = undefined;\nthis.reason = undefined;\n// \nthis.onFulfilledCallbacks = [];\n// \nthis.onRejectedCallbacks = [];\n\nconst resolve = value =&gt; {\n  // \n  if (this.status === PENDING) {\n    this.status = FULFILLED;\n    this.value = value;\n    // \n    this.onFulfilledCallbacks.forEach(fn =&gt; fn(this.value));\n  }\n}\nconst reject = reason =&gt; {\n  // \n  if (this.status === PENDING) {\n    this.status = REJECTED;\n    this.reason = reason;\n    // \n    this.onRejectedCallbacks.forEach(fn =&gt; fn(this.reason))\n  }\n}\ntry {\n  // executor\n  // resolverejectexecutorresolvereject\n  exector(resolve, reject);\n} catch(e) {\n  // executorreject\n  reject(e);\n}\n</code></pre><p>}<br>then(onFulfilled, onRejected) {</p><pre><code>onFulfilled = typeof onFulfilled === &#39;function&#39; ? onFulfilled : value =&gt; value;\nonRejected = typeof onRejected === &#39;function&#39;? onRejected:\n  reason =&gt; { throw new Error(reason instanceof Error ? reason.message:reason) }\n// this\nconst self = this;\nreturn new Promise((resolve, reject) =&gt; {\n  if (self.status === PENDING) {\n    self.onFulfilledCallbacks.push(() =&gt; {\n      // try\n      try {\n        // \n        setTimeout(() =&gt; {\n          const result = onFulfilled(self.value);\n          // \n          // 1. Promisethen\n          // 2. PromisePromiseresolve\n          result instanceof Promise ? result.then(resolve, reject) : resolve(result);\n        })\n      } catch(e) {\n        reject(e);\n      }\n    });\n    self.onRejectedCallbacks.push(() =&gt; {\n      // \n      try {\n        setTimeout(() =&gt; {\n          const result = onRejected(self.reason);\n          // reject\n          result instanceof Promise ? result.then(resolve, reject) : reject(result);\n        })\n      } catch(e) {\n        reject(e);\n      }\n    })\n  } else if (self.status === FULFILLED) {\n    try {\n      setTimeout(() =&gt; {\n        const result = onFulfilled(self.value);\n        result instanceof Promise ? result.then(resolve, reject) : resolve(result);\n      });\n    } catch(e) {\n      reject(e);\n    }\n  } else if (self.status === REJECTED){\n    try {\n      setTimeout(() =&gt; {\n        const result = onRejected(self.reason);\n        result instanceof Promise ? result.then(resolve, reject) : reject(result);\n      })\n    } catch(e) {\n      reject(e);\n    }\n  }\n});\n</code></pre><p>}<br>catch(onRejected) {</p><pre><code>return this.then(null, onRejected);\n</code></pre><p>}<br>static resolve(value) {</p><pre><code>if (value instanceof Promise) {\n  // Promise\n  return value;\n} else {\n  // PromisePromiseFULFILLED\n  return new Promise((resolve, reject) =&gt; resolve(value));\n}\n</code></pre><p>}<br>static reject(reason) {</p><pre><code>return new Promise((resolve, reject) =&gt; {\n  reject(reason);\n})\n</code></pre><p>}<br>}<br></p><h2 id=\"21-Promise-all\"><a href=\"#21-Promise-all\" class=\"headerlink\" title=\"21.Promise.all\"></a>21.Promise.all</h2><p><code>Promise.all</code>Promise<code>resolve</code><code>reject</code></p><p>Promise.myAll = function(promiseArr) {<br>return new Promise((resolve, reject) =&gt; {</p><pre><code>const ans = [];\nlet index = 0;\nfor (let i = 0; i &lt; promiseArr.length; i++) {\n  promiseArr[i]\n  .then(res =&gt; {\n    ans[i] = res;\n    index++;\n    if (index === promiseArr.length) {\n      resolve(ans);\n    }\n  })\n  .catch(err =&gt; reject(err));\n}\n</code></pre><p>})<br>}<br></p><h2 id=\"22-Promise-race\"><a href=\"#22-Promise-race\" class=\"headerlink\" title=\"22.Promise.race\"></a>22.Promise.race</h2><p>Promise.race = function(promiseArr) {<br>return new Promise((resolve, reject) =&gt; {</p><pre><code>promiseArr.forEach(p =&gt; {\n  // PromisePromise\n  Promise.resolve(p).then(\n    val =&gt; resolve(val),\n    err =&gt; reject(err),\n  )\n})\n</code></pre><p>})<br>}<br></p><h2 id=\"23-Promise\"><a href=\"#23-Promise\" class=\"headerlink\" title=\"23.Promise\"></a>23.Promise</h2><p>Promise</p><p><a href=\"https://juejin.im/post/6854573217013563405\" target=\"_blank\" rel=\"noopener\">Promise</a></p><p>class Scheduler {<br>constructor() {</p><pre><code>this.queue = [];\nthis.maxCount = 2;\nthis.runCounts = 0;\n</code></pre><p>}<br>add(promiseCreator) {</p><pre><code>this.queue.push(promiseCreator);\n</code></pre><p>}<br>taskStart() {</p><pre><code>for (let i = 0; i &lt; this.maxCount; i++) {\n  this.request();\n}\n</code></pre><p>}<br>request() {</p><pre><code>if (!this.queue || !this.queue.length || this.runCounts &gt;= this.maxCount) {\n  return;\n}\nthis.runCounts++;\n\nthis.queue.shift()().then(() =&gt; {\n  this.runCounts--;\n  this.request();\n});\n</code></pre><p>}<br>}</p><p>const timeout = time =&gt; new Promise(resolve =&gt; {<br>setTimeout(resolve, time);<br>})</p><p>const scheduler = new Scheduler();</p><p>const addTask = (time,order) =&gt; {<br>scheduler.add(() =&gt; timeout(time).then(()=&gt;console.log(order)))<br>}</p></li></ol><pre><code> addTask(1000, &#39;1&#39;);\n addTask(500, &#39;2&#39;);\n addTask(300, &#39;3&#39;);\n addTask(400, &#39;4&#39;);\n scheduler.taskStart()\n // 2\n // 3\n // 1\n // 4\n \n</code></pre><h2 id=\"24-JSONP\"><a href=\"#24-JSONP\" class=\"headerlink\" title=\"24.JSONP\"></a>24.JSONP</h2><p>script<strong></strong>GET</p><pre><code> const jsonp = ({ url, params, callbackName }) =&gt; {\n   const generateUrl = () =&gt; {\n     let dataSrc = &#39;&#39;;\n     for (let key in params) {\n       if (Object.prototype.hasOwnProperty.call(params, key)) {\n         dataSrc += `${key}=${params[key]}&amp;`;\n       }\n     }\n     dataSrc += `callback=${callbackName}`;\n     return `${url}?${dataSrc}`;\n   }\n   return new Promise((resolve, reject) =&gt; {\n     const scriptEle = document.createElement(&#39;script&#39;);\n     scriptEle.src = generateUrl();\n     document.body.appendChild(scriptEle);\n     window[callbackName] = data =&gt; {\n       resolve(data);\n       document.removeChild(scriptEle);\n     }\n   })\n }\n \n</code></pre><h2 id=\"25-AJAX\"><a href=\"#25-AJAX\" class=\"headerlink\" title=\"25.AJAX\"></a>25.AJAX</h2><pre><code> const getJSON = function(url) {\n   return new Promise((resolve, reject) =&gt; {\n     const xhr = XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(&#39;Mscrosoft.XMLHttp&#39;);\n     xhr.open(&#39;GET&#39;, url, false);\n     xhr.setRequestHeader(&#39;Accept&#39;, &#39;application/json&#39;);\n     xhr.onreadystatechange = function() {\n       if (xhr.readyState !== 4) return;\n       if (xhr.status === 200 || xhr.status === 304) {\n         resolve(xhr.responseText);\n       } else {\n         reject(new Error(xhr.responseText));\n       }\n     }\n     xhr.send();\n   })\n }\n \n</code></pre><h2 id=\"26-event\"><a href=\"#26-event\" class=\"headerlink\" title=\"26.event\"></a>26.event</h2><p>nodenode<strong></strong></p><blockquote><p>SubjectObserver</p></blockquote><pre><code> function EventEmitter() {\n   this.events = new Map();\n }\n\n // \n // addListenerremoveListeneronceremoveAllListenersemit\n\n // addlistener\n const wrapCallback = (fn, once = false) =&gt; ({ callback: fn, once });\n EventEmitter.prototype.addListener = function(type, fn, once = false) {\n   const hanlder = this.events.get(type);\n   if (!hanlder) {\n     // type\n     this.events.set(type, wrapCallback(fn, once));\n   } else if (hanlder &amp;&amp; typeof hanlder.callback === &#39;function&#39;) {\n     // type\n     this.events.set(type, [hanlder, wrapCallback(fn, once)]);\n   } else {\n     // type&gt;=2\n     hanlder.push(wrapCallback(fn, once));\n   }\n }\n // removeListener\n EventEmitter.prototype.removeListener = function(type, listener) {\n   const hanlder = this.events.get(type);\n   if (!hanlder) return;\n   if (!Array.isArray(this.events)) {\n     if (hanlder.callback === listener.callback) this.events.delete(type);\n     else return;\n   }\n   for (let i = 0; i &lt; hanlder.length; i++) {\n     const item = hanlder[i];\n     if (item.callback === listener.callback) {\n       hanlder.splice(i, 1);\n       i--;\n       if (hanlder.length === 1) {\n         this.events.set(type, hanlder[0]);\n       }\n     }\n   }\n }\n // once\n EventEmitter.prototype.once = function(type, listener) {\n   this.addListener(type, listener, true);\n }\n // emit\n EventEmitter.prototype.emit = function(type, ...args) {\n   const hanlder = this.events.get(type);\n   if (!hanlder) return;\n   if (Array.isArray(hanlder)) {\n     hanlder.forEach(item =&gt; {\n       item.callback.apply(this, args);\n       if (item.once) {\n         this.removeListener(type, item);\n       }\n     })\n   } else {\n     hanlder.callback.apply(this, args);\n     if (hanlder.once) {\n       this.events.delete(type);\n     }\n   }\n   return true;\n }\n EventEmitter.prototype.removeAllListeners = function(type) {\n   const hanlder = this.events.get(type);\n   if (!hanlder) return;\n   this.events.delete(type);\n }\n \n</code></pre><h2 id=\"27-\"><a href=\"#27-\" class=\"headerlink\" title=\"27.\"></a>27.</h2><p>img<code>data-src=&#39;default.png&#39;</code><strong>src</strong></p><pre><code> function lazyload() {\n   const imgs = document.getElementsByTagName(&#39;img&#39;);\n   const len = imgs.length;\n   // \n   const viewHeight = document.documentElement.clientHeight;\n   // \n   const scrollHeight = document.documentElement.scrollTop || document.body.scrollTop;\n   for (let i = 0; i &lt; len; i++) {\n     const offsetHeight = imgs[i].offsetTop;\n     if (offsetHeight &lt; viewHeight + scrollHeight) {\n       const src = imgs[i].dataset.src;\n       imgs[i].src = src;\n     }\n   }\n }\n\n // \n window.addEventListener(&#39;scroll&#39;, lazyload);\n \n</code></pre><h2 id=\"28-\"><a href=\"#28-\" class=\"headerlink\" title=\"28.\"></a>28.</h2><p><strong>clientHeight</strong><strong>scrollTop</strong><strong>scrollHeight</strong></p><pre><code> window.addEventListener(&#39;scroll&#39;, function() {\n   const clientHeight = document.documentElement.clientHeight;\n   const scrollTop = document.documentElement.scrollTop;\n   const scrollHeight = document.documentElement.scrollHeight;\n   if (clientHeight + scrollTop &gt;= scrollHeight) {\n     // \n     // ...\n   }\n }, false);\n \n</code></pre><p>Demo<a href=\"https://github.com/SherrybabyOne/Demos/blob/master/Interview/JavaScript/%E6%BB%9A%E5%8A%A8%E5%8A%A0%E8%BD%BD.html\" target=\"_blank\" rel=\"noopener\">Demo</a></p><h2 id=\"29-\"><a href=\"#29-\" class=\"headerlink\" title=\"29.\"></a>29.</h2><p><strong>createDocumentFragment</strong><strong>requestAnimationFrame</strong></p><pre><code> setTimeout(() =&gt; {\n   // \n   const total = 100000;\n   // \n   const once = 20;\n   // \n   const loopCount = Math.ceil(total / once);\n   let countOfRender = 0;\n   const ul = document.querySelector(&#39;ul&#39;);\n   // \n   function add() {\n     const fragment = document.createDocumentFragment();\n     for(let i = 0; i &lt; once; i++) {\n       const li = document.createElement(&#39;li&#39;);\n       li.innerText = Math.floor(Math.random() * total);\n       fragment.appendChild(li);\n     }\n     ul.appendChild(fragment);\n     countOfRender += 1;\n     loop();\n   }\n   function loop() {\n     if(countOfRender &lt; loopCount) {\n       window.requestAnimationFrame(add);\n     }\n   }\n   loop();\n }, 0)\n \n</code></pre><h2 id=\"30-HTML\"><a href=\"#30-HTML\" class=\"headerlink\" title=\"30.HTML\"></a>30.HTML</h2><p></p><pre><code> const fn = () =&gt; {\n   return [...new Set([...document.querySelectorAll(&#39;*&#39;)].map(el =&gt; el.tagName))].length;\n }\n \n</code></pre><p>DOM<strong></strong></p><h2 id=\"31-VirtualDomDOM\"><a href=\"#31-VirtualDomDOM\" class=\"headerlink\" title=\"31.VirtualDomDOM\"></a>31.VirtualDomDOM</h2><p>SPA</p><pre><code> // vnode\n // {\n //   tag,\n //   attrs,\n //   children,\n // }\n\n //Virtual DOM =&gt; DOM\n function render(vnode, container) {\n   container.appendChild(_render(vnode));\n }\n function _render(vnode) {\n   // \n   if (typeof vnode === &#39;number&#39;) {\n     vnode = String(vnode);\n   }\n   // \n   if (typeof vnode === &#39;string&#39;) {\n     return document.createTextNode(vnode);\n   }\n   // DOM\n   const dom = document.createElement(vnode.tag);\n   if (vnode.attrs) {\n     // \n     Object.keys(vnode.attrs).forEach(key =&gt; {\n       const value = vnode.attrs[key];\n       dom.setAttribute(key, value);\n     })\n   }\n   // \n   vnode.children.forEach(child =&gt; render(child, dom));\n   return dom;\n }\n \n</code></pre><h2 id=\"32-\"><a href=\"#32-\" class=\"headerlink\" title=\"32.\"></a>32.</h2><pre><code> var a = {\n     b: 123,\n     c: &#39;456&#39;,\n     e: &#39;789&#39;,\n }\n var str=`a{a.b}aa{a.c}aa {a.d}aaaa`;\n // =&gt; &#39;a123aa456aa {a.d}aaaa&#39;\n \n</code></pre><p>str<code>{}</code><code>{a.d}</code></p><p></p><pre><code> const fn1 = (str, obj) =&gt; {\n     let res = &#39;&#39;;\n     // {\n     let flag = false;\n     let start;\n     for (let i = 0; i &lt; str.length; i++) {\n         if (str[i] === &#39;{&#39;) {\n             flag = true;\n             start = i + 1;\n             continue;\n         }\n         if (!flag) res += str[i];\n         else {\n             if (str[i] === &#39;}&#39;) {\n                 flag = false;\n                 res += match(str.slice(start, i), obj);\n             }\n         }\n     }\n     return res;\n }\n // \n const match = (str, obj) =&gt; {\n     const keys = str.split(&#39;.&#39;).slice(1);\n     let index = 0;\n     let o = obj;\n     while (index &lt; keys.length) {\n         const key = keys[index];\n         if (!o[key]) {\n             return `{${str}}`;\n         } else {\n             o = o[key];\n         }\n         index++;\n     }\n     return o;\n }\n</code></pre>","site":{"data":{}},"excerpt":"","more":"<p><a href=\"https://juejin.im/post/6875152247714480136#heading-20\" target=\"_blank\" rel=\"noopener\">32JS</a></p><h1 id=\"32JS\"><a href=\"#32JS\" class=\"headerlink\" title=\"32JS\"></a>32JS</h1><p>JSoffer32JS</p><p>MDNJS</p><h2 id=\"01-\"><a href=\"#01-\" class=\"headerlink\" title=\"01.\"></a>01.</h2><p></p><pre><code> const arr = [1, [2, [3, [4, 5]]], 6];\n // =&gt; [1, 2, 3, 4, 5, 6]\n \n</code></pre><h3 id=\"flat\"><a href=\"#flat\" class=\"headerlink\" title=\"flat()\"></a>flat()</h3><pre><code> const res1 = arr.flat(Infinity);\n \n</code></pre><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre><code> const res2 = JSON.stringify(arr).replace(/\\[|\\]/g, &#39;&#39;).split(&#39;,&#39;);\n \n</code></pre><p></p><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre><code> const res3 = JSON.parse(&#39;[&#39; + JSON.stringify(arr).replace(/\\[|\\]/g, &#39;&#39;) + &#39;]&#39;);\n \n</code></pre><h3 id=\"reduce\"><a href=\"#reduce\" class=\"headerlink\" title=\"reduce\"></a>reduce</h3><pre><code> const flatten = arr =&gt; {\n   return arr.reduce((pre, cur) =&gt; {\n     return pre.concat(Array.isArray(cur) ? flatten(cur) : cur);\n   }, [])\n }\n const res4 = flatten(arr);\n \n</code></pre><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre><code> const res5 = [];\n const fn = arr =&gt; {\n   for (let i = 0; i &lt; arr.length; i++) {\n     if (Array.isArray(arr[i])) {\n       fn(arr[i]);\n     } else {\n       res5.push(arr[i]);\n     }\n   }\n }\n fn(arr);\n \n</code></pre><h2 id=\"02-\"><a href=\"#02-\" class=\"headerlink\" title=\"02.\"></a>02.</h2><pre><code> const arr = [1, 1, &#39;1&#39;, 17, true, true, false, false, &#39;true&#39;, &#39;a&#39;, {}, {}];\n // =&gt; [1, &#39;1&#39;, 17, true, false, &#39;true&#39;, &#39;a&#39;, {}, {}]\n \n</code></pre><h3 id=\"Set\"><a href=\"#Set\" class=\"headerlink\" title=\"Set\"></a>Set</h3><pre><code> const res1 = Array.from(new Set(arr));\n \n</code></pre><h3 id=\"for-splice\"><a href=\"#for-splice\" class=\"headerlink\" title=\"for+splice\"></a>for+splice</h3><pre><code> const unique1 = arr =&gt; {\n   let len = arr.length;\n   for (let i = 0; i &lt; len; i++) {\n     for (let j = i + 1; j &lt; len; j++) {\n       if (arr[i] === arr[j]) {\n         arr.splice(j, 1);\n         // j--jlen--\n         len--;\n         j--;\n       }\n     }\n   }\n   return arr;\n }\n \n</code></pre><h3 id=\"indexOf\"><a href=\"#indexOf\" class=\"headerlink\" title=\"indexOf\"></a>indexOf</h3><pre><code> const unique2 = arr =&gt; {\n   const res = [];\n   for (let i = 0; i &lt; arr.length; i++) {\n     if (res.indexOf(arr[i]) === -1) res.push(arr[i]);\n   }\n   return res;\n }\n \n</code></pre><p>includefilter</p><h3 id=\"include\"><a href=\"#include\" class=\"headerlink\" title=\"include\"></a>include</h3><pre><code> const unique3 = arr =&gt; {\n   const res = [];\n   for (let i = 0; i &lt; arr.length; i++) {\n     if (!res.includes(arr[i])) res.push(arr[i]);\n   }\n   return res;\n }\n \n</code></pre><h3 id=\"filter\"><a href=\"#filter\" class=\"headerlink\" title=\"filter\"></a>filter</h3><pre><code> const unique4 = arr =&gt; {\n   return arr.filter((item, index) =&gt; {\n     return arr.indexOf(item) === index;\n   });\n }\n \n</code></pre><h3 id=\"Map\"><a href=\"#Map\" class=\"headerlink\" title=\"Map\"></a>Map</h3><pre><code> const unique5 = arr =&gt; {\n   const map = new Map();\n   const res = [];\n   for (let i = 0; i &lt; arr.length; i++) {\n     if (!map.has(arr[i])) {\n       map.set(arr[i], true)\n       res.push(arr[i]);\n     }\n   }\n   return res;\n }\n \n</code></pre><h2 id=\"03-\"><a href=\"#03-\" class=\"headerlink\" title=\"03.\"></a>03.</h2><p><strong>length</strong><strong>arguments</strong>DOM</p><h3 id=\"Array-from\"><a href=\"#Array-from\" class=\"headerlink\" title=\"Array.from\"></a>Array.from</h3><pre><code> Array.from(document.querySelectorAll(&#39;div&#39;))\n \n</code></pre><h3 id=\"Array-prototype-slice-call\"><a href=\"#Array-prototype-slice-call\" class=\"headerlink\" title=\"Array.prototype.slice.call()\"></a>Array.prototype.slice.call()</h3><pre><code> Array.prototype.slice.call(document.querySelectorAll(&#39;div&#39;))\n \n</code></pre><h3 id=\"\"><a href=\"#\" class=\"headerlink\" title=\"\"></a></h3><pre><code> [...document.querySelectorAll(&#39;div&#39;)]\n \n</code></pre><h3 id=\"concat\"><a href=\"#concat\" class=\"headerlink\" title=\"concat\"></a>concat</h3><pre><code> Array.prototype.concat.apply([], document.querySelectorAll(&#39;div&#39;));\n \n</code></pre><h2 id=\"04-Array-prototype-filter\"><a href=\"#04-Array-prototype-filter\" class=\"headerlink\" title=\"04.Array.prototype.filter()\"></a>04.Array.prototype.filter()</h2><p><img src=\"https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/804ee51d522746c3b219548d038413c2~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"\"></p><pre><code> Array.prototype.filter = function(callback, thisArg) {\n   if (this == undefined) {\n     throw new TypeError(&#39;this is null or not undefined&#39;);\n   }\n   if (typeof callback !== &#39;function&#39;) {\n     throw new TypeError(callback + &#39;is not a function&#39;);\n   }\n   const res = [];\n   // O\n   const O = Object(this);\n   // &gt;&gt;&gt;0 lennumber\n   const len = O.length &gt;&gt;&gt; 0;\n   for (let i = 0; i &lt; len; i++) {\n     // iO\n     if (i in O) {\n       // \n       if (callback.call(thisArg, O[i], i, O)) {\n         res.push(O[i]);\n       }\n     }\n   }\n   return res;\n }\n \n</code></pre><p><code>&gt;&gt;&gt;0</code><a href=\"https://zhuanlan.zhihu.com/p/100790268\" target=\"_blank\" rel=\"noopener\">&gt;&gt;&gt;0</a></p><h2 id=\"05-Array-prototype-map\"><a href=\"#05-Array-prototype-map\" class=\"headerlink\" title=\"05.Array.prototype.map()\"></a>05.Array.prototype.map()</h2><p><img src=\"https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b099cf3e06bc4421abac4dc460a13c17~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"\"></p><pre><code> Array.prototype.map = function(callback, thisArg) {\n   if (this == undefined) {\n     throw new TypeError(&#39;this is null or not defined&#39;);\n   }\n   if (typeof callback !== &#39;function&#39;) {\n     throw new TypeError(callback + &#39; is not a function&#39;);\n   }\n   const res = [];\n   // \n   const O = Object(this);\n   const len = O.length &gt;&gt;&gt; 0;\n   for (let i = 0; i &lt; len; i++) {\n     if (i in O) {\n       // \n       res[i] = callback.call(thisArg, O[i], i, this);\n     }\n   }\n   return res;\n }\n \n</code></pre><h2 id=\"06-Array-prototype-forEach\"><a href=\"#06-Array-prototype-forEach\" class=\"headerlink\" title=\"06.Array.prototype.forEach()\"></a>06.Array.prototype.forEach()</h2><p><img src=\"https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2c3819fb0c404ae5a8f4cddc4e80731e~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"\"></p><p><code>forEach</code>map<code>forEach</code></p><pre><code> Array.prototype.forEach = function(callback, thisArg) {\n   if (this == null) {\n     throw new TypeError(&#39;this is null or not defined&#39;);\n   }\n   if (typeof callback !== &quot;function&quot;) {\n     throw new TypeError(callback + &#39; is not a function&#39;);\n   }\n   const O = Object(this);\n   const len = O.length &gt;&gt;&gt; 0;\n   let k = 0;\n   while (k &lt; len) {\n     if (k in O) {\n       callback.call(thisArg, O[k], k, O);\n     }\n     k++;\n   }\n }\n \n</code></pre><h2 id=\"07-Array-prototype-reduce\"><a href=\"#07-Array-prototype-reduce\" class=\"headerlink\" title=\"07.Array.prototype.reduce()\"></a>07.Array.prototype.reduce()</h2><p><img src=\"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e51625eb9e2d47799ff39c5956139af7~tplv-k3u1fbpfcp-zoom-1.image\" alt=\"\"></p><pre><code> Array.prototype.reduce = function(callback, initialValue) {\n   if (this == undefined) {\n     throw new TypeError(&#39;this is null or not defined&#39;);\n   }\n   if (typeof callback !== &#39;function&#39;) {\n     throw new TypeError(callbackfn + &#39; is not a function&#39;);\n   }\n   const O = Object(this);\n   const len = this.length &gt;&gt;&gt; 0;\n   let accumulator = initialValue;\n   let k = 0;\n   // undefined\n   // \n   if (accumulator === undefined) {\n     while (k &lt; len &amp;&amp; !(k in O)) {\n       k++;\n     }\n     // TypeError\n     if (k &gt;= len) {\n       throw new TypeError(&#39;Reduce of empty array with no initial value&#39;);\n     }\n     accumulator = O[k++];\n   }\n   while (k &lt; len) {\n     if (k in O) {\n       accumulator = callback.call(undefined, accumulator, O[k], k, O);\n     }\n     k++;\n   }\n   return accumulator;\n }\n \n</code></pre><h2 id=\"08-Function-prototype-apply\"><a href=\"#08-Function-prototype-apply\" class=\"headerlink\" title=\"08.Function.prototype.apply()\"></a>08.Function.prototype.apply()</h2><p>this<code>window</code></p><pre><code> Function.prototype.apply = function(context = window, args) {\n   if (typeof this !== &#39;function&#39;) {\n     throw new TypeError(&#39;Type Error&#39;);\n   }\n   const fn = Symbol(&#39;fn&#39;);\n   context[fn] = this;\n\n   const res = context[fn](...args);\n   delete context[fn];\n   return res;\n }\n \n</code></pre><h2 id=\"09-Function-prototype-call\"><a href=\"#09-Function-prototype-call\" class=\"headerlink\" title=\"09.Function.prototype.call\"></a>09.Function.prototype.call</h2><p><code>call</code><code>call()</code></p><pre><code> Function.prototype.call = function(context = window, ...args) {\n   if (typeof this !== &#39;function&#39;) {\n     throw new TypeError(&#39;Type Error&#39;);\n   }\n   const fn = Symbol(&#39;fn&#39;);\n   context[fn] = this;\n\n   const res = this[fn](...args);\n   delete this.fn;\n   return res;\n }\n \n</code></pre><h2 id=\"10-Function-prototype-bind\"><a href=\"#10-Function-prototype-bind\" class=\"headerlink\" title=\"10.Function.prototype.bind\"></a>10.Function.prototype.bind</h2><pre><code> Function.prototype.bind = function(context, ...args) {\n   if (typeof this !== &#39;function&#39;) {\n     throw new Error(&quot;Type Error&quot;);\n   }\n   // this\n   var self = this;\n\n   return function F() {\n     // new\n     if(this instanceof F) {\n       return new self(...args, ...arguments)\n     }\n     return self.apply(context, [...args, ...arguments])\n   }\n }\n \n</code></pre><h2 id=\"11-debounce\"><a href=\"#11-debounce\" class=\"headerlink\" title=\"11.debounce\"></a>11.debounce</h2><p>n,n,</p><pre><code> const debounce = (fn, time) =&gt; {\n   let timeout = null;\n   return function() {\n     clearTimeout(timeout)\n     timeout = setTimeout(() =&gt; {\n       fn.apply(this, arguments);\n     }, time);\n   }\n };\n \n</code></pre><p><code>window</code><code>resize</code></p><h2 id=\"12-throttle\"><a href=\"#12-throttle\" class=\"headerlink\" title=\"12.throttle\"></a>12.throttle</h2><p>,n,</p><pre><code> const throttle = (fn, time) =&gt; {\n   let flag = true;\n   return function() {\n     if (!flag) return;\n     flag = false;\n     setTimeout(() =&gt; {\n       fn.apply(this, arguments);\n       flag = true;\n     }, time);\n   }\n }\n \n</code></pre><p></p><h2 id=\"13-\"><a href=\"#13-\" class=\"headerlink\" title=\"13.\"></a>13.</h2><blockquote><p>  f(1)(2)</p></blockquote><p><code>add(1)(2)(3)(4)=10;</code>  <code>add(1)(1,2,3)(2)=9;</code></p><pre><code> function add() {\n   const _args = [...arguments];\n   function fn() {\n     _args.push(...arguments);\n     return fn;\n   }\n   fn.toString = function() {\n     return _args.reduce((sum, cur) =&gt; sum + cur);\n   }\n   return fn;\n }\n \n</code></pre><h2 id=\"14-new\"><a href=\"#14-new\" class=\"headerlink\" title=\"14.new\"></a>14.new</h2><p>3</p><ol><li><code>ctor.prototype</code></li><li>this</li><li><p></p><p>function newOperator(ctor, args) {<br>if (typeof ctor !== function) {</p><pre><code>throw new TypeError(&#39;Type Error&#39;);\n</code></pre><p>}<br>const obj = Object.create(ctor.prototype);<br>const res = ctor.apply(obj, args);</p><p>const isObject = typeof res === object &amp;&amp; res !== null;<br>const isFunction = typeof res === function;<br>return isObject || isFunction ? res : obj;<br>}<br></p><h2 id=\"15-instanceof\"><a href=\"#15-instanceof\" class=\"headerlink\" title=\"15.instanceof\"></a>15.instanceof</h2><p><code>instanceof</code><code>prototype</code></p><p>const myInstanceof = (left, right) =&gt; {<br>// false<br>if (typeof left !== object || left === null) return false;<br>let proto = Object.getPrototypeOf(left);<br>while (true) {</p><pre><code>if (proto === null) return false;\nif (proto === right.prototype) return true;\nproto = Object.getPrototypeOf(proto);\n</code></pre><p>}<br>}<br></p><h2 id=\"16-\"><a href=\"#16-\" class=\"headerlink\" title=\"16.\"></a>16.</h2><p></p><p>function Parent() {<br>this.name = parent;<br>}<br>function Child() {<br>Parent.call(this);<br>this.type = children;<br>}<br>Child.prototype = Object.create(Parent.prototype);<br>Child.prototype.constructor = Child;<br></p><h2 id=\"17-Object-is\"><a href=\"#17-Object-is\" class=\"headerlink\" title=\"17.Object.is\"></a>17.Object.is</h2><p><code>Object.is</code></p><p>+0 === -0 // true<br>NaN === NaN // false<br></p><p>const is= (x, y) =&gt; {<br>if (x === y) {</p><pre><code>// +0-0\nreturn x !== 0 || y !== 0 || 1/x === 1/y;\n</code></pre><p>} else {</p><pre><code>return x !== x &amp;&amp; y !== y;\n</code></pre><p>}<br>}<br></p><h2 id=\"18-Object-assign\"><a href=\"#18-Object-assign\" class=\"headerlink\" title=\"18.Object.assign\"></a>18.Object.assign</h2><p><code>Object.assign()</code></p><p>Object.defineProperty(Object, assign, {<br>value: function(target, args) {</p><pre><code>if (target == null) {\n  return new TypeError(&#39;Cannot convert undefined or null to object&#39;);\n}\n\n// \nconst to = Object(target);\n\nfor (let i = 0; i &lt; args.length; i++) {\n  // \n  const nextSource = args[i];\n  if (nextSource !== null) {\n    // for...inhasOwnProperty\n    for (const nextKey in nextSource) {\n      if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n        to[nextKey] = nextSource[nextKey];\n      }\n    }\n  }\n}\nreturn to;\n</code></pre><p>},<br>// <br>enumerable: false,<br>writable: true,<br>configurable: true,<br>})<br></p><h2 id=\"19-\"><a href=\"#19-\" class=\"headerlink\" title=\"19.\"></a>19.</h2><p>Symbol</p><p>const cloneDeep1 = (target, hash = new WeakMap()) =&gt; {<br>// <br>if (typeof target !== object || target === null) {</p><pre><code>return target;\n</code></pre><p>}<br>// <br>if (hash.has(target)) return hash.get(target);</p><p>const cloneTarget = Array.isArray(target) ? [] : {};<br>hash.set(target, cloneTarget);</p><p>// Symbol<br>const symKeys = Object.getOwnPropertySymbols(target);<br>if (symKeys.length) {</p><pre><code>symKeys.forEach(symKey =&gt; {\n  if (typeof target[symKey] === &#39;object&#39; &amp;&amp; target[symKey] !== null) {\n    cloneTarget[symKey] = cloneDeep1(target[symKey]);\n  } else {\n    cloneTarget[symKey] = target[symKey];\n  }\n})\n</code></pre><p>}</p><p>for (const i in target) {</p><pre><code>if (Object.prototype.hasOwnProperty.call(target, i)) {\n  cloneTarget[i] =\n    typeof target[i] === &#39;object&#39; &amp;&amp; target[i] !== null\n    ? cloneDeep1(target[i], hash)\n    : target[i];\n}\n</code></pre><p>}<br>return cloneTarget;<br>}<br></p><h2 id=\"20-Promise\"><a href=\"#20-Promise\" class=\"headerlink\" title=\"20.Promise\"></a>20.Promise</h2><p><a href=\"https://juejin.im/post/6860037916622913550\" target=\"_blank\" rel=\"noopener\">Promise</a></p><p>const PENDING = PENDING; // <br>const FULFILLED = FULFILLED; // <br>const REJECTED = REJECTED; // </p><p>class Promise {<br>constructor(exector) {</p><pre><code>// \nthis.status = PENDING;\n// thisthencatch\nthis.value = undefined;\nthis.reason = undefined;\n// \nthis.onFulfilledCallbacks = [];\n// \nthis.onRejectedCallbacks = [];\n\nconst resolve = value =&gt; {\n  // \n  if (this.status === PENDING) {\n    this.status = FULFILLED;\n    this.value = value;\n    // \n    this.onFulfilledCallbacks.forEach(fn =&gt; fn(this.value));\n  }\n}\nconst reject = reason =&gt; {\n  // \n  if (this.status === PENDING) {\n    this.status = REJECTED;\n    this.reason = reason;\n    // \n    this.onRejectedCallbacks.forEach(fn =&gt; fn(this.reason))\n  }\n}\ntry {\n  // executor\n  // resolverejectexecutorresolvereject\n  exector(resolve, reject);\n} catch(e) {\n  // executorreject\n  reject(e);\n}\n</code></pre><p>}<br>then(onFulfilled, onRejected) {</p><pre><code>onFulfilled = typeof onFulfilled === &#39;function&#39; ? onFulfilled : value =&gt; value;\nonRejected = typeof onRejected === &#39;function&#39;? onRejected:\n  reason =&gt; { throw new Error(reason instanceof Error ? reason.message:reason) }\n// this\nconst self = this;\nreturn new Promise((resolve, reject) =&gt; {\n  if (self.status === PENDING) {\n    self.onFulfilledCallbacks.push(() =&gt; {\n      // try\n      try {\n        // \n        setTimeout(() =&gt; {\n          const result = onFulfilled(self.value);\n          // \n          // 1. Promisethen\n          // 2. PromisePromiseresolve\n          result instanceof Promise ? result.then(resolve, reject) : resolve(result);\n        })\n      } catch(e) {\n        reject(e);\n      }\n    });\n    self.onRejectedCallbacks.push(() =&gt; {\n      // \n      try {\n        setTimeout(() =&gt; {\n          const result = onRejected(self.reason);\n          // reject\n          result instanceof Promise ? result.then(resolve, reject) : reject(result);\n        })\n      } catch(e) {\n        reject(e);\n      }\n    })\n  } else if (self.status === FULFILLED) {\n    try {\n      setTimeout(() =&gt; {\n        const result = onFulfilled(self.value);\n        result instanceof Promise ? result.then(resolve, reject) : resolve(result);\n      });\n    } catch(e) {\n      reject(e);\n    }\n  } else if (self.status === REJECTED){\n    try {\n      setTimeout(() =&gt; {\n        const result = onRejected(self.reason);\n        result instanceof Promise ? result.then(resolve, reject) : reject(result);\n      })\n    } catch(e) {\n      reject(e);\n    }\n  }\n});\n</code></pre><p>}<br>catch(onRejected) {</p><pre><code>return this.then(null, onRejected);\n</code></pre><p>}<br>static resolve(value) {</p><pre><code>if (value instanceof Promise) {\n  // Promise\n  return value;\n} else {\n  // PromisePromiseFULFILLED\n  return new Promise((resolve, reject) =&gt; resolve(value));\n}\n</code></pre><p>}<br>static reject(reason) {</p><pre><code>return new Promise((resolve, reject) =&gt; {\n  reject(reason);\n})\n</code></pre><p>}<br>}<br></p><h2 id=\"21-Promise-all\"><a href=\"#21-Promise-all\" class=\"headerlink\" title=\"21.Promise.all\"></a>21.Promise.all</h2><p><code>Promise.all</code>Promise<code>resolve</code><code>reject</code></p><p>Promise.myAll = function(promiseArr) {<br>return new Promise((resolve, reject) =&gt; {</p><pre><code>const ans = [];\nlet index = 0;\nfor (let i = 0; i &lt; promiseArr.length; i++) {\n  promiseArr[i]\n  .then(res =&gt; {\n    ans[i] = res;\n    index++;\n    if (index === promiseArr.length) {\n      resolve(ans);\n    }\n  })\n  .catch(err =&gt; reject(err));\n}\n</code></pre><p>})<br>}<br></p><h2 id=\"22-Promise-race\"><a href=\"#22-Promise-race\" class=\"headerlink\" title=\"22.Promise.race\"></a>22.Promise.race</h2><p>Promise.race = function(promiseArr) {<br>return new Promise((resolve, reject) =&gt; {</p><pre><code>promiseArr.forEach(p =&gt; {\n  // PromisePromise\n  Promise.resolve(p).then(\n    val =&gt; resolve(val),\n    err =&gt; reject(err),\n  )\n})\n</code></pre><p>})<br>}<br></p><h2 id=\"23-Promise\"><a href=\"#23-Promise\" class=\"headerlink\" title=\"23.Promise\"></a>23.Promise</h2><p>Promise</p><p><a href=\"https://juejin.im/post/6854573217013563405\" target=\"_blank\" rel=\"noopener\">Promise</a></p><p>class Scheduler {<br>constructor() {</p><pre><code>this.queue = [];\nthis.maxCount = 2;\nthis.runCounts = 0;\n</code></pre><p>}<br>add(promiseCreator) {</p><pre><code>this.queue.push(promiseCreator);\n</code></pre><p>}<br>taskStart() {</p><pre><code>for (let i = 0; i &lt; this.maxCount; i++) {\n  this.request();\n}\n</code></pre><p>}<br>request() {</p><pre><code>if (!this.queue || !this.queue.length || this.runCounts &gt;= this.maxCount) {\n  return;\n}\nthis.runCounts++;\n\nthis.queue.shift()().then(() =&gt; {\n  this.runCounts--;\n  this.request();\n});\n</code></pre><p>}<br>}</p><p>const timeout = time =&gt; new Promise(resolve =&gt; {<br>setTimeout(resolve, time);<br>})</p><p>const scheduler = new Scheduler();</p><p>const addTask = (time,order) =&gt; {<br>scheduler.add(() =&gt; timeout(time).then(()=&gt;console.log(order)))<br>}</p></li></ol><pre><code> addTask(1000, &#39;1&#39;);\n addTask(500, &#39;2&#39;);\n addTask(300, &#39;3&#39;);\n addTask(400, &#39;4&#39;);\n scheduler.taskStart()\n // 2\n // 3\n // 1\n // 4\n \n</code></pre><h2 id=\"24-JSONP\"><a href=\"#24-JSONP\" class=\"headerlink\" title=\"24.JSONP\"></a>24.JSONP</h2><p>script<strong></strong>GET</p><pre><code> const jsonp = ({ url, params, callbackName }) =&gt; {\n   const generateUrl = () =&gt; {\n     let dataSrc = &#39;&#39;;\n     for (let key in params) {\n       if (Object.prototype.hasOwnProperty.call(params, key)) {\n         dataSrc += `${key}=${params[key]}&amp;`;\n       }\n     }\n     dataSrc += `callback=${callbackName}`;\n     return `${url}?${dataSrc}`;\n   }\n   return new Promise((resolve, reject) =&gt; {\n     const scriptEle = document.createElement(&#39;script&#39;);\n     scriptEle.src = generateUrl();\n     document.body.appendChild(scriptEle);\n     window[callbackName] = data =&gt; {\n       resolve(data);\n       document.removeChild(scriptEle);\n     }\n   })\n }\n \n</code></pre><h2 id=\"25-AJAX\"><a href=\"#25-AJAX\" class=\"headerlink\" title=\"25.AJAX\"></a>25.AJAX</h2><pre><code> const getJSON = function(url) {\n   return new Promise((resolve, reject) =&gt; {\n     const xhr = XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject(&#39;Mscrosoft.XMLHttp&#39;);\n     xhr.open(&#39;GET&#39;, url, false);\n     xhr.setRequestHeader(&#39;Accept&#39;, &#39;application/json&#39;);\n     xhr.onreadystatechange = function() {\n       if (xhr.readyState !== 4) return;\n       if (xhr.status === 200 || xhr.status === 304) {\n         resolve(xhr.responseText);\n       } else {\n         reject(new Error(xhr.responseText));\n       }\n     }\n     xhr.send();\n   })\n }\n \n</code></pre><h2 id=\"26-event\"><a href=\"#26-event\" class=\"headerlink\" title=\"26.event\"></a>26.event</h2><p>nodenode<strong></strong></p><blockquote><p>SubjectObserver</p></blockquote><pre><code> function EventEmitter() {\n   this.events = new Map();\n }\n\n // \n // addListenerremoveListeneronceremoveAllListenersemit\n\n // addlistener\n const wrapCallback = (fn, once = false) =&gt; ({ callback: fn, once });\n EventEmitter.prototype.addListener = function(type, fn, once = false) {\n   const hanlder = this.events.get(type);\n   if (!hanlder) {\n     // type\n     this.events.set(type, wrapCallback(fn, once));\n   } else if (hanlder &amp;&amp; typeof hanlder.callback === &#39;function&#39;) {\n     // type\n     this.events.set(type, [hanlder, wrapCallback(fn, once)]);\n   } else {\n     // type&gt;=2\n     hanlder.push(wrapCallback(fn, once));\n   }\n }\n // removeListener\n EventEmitter.prototype.removeListener = function(type, listener) {\n   const hanlder = this.events.get(type);\n   if (!hanlder) return;\n   if (!Array.isArray(this.events)) {\n     if (hanlder.callback === listener.callback) this.events.delete(type);\n     else return;\n   }\n   for (let i = 0; i &lt; hanlder.length; i++) {\n     const item = hanlder[i];\n     if (item.callback === listener.callback) {\n       hanlder.splice(i, 1);\n       i--;\n       if (hanlder.length === 1) {\n         this.events.set(type, hanlder[0]);\n       }\n     }\n   }\n }\n // once\n EventEmitter.prototype.once = function(type, listener) {\n   this.addListener(type, listener, true);\n }\n // emit\n EventEmitter.prototype.emit = function(type, ...args) {\n   const hanlder = this.events.get(type);\n   if (!hanlder) return;\n   if (Array.isArray(hanlder)) {\n     hanlder.forEach(item =&gt; {\n       item.callback.apply(this, args);\n       if (item.once) {\n         this.removeListener(type, item);\n       }\n     })\n   } else {\n     hanlder.callback.apply(this, args);\n     if (hanlder.once) {\n       this.events.delete(type);\n     }\n   }\n   return true;\n }\n EventEmitter.prototype.removeAllListeners = function(type) {\n   const hanlder = this.events.get(type);\n   if (!hanlder) return;\n   this.events.delete(type);\n }\n \n</code></pre><h2 id=\"27-\"><a href=\"#27-\" class=\"headerlink\" title=\"27.\"></a>27.</h2><p>img<code>data-src=&#39;default.png&#39;</code><strong>src</strong></p><pre><code> function lazyload() {\n   const imgs = document.getElementsByTagName(&#39;img&#39;);\n   const len = imgs.length;\n   // \n   const viewHeight = document.documentElement.clientHeight;\n   // \n   const scrollHeight = document.documentElement.scrollTop || document.body.scrollTop;\n   for (let i = 0; i &lt; len; i++) {\n     const offsetHeight = imgs[i].offsetTop;\n     if (offsetHeight &lt; viewHeight + scrollHeight) {\n       const src = imgs[i].dataset.src;\n       imgs[i].src = src;\n     }\n   }\n }\n\n // \n window.addEventListener(&#39;scroll&#39;, lazyload);\n \n</code></pre><h2 id=\"28-\"><a href=\"#28-\" class=\"headerlink\" title=\"28.\"></a>28.</h2><p><strong>clientHeight</strong><strong>scrollTop</strong><strong>scrollHeight</strong></p><pre><code> window.addEventListener(&#39;scroll&#39;, function() {\n   const clientHeight = document.documentElement.clientHeight;\n   const scrollTop = document.documentElement.scrollTop;\n   const scrollHeight = document.documentElement.scrollHeight;\n   if (clientHeight + scrollTop &gt;= scrollHeight) {\n     // \n     // ...\n   }\n }, false);\n \n</code></pre><p>Demo<a href=\"https://github.com/SherrybabyOne/Demos/blob/master/Interview/JavaScript/%E6%BB%9A%E5%8A%A8%E5%8A%A0%E8%BD%BD.html\" target=\"_blank\" rel=\"noopener\">Demo</a></p><h2 id=\"29-\"><a href=\"#29-\" class=\"headerlink\" title=\"29.\"></a>29.</h2><p><strong>createDocumentFragment</strong><strong>requestAnimationFrame</strong></p><pre><code> setTimeout(() =&gt; {\n   // \n   const total = 100000;\n   // \n   const once = 20;\n   // \n   const loopCount = Math.ceil(total / once);\n   let countOfRender = 0;\n   const ul = document.querySelector(&#39;ul&#39;);\n   // \n   function add() {\n     const fragment = document.createDocumentFragment();\n     for(let i = 0; i &lt; once; i++) {\n       const li = document.createElement(&#39;li&#39;);\n       li.innerText = Math.floor(Math.random() * total);\n       fragment.appendChild(li);\n     }\n     ul.appendChild(fragment);\n     countOfRender += 1;\n     loop();\n   }\n   function loop() {\n     if(countOfRender &lt; loopCount) {\n       window.requestAnimationFrame(add);\n     }\n   }\n   loop();\n }, 0)\n \n</code></pre><h2 id=\"30-HTML\"><a href=\"#30-HTML\" class=\"headerlink\" title=\"30.HTML\"></a>30.HTML</h2><p></p><pre><code> const fn = () =&gt; {\n   return [...new Set([...document.querySelectorAll(&#39;*&#39;)].map(el =&gt; el.tagName))].length;\n }\n \n</code></pre><p>DOM<strong></strong></p><h2 id=\"31-VirtualDomDOM\"><a href=\"#31-VirtualDomDOM\" class=\"headerlink\" title=\"31.VirtualDomDOM\"></a>31.VirtualDomDOM</h2><p>SPA</p><pre><code> // vnode\n // {\n //   tag,\n //   attrs,\n //   children,\n // }\n\n //Virtual DOM =&gt; DOM\n function render(vnode, container) {\n   container.appendChild(_render(vnode));\n }\n function _render(vnode) {\n   // \n   if (typeof vnode === &#39;number&#39;) {\n     vnode = String(vnode);\n   }\n   // \n   if (typeof vnode === &#39;string&#39;) {\n     return document.createTextNode(vnode);\n   }\n   // DOM\n   const dom = document.createElement(vnode.tag);\n   if (vnode.attrs) {\n     // \n     Object.keys(vnode.attrs).forEach(key =&gt; {\n       const value = vnode.attrs[key];\n       dom.setAttribute(key, value);\n     })\n   }\n   // \n   vnode.children.forEach(child =&gt; render(child, dom));\n   return dom;\n }\n \n</code></pre><h2 id=\"32-\"><a href=\"#32-\" class=\"headerlink\" title=\"32.\"></a>32.</h2><pre><code> var a = {\n     b: 123,\n     c: &#39;456&#39;,\n     e: &#39;789&#39;,\n }\n var str=`a{a.b}aa{a.c}aa {a.d}aaaa`;\n // =&gt; &#39;a123aa456aa {a.d}aaaa&#39;\n \n</code></pre><p>str<code>{}</code><code>{a.d}</code></p><p></p><pre><code> const fn1 = (str, obj) =&gt; {\n     let res = &#39;&#39;;\n     // {\n     let flag = false;\n     let start;\n     for (let i = 0; i &lt; str.length; i++) {\n         if (str[i] === &#39;{&#39;) {\n             flag = true;\n             start = i + 1;\n             continue;\n         }\n         if (!flag) res += str[i];\n         else {\n             if (str[i] === &#39;}&#39;) {\n                 flag = false;\n                 res += match(str.slice(start, i), obj);\n             }\n         }\n     }\n     return res;\n }\n // \n const match = (str, obj) =&gt; {\n     const keys = str.split(&#39;.&#39;).slice(1);\n     let index = 0;\n     let o = obj;\n     while (index &lt; keys.length) {\n         const key = keys[index];\n         if (!o[key]) {\n             return `{${str}}`;\n         } else {\n             o = o[key];\n         }\n         index++;\n     }\n     return o;\n }\n</code></pre>"}],"PostAsset":[{"_id":"source/_posts/2020-07-17-Electronsmb/article_header.png","slug":"article_header.png","post":"ckcplatj40000hl953xrb6hxo","modified":0,"renderable":0},{"_id":"source/_posts/2020-07-17-Electronsmb/smb_node.jpg","slug":"smb_node.jpg","post":"ckcplatj40000hl953xrb6hxo","modified":0,"renderable":0},{"_id":"source/_posts/2020-07-17-Electronsmb/smb_node_conf.jpg","slug":"smb_node_conf.jpg","post":"ckcplatj40000hl953xrb6hxo","modified":0,"renderable":0},{"_id":"source/_posts/2020-07-17-Electronsmb/smb_login.jpg","slug":"smb_login.jpg","post":"ckcplatj40000hl953xrb6hxo","modified":0,"renderable":0},{"_id":"source/_posts/2020-07-17-Electronsmb/smb_share.jpg","slug":"smb_share.jpg","post":"ckcplatj40000hl953xrb6hxo","modified":0,"renderable":0},{"_id":"source/_posts/2020-07-17-Electronsmb/smb_share_mount.jpg","slug":"smb_share_mount.jpg","post":"ckcplatj40000hl953xrb6hxo","modified":0,"renderable":0},{"_id":"source/_posts/2020-07-17-Electronsmb/smb_upload_now.jpg","slug":"smb_upload_now.jpg","post":"ckcplatj40000hl953xrb6hxo","modified":0,"renderable":0},{"_id":"source/_posts/2020-07-17-Electronsmb/smb_upload_record.jpg","slug":"smb_upload_record.jpg","post":"ckcplatj40000hl953xrb6hxo","modified":0,"renderable":0},{"_id":"source/_posts/2020-07-17-Electronsmb/electron-lang.png","slug":"electron-lang.png","post":"ckcplatj40000hl953xrb6hxo","modified":0,"renderable":0},{"_id":"source/_posts/2020-07-17-Electronsmb/shards_upload.jpg","slug":"shards_upload.jpg","post":"ckcplatj40000hl953xrb6hxo","modified":0,"renderable":0},{"_id":"source/_posts/2020-08-16-Electronsmb/article_header.png","slug":"article_header.png","post":"ckdwgo7fi0000in951ov5fot3","modified":0,"renderable":0},{"_id":"source/_posts/2020-08-16-Electronsmb/smb_upload_now.jpg","slug":"smb_upload_now.jpg","post":"ckdwgo7fi0000in951ov5fot3","modified":0,"renderable":0},{"_id":"source/_posts/2020-08-16-Electronsmb/electron1.png","slug":"electron1.png","post":"ckdwgo7fi0000in951ov5fot3","modified":0,"renderable":0},{"_id":"source/_posts/2020-08-16-Electronsmb/shards_upload.jpg","slug":"shards_upload.jpg","post":"ckdwgo7fi0000in951ov5fot3","modified":0,"renderable":0},{"_id":"source/_posts/2020-08-16-Electronsmb/upload_performance.jpg","slug":"upload_performance.jpg","post":"ckdwgo7fi0000in951ov5fot3","modified":0,"renderable":0},{"_id":"source/_posts/2020-08-16-Electronsmb/upload_memory.jpg","slug":"upload_memory.jpg","post":"ckdwgo7fi0000in951ov5fot3","modified":0,"renderable":0},{"_id":"source/_posts/2020-08-16-Electronsmb/chromium.jpg","slug":"chromium.jpg","post":"ckdwgo7fi0000in951ov5fot3","modified":0,"renderable":0},{"_id":"source/_posts/2020-08-16-Electronsmb/inspect.jpg","slug":"inspect.jpg","post":"ckdwgo7fi0000in951ov5fot3","modified":0,"renderable":0},{"_id":"source/_posts/2020-08-16-Electronsmb/refreshTasks.jpg","slug":"refreshTasks.jpg","post":"ckdwgo7fi0000in951ov5fot3","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-26-s3Javascript/upload.png","slug":"upload.png","post":"ck884wxri0008in95d9qq70a9","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-26-s3Javascript/node_pipe.png","slug":"node_pipe.png","post":"ck884wxri0008in95d9qq70a9","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-07-s3Javascript/upload.png","slug":"upload.png","post":"ck7gzonts000din956kae6kby","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-07-s3Javascript/shards_upload.jpg","slug":"shards_upload.jpg","post":"ck7gzonts000din956kae6kby","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-26-s3Javascript/article_header.png","slug":"article_header.png","post":"ck884wxri0008in95d9qq70a9","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-07-s3Javascript/article_header.png","slug":"article_header.png","post":"ck7gzonts000din956kae6kby","modified":0,"renderable":0},{"_id":"source/_posts/2018-11-05-Javascript/article_header.png","slug":"article_header.png","post":"cjo3ovo01000iin952qhq2jev","modified":0,"renderable":0},{"_id":"source/_posts/2018-11-05-Javascript/animation.gif","slug":"animation.gif","post":"cjo3ovo01000iin952qhq2jev","modified":0,"renderable":0},{"_id":"source/_posts/2019-09-29-y7000ubuntu18-04/article_header.png","slug":"article_header.png","post":"ck14ddfo8000nin950ll9hpz8","modified":0,"renderable":0},{"_id":"source/_posts/2019-09-29-y7000ubuntu18-04/Desktop3.png","slug":"Desktop3.png","post":"ck14ddfo8000nin950ll9hpz8","modified":0,"renderable":0},{"_id":"source/_posts/2019-09-29-y7000ubuntu18-04/Desktop2.png","slug":"Desktop2.png","post":"ck14ddfo8000nin950ll9hpz8","modified":0,"renderable":0},{"_id":"source/_posts/2019-09-29-y7000ubuntu18-04/Desktop.png","slug":"Desktop.png","post":"ck14ddfo8000nin950ll9hpz8","modified":0,"renderable":0},{"_id":"source/_posts/2020-04-16-/article_header.png","slug":"article_header.png","post":"ck925kubj000qin955sii4stm","modified":0,"renderable":0},{"_id":"source/_posts/2020-04-16-/dev-tools.png","slug":"dev-tools.png","post":"ck925kubj000qin955sii4stm","modified":0,"renderable":0},{"_id":"source/_posts/2020-04-16-/dev-tools-storage.png","slug":"dev-tools-storage.png","post":"ck925kubj000qin955sii4stm","modified":0,"renderable":0},{"_id":"source/_posts/2020-04-16-/dev-tools-storage2.png","slug":"dev-tools-storage2.png","post":"ck925kubj000qin955sii4stm","modified":0,"renderable":0},{"_id":"source/_posts/2020-04-16-/dev-tools-debug.png","slug":"dev-tools-debug.png","post":"ck925kubj000qin955sii4stm","modified":0,"renderable":0},{"_id":"source/_posts/2018-10-31-ES5ES6Promise/article_header.png","slug":"article_header.png","post":"cjnwjzli5000uin95f2uubsvh","modified":0,"renderable":0},{"_id":"source/_posts/2018-10-31-ES5ES6Promise/lifeIsStrange.jpg","slug":"lifeIsStrange.jpg","post":"cjnwjzli5000uin95f2uubsvh","modified":0,"renderable":0},{"_id":"source/_posts/2018-11-06-Javascripttootips/article_header.png","slug":"article_header.png","post":"cjo54o8v5000yin951s3wcnsi","modified":0,"renderable":0},{"_id":"source/_posts/2018-11-06-Javascripttootips/tootips.gif","slug":"tootips.gif","post":"cjo54o8v5000yin951s3wcnsi","modified":0,"renderable":0},{"_id":"source/_posts/2019-11-14-DockerTimWechat/article_header.png","slug":"article_header.png","post":"ck2y43adm0014in9532pi4wb9","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-22-echarts-/snapshot.png","slug":"snapshot.png","post":"ck82fwgbx0019in95feys3v11","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-22-echarts-/article_header.png","slug":"article_header.png","post":"ck82fwgbx0019in95feys3v11","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-22-echarts-/snapshot_select.png","slug":"snapshot_select.png","post":"ck82fwgbx0019in95feys3v11","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-22-echarts-/tree-1.png","slug":"tree-1.png","post":"ck82fwgbx0019in95feys3v11","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-22-echarts-/tree-2.png","slug":"tree-2.png","post":"ck82fwgbx0019in95feys3v11","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-22-echarts-/tree-3.png","slug":"tree-3.png","post":"ck82fwgbx0019in95feys3v11","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-22-echarts-/tree-4.png","slug":"tree-4.png","post":"ck82fwgbx0019in95feys3v11","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-22-echarts-/tree-5.png","slug":"tree-5.png","post":"ck82fwgbx0019in95feys3v11","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-22-echarts-/tree-6.png","slug":"tree-6.png","post":"ck82fwgbx0019in95feys3v11","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-22-echarts-/tree-bug1.gif","slug":"tree-bug1.gif","post":"ck82fwgbx0019in95feys3v11","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-22-echarts-/tree-bug2.gif","slug":"tree-bug2.gif","post":"ck82fwgbx0019in95feys3v11","modified":0,"renderable":0},{"_id":"source/_posts/2020-03-22-echarts-/tree-bug-fix.gif","slug":"tree-bug-fix.gif","post":"ck82fwgbx0019in95feys3v11","modified":0,"renderable":0},{"_id":"source/_posts/2019-10-26-Electron-Mobx-React/article_header.png","slug":"article_header.png","post":"ck26yz0dk001din95e2sx3kqi","modified":0,"renderable":0},{"_id":"source/_posts/2019-10-26-Electron-Mobx-React/Fly.jpg","slug":"Fly.jpg","post":"ck26yz0dk001din95e2sx3kqi","modified":0,"renderable":0},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/article_header.png","slug":"article_header.png","post":"ck1ptq33g001jin9522fagdn7","modified":0,"renderable":0},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/Fly.jpg","slug":"Fly.jpg","post":"ck1ptq33g001jin9522fagdn7","modified":0,"renderable":0},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx1.png","slug":"mobx1.png","post":"ck1ptq33g001jin9522fagdn7","modified":0,"renderable":0},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx2.png","slug":"mobx2.png","post":"ck1ptq33g001jin9522fagdn7","modified":0,"renderable":0},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx3.png","slug":"mobx3.png","post":"ck1ptq33g001jin9522fagdn7","modified":0,"renderable":0},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx4.png","slug":"mobx4.png","post":"ck1ptq33g001jin9522fagdn7","modified":0,"renderable":0},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx5.png","slug":"mobx5.png","post":"ck1ptq33g001jin9522fagdn7","modified":0,"renderable":0},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx6.png","slug":"mobx6.png","post":"ck1ptq33g001jin9522fagdn7","modified":0,"renderable":0},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx7.png","slug":"mobx7.png","post":"ck1ptq33g001jin9522fagdn7","modified":0,"renderable":0},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx8.png","slug":"mobx8.png","post":"ck1ptq33g001jin9522fagdn7","modified":0,"renderable":0},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx9.png","slug":"mobx9.png","post":"ck1ptq33g001jin9522fagdn7","modified":0,"renderable":0},{"_id":"source/_posts/2019-10-14-Electron-Mobx-React/mobx10.png","slug":"mobx10.png","post":"ck1ptq33g001jin9522fagdn7","modified":0,"renderable":0},{"_id":"source/_posts/2019-04-04-LinuxMint18/article_header.png","slug":"article_header.png","post":"cju222mq6001vin95dx6p94q2","modified":0,"renderable":0},{"_id":"source/_posts/2019-04-04-LinuxMint18/city.jpg","slug":"city.jpg","post":"cju222mq6001vin95dx6p94q2","modified":0,"renderable":0},{"_id":"source/_posts/2019-04-04-proxychains/article_header.png","slug":"article_header.png","post":"cju228q6m0022in95b47b8p0r","modified":0,"renderable":0},{"_id":"source/_posts/2017-10-21-sass/article_header.png","slug":"article_header.png","post":"cj90qviyo0026in955z8khjr5","modified":0,"renderable":0},{"_id":"source/_posts/2019-10-01-poliposhadowsocks/article_header.png","slug":"article_header.png","post":"ck179i6rs002ain95cva79y0b","modified":0,"renderable":0},{"_id":"source/_posts/2018-07-09-Js/article_header.png","slug":"article_header.png","post":"cjjdotx2h002ein95fi3b8zsx","modified":0,"renderable":0},{"_id":"source/_posts/2018-07-09-Js/waterfall-1.gif","slug":"waterfall-1.gif","post":"cjjdotx2h002ein95fi3b8zsx","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/article_header.png","slug":"article_header.png","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-1.jpg","slug":"Ubuntu18.04-1.jpg","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-10.png","slug":"Ubuntu18.04-10.png","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-11.png","slug":"Ubuntu18.04-11.png","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-12.png","slug":"Ubuntu18.04-12.png","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-13.png","slug":"Ubuntu18.04-13.png","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-14.png","slug":"Ubuntu18.04-14.png","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-2.png","slug":"Ubuntu18.04-2.png","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-3.png","slug":"Ubuntu18.04-3.png","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-5.png","slug":"Ubuntu18.04-5.png","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-6.png","slug":"Ubuntu18.04-6.png","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-7.png","slug":"Ubuntu18.04-7.png","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-8.png","slug":"Ubuntu18.04-8.png","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/Ubuntu18.04-9.png","slug":"Ubuntu18.04-9.png","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/smb_dir.jpg","slug":"smb_dir.jpg","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/smb_node.jpg","slug":"smb_node.jpg","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/smb_node_conf.jpg","slug":"smb_node_conf.jpg","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/smb_shutdown.jpg","slug":"smb_shutdown.jpg","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/waterfall-2.jpg","slug":"waterfall-2.jpg","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2019-06-12-Ubuntu18/waterfall-3.jpg","slug":"waterfall-3.jpg","post":"cjwsnsgtf002kin9505eb060b","modified":0,"renderable":0},{"_id":"source/_posts/2020-08-28-Antd/article_header.png","slug":"article_header.png","post":"ckee5ptx70000q595gus658so","modified":0,"renderable":0},{"_id":"source/_posts/2020-08-28-Antd/editable_tree.png","slug":"editable_tree.png","post":"ckee5ptx70000q595gus658so","modified":0,"renderable":0},{"_id":"source/_posts/2020-08-28-Antd/tree_add_sister.png","slug":"tree_add_sister.png","post":"ckee5ptx70000q595gus658so","modified":0,"renderable":0},{"_id":"source/_posts/2020-08-28-Antd/tree_add_sub.png","slug":"tree_add_sub.png","post":"ckee5ptx70000q595gus658so","modified":0,"renderable":0},{"_id":"source/_posts/2020-08-28-Antd/tree_in_edit.png","slug":"tree_in_edit.png","post":"ckee5ptx70000q595gus658so","modified":0,"renderable":0},{"_id":"source/_posts/2018-11-06-Javascripttootips/tootip.png","slug":"tootip.png","post":"cjo54o8v5000yin951s3wcnsi","modified":1,"renderable":0}],"PostCategory":[{"post_id":"ckcplatj40000hl953xrb6hxo","category_id":"ckbag3lga000cct953dkafzl4","_id":"ckcplatjj0002hl952duk4uts"},{"post_id":"ckdwgo7fi0000in951ov5fot3","category_id":"ckbag3lga000cct953dkafzl4","_id":"ckdwgophm0003in95bd869ogp"},{"post_id":"ck884wxri0008in95d9qq70a9","category_id":"ckbag369m0000ct953vhx5d2d","_id":"ck884x7z5000bin950ain27wm"},{"post_id":"ck884wxri0008in95d9qq70a9","category_id":"ckbag369o0001ct95elga18d7","_id":"ck884x7z5000cin95hbryfqsj"},{"post_id":"cjo3ovo01000iin952qhq2jev","category_id":"ckbag369m0000ct953vhx5d2d","_id":"cjo3owrja000min95e8gr42nq"},{"post_id":"ck14ddfo8000nin950ll9hpz8","category_id":"ckbag3lfz0005ct955kov8vwh","_id":"ck14ddtmg000pin956vi83omb"},{"post_id":"ck925kubj000qin955sii4stm","category_id":"ckbag3lg70009ct950m4cdmtz","_id":"ck925mepa000tin95g84b1vfl"},{"post_id":"cjnwjzli5000uin95f2uubsvh","category_id":"ckbag369m0000ct953vhx5d2d","_id":"cjnwk04ur000xin95dwze1ita"},{"post_id":"cjo54o8v5000yin951s3wcnsi","category_id":"ckbag369m0000ct953vhx5d2d","_id":"ckec7dyt70012in95a81nei23"},{"post_id":"ck2y43adm0014in9532pi4wb9","category_id":"ckbag3lfz0005ct955kov8vwh","_id":"ck2y43qbk0017in9546h2hiop"},{"post_id":"ck82fwgbx0019in95feys3v11","category_id":"ckbag3lgp000mct959740913n","_id":"ck82g0mvr001cin956n1rd7qp"},{"post_id":"ck26yz0dk001din95e2sx3kqi","category_id":"ckbag3lga000cct953dkafzl4","_id":"ck26yzluz001gin950pc5h2kl"},{"post_id":"ck1ptq33g001jin9522fagdn7","category_id":"ckbag3lgm000jct95b66dee2o","_id":"ck1ptqd78001min95c6ivda3i"},{"post_id":"ck1ptq33g001jin9522fagdn7","category_id":"ckbag3lgq000oct959y2h7p3l","_id":"ck1ptqd78001oin95fo3e5dm7"},{"post_id":"cju222mq6001vin95dx6p94q2","category_id":"ckbag3lfz0005ct955kov8vwh","_id":"ckeasqg1i0021in95b2aqhhsy"},{"post_id":"cju228q6m0022in95b47b8p0r","category_id":"ckbag3lfz0005ct955kov8vwh","_id":"cju228x240025in9528yyf6qa"},{"post_id":"cj90qviyo0026in955z8khjr5","category_id":"ckbag3lg30007ct95eh3afdzg","_id":"cj90qvv7v0029in951m5h3i7c"},{"post_id":"ck179i6rs002ain95cva79y0b","category_id":"ckbag3lfz0005ct955kov8vwh","_id":"ck179iqfk002din95fnc24ykz"},{"post_id":"cjjdotx2h002ein95fi3b8zsx","category_id":"ckbag369m0000ct953vhx5d2d","_id":"cjjdou2s7002gin953l5xb5m3"},{"post_id":"cjwsnsgtf002kin9505eb060b","category_id":"ckbag3lfz0005ct955kov8vwh","_id":"cjwsnsly9002min953qvc9wrl"},{"post_id":"ck7gzonts000din956kae6kby","category_id":"ckbag369m0000ct953vhx5d2d","_id":"cjwsny7jf00022a95ddg37axv"},{"post_id":"ckee5ptx70000q595gus658so","category_id":"ckee5ptxb0001q595dvkeb3gs","_id":"ckee7u5xy0006ve9597z58ssw"},{"post_id":"ckee5ptx70000q595gus658so","category_id":"ckee5ptxg0004q59578139quh","_id":"ckee7u5xy0007ve953r5k6skt"},{"post_id":"ckfhotf380000jy957edi6pxb","category_id":"ckfhotf3d0001jy953fgj1gtp","_id":"ckfhotf3l0004jy9500z00c7a"}],"PostTag":[{"post_id":"ckcplatj40000hl953xrb6hxo","tag_id":"cke0ydean0002l3953fzu9tr2","_id":"ckcplatjf0001hl95f3de95r1"},{"post_id":"ckdwgo7fi0000in951ov5fot3","tag_id":"ckdwnlx1f000m0gi0gme9hwi6","_id":"ckdwgophl0001in957vd71ncm"},{"post_id":"ckdwgo7fi0000in951ov5fot3","tag_id":"cke0ydean0002l3953fzu9tr2","_id":"ckdwgophm0002in95a3eq3k6z"},{"post_id":"ck884wxri0008in95d9qq70a9","tag_id":"ckdwnlx1f000m0gi0gme9hwi6","_id":"ck884x7z50009in95euathrsg"},{"post_id":"ck884wxri0008in95d9qq70a9","tag_id":"cke2c8f44001ldn9591wr2p8s","_id":"ck884x7z5000ain959hebay1z"},{"post_id":"cjo3ovo01000iin952qhq2jev","tag_id":"cke2c8f44001odn952rlj92n5","_id":"cjo3owrja000lin95gg7z9lv0"},{"post_id":"ck14ddfo8000nin950ll9hpz8","tag_id":"cke2c8f3x000mdn95d23pal1g","_id":"ck14ddtmg000oin95dj8ha6l4"},{"post_id":"ck925kubj000qin955sii4stm","tag_id":"cke2c8f42001bdn95g2w5cq9w","_id":"ck925mepa000rin95bf9hbyss"},{"post_id":"ck925kubj000qin955sii4stm","tag_id":"cke2c8f42001edn956uulg75c","_id":"ck925mepa000sin95009g084i"},{"post_id":"cjnwjzli5000uin95f2uubsvh","tag_id":"cke2c8f42001adn957vzefj6j","_id":"cjnwk04ur000vin950ope0lqa"},{"post_id":"cjnwjzli5000uin95f2uubsvh","tag_id":"cke2c8f3h0003dn95b9qabaeg","_id":"cjnwk04ur000win95aq3a43bn"},{"post_id":"cjo54o8v5000yin951s3wcnsi","tag_id":"cke2c8f410017dn956q4hhawc","_id":"ckec7dyt70011in953h8w5tli"},{"post_id":"ck2y43adm0014in9532pi4wb9","tag_id":"cke2c8f350000dn95bf7ce47s","_id":"ck2y43qbk0015in9521yl0hbt"},{"post_id":"ck2y43adm0014in9532pi4wb9","tag_id":"cke2c8f3c0001dn95501baad4","_id":"ck2y43qbk0016in956v2cauit"},{"post_id":"ck2y43adm0014in9532pi4wb9","tag_id":"cke2c8f3e0002dn955mgk4db0","_id":"ck2y43qbk0018in95h3lwelht"},{"post_id":"ck82fwgbx0019in95feys3v11","tag_id":"cke2c8f3y000odn95b6lt7v3l","_id":"ck82g0mvr001ain9548068l1a"},{"post_id":"ck82fwgbx0019in95feys3v11","tag_id":"cke2c8f3l0006dn9571rrfetk","_id":"ck82g0mvr001bin95fjctdtpx"},{"post_id":"ck26yz0dk001din95e2sx3kqi","tag_id":"cke2c8f3h0003dn95b9qabaeg","_id":"ck26yzluz001ein95gcsie5rd"},{"post_id":"ck26yz0dk001din95e2sx3kqi","tag_id":"cke2c8f3l0006dn9571rrfetk","_id":"ck26yzluz001fin9580558v42"},{"post_id":"ck26yz0dk001din95e2sx3kqi","tag_id":"cke2c8f3n0008dn952ebwb4oj","_id":"ck26yzluz001hin958003gwlp"},{"post_id":"ck26yz0dk001din95e2sx3kqi","tag_id":"cke2c8f3p000bdn956dnk2acy","_id":"ck26yzluz001iin9598g5gtuq"},{"post_id":"ck1ptq33g001jin9522fagdn7","tag_id":"cke2c8f3h0003dn95b9qabaeg","_id":"ck1ptqd78001kin95c33f6bu6"},{"post_id":"ck1ptq33g001jin9522fagdn7","tag_id":"cke2c8f3l0006dn9571rrfetk","_id":"ck1ptqd78001lin95ag9t31fw"},{"post_id":"ck1ptq33g001jin9522fagdn7","tag_id":"cke2c8f3n0008dn952ebwb4oj","_id":"ck1ptqd78001nin95g2tv3e6b"},{"post_id":"ck1ptq33g001jin9522fagdn7","tag_id":"cke2c8f3p000bdn956dnk2acy","_id":"ck1ptqd79001pin95ewwxbr4q"},{"post_id":"cju222mq6001vin95dx6p94q2","tag_id":"cke2c8f350000dn95bf7ce47s","_id":"ckeasqg1i001zin959ysbb0mb"},{"post_id":"cju222mq6001vin95dx6p94q2","tag_id":"cke2c8f3y000udn95fva7bbfm","_id":"ckeasqg1i0020in95hzpeenzc"},{"post_id":"cju228q6m0022in95b47b8p0r","tag_id":"cke2c8f40000ydn9503lycrzl","_id":"cju228x240023in95h1yrdpr2"},{"post_id":"cju228q6m0022in95b47b8p0r","tag_id":"cke2c8f400011dn95a3s5gv4v","_id":"cju228x240024in9590m869as"},{"post_id":"cj90qviyo0026in955z8khjr5","tag_id":"cke2c8f3z000vdn9565v8082c","_id":"cj90qvv7u0027in950x518657"},{"post_id":"cj90qviyo0026in955z8khjr5","tag_id":"cke2c8f3z000wdn95co4v4kys","_id":"cj90qvv7v0028in95du0p8hbc"},{"post_id":"ck179i6rs002ain95cva79y0b","tag_id":"cke2c8f400011dn95a3s5gv4v","_id":"ck179iqfk002bin959t5mfwih"},{"post_id":"ck179i6rs002ain95cva79y0b","tag_id":"cke2c8f40000ydn9503lycrzl","_id":"ck179iqfk002cin956xw4dc6v"},{"post_id":"cjjdotx2h002ein95fi3b8zsx","tag_id":"cke2c8f410017dn956q4hhawc","_id":"cjjdou2s7002fin95hfk071d4"},{"post_id":"cjwsnsgtf002kin9505eb060b","tag_id":"cke2c8f3x000mdn95d23pal1g","_id":"cjwsnsly9002lin95ewg891rv"},{"post_id":"ck7gzonts000din956kae6kby","tag_id":"ckdwnlx1f000m0gi0gme9hwi6","_id":"cjwsny7je00002a95b0mjavsn"},{"post_id":"ck7gzonts000din956kae6kby","tag_id":"cke2c8f43001gdn950vt5782e","_id":"cjwsny7jf00012a958huy1n5y"},{"post_id":"ck7gzonts000din956kae6kby","tag_id":"cke2c8f43001jdn950f6lbscy","_id":"cjwsny7jf00032a952pch8k9c"},{"post_id":"ckee5ptx70000q595gus658so","tag_id":"ckee5ptxg0002q595cbrg0bkc","_id":"ckee7u5xx0004ve95gbkxgjoe"},{"post_id":"ckee5ptx70000q595gus658so","tag_id":"ckee5ptxg0003q5955sqx7nvn","_id":"ckee7u5xy0005ve95afz1gz1m"},{"post_id":"ckfhotf380000jy957edi6pxb","tag_id":"ckfhotf3k0002jy953nj99dia","_id":"ckfhotf3k0003jy954lkgh7gq"}],"Tag":[{"name":"hexo-theme-snail","_id":"ckba5wfo60005sz95294r4f8d"},{"name":"FileUpload","_id":"ckba8cy9g000254957ez6dmlr"},{"name":"AWS","_id":"ckba8cy9i000554956muk3hyl"},{"name":"S3","_id":"ckba8cy9i00065495epzzf9dg"},{"name":"Node","_id":"ckba8cy9j000a5495g9amd9dg"},{"name":"FS","_id":"ckba8cy9k000c54958rxpfdcl"},{"name":"Animation","_id":"ckba8cy9k000d54956nv2a6o8"},{"name":"Linux","_id":"ckba8cy9l000g54952xw4fr97"},{"name":"Ubuntu18.04","_id":"ckba8cy9l000j5495baesedxg"},{"name":"Docker","_id":"ckba8cy9t000o54959c876oqn"},{"name":"ES6","_id":"ckba8cy9w000s54958351c23y"},{"name":"React","_id":"ckba8cya1000x54952p0g4o7p"},{"name":"Mobx","_id":"ckba8cya300125495g1li87v3"},{"name":"Electron","_id":"ckba8cya50015549523g66uyd"},{"name":"Echarts","_id":"ckba8cya9001g54959kakf211"},{"name":"Mint","_id":"ckba8cyaa001m5495aqaib0l4"},{"name":"Proxy","_id":"ckba8cyab001p54954ow03t1u"},{"name":"Shadowsocks","_id":"ckba8cyab001s5495cfhbd8zv"},{"name":"Sass","_id":"ckba8cyac001t54953jjmh6dx"},{"name":"Css","_id":"ckba8cyac001w54951m350h8o"},{"name":"Javascript","_id":"ckba8cyad002154959k436vr1"},{"name":"WaterFall","_id":"ckba8cyad002454954wwn2q73"},{"name":"Promise","_id":"ckba8cyae00255495guvk6r9l"},{"name":"Browser","_id":"ckba8cyae002854952w82amfc"},{"name":"Tools","_id":"ckba8cyaf002b5495eufj6ut4"},{"name":"ES5","_id":"ckba8cyaf002f54954hsw4p0e"},{"name":"SMB","_id":"ckc5wvhhf00025a953skj65hj"},{"name":"SMB upload","_id":"ckdwnls28000k0gi0ao4j3ugb"},{"name":"upload","_id":"ckdwnlx1f000m0gi0gme9hwi6"},{"name":"upload smb","_id":"cke0yd7af0000l3958f8behmg"},{"name":"smb","_id":"cke0ydean0002l3953fzu9tr2"},{"name":"linux","_id":"cke2c8f350000dn95bf7ce47s"},{"name":"docker","_id":"cke2c8f3c0001dn95501baad4"},{"name":"desktop","_id":"cke2c8f3e0002dn955mgk4db0"},{"name":"es6","_id":"cke2c8f3h0003dn95b9qabaeg"},{"name":"react","_id":"cke2c8f3l0006dn9571rrfetk"},{"name":"mobx","_id":"cke2c8f3n0008dn952ebwb4oj"},{"name":"electron","_id":"cke2c8f3p000bdn956dnk2acy"},{"name":"bobx","_id":"cke2c8f3w000jdn95dgpsbuij"},{"name":"ubuntu18.04","_id":"cke2c8f3x000mdn95d23pal1g"},{"name":"echarts","_id":"cke2c8f3y000odn95b6lt7v3l"},{"name":"mint","_id":"cke2c8f3y000udn95fva7bbfm"},{"name":"sass","_id":"cke2c8f3z000vdn9565v8082c"},{"name":"css","_id":"cke2c8f3z000wdn95co4v4kys"},{"name":"proxy","_id":"cke2c8f40000ydn9503lycrzl"},{"name":"shadowsocks","_id":"cke2c8f400011dn95a3s5gv4v"},{"name":"javascript","_id":"cke2c8f410017dn956q4hhawc"},{"name":"promise","_id":"cke2c8f42001adn957vzefj6j"},{"name":"browser","_id":"cke2c8f42001bdn95g2w5cq9w"},{"name":"tools","_id":"cke2c8f42001edn956uulg75c"},{"name":"aws","_id":"cke2c8f43001gdn950vt5782e"},{"name":"s3","_id":"cke2c8f43001jdn950f6lbscy"},{"name":"node","_id":"cke2c8f44001ldn9591wr2p8s"},{"name":"animation","_id":"cke2c8f44001odn952rlj92n5"},{"name":"antd","_id":"ckee5ptxg0002q595cbrg0bkc"},{"name":"tree","_id":"ckee5ptxg0003q5955sqx7nvn"},{"name":"js","_id":"ckfhotf3k0002jy953nj99dia"}]}}